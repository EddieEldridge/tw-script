;######################Script Divide & Conquer AGO Sub mod by Fynn############################
;##### Faction IDs
;##### Main
;##### Season Script
;##### Cities and counters
;##### Shared
;##### Leaders
;##### Player Setup
;##### AI Setup - Settlement Expansion
;##### Script: Buildings & Settlements
;##### Script: Aragorn RPG
;##### Script: Gandalf
;##### Arnor Restoration
;##### Re-united Kingdom: ND
;##### Faction: Anduin
;##### Elven Union
;##### Scouring of the Shire
;##### Faction: Isengard
;##### Faction: Dunland
;##### Faction: Enedwaith
;##### Faction: Gundabad
;##### Faction: High Elves
;##### Faction: Lorien
;##### Script: ND Beacon of Hope
;##### Script: Rhun Dragon Relic
;##### Script: Reclaiming Dwarven Relics
;##### Script: Dwarven Grudges
;##### Script: Théoden
;##### Script: Denethor
;##### Script: Barrow Downs
;##### Script: Dorwinion Choice
;##### Script: Bree Choice
;##### Script: Ered Luin Ring Choice
;##### Script: Unite the Clans - Rhun
;##### Script: Unite the Clans - Harad
;##### Script: Blue Wizards
;##### Death messages of the enemy unique characters
;##### Script: Ar-Adunaim KP Bonus
;##### Script: Ar-Adunaim Enhanced Conscription
;##### Script: Glittering Caves
;##### Script: Last Stand
;##### Script: Money
;##### Script: Moria Balrog Garrison
;##### Script: Moria Reclaiming
;##### Script: Spoils of War
;##### Script: UI & Videos
;##### Script: Weakened Factions
;##### Script: One Ring Fynn
;##### Script: New Nazgûl script
;##### Script: Forsaken Inn
;##### Faction Info Button
;##### Settlement name change
;##### Dynamic Garrison Script
;##### Wait Monitors
;######################################################

script ; first line of script, must exist!
    log always --------------------------------------START PRE CAMPAIGN SCRIPT-----------------------------
    set_event_counter imladris_controlled 1
    set_event_counter mithlond_controlled 1
    set_event_counter ring_given_ai 0

    restrict_autoresolve false
	
	set_event_counter ring_found_aa 0
	set_event_counter ring_found_khand 0
	set_event_counter ring_found_harad 0
	set_event_counter ring_found_gundabad 0
	set_event_counter ring_found_rhun 0
	set_event_counter ring_found_angmar 0
	set_event_counter ring_found_dg 0
	set_event_counter ring_found_mordor 0
	set_event_counter ring_found_dunland 0
	set_event_counter ring_found_enedwaith 0
	set_event_counter ring_found_wr 0
	set_event_counter ring_found_lorien 0
	set_event_counter ring_found_he 0
	set_event_counter ring_found_kd 0
	set_event_counter ring_found_el 0
	set_event_counter ring_found_dorwinion 0
	set_event_counter ring_found_anduin 0
	set_event_counter ring_found_dale 0
	set_event_counter ring_found_bree 0
	set_event_counter ring_found_rohan 0
	set_event_counter ring_found_da 0
	set_event_counter ring_found_gondor 0
	
	set_event_counter hotseat_enabled 0
	if I_HotseatEnabled
		set_event_counter hotseat_enabled 1
	end_if

    set_event_counter disable_console 0 ; set this to 1 for hotseat campaigns with console disabled!
    set_event_counter isengard_barracks_lvl1_ready 0
    set_event_counter isengard_barracks_lvl2_ready 0
    set_event_counter isengard_barracks_lvl3_ready 0
	declare_counter dunland_cities 
	declare_counter battle_looper

    restrict_strat_radar false ; reveal full radar map
    reveal_tile 265, 448 ;burzakul
    reveal_tile 66, 433 ;thorin's halls
    reveal_tile 87, 461 ;fahamgathol
    reveal_tile 133, 385 ;Hobbiton
    reveal_tile 132, 405 ;Annuminas
    reveal_tile 159, 406 ;Fornost
    reveal_tile 207, 453 ;Carn dum
    reveal_tile 246, 384 ;Imladris
    reveal_tile 260, 393 ;Gobbo town
    reveal_tile 254, 370 ;Zagh Kala
    reveal_tile 243, 341 ;Moria
    reveal_tile 214, 331 ;Ost-in-Edhil
    reveal_tile 224, 279 ;Isengard
    reveal_tile 166, 380 ;Bree
    reveal_tile 186, 333 ;Tharbad
    reveal_tile 253, 439 ;Gundabad
    reveal_tile 285, 439 ;Dain's Halls
    reveal_tile 300, 344 ;Rhosgobel
    reveal_tile 299, 329 ;Dol Guldur
    reveal_tile 268, 327 ;Caras Galadhon
    reveal_tile 249, 249 ;Edoras
    reveal_tile 230, 260 ;Helms deep
    reveal_tile 325, 413 ;Thranduil's halls
    reveal_tile 339, 421 ;Erebor
    reveal_tile 314, 438 ;Onazanar
    reveal_tile 338, 417 ;Dale
    reveal_tile 339, 411 ;Esgaroth
    reveal_tile 400, 420 ;Kirikhgathol
    reveal_tile 346, 250 ;Morannon
    reveal_tile 341, 243 ;Durthang
    reveal_tile 339, 221 ;Minas Morgul
    reveal_tile 342, 222 ;Cirith Ungol
    reveal_tile 372, 232 ;Barad-dur
    reveal_tile 327, 229 ;Cair Andros
    reveal_tile 329, 219 ;Osgiliath
    reveal_tile 324, 217 ;Minas Tirith
    reveal_tile 270, 163 ;Gobel Tolfalas
    reveal_tile 265, 81 ;Umbar
    reveal_tile 289, 387 ;Beorn's Halls
	reveal_tile 232, 423 ;Mount Gram
	reveal_tile 240, 435 ;Litash
    reveal_tile 438, 312 ;Caras Sant/Helcarin
    reveal_tile 173, 366 ;Metraith
    hide_all_revealed_tiles

    ;reveal tiles

    declare_counter tileseen_blocked

    monitor_event GameReloaded TrueCondition
		campaign_wait 0.1
        set_counter tileseen_blocked 1
		reveal_tile 265, 448 ;burzakul
		reveal_tile 66, 433 ;thorin's halls
		reveal_tile 87, 461 ;fahamgathol
		reveal_tile 133, 385 ;Hobbiton
		reveal_tile 132, 405 ;Annuminas
		reveal_tile 159, 406 ;Fornost
		reveal_tile 207, 453 ;Carn dum
		reveal_tile 246, 384 ;Imladris
		reveal_tile 260, 393 ;Gobbo town
		reveal_tile 254, 370 ;Zagh Kala
		reveal_tile 243, 341 ;Moria
		reveal_tile 214, 331 ;Ost-in-Edhil
		reveal_tile 224, 279 ;Isengard
		reveal_tile 166, 380 ;Bree
		reveal_tile 186, 333 ;Tharbad
		reveal_tile 253, 439 ;Gundabad
		reveal_tile 285, 439 ;Dain's Halls
		reveal_tile 300, 344 ;Rhosgobel
		reveal_tile 299, 329 ;Dol Guldur
		reveal_tile 268, 327 ;Caras Galadhon
		reveal_tile 249, 249 ;Edoras
		reveal_tile 230, 260 ;Helms deep
		reveal_tile 325, 413 ;Thranduil's halls
		reveal_tile 339, 421 ;Erebor
		reveal_tile 314, 438 ;Onazanar
		reveal_tile 338, 417 ;Dale
		reveal_tile 339, 411 ;Esgaroth
		reveal_tile 400, 420 ;Kirikhgathol
		reveal_tile 346, 250 ;Morannon
		reveal_tile 341, 243 ;Durthang
		reveal_tile 339, 221 ;Minas Morgul
		reveal_tile 342, 222 ;Cirith Ungol
		reveal_tile 372, 232 ;Barad-dur
		reveal_tile 327, 229 ;Cair Andros
		reveal_tile 329, 219 ;Osgiliath
		reveal_tile 324, 217 ;Minas Tirith
		reveal_tile 270, 163 ;Gobel Tolfalas
		reveal_tile 265, 81 ;Umbar
		reveal_tile 289, 387 ;Beorn's Halls
		reveal_tile 232, 423 ;Mount Gram
		reveal_tile 240, 435 ;Litash
		reveal_tile 438, 312 ;;Caras Sant/Helcarin
        reveal_tile 173, 366 ;Metraith
		hide_all_revealed_tiles
        set_counter tileseen_blocked 0
	end_monitor

    ;################## Faction IDs ########################################################

    ; Setting Faction ID's for use in scripts

    declare_counter faction_ID_sicily
    declare_counter faction_ID_denmark
    declare_counter faction_ID_milan
    declare_counter faction_ID_normans
    declare_counter faction_ID_turks
    declare_counter faction_ID_scotland
    declare_counter faction_ID_timurids
    declare_counter faction_ID_byzantium
    declare_counter faction_ID_moors
    declare_counter faction_ID_hungary
    declare_counter faction_ID_norway
    declare_counter faction_ID_saxons
    declare_counter faction_ID_ireland
    declare_counter faction_ID_mongols
    declare_counter faction_ID_teutonic_order
    declare_counter faction_ID_aztecs
    declare_counter faction_ID_france
    declare_counter faction_ID_england
    declare_counter faction_ID_poland
    declare_counter faction_ID_hre
    declare_counter faction_ID_portugal
    declare_counter faction_ID_venice
    declare_counter faction_ID_gundabad
    declare_counter faction_ID_spain
    declare_counter faction_ID_khand
    declare_counter faction_ID_russia
    declare_counter faction_ID_papal_states
    declare_counter faction_ID_slave
    declare_counter admin_faction

    declare_counter roads_are_safe_check
    declare_counter anduin_tolls
    declare_counter mirkwood_safe_check
	
	
    set_event_counter spy_network_russia 0
    set_event_counter spy_network_khand 0
    set_event_counter spy_network_spain 0
    set_event_counter spy_network_gundabad 0
    set_event_counter spy_network_venice 0
    set_event_counter spy_network_turks 0
    set_event_counter spy_network_portugal 0
    set_event_counter spy_network_poland 0
    set_event_counter spy_network_england 0
    set_event_counter spy_network_aztecs 0
    set_event_counter spy_network_teutonic_order 0
    set_event_counter spy_network_mongols 0
    set_event_counter spy_network_ireland 0
    set_event_counter spy_network_saxons 0
    set_event_counter spy_network_norway 0
    set_event_counter spy_network_hungary 0
    set_event_counter spy_network_moors 0
    set_event_counter spy_network_france 0
    set_event_counter spy_network_hre 0
    set_event_counter spy_network_byzantium 0
    set_event_counter spy_network_timurids 0
    set_event_counter spy_network_scotland 0
    set_event_counter spy_network_normans 0
    set_event_counter spy_network_milan 0
    set_event_counter spy_network_denmark 0
    set_event_counter spy_network_sicily 0
    set_event_counter dg_nazgul_to_mordor 0
    set_event_counter mordor_destroyed 0
	
	monitor_event ScrollAdviceRequested own_named_character_info_scroll
		set_event_counter scroll_advice 1
		set_event_counter scroll_advice 0
	end_monitor

    ;# setting faction IDs & current faction #

    monitor_event PreFactionTurnStart		; resets [faction]_turn for the next faction
        log always ---------------------------faction ids start-----------------------------------
        set_counter roads_are_safe_check 1
        set_counter mirkwood_safe_check 1
        set_counter imladris_safe_check 1
        set_counter mithlond_safe_check 1
        set_counter lorien_safe_check 1
        set_event_counter lose_check 0
		set_event_counter uruk_barracks_dunland 1

        set_counter faction_ID_sicily 0
        set_counter faction_ID_denmark 0
        set_counter faction_ID_milan 0
        set_counter faction_ID_normans 0
        set_counter faction_ID_turks 0
        set_counter faction_ID_scotland 0
        set_counter faction_ID_timurids 0
        set_counter faction_ID_byzantium 0
        set_counter faction_ID_moors 0
        set_counter faction_ID_hungary 0
        set_counter faction_ID_norway 0
        set_counter faction_ID_saxons 0
        set_counter faction_ID_ireland 0
        set_counter faction_ID_mongols 0
        set_counter faction_ID_teutonic_order 0
        set_counter faction_ID_aztecs 0
        set_counter faction_ID_france 0
        set_counter faction_ID_england 0
        set_counter faction_ID_poland 0
        set_counter faction_ID_hre 0
        set_counter faction_ID_portugal 0
        set_counter faction_ID_venice 0
        set_counter faction_ID_gundabad 0
        set_counter faction_ID_spain 0
        set_counter faction_ID_khand 0
        set_counter faction_ID_russia 0
        set_counter faction_ID_papal_states 0
        set_counter faction_ID_slave 0
        set_counter admin_faction 0

        set_event_counter sicily_turn 0
        set_event_counter denmark_turn 0
        set_event_counter milan_turn 0
        set_event_counter normans_turn 0
        set_event_counter turks_turn 0
        set_event_counter scotland_turn 0
        set_event_counter timurids_turn 0
        set_event_counter byzantium_turn 0
        set_event_counter moors_turn 0
        set_event_counter hungary_turn 0
        set_event_counter norway_turn 0
        set_event_counter saxons_turn 0
        set_event_counter ireland_turn 0
        set_event_counter mongols_turn 0
        set_event_counter teutonic_order_turn 0
        set_event_counter aztecs_turn 0
        set_event_counter france_turn 0
        set_event_counter england_turn 0
        set_event_counter poland_turn 0
        set_event_counter hre_turn 0
        set_event_counter portugal_turn 0
        set_event_counter venice_turn 0
        set_event_counter gundabad_turn 0
        set_event_counter spain_turn 0
        set_event_counter khand_turn 0
        set_event_counter russia_turn 0
        set_event_counter papal_states_turn 0
        set_event_counter slave_turn 0
        set_event_counter ring_bearer_faction 0

        set_event_counter good_ring_faction 0
        set_event_counter evil_ring_faction 0
        set_event_counter mordor_ring_faction 0
        set_event_counter evil_ring_faction_keeper 0
        set_event_counter isengard_ring_faction 0

        set_event_counter nd_rk 1
        set_event_counter gondor_rk 1
		set_event_counter dunland_reforms 1
		set_counter dunland_cities 0
		set_counter battle_looper 0
		
        if I_HotseatEnabled
			set_event_counter ring_found_russia 0
			set_event_counter ring_found_khand 0
			set_event_counter ring_found_spain 0
			set_event_counter ring_found_gundabad 0
			set_event_counter ring_found_venice 0
			set_event_counter ring_found_portugal 0
			set_event_counter ring_found_poland 0
			set_event_counter ring_found_england 0
			set_event_counter ring_found_aztecs 0
			set_event_counter ring_found_teutonic_order 0
			set_event_counter ring_found_mongols 0
			set_event_counter ring_found_ireland 0
			set_event_counter ring_found_saxons 0
			set_event_counter ring_found_norway 0
			set_event_counter ring_found_hungary 0
			set_event_counter ring_found_byzantium 0
			set_event_counter ring_found_timurids 0
			set_event_counter ring_found_scotland 0
			set_event_counter ring_found_normans 0
			set_event_counter ring_found_milan 0
			set_event_counter ring_found_denmark 0
			set_event_counter ring_found_sicily 0
        end_if


        if not I_CharacterExists elrond_1
            and not I_CharacterExists glorfindel_1
            and not I_CharacterExists gandalf_1
            and not I_CharacterExists gandalf_2
            and not I_CharacterExists aragorn_1
            and not I_CharacterExists cirdan_1
            and not I_CharacterExists celeborn_1
            set_event_counter destroy_impossible 1
        end_if

        if not I_CharacterExists saruman_1
            set_event_counter saruman_ring_impossible 1
        end_if

        if I_NumberOfSettlements england = 0
        and I_EventCounter sauron_ai = 0
            console_command kill_faction england
        end_if

        set_event_counter ring_deliver_active 0
        set_event_counter mordor_deliver_active 0
        set_event_counter isengard_deliver_active 0
        set_event_counter isengard_deliver_active_self 0
        set_event_counter mordor_deliver_active_self 0

        ; settlement checks for scripts

        if I_SettlementOwner High_Pass = poland
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = gundabad
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = england
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = hre
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = venice
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = portugal
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = russia
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = france
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = aztecs
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = spain
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner High_Pass = slave
            set_counter roads_are_safe_check 0
        end_if


        if I_SettlementOwner West_Anduin = poland
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = gundabad
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = england
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = hre
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = venice
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = portugal
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = russia
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = france
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = aztecs
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = spain
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner West_Anduin = slave
            set_counter roads_are_safe_check 0
        end_if


        if I_SettlementOwner Lower_Anduin_Vale = poland
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = gundabad
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = england
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = hre
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = venice
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = portugal
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = russia
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = france
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = aztecs
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = spain
            set_counter roads_are_safe_check 0
        end_if
        if I_SettlementOwner Lower_Anduin_Vale = slave
            set_counter roads_are_safe_check 0
        end_if


        if I_SettlementOwner South_Elven_Mirkwood = poland
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = gundabad
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = england
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = hre
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = venice
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = portugal
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = russia
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = france
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = aztecs
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = spain
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner South_Elven_Mirkwood = slave
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if


        if I_SettlementOwner Elven_Mirkwood = poland
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = gundabad
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = england
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = hre
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = venice
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = portugal
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = russia
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = france
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = aztecs
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = spain
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Elven_Mirkwood = slave
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if


        if I_SettlementOwner Central_Mirkwood = poland
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = gundabad
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = england
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = hre
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = venice
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = portugal
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = russia
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = france
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = aztecs
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = spain
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Central_Mirkwood = slave
            set_counter roads_are_safe_check 0
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner Woodsmen = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Woodsmen = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner Middle_Mirkwood = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Middle_Mirkwood = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner East_Mirkwood = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Mirkwood = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner New_Mirkwood = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner New_Mirkwood = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner Deep_Mirkwood = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner Deep_Mirkwood = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner East_Deep_Mirkwood = poland
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = gundabad
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = england
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = hre
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = venice
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = portugal
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = russia
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = france
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = aztecs
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = spain
            set_counter mirkwood_safe_check 0
        end_if
        if I_SettlementOwner East_Deep_Mirkwood = slave
            set_counter mirkwood_safe_check 0
        end_if

        if I_SettlementOwner Imladris = poland
            set_counter  imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = gundabad
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = england
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = hre
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = venice
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = portugal
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = russia
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = france
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = aztecs
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = spain
            set_counter imladris_safe_check 0
        end_if
        if I_SettlementOwner Imladris = slave
            set_counter imladris_safe_check 0
        end_if

        if I_SettlementOwner Mithlond = poland
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = gundabad
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = england
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = hre
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = venice
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = portugal
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = russia
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = france
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = aztecs
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = spain
            set_counter mithlond_safe_check 0
        end_if
        if I_SettlementOwner Mithlond = slave
            set_counter mithlond_safe_check 0
        end_if

        if I_SettlementOwner Celebrant = poland
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = gundabad
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = england
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = hre
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = venice
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = portugal
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = russia
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = france
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = aztecs
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = spain
            set_counter lorien_safe_check 0
        end_if
        if I_SettlementOwner Celebrant = slave
            set_counter lorien_safe_check 0
        end_if
        log always ---------------------------faction ids end-----------------------------------
    end_monitor

    monitor_event PreFactionTurnStart FactionType sicily ;Gondor
        log always -----------------------------------Gondor Turn-------------------------------
        set_counter faction_ID_sicily 1
        set_event_counter sicily_turn 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { sicily, }
        end_if
        set_event_counter good_ring_faction 1
        set_event_counter spy_network_da 1
        if I_EventCounter reunited_kingdom = 0
            set_event_counter gondor_rk 0
        end_if
        if I_IsFactionAIControlled turks
            set_event_counter turks_allied_milan 1
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType denmark ;Dol Amroth
        log always -----------------------------------Dol Amroth Turn-------------------------------
        set_counter faction_ID_denmark 1
        set_event_counter denmark_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { denmark, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan ;Rohan
        log always -----------------------------------Rohan Turn-------------------------------
        set_counter faction_ID_milan 1
        set_event_counter milan_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { milan, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType normans ;Bree
        log always -----------------------------------Bree Turn-------------------------------
        set_counter faction_ID_normans 1
        set_event_counter normans_turn 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { normans, }
        end_if
        if I_EventCounter corrupt_shire = 0
            set_event_counter good_ring_faction 1
            set_event_counter isengard_ring_faction 0
        end_if
        if I_EventCounter corrupt_shire = 1
            set_event_counter isengard_ring_faction 1
            set_event_counter good_ring_faction 0
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks ;Northern Dúnedain
        log always -----------------------------------Northern Dúnedain Turn-------------------------------
        set_counter faction_ID_turks 1
        set_event_counter turks_turn 1
        set_event_counter good_ring_faction 1
        set_event_counter spy_network_wr 1
        set_event_counter spy_network_lorien 1
        set_event_counter spy_network_he 1
        if I_EventCounter ring_given_nd = 1
        and I_EventCounter ring_given_ai = 1
            set_event_counter ring_bearer_faction 1
        end_if
        if I_EventCounter reunited_kingdom = 0
            set_event_counter nd_rk 0
        end_if
        if I_NumberOfSettlements portugal = 0
        and I_EventCounter rhudaur_dunedain = 0
        and I_EventCounter arnor_restored = 1
            historic_event rhudaur_dunedain factions { turks, }
            set_event_counter nd_angmar_dead 1
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType scotland ;Dale
        log always -----------------------------------Dale Turn-------------------------------
        set_counter faction_ID_scotland 1
        set_event_counter scotland_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { scotland, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType timurids ;Anduin Vale
        log always -----------------------------------Anduin Vale Turn-------------------------------
        set_counter faction_ID_timurids 1
        set_event_counter timurids_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { timurids, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType byzantium ;Dorwinion
        log always -----------------------------------Dorwinion Turn-------------------------------
        set_counter faction_ID_byzantium 1
        set_event_counter byzantium_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { byzantium, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType moors ;Erebor
        log always -----------------------------------Erebor Turn-------------------------------
        set_counter faction_ID_moors 1
        set_event_counter moors_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { moors, }
        end_if
    end_monitor

    set_event_counter luin_ring_accepted 0
    monitor_event PreFactionTurnStart FactionType hungary ;Ered Luin
        log always -----------------------------------Ered Luin Turn-------------------------------
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { hungary, }
        end_if
        set_counter faction_ID_hungary 1
        set_event_counter hungary_turn 1
        set_event_counter good_ring_faction 1
       if I_EventCounter luin_ring_accepted = 1
            set_event_counter good_ring_faction 0
            set_event_counter evil_ring_faction_keeper 1
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType norway ;Khazad-dûm
        log always -----------------------------------Khazad-dûm Turn-------------------------------
        set_counter faction_ID_norway 1
        set_event_counter norway_turn 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { norway, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType saxons ;High Elves
        log always -----------------------------------High Elves Turn-------------------------------
        set_counter faction_ID_saxons 1
        set_event_counter saxons_turn 1
        set_event_counter spy_network_wr 1
        set_event_counter spy_network_lorien 1
        set_event_counter spy_network_nd 1
        set_event_counter good_ring_faction 1
        if I_EventCounter ring_given_he = 1
        and I_EventCounter ring_given_ai = 1
            set_event_counter ring_bearer_faction 1
        end_if
        if I_TurnNumber = 0
            console_command create_building Imladris c_teleri_barracks
            console_command create_building Mithlond teleri_barracks
            console_command create_building Imladris c_noldor_barracks
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType ireland ;Lothlórien
        log always -----------------------------------Lothlórien Turn-------------------------------
        set_counter faction_ID_ireland 1
        set_event_counter ireland_turn 1
        set_event_counter spy_network_wr 1
        set_event_counter spy_network_he 1
        set_event_counter spy_network_nd 1
        set_event_counter good_ring_faction 1
        if I_EventCounter ring_given_lorien = 1
        and I_EventCounter ring_given_ai = 1
            set_event_counter ring_bearer_faction 1
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType mongols ;Woodland Realm
        log always -----------------------------------Woodland Realm Turn-------------------------------
        set_counter faction_ID_mongols 1
        set_event_counter mongols_turn 1
        set_event_counter spy_network_lorien 1
        set_event_counter spy_network_he 1
        set_event_counter spy_network_nd 1
        set_event_counter good_ring_faction 1
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { mongols, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType teutonic_order ;Enedwaith
        log always -----------------------------------Enedwaith Turn-------------------------------
        set_counter faction_ID_teutonic_order 1
        set_event_counter teutonic_order_turn 1
        set_event_counter good_ring_faction 1
        if I_EventCounter enedwaith_evil = 1
            set_event_counter good_ring_faction 0
            set_event_counter isengard_ring_faction 1
        end_if
        if I_TurnNumber = 28
            historic_event gandalf_ring_warning factions { teutonic_order, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType aztecs ;Dunland
        log always -----------------------------------Dunland Turn-------------------------------
        if I_TurnNumber = 1
            historic_event IC_DUNLAND_INTRO factions { aztecs, }
        end_if
        if I_TurnNumber = 2
            historic_event DUNLAND_REFORM_INTRO factions { aztecs, }
        end_if
        if I_TurnNumber = 28
            historic_event saruman_ring_demand factions { aztecs, }
        end_if
		if I_EventCounter dunland_reformed < 1
			set_event_counter dunland_reforms 0
		end_if
        set_counter faction_ID_aztecs 1
        set_event_counter aztecs_turn 1
        set_event_counter isengard_ring_faction 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType france ;Isengard
        log always -----------------------------------Isengard Turn-------------------------------
        set_counter faction_ID_france 1
        set_event_counter france_turn 1
        set_event_counter spy_network_dunland 1
        if I_TurnNumber = 0
            console_command create_building Nan_Curunir orthanc
        end_if
        if I_EventCounter corrupt_shire = 1
            set_event_counter spy_network_bree 1
        end_if
        set_event_counter isengard_ring_faction 2
        if I_TurnNumber < 30
            add_money france 5000
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;Mordor
        log always -----------------------------------Mordor Turn-------------------------------
        set_counter faction_ID_england 1
        set_event_counter england_turn 1
        set_event_counter spy_network_angmar 1
        set_event_counter spy_network_dg 1
        set_event_counter spy_network_moria 1
        set_event_counter mordor_ring_faction 1 
    end_monitor

    monitor_event PreFactionTurnStart FactionType poland ;Dol Guldur
        log always -----------------------------------Dol Guldur Turn-------------------------------
        set_counter faction_ID_poland 1
        set_event_counter poland_turn 1
        set_event_counter evil_ring_faction 1
        if I_TurnNumber = 0
            if I_IsFactionAIControlled poland
                console_command create_building Deep_Mirkwood drill_square
            end_if
            if not I_IsFactionAIControlled poland
                console_command create_building Deep_Mirkwood garrison_quarters
            end_if
        end_if
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { poland, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType hre ;Goblins of Moria
        log always -----------------------------------Goblins of Moria Turn-------------------------------
        set_counter faction_ID_hre 1
        set_event_counter hre_turn 1
        set_event_counter evil_ring_faction 1
        if I_TurnNumber = 0
            console_command give_trait agorolg_1 MoriaInquisitor 1
        end_if
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { hre, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType portugal ;Angmar
        log always -----------------------------------Angmar Turn-------------------------------
        set_counter faction_ID_portugal 1
        set_event_counter portugal_turn 1
        set_event_counter evil_ring_faction 1
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { portugal, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType venice ;Rhun
        log always -----------------------------------Rhun Turn-------------------------------
        set_counter faction_ID_venice 1
        set_event_counter venice_turn 1
        set_event_counter evil_ring_faction 1
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { venice, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType gundabad ;Gundabad
        log always -----------------------------------Gundabad Turn-------------------------------
        set_counter faction_ID_gundabad 1
        set_event_counter gundabad_turn 1
        set_event_counter evil_ring_faction_keeper 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType spain ;Harad
        log always -----------------------------------Harad Turn-------------------------------
        set_counter faction_ID_spain 1
        set_event_counter spain_turn 1
        set_event_counter evil_ring_faction 1
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { spain, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType khand ;Khand
        log always -----------------------------------Khand Turn-------------------------------
        set_counter faction_ID_khand 1
        set_event_counter khand_turn 1
        set_event_counter evil_ring_faction 1
        if I_EventCounter blue_wizards_succeed = 1
            set_event_counter evil_ring_faction 0
            set_event_counter good_ring_faction 1
        end_if
        if I_TurnNumber = 28
            historic_event sauron_ring_demand factions { khand, }
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType russia ;Ar-Adunaim
        log always -----------------------------------Ar-Adunaim  Turn-------------------------------
        set_counter faction_ID_russia 1
        set_event_counter russia_turn 1
        set_event_counter evil_ring_faction_keeper 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType papal_states ;Sauron
        log always -----------------------------------Sauron Turn-------------------------------
        set_counter faction_ID_papal_states 1
        set_event_counter papal_states_turn 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType slave ;Rebels
        log always -----------------------------------Rebels Turn-------------------------------
        set_counter faction_ID_slave 1
        set_event_counter slave_turn 1
        ;call_object_shortcut - screen_grab
    end_monitor

    ;############################### Main ##############################

    ; Various event counter's that need to be set to 1 at campaign start
    monitor_event PreFactionTurnStart
        log always ---------------------------setting start values------------------------------------
        set_event_counter imperial_campaign 1
        set_event_counter nd_rk 1
        set_event_counter gondor_rk 1
        set_event_counter france_allied_aztecs 1
        set_event_counter imladris_controlled 1
        terminate_monitor
    end_monitor

    ; Things that should happen every AI turn
    monitor_event PreFactionTurnStart IsFactionAIControlled
        log always ---------------------------AI turn------------------------------------
        set_event_counter is_the_ai 1
        set_event_counter ithil_allied 1
    end_monitor

    ;#################### Season Script #################################

    ;## First faction after slave turn ##

    ; credit to the DCI team for this small, but powerful script
    ; first faction after the slave turn is not always the same, so this script helps identify it
    ; used for season script & seasonal events script

    declare_counter first_faction_after_slave		; 1 = is first faction after slave, 0 = not, -1 = set to this in slave's turn

    set_counter first_faction_after_slave -1

    monitor_event PreFactionTurnStart not FactionType slave
        if I_CompareCounter first_faction_after_slave == 1
            set_counter first_faction_after_slave 0
        end_if
        if I_CompareCounter first_faction_after_slave == -1
            set_counter first_faction_after_slave 1
        end_if
    end_monitor
	
	set_event_counter manual_battle 0
	
	monitor_event EventCounter EventCounterType manual_battle
        and I_EventCounter manual_battle = 1
		campaign_wait 2
		disable_cursor
		ui_flash_start prebattle_fight_button
		campaign_wait 5
		select_ui_element prebattle_fight_button
		simulate_mouse_click lclick_down
		simulate_mouse_click lclick_up
		enable_cursor
		ui_flash_stop prebattle_fight_button
		set_event_counter manual_battle 0
	end_monitor

    monitor_event PreFactionTurnStart FactionType slave
        set_counter first_faction_after_slave -1
    end_monitor

   ; ;Ignore this, it to auto stop the campaign at intervals for ai only campaigns
   ; monitor_event FactionTurnEnd I_TurnNumber > 50
   ; and I_HotseatEnabled
   ;     if not I_IsFactionAIControlled papal_states
   ;         terminate_monitor
   ;     end_if
   ;    console_command control papal_states
   ; end_monitor
   ;
   ; declare_counter turn_timer
   ;
   ; monitor_event FactionTurnEnd FactionType slave
   ;
   ;     if I_CompareCounter turn_timer = 0
   ;         call_object_shortcut - screen_grab
   ;     end_if
   ;
   ;     inc_counter turn_timer 1
   ;
   ;     if I_CompareCounter turn_timer >= 10
   ;         set_counter turn_timer 0
   ;     end_if
   ;
   ; end_monitor
   ;
   ; monitor_event FactionTurnEnd I_TurnNumber > 100
   ; and I_HotseatEnabled
   ;     if not I_IsFactionAIControlled papal_states
   ;         terminate_monitor
   ;     end_if
   ;    console_command control papal_states
   ; end_monitor
   ;
   ; monitor_event FactionTurnEnd I_TurnNumber > 150
   ; and I_HotseatEnabled
   ;     if not I_IsFactionAIControlled papal_states
   ;         terminate_monitor
   ;     end_if
   ;    console_command control papal_states
   ; end_monitor
   ;
   ; monitor_event FactionTurnEnd I_TurnNumber > 200
   ; and I_HotseatEnabled
   ;     if not I_IsFactionAIControlled papal_states
   ;         terminate_monitor
   ;     end_if
   ;    console_command control papal_states
   ; end_monitor

    set_event_counter winter 0

    ;## advance character age ;##

    ; characters only age during winter -> summer transitions (after the slave turn)
    ; by briefly setting the season to summer before the actually desired season, ageing doesn't happen unless we want it to
    ; do not set summer when month == 0 (December), so the only "natural" winter -> summer transition occurs
    ; advance character age at turn 13, 25, 37 etc. (synchronous with the turn of the year)

    ; advance character age script
    declare_counter console_active

    ;Disable console for hotseat
    monitor_event FactionTurnStart
        if not I_HotseatEnabled
            terminate_monitor
        end_if

        if I_EventCounter disable_console = 1
            disable_shortcuts object_manager show_console true
            set_counter console_active 0
        end_if
    end_monitor

    ;##### Cities and counters

    declare_counter england_lost_blackgate
    declare_counter england_lost_capital
    declare_counter england_lost_minasmorgul
    declare_counter england_sieged_blackgate
    declare_counter england_sieged_capital
    declare_counter england_sieged_minasmorgul
    declare_counter france_lost_capital
    declare_counter france_sieged_capital
    declare_counter gundabad_lost_capital
    declare_counter gundabad_sieged_capital
    declare_counter goblin_lost_capital
    declare_counter goblin_sieged_capital
    declare_counter ireland_lost_capital
    declare_counter ireland_sieged_capital
    declare_counter milan_lost_capital
    declare_counter milan_lost_hornburg
    declare_counter milan_sieged_capital
    declare_counter milan_sieged_hornburg
    declare_counter mongols_lost_capital
    declare_counter mongols_sieged_capital
    declare_counter moors_lost_capital
    declare_counter moors_sieged_capital
    declare_counter normans_lost_capital
    declare_counter normans_sieged_capital
    declare_counter norway_lost_capital
    declare_counter norway_messages_unlocked
    declare_counter norway_sieged_capital
    declare_counter poland_lost_capital
    declare_counter poland_sieged_capital
    declare_counter portugal_lost_capital
    declare_counter portugal_sieged_capital
    declare_counter russia_lost_capital
    declare_counter russia_sieged_capital
    declare_counter saxons_lost_capital
    declare_counter saxons_sieged_capital
    declare_counter sicily_lost_capital
    declare_counter sicily_lost_westernosgiliath
    declare_counter sicily_sieged_westernosgiliath
    declare_counter sicily_sieged_capital

    set_counter norway_lost_capital 1

    ;######## Boromirs epic speech ##########
    monitor_event GeneralCaptureSettlement SettlementName East_Osgiliath
        if I_IsFactionAIControlled sicily
        and I_IsFactionAIControlled turks
            terminate_monitor
        end_if
        if I_SettlementOwner East_Osgiliath = sicily
        and not I_IsFactionAIControlled sicily
            historic_event boromir_speech event/boromir_speech.bik
            log always -----------------------------------Boromir Speech Gondor-------------------------------
            terminate_monitor
        end_if
        if I_SettlementOwner East_Osgiliath = turks
        and not I_IsFactionAIControlled turks
            historic_event boromir_speech event/boromir_speech.bik
            log always -----------------------------------Boromir Speech ND/RK-------------------------------
            terminate_monitor
        end_if
    end_monitor

    ;## things that should happen every player turn ;##
    monitor_event PreFactionTurnStart FactionIsLocal
        ; event counter resets
        log always ---------------------------every player turn start----------------------------------

        set_event_counter is_the_ai 0
        set_event_counter dale_allied_elves 0
        set_event_counter dale_allied_dwarves 0
        set_event_counter nd_peace_gondor 1
        set_event_counter nd_peace_amroth 1

        ;Important settlement siege messages
        if I_IsFactionAIControlled saxons
            if I_SettlementOwner Imladris = saxons
                if I_CompareCounter saxons_lost_capital = 1
                    historic_event imladris_capital_reclaim
                    set_counter saxons_lost_capital 0
                end_if
                if I_SettlementUnderSiege Imladris
                and I_CompareCounter saxons_sieged_capital = 0
                    historic_event imladris_capital_siege
                    set_counter saxons_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Imladris
                    set_counter saxons_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Imladris = saxons
            and I_CompareCounter saxons_lost_capital = 0
                historic_event imladris_capital_lost
                set_counter saxons_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled england
            if I_SettlementOwner Gorgoroth = england
                if I_CompareCounter england_lost_capital = 1
                    historic_event mordor_capital_reclaim
                    set_counter england_lost_capital 0
                end_if
                if I_SettlementUnderSiege Gorgoroth
                and I_CompareCounter england_sieged_capital = 0
                    historic_event mordor_capital_siege
                    set_counter england_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Gorgoroth
                    set_counter england_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Gorgoroth = england
            and I_CompareCounter england_lost_capital = 0
                historic_event mordor_capital_lost
                set_counter england_lost_capital 1
            end_if
            if I_SettlementOwner Morgul_Vale = england
                if I_CompareCounter england_lost_minasmorgul = 1
                    historic_event mordor_minasmorgul_reclaim
                    set_counter england_lost_minasmorgul 0
                end_if
                if I_SettlementUnderSiege Morgul_Vale
                    and I_CompareCounter england_sieged_minasmorgul = 0
                    historic_event mordor_minasmorgul_siege
                    set_counter england_sieged_minasmorgul 1
                end_if
                if not I_SettlementUnderSiege Morgul_Vale
                    set_counter england_sieged_minasmorgul 0
                end_if
            end_if
            if not I_SettlementOwner Morgul_Vale = england
                and I_CompareCounter england_lost_minasmorgul = 0
                historic_event mordor_minasmorgul_lost
                set_counter england_lost_minasmorgul 1
            end_if
            if I_SettlementOwner Udun = england
                if I_CompareCounter england_lost_blackgate = 1
                    historic_event mordor_blackgate_reclaim
                    set_counter england_lost_blackgate 0
                end_if
                if I_SettlementUnderSiege Udun
                    and I_CompareCounter england_sieged_blackgate = 0
                    historic_event mordor_blackgate_siege
                    set_counter england_sieged_blackgate 1
                end_if
                if not I_SettlementUnderSiege Udun
                    set_counter england_sieged_blackgate 0
                end_if
            end_if
            if not I_SettlementOwner Udun = england
                and I_CompareCounter england_lost_blackgate = 0
                historic_event mordor_blackgate_lost
                set_counter england_lost_blackgate 1
            end_if
        end_if
        if I_IsFactionAIControlled france
            if I_SettlementOwner Nan_Curunir = france
                if I_CompareCounter france_lost_capital = 1
                    historic_event isengard_capital_reclaim
                    set_counter france_lost_capital 0
                end_if
                if I_SettlementUnderSiege Nan_Curunir
                    and I_CompareCounter france_sieged_capital = 0
                    historic_event isengard_capital_siege
                    set_counter france_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Nan_Curunir
                    set_counter france_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Nan_Curunir = france
                and I_CompareCounter france_lost_capital = 0
               historic_event isengard_capital_lost
                set_counter france_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled gundabad
            if I_SettlementOwner Mt_Gundabad = gundabad
                if I_CompareCounter gundabad_lost_capital = 1
                    historic_event gundabad_capital_reclaim
                    set_counter gundabad_lost_capital 0
                end_if
                if I_SettlementUnderSiege Mt_Gundabad
                    and I_CompareCounter gundabad_sieged_capital = 0
                    historic_event gundabad_capital_siege
                    set_counter gundabad_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Mt_Gundabad
                    set_counter gundabad_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Mt_Gundabad = gundabad
                and I_CompareCounter gundabad_lost_capital = 0
                historic_event gundabad_capital_lost
                set_counter gundabad_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled hre
            if I_SettlementOwner West_Moria = hre
                if I_CompareCounter goblin_lost_capital = 1
                    historic_event goblin_capital_reclaim
                    set_counter goblin_lost_capital 0
                end_if
            end_if
            if I_SettlementUnderSiege West_Moria
                if I_SettlementOwner West_Moria = hre
                    and I_CompareCounter goblin_sieged_capital = 0
                    historic_event goblin_capital_siege
                    set_counter goblin_sieged_capital 1
                end_if
            end_if
            if not I_SettlementUnderSiege West_Moria
                set_counter goblin_sieged_capital 0
            end_if
            if not I_SettlementOwner West_Moria = hre
                and I_CompareCounter goblin_lost_capital = 0
                historic_event goblin_capital_lost
                set_counter goblin_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled ireland
            and I_EventCounter elven_union = 0
            if I_SettlementOwner Celebrant = ireland
                if I_CompareCounter ireland_lost_capital = 1
                    historic_event galadhrim_capital_reclaim
                    set_counter ireland_lost_capital 0
                end_if
                if I_SettlementUnderSiege Celebrant
                    and I_CompareCounter ireland_sieged_capital = 0
                    historic_event galadhrim_capital_siege
                    set_counter ireland_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Celebrant
                    set_counter ireland_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Celebrant = ireland
                and I_CompareCounter ireland_lost_capital = 0
                historic_event galadhrim_capital_lost
                set_counter ireland_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled milan
            if I_SettlementOwner Helms_Deep = milan
                if I_CompareCounter milan_lost_hornburg = 1
                    historic_event rohan_hornburg_reclaim
                    set_counter milan_lost_hornburg 0
                end_if
                if I_SettlementUnderSiege Helms_Deep
                    and I_CompareCounter milan_sieged_hornburg = 0
                    historic_event rohan_hornburg_siege
                    set_counter milan_sieged_hornburg 1
                end_if
                if not I_SettlementUnderSiege Helms_Deep
                    set_counter milan_sieged_hornburg 0
                end_if
            end_if
            if not I_SettlementOwner Helms_Deep = milan
                and I_CompareCounter milan_lost_hornburg = 0
                historic_event rohan_hornburg_lost
                set_counter milan_lost_hornburg 1
            end_if
            if I_SettlementOwner Kings_Land = milan
                if I_CompareCounter milan_lost_capital = 1
                    historic_event rohan_capital_reclaim
                    set_counter milan_lost_capital 0
                end_if
                if I_SettlementUnderSiege Kings_Land
                    and I_CompareCounter milan_sieged_capital = 0
                    historic_event rohan_capital_siege
                    set_counter milan_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Kings_Land
                    set_counter milan_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Kings_Land = milan
                and I_CompareCounter milan_lost_capital = 0
                historic_event rohan_capital_lost
                set_counter milan_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled mongols
            and I_EventCounter elven_union = 0
            if I_SettlementOwner Elven_Mirkwood = mongols
                if I_CompareCounter mongols_lost_capital = 1
                    historic_event thranduil_capital_reclaim
                    set_counter mongols_lost_capital 0
                end_if
                if I_SettlementUnderSiege Elven_Mirkwood
                    and I_CompareCounter mongols_sieged_capital = 0
                    historic_event thranduil_capital_siege
                    set_counter mongols_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Elven_Mirkwood
                    set_counter mongols_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Elven_Mirkwood = mongols
                and I_CompareCounter mongols_lost_capital = 0
                historic_event thranduil_capital_lost
                set_counter mongols_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled moors
            if I_SettlementOwner Erebor = moors
                if I_CompareCounter moors_lost_capital = 1
                    historic_event erebor_capital_reclaim
                    set_counter moors_lost_capital 0
                end_if
                if I_SettlementUnderSiege Erebor
                    and I_CompareCounter moors_sieged_capital = 0
                    historic_event erebor_capital_siege
                    set_counter moors_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Erebor
                    set_counter moors_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Erebor = moors
                and I_CompareCounter moors_lost_capital = 0
                historic_event erebor_capital_lost
                set_counter moors_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled normans
            if I_SettlementOwner Bree = normans
                if I_CompareCounter normans_lost_capital = 1
                    historic_event shire_capital_reclaim
                    set_counter normans_lost_capital 0
                end_if
                if I_SettlementUnderSiege Bree
                    and I_CompareCounter normans_sieged_capital = 0
                    historic_event shire_capital_siege
                    set_counter normans_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Bree
                    set_counter normans_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Bree = normans
                and I_CompareCounter normans_lost_capital = 0
                historic_event shire_capital_lost
                set_counter normans_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled norway
            and I_CompareCounter norway_messages_unlocked = 1
            if I_SettlementOwner East_Moria = norway
                if I_SettlementUnderSiege East_Moria
                    and I_CompareCounter norway_sieged_capital = 0
                    historic_event khazad_capital_siege
                    set_counter norway_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege East_Moria
                    set_counter norway_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner East_Moria = norway
                and I_CompareCounter norway_lost_capital = 0
                historic_event khazad_capital_lost
                set_counter norway_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled poland
            if I_SettlementOwner Deep_Mirkwood = poland
                if I_CompareCounter poland_lost_capital = 1
                    historic_event shadow_capital_reclaim
                    set_counter poland_lost_capital 0
                end_if
                if I_SettlementUnderSiege Deep_Mirkwood
                    and I_CompareCounter poland_sieged_capital = 0
                    historic_event shadow_capital_siege
                    set_counter poland_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Deep_Mirkwood
                    set_counter poland_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Deep_Mirkwood = poland
                and I_CompareCounter poland_lost_capital = 0
                historic_event shadow_capital_lost
                set_counter poland_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled portugal
            if I_SettlementOwner Carn_Dum = portugal
                if I_CompareCounter portugal_lost_capital = 1
                    historic_event angmar_capital_reclaim
                    set_counter portugal_lost_capital 0
                end_if
                if I_SettlementUnderSiege Carn_Dum
                    and I_CompareCounter portugal_sieged_capital = 0
                    historic_event angmar_capital_siege
                    set_counter portugal_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Carn_Dum
                    set_counter portugal_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Carn_Dum = portugal
                and I_CompareCounter portugal_lost_capital = 0
                historic_event angmar_capital_lost
                set_counter portugal_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled russia
            if I_SettlementOwner Umbar = russia
                if I_CompareCounter russia_lost_capital = 1
                    historic_event umbar_capital_reclaim
                    set_counter russia_lost_capital 0
                end_if
                if I_SettlementUnderSiege Umbar
                    and I_CompareCounter russia_sieged_capital = 0
                    historic_event umbar_capital_siege
                    set_counter russia_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Umbar
                    set_counter russia_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Umbar = russia
                and I_CompareCounter russia_lost_capital = 0
                historic_event umbar_capital_lost
                set_counter russia_lost_capital 1
            end_if
        end_if
        if I_IsFactionAIControlled sicily
            and I_EventCounter reunited_kingdom = 0
            if I_SettlementOwner Anorien = sicily
                if I_CompareCounter sicily_lost_capital = 1
                    historic_event gondor_capital_reclaim
                    set_counter sicily_lost_capital 0
                end_if
                if I_SettlementUnderSiege Anorien
                    and I_CompareCounter sicily_sieged_capital = 0
                    historic_event gondor_capital_siege
                    set_counter sicily_sieged_capital 1
                end_if
                if not I_SettlementUnderSiege Anorien
                    set_counter sicily_sieged_capital 0
                end_if
            end_if
            if not I_SettlementOwner Anorien = sicily
                and I_CompareCounter sicily_lost_capital = 0
                historic_event gondor_capital_lost
                set_counter sicily_lost_capital 1
            end_if
            if I_SettlementOwner West_Osgiliath = sicily
                if I_CompareCounter sicily_lost_westernosgiliath = 1
                    historic_event gondor_osgiliath_reclaim
                    set_counter sicily_lost_westernosgiliath 0
                end_if
                if I_SettlementUnderSiege West_Osgiliath
                    and I_CompareCounter sicily_sieged_westernosgiliath = 0
                    historic_event gondor_osgiliath_siege
                    set_counter sicily_sieged_westernosgiliath 1
                end_if
                if not I_SettlementUnderSiege West_Osgiliath
                    set_counter sicily_sieged_westernosgiliath 0
                end_if
            end_if
            if not I_SettlementOwner West_Osgiliath = sicily
                and I_CompareCounter sicily_lost_westernosgiliath = 0
                historic_event gondor_osgiliath_lost
                set_counter sicily_lost_westernosgiliath 1
            end_if
        end_if
        log always ---------------------------every player turn end----------------------------------
    end_monitor

    ; For Minas Ithil guardians as a non Dunedain Faction
    monitor_event PreFactionTurnStart FactionCultureType northern_european
        and DiplomaticStanceFromFaction sicily > Allied
        and DiplomaticStanceFromFaction denmark > Allied
        set_event_counter ithil_allied 0
    end_monitor

    ; Mordor's Alliances check
    monitor_event PreFactionTurnStart FactionType england ;mordor ally khand
        and DiplomaticStanceFromFaction khand = Allied
        set_event_counter khand_is_allied 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;mordor not ally khand
        and DiplomaticStanceFromFaction khand > Allied
        set_event_counter khand_is_allied 0
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;mordor ally rhun
        and DiplomaticStanceFromFaction venice = Allied
        set_event_counter mordor_rhun_allied 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;mordor not ally rhun
        and DiplomaticStanceFromFaction venice > Allied
        set_event_counter mordor_rhun_allied 0
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;mordor ally harad
        and DiplomaticStanceFromFaction spain = Allied
        set_event_counter mordor_harad_allied 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType england ;mordor ally not harad
        and DiplomaticStanceFromFaction spain > Allied
        set_event_counter mordor_harad_allied 0
    end_monitor

    ; Dale's Alliances Check

    monitor_event PreFactionTurnStart FactionType scotland ;dale ally woodland realm
        and DiplomaticStanceFromFaction mongols = Allied
        set_event_counter dale_allied_elves 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType scotland ;dale not ally erebor
        and DiplomaticStanceFromFaction moors = Allied
        set_event_counter dale_allied_dwarves 1
    end_monitor

    ;############################## Shared ###############################

    ;##### Tile seen

    set_counter tileseen_blocked 1
    monitor_event FactionTurnEnd
        set_counter tileseen_blocked 0
        terminate_monitor
    end_monitor

    ;############################## Leaders ###############################

    ; faction leader died messages

    monitor_event BecomesFactionLeader FactionType aztecs
        and IsFactionAIControlled
        historic_event aztecs_king_event
        log always ------------------------ New Dunland faction Leader-------------------------------------
        if I_NumberOfSettlements aztecs = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType byzantium
        and IsFactionAIControlled
        historic_event byzantium_king_event
        log always ------------------------ New Dunland faction Leader-------------------------------------
        if I_NumberOfSettlements byzantium = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType denmark
        and IsFactionAIControlled
        historic_event denmark_king_event
        log always ------------------------ New Dol Amroth faction Leader-------------------------------------
        if I_NumberOfSettlements denmark = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType france
        and IsFactionAIControlled
        historic_event france_king_event
        log always ------------------------ New Isengard faction Leader-------------------------------------
        if I_NumberOfSettlements france = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType hre
        and IsFactionAIControlled
        historic_event hre_king_event
        log always ------------------------ New Goblin faction Leader-------------------------------------
        if I_NumberOfSettlements hre = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType hungary
        and IsFactionAIControlled
        historic_event hungary_king_event
        log always ------------------------ New EL faction Leader-------------------------------------
        if I_NumberOfSettlements hungary = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType ireland
        and I_EventCounter elven_union = 0
        and IsFactionAIControlled
        historic_event ireland_king_event
        log always ------------------------ New Lorien faction Leader-------------------------------------
        if I_NumberOfSettlements ireland = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType khand
        and IsFactionAIControlled
        historic_event khand_king_event
        log always ------------------------ New Khand faction Leader-------------------------------------
        if I_NumberOfSettlements khand = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType milan
        and IsFactionAIControlled
        historic_event milan_king_event
        log always ------------------------ New Rohan faction Leader-------------------------------------
        if I_NumberOfSettlements milan = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType mongols
        and I_EventCounter elven_union = 0
        and IsFactionAIControlled
        historic_event mongols_king_event
        log always ------------------------ New WR faction Leader-------------------------------------
        if I_NumberOfSettlements mongols = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType moors
        and IsFactionAIControlled
        historic_event moors_king_event
        log always ------------------------ New Erebor faction Leader-------------------------------------
        if I_NumberOfSettlements moors = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType normans
        and IsFactionAIControlled
        historic_event normans_king_event
        log always ------------------------ New Bree faction Leader-------------------------------------
        if I_NumberOfSettlements normans = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType norway
        and IsFactionAIControlled
        historic_event norway_king_event
        log always ------------------------ New KD faction Leader-------------------------------------
        if I_NumberOfSettlements norway = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType poland
        and IsFactionAIControlled
        historic_event poland_king_event
        log always ------------------------ New DG faction Leader-------------------------------------
        if I_NumberOfSettlements poland = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType portugal
        and IsFactionAIControlled
        historic_event portugal_king_event
        log always ------------------------ New Angmar faction Leader-------------------------------------
        if I_NumberOfSettlements portugal = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType russia
        and IsFactionAIControlled
        historic_event russia_king_event
        log always ------------------------ New AA faction Leader-------------------------------------
        if I_NumberOfSettlements russia = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType saxons
        and IsFactionAIControlled
        historic_event saxons_king_event
        log always ------------------------ New HE faction Leader-------------------------------------
        if I_NumberOfSettlements saxons = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType scotland
        and IsFactionAIControlled
        historic_event scotland_king_event
        log always ------------------------ New Dale faction Leader-------------------------------------
        if I_NumberOfSettlements scotland = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType sicily
        and IsFactionAIControlled
        historic_event sicily_king_event
        log always ------------------------ New Gondor faction Leader-------------------------------------
        if I_NumberOfSettlements sicily = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType spain
        and IsFactionAIControlled
        historic_event spain_king_event
        log always ------------------------ New Harad faction Leader-------------------------------------
        if I_NumberOfSettlements spain = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType teutonic_order
        and IsFactionAIControlled
        historic_event teutonic_order_king_event
        log always ------------------------ New Enedwaith faction Leader-------------------------------------
        if I_NumberOfSettlements teutonic_order = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType timurids
        and IsFactionAIControlled
        historic_event timurids_king_event
        log always ------------------------ New Anduin faction Leader-------------------------------------
        if I_NumberOfSettlements timurids = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType turks
        and IsFactionAIControlled
        historic_event turks_king_event
        log always ------------------------ New ND faction Leader-------------------------------------
        if I_NumberOfSettlements turks = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType venice
        and IsFactionAIControlled
        historic_event venice_king_event
        log always ------------------------ New Rhun faction Leader-------------------------------------
        if I_NumberOfSettlements venice = 0
            terminate_monitor
        end_if
    end_monitor

    monitor_event BecomesFactionLeader FactionType gundabad
        and IsFactionAIControlled
        historic_event gundabad_king_event
        log always ------------------------ New Gundabad faction Leader-------------------------------------
        if I_NumberOfSettlements gundabad = 0
            terminate_monitor
        end_if
    end_monitor

    ;##### Mazarbul Book (Ancillary)

    set_event_counter mazarbul_book_unlocked 0

    monitor_event GeneralCaptureSettlement SettlementName East_Moria
    and TargetFactionType norway
    and CultureType eastern_european
    and not I_WorldwideAncillaryExists mazarbul_book
        set_event_counter mazarbul_book_unlocked 1
        log always ------------------------ Mazarbul book anc unlocked-------------------------------------
        terminate_monitor
    end_monitor

    declare_counter give_moria_to_hre

    ;########################### Difficulty Settings ##########################
    set_event_counter campaign_difficulty 0
    set_event_counter battle_difficulty 0

    ;########################### Campaign Difficulty ##########################
    monitor_event PreFactionTurnStart FactionIsLocal
        and CampaignDifficulty = easy
        log always ---------------------------easy difficulty----------------------------------
        set_event_counter campaign_difficulty 1
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and CampaignDifficulty = medium
        log always ---------------------------medium difficulty----------------------------------
        set_event_counter campaign_difficulty 2
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and CampaignDifficulty = hard
        log always ---------------------------hard difficulty----------------------------------
        set_event_counter campaign_difficulty 3
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and CampaignDifficulty = very_hard
        log always ---------------------------very hard difficulty----------------------------------
        set_event_counter campaign_difficulty 4
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and BattleDifficulty = easy
        log always ---------------------------easy difficulty----------------------------------
        set_event_counter battle_difficulty 1
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and BattleDifficulty = medium
        log always ---------------------------medium difficulty----------------------------------
        set_event_counter battle_difficulty 2
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and BattleDifficulty = hard
        log always ---------------------------hard difficulty----------------------------------
        set_event_counter battle_difficulty 3
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        and BattleDifficulty = very_hard
        log always ---------------------------very hard difficulty----------------------------------
        set_event_counter battle_difficulty 4
        terminate_monitor
    end_monitor

    ;########################### Player Setup ##########################
    ; faction starts, runs only once
    monitor_event PreFactionTurnStart FactionIsLocal
        historic_event welcomedac factions { all, } ;opening message, fires for every faction

        ;Dunland Player start
        if not I_IsFactionAIControlled aztecs
            log always ---------------------------dunland player start----------------------------------
            historic_event dunlending_start factions { aztecs, }
            increment_kings_purse aztecs 500
            if I_IsFactionAIControlled teutonic_order
                increment_kings_purse teutonic_order 800
                spawn_army
                    faction teutonic_order
                    character	random_name, named character, age 20, x 173, y 306, family, direction E, label ew_extra_1
                    traits		MiddleManRace 1, EnedwaithClansman 1, AIBoost 1, Berserker 1, GoodAttacker 1, GoodCommander 4, Loyal 2, LoyaltyStarter 1, PietyStarter 1, CustomBG 1, MinhiriathWarrior 1
                    unit		Minhiriath Warriors		exp 3 armour 0 weapon_lvl 0
                end
                console_command create_unit ew_extra_1 "River Swordsmen" 3 2 0 0
                console_command create_unit ew_extra_1 "River Archers" 3 2 0 0
                console_command create_unit ew_extra_1 "Angren Raiders" 2 1 0 0
                spawn_army
                    faction teutonic_order
                    character	random_name, named character, age 20, x 131, y 303, family, direction E
                    traits		MiddleManRace 1, EnedwaithClansman 1, AIBoost 1, Berserker 1, GoodAttacker 1, GoodCommander 4, Loyal 2, LoyaltyStarter 1, PietyStarter 1
                    unit		Angren Raiders			exp 3 armour 0 weapon_lvl 0
                    unit		Angren Raiders			exp 1 armour 0 weapon_lvl 0
                    unit		Angren Raiders			exp 1 armour 0 weapon_lvl 0
                end
            end_if
            if I_IsFactionAIControlled milan
                increment_kings_purse milan 2000
            end_if
            if I_IsFactionAIControlled normans
            and I_SettlementOwner Metraith = slave
                increment_kings_purse normans 500
                spawn_army
                    faction normans
                    character	random_name, named character, age 23, x 167, y 356, family, direction S, label bree_attackers_de
                    traits		MiddleManRace 1, Breelander 1, AIBoost 1, GoodCommander 3, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                    unit		Merchant Infantry					exp 2 armour 0 weapon_lvl 1
                end
                console_command create_unit bree_attackers_de "Merchant Militia" 2 1 0 0
                console_command create_unit bree_attackers_de "Merchant Cavalry" 2 1 1 0
                console_command auto_win attacker
                siege_settlement bree_attackers_de, Metraith, attack
            end_if
        end_if

        ; Dorwinion Player start
        if not I_IsFactionAIControlled byzantium
            log always ---------------------------dorwinion player start----------------------------------
            if I_IsFactionAIControlled venice
                if I_SettlementOwner Rhun = slave
                    increment_kings_purse venice 2000
                    spawn_army
                        faction venice
                        character	random_name, named character, age 23, x 443, y 300, family, direction W, label rhun_attackers_3
                        traits		BadManRace 1, AruladClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Loke-Innas Rim			exp 7 armour 0 weapon_lvl 1
                        unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                        unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                        unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                        unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                        unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                        unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement rhun_attackers_3, Rhun, attack
                end_if
                if I_SettlementOwner Eastrhun = slave
                    spawn_army
                        faction venice
                        character	random_name, named character, age 23, x 420, y 279, family, direction W, label rhun_attackers_D
                        traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, BattleChivalryEvil 1, LogisticalSkill 1, Berserker 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1, BalcothStrat 1, CustomBG 1
                        unit		Balchoth Spearmen					exp 2 armour 0 weapon_lvl 1
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement rhun_attackers_D, Eastrhun, attack
                end_if
            end_if
            if I_IsFactionAIControlled poland
                increment_kings_purse poland 2000
            end_if
        end_if

        ; Dol Amroth Player start
        if not I_IsFactionAIControlled denmark
            log always ---------------------------dol amroth player start----------------------------------
            historic_event amroth_start factions { denmark, }
            if I_IsFactionAIControlled spain
                increment_kings_purse spain 1000
                if I_SettlementOwner South_Mithlond = slave
                    spawn_army
                        faction spain
                        character	random_name, named character, age 26, x 340, y 123, family, direction N, label harad_attackers_9
                        traits		BadManRace 1, Haradrim 1, AIBoost 1, GoodAdministrator 1, GoodAttacker 1, GoodCommander 2, BattleChivalryEvil 2, LogisticalSkill 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1
                        unit		Southron Lancers					exp 5 armour 0 weapon_lvl 0
                        unit		Southron Lancers			exp 2 armour 0 weapon_lvl 0
                        unit		Southron Lancers			exp 2 armour 0 weapon_lvl 0
                        unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                        unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement harad_attackers_9, South_Mithlond, attack
                end_if
                if I_SettlementOwner Far_Harad = slave
                    spawn_army
                        faction spain
                        character	random_name, named character, age 26, x 360, y 75, family, direction S, label harad_attackers_10
                        traits		BadManRace 1, Haradrim 1, AIBoost 1, GoodAdministrator 1, GoodAttacker 1, GoodCommander 2, BattleChivalryEvil 2, LogisticalSkill 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, TrollmenStrat 1, CustomBG 1
                        unit		Troll-men Warriors					exp 5 armour 0 weapon_lvl 0
                    end
                    console_command create_unit harad_attackers_10 "Haradrim Spearmen" 1 2 0 0
                    console_command create_unit harad_attackers_10 "Haradrim Archers" 1 2 0 0

                    console_command auto_win attacker
                    siege_settlement harad_attackers_10, Far_Harad, attack
                end_if
            end_if
            if I_IsFactionAIControlled russia
                increment_kings_purse russia 2500
                console_command create_unit Umbar "Rozadan Footmen" 2 1 0 0
                console_command create_unit Umbar "Rozadan Halberdiers" 3 1 0 0
                console_command create_unit Umbar "Rozadan Bowmen" 2 1 0 0
            end_if
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily -1000
            end_if
            if I_IsFactionAIControlled england
                and I_IsFactionAIControlled sicily
                spawn_army
                    faction england
                    character	random_name, named character, age 26, x 347, y 226, family, hero_ability WHIPING, label mordor_extra_1
                    traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                    unit		Black Uruks					exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit mordor_extra_1 "Black Uruk Halberds" 2 2 0 0
                console_command create_unit mordor_extra_1 "Orc Archers" 2 3 0 0
                console_command create_unit mordor_extra_1 "Black Uruks" 3 2 0 0
                console_command create_unit mordor_extra_1 "Orc Host" 3 0 0 0
                spawn_army
                    faction england
                    character	random_name, named character, age 26, x 348, y 247, family, hero_ability WHIPING, label mordor_extra_2
                    traits		VariagTribe 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                    unit		Variag Lancers					exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit mordor_extra_2 "Southron Warband" 4 3 0 0
                console_command create_unit mordor_extra_2 "Southron Lancers" 2 2 0 0
                console_command create_unit mordor_extra_2 "Loke-Gamp Rim" 2 3 0 0
                console_command create_unit mordor_extra_2 "Loke-Innas Rim" 2 0 0 0
            end_if
            if I_IsFactionAIControlled khand
                if I_SettlementOwner Far_Desert = slave
                    spawn_army
                        faction khand
                        character	random_name, named character, age 31, x 473, y 105, family, direction S, label khand_attackers_3
                        traits		BadManRace 1, VariagTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodAttacker 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1
                        unit		Windriders of Khand				exp 5 armour 1 weapon_lvl 0
                    end
                    console_command create_unit khand_attackers_3 "Khandish Raiders" 2 1 1 0
                    console_command create_unit khand_attackers_3 "Nomad Horsemen" 2 1 1 0
                    console_command auto_win attacker
                    siege_settlement khand_attackers_3, Far_Desert, attack
                end_if
            end_if
        end_if

        ; Mordor Player start
        if not I_IsFactionAIControlled england
            log always ---------------------------mordor player start----------------------------------
            historic_event mordor_start factions { england, }
            historic_event the_tribes factions { england, }
            historic_event nazgul_off factions { england, }
            increment_kings_purse england 500
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily 2000
                add_money sicily 10000
                if I_SettlementOwner East_Osgiliath = slave
                    spawn_army
                        faction sicily
                        character	Maemen, named character, age 22, x 331, y 219, family, direction W, label gondor_attackers_m
                        traits		DunedainRace 1, Gondorian 1, AIBoost 1, Disciplinarian 1, GoodDefender 2, SiegeDefender 3, GoodCommander 2, LogisticalSkill 1, Loyal 3, LoyaltyStarter 1, PietyStarter 1, BattleChivalryGood 2, OneRingAvailable 1
                        unit		Osgiliath Veterans		exp 4 armour 1 weapon_lvl 0
                        unit		Osgiliath Veterans		exp 1 armour 0 weapon_lvl 1
                        unit		Gondor Infantry			exp 2 armour 1 weapon_lvl 0
                        unit		Gondor Infantry			exp 2 armour 1 weapon_lvl 0
                        unit		Gondor Spearmen			exp 2 armour 1 weapon_lvl 0
                        unit		Gondor Spearmen			exp 2 armour 1 weapon_lvl 0
                        unit		Gondor Archers				exp 2 armour 1 weapon_lvl 0
                        unit		Gondor Archers				exp 2 armour 1 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement gondor_attackers_m, East_Osgiliath, attack
                end_if
                spawn_army
                    faction sicily
                    character	random_name, named character, age 26, x 323, y 206, family, battle_model gondor_dol_amroth_officer_swan_knight
                    traits		DunedainRace 1, Amrothian 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, BattleChivalryGood 2
                    unit		Royal Swan-Guard				exp 7 armour 1 weapon_lvl 1
                    unit		Pinnath Gelin Cavalry			exp 3 armour 0 weapon_lvl 0
                    unit		Gondor Infantry			exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Infantry			exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Spearmen			exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Spearmen			exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Archers				exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Archers				exp 2 armour 1 weapon_lvl 0
                end
            end_if
            if I_IsFactionAIControlled denmark
                increment_kings_purse denmark 1800
            end_if
            if I_IsFactionAIControlled milan
                increment_kings_purse milan 1000
            end_if
            if I_IsFactionAIControlled poland
                increment_kings_purse poland -1000
            end_if
        end_if

        ; Gundabad Player start
        if not I_IsFactionAIControlled gundabad
            log always ---------------------------gundabad player start----------------------------------
            historic_event gundabad_start factions { gundabad, }
            if I_IsFactionAIControlled moors
                increment_kings_purse moors 2000
                if I_SettlementOwner Withered = slave
                    spawn_army
                        faction moors
                        character	random_name, named character, age 30, x 313, y 438, family, direction E, label erebor_attackers_3
                        traits		DwarvenRace 1, Longbeard 1, AIBoost 1, Disciplinarian 1, GoodCommander 3, GoodDefender 2, LogisticalSkill 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Dragonslayers         		exp 7 armour 1 weapon_lvl 0
                    end
                    console_command create_unit erebor_attackers_3 "Dragonslayers" 1 3 1 0
                    console_command create_unit erebor_attackers_3 "Iron Hills Mattocks" 3 2 1 0
                    console_command create_unit erebor_attackers_3 "Erebor Infantry" 2 3 1 0
                    console_command create_unit erebor_attackers_3 "Kings Warriors" 2 2 1 0
                    console_command auto_win attacker
                    siege_settlement erebor_attackers_3, Withered, attack
                end_if
                if I_SettlementOwner Grey_Foothills = slave
                    spawn_army
                        faction moors
                        character	random_name, named character, age 35, x 312, y 430, family, direction W, label erebor_attackers_4
                        traits		DwarvenRace 1, Longbeard 1, AIBoost 1, Disciplinarian 1, GoodCommander 3, GoodDefender 2, LogisticalSkill 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Iron Guard         		exp 7 armour 1 weapon_lvl 0
                    end
                    console_command create_unit erebor_attackers_4 "Iron Guard" 2 3 1 0
                    console_command create_unit erebor_attackers_4 "Erebor Infantry" 2 3 1 0
                    console_command create_unit erebor_attackers_4 "Kings Warriors" 2 2 1 0
                    console_command auto_win attacker
                    siege_settlement erebor_attackers_4, Grey_Foothills, attack
                end_if
            end_if
            if I_IsFactionAIControlled timurids
                increment_kings_purse timurids 600
                spawn_army
                    faction timurids
                    character	random_name, named character, age 26, x 283, y 398, family, hero_ability SHIELD, label anduin_extra_1
                    traits		GoodManRace 1, Woodman 1, HeroAbilityShield 1, GoodCommander 3, RiskyDefender 1, KindRuler 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Greenwood Foresters			exp 7 armour 0 weapon_lvl 0
                end
                console_command create_unit anduin_extra_1 "Carrock Guard" 1 4 0 0
                console_command create_unit anduin_extra_1 "Beorning Warriors" 2 3 0 0
                console_command create_unit anduin_extra_1 "Greenwood Foresters" 2 2 0 0
                console_command create_unit anduin_extra_1 "Beorning Shieldbearers" 3 1 0 0
                console_command create_unit anduin_extra_1 "Beorning Riders" 2 4 0 0
                spawn_army
                    faction timurids
                    character	random_name, named character, age 26, x 275, y 428, family, hero_ability SHIELD, label anduin_extra_2
                    traits		GoodManRace 1, Eotheod 1, HeroAbilityShield 1, GoodCommander 3, RiskyDefender 1, KindRuler 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Eotheod Cavalry					exp 7 armour 0 weapon_lvl 0
                end
                console_command create_unit anduin_extra_2 "Eotheod Footmen" 3 3 1 0
                console_command create_unit anduin_extra_2 "Eotheod Longbowmen" 3 2 0 0
                console_command create_unit anduin_extra_2 "Eotheod Horse Archers" 2 4 0 0
                console_command create_unit anduin_extra_2 "Eotheod Cavalry" 2 3 0 0
                if I_SettlementOwner Wrakyaburg = slave
                    spawn_army
                        faction timurids
                        character	random_name, named character, age 24, x 285, y 429, family, direction E, label beorn_attackers_1
                        traits		GoodManRace 1, BeorningRace 1, HeroAbilityShield 1, GoodCommander 2, RiskyDefender 1, KindRuler 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Beorning Warriors			exp 7 armour 1 weapon_lvl 1
                    end
                    console_command create_unit beorn_attackers_1 "Beorning Warriors" 2 1 1 0
                    console_command create_unit beorn_attackers_1 "Eotheod Longbowmen" 1 0 0 0
                    console_command auto_win attacker
                    siege_settlement beorn_attackers_1, Wrakyaburg, attack
                end_if
            end_if
            if I_IsFactionAIControlled mongols
                increment_kings_purse mongols 3000
                console_command create_unit Elven_Mirkwood "Woodland Sentinels" 3 3 1 1
            end_if
            if I_IsFactionAIControlled scotland
                increment_kings_purse scotland 900
            end_if
        end_if

        ; Isengard Player Start
        if not I_IsFactionAIControlled france
            log always ---------------------------isengard player start----------------------------------
            historic_event isengard_start factions { france, }
            historic_event isengard_ring factions { france, }
            kill_character ushgol_1
            increment_kings_purse france 600
            add_money france 1500
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily 1000
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 1200
            end_if
            if I_IsFactionAIControlled ireland
                increment_kings_purse ireland 1200
            end_if
            if I_IsFactionAIControlled turks
                increment_kings_purse turks 1200
            end_if
            if I_IsFactionAIControlled saxons
                increment_kings_purse saxons 1200
            end_if
            if I_IsFactionAIControlled milan
                increment_kings_purse milan 4000
            end_if
        end_if

        ; Moria Player start
        if not I_IsFactionAIControlled hre
            log always ---------------------------moria player start----------------------------------
            historic_event orcs_start factions { hre, }
            increment_kings_purse hre 400
            add_money hre 5000
            if I_IsFactionAIControlled norway
                set_counter give_moria_to_hre 2
            end_if
            if I_IsFactionAIControlled saxons
                increment_kings_purse saxons 2500
                console_command create_unit Imladris "Lindar Bowmen" 3 1 1 0
                console_command create_unit Imladris "Lindar Guards" 3 1 1 1
                console_command create_unit Imladris "Amanyar Riders" 1 1 1 1
                if I_SettlementOwner Mitheithel = slave
                    spawn_army
                        faction saxons
                        character	random_name, named character, age 50, x 240, y 395, family, direction E, label imladris_attackers_3
                        traits		ElvenRace 1, Noldor 1, AIBoost 1, Energetic 1, Handsome 1, GoodAttacker 3, GoodCommander 3, GoodDefender 3, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1, NoldorStrat 1, CustomBG 1
                        unit		Calaquendi Lords			exp 9 armour 1 weapon_lvl 1
                        unit		Amanyar Swordmasters	exp 1 armour 0 weapon_lvl 0
                        unit		Lindar Guards		exp 1 armour 0 weapon_lvl 0
                        unit		Lindar Guards		exp 1 armour 0 weapon_lvl 0
                        unit		Lindar Bowmen		exp 3 armour 0 weapon_lvl 0
                        unit		Lindar Bowmen		exp 3 armour 0 weapon_lvl 0
                        unit		Amanyar Riders		exp 1 armour 0 weapon_lvl 0
                        unit		Amanyar Riders		exp 1 armour 0 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement imladris_attackers_3, Mitheithel, attack
                end_if
            end_if
            if I_IsFactionAIControlled turks
                increment_kings_purse turks 2000
                if I_SettlementOwner Arthedain_Rammas = slave
                    spawn_army
                        faction turks
                        character	random_name, named character, age 27, x 151, y 428, family, direction E, label dunedain_attackers_5
                        traits		DunedainRace 1, DunedainRanger 1, AIBoost 1, GoodAttacker 2, GoodCommander 3, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Dunedain Bodyguard				exp 7 armour 1 weapon_lvl 0
                        unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                        unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                        unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                        unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                        unit		Dunedain Rangers				exp 2 armour 0 weapon_lvl 0
                        unit		Dunedain Rangers				exp 2 armour 0 weapon_lvl 0
                        unit		Cardolan Riders			exp 4 armour 1 weapon_lvl 0
                        unit		Cardolan Riders			exp 4 armour 1 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement dunedain_attackers_5, Arthedain_Rammas, attack
                end_if
            end_if
            if I_IsFactionAIControlled timurids
                increment_kings_purse timurids 600
                spawn_army
                    faction timurids
                    character	random_name, named character, age 26, x 283, y 398, family, hero_ability SHIELD
                    traits		GoodManRace 1, Eotheod 1, HeroAbilityShield 1, GoodCommander 2, RiskyDefender 1, KindRuler 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Skin-Changers					exp 5 armour 0 weapon_lvl 0
                    unit		Beorning Warriors			exp 1 armour 1 weapon_lvl 0
                    unit		Beorning Warriors			exp 1 armour 1 weapon_lvl 0
                    unit		Beorning Warriors			exp 2 armour 0 weapon_lvl 0
                    unit		Beorning Warriors			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Eotheod Longbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Eotheod Longbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Shieldbearers			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Shieldbearers			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Riders			exp 1 armour 0 weapon_lvl 0
                    unit		Beorning Riders			exp 1 armour 0 weapon_lvl 0
                end
            end_if
            if I_IsFactionAIControlled poland
                increment_kings_purse poland -800
            end_if
        end_if

        ; Ered Luin Player Start
        if not I_IsFactionAIControlled hungary
            log always ---------------------------ered luin player start----------------------------------
            historic_event bluedwarves_start factions { hungary, }
            historic_event luin_ring_intro factions { hungary, }
            if I_IsFactionAIControlled portugal
                increment_kings_purse portugal 2000
                console_command create_unit Carn_Dum "Iron Crown Longbowmen" 2 1 0 0
                console_command create_unit Carn_Dum "Iron Crown Halberdiers" 2 1 0 0
                console_command create_unit Carn_Dum "Iron Crown Warriors" 2 1 0 0
            end_if
        end_if

        ; Lorien Player start
        if not I_IsFactionAIControlled ireland
            log always ---------------------------lorien player start----------------------------------
            historic_event galadhrim_start factions { ireland, }
            historic_event silvan_union_start factions { ireland, }
            increment_kings_purse ireland 300
            if I_IsFactionAIControlled poland
                increment_kings_purse poland 1600
            end_if
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad 1800
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 500
            end_if
        end_if

        ; Khand Player start
        if not I_IsFactionAIControlled khand
            log always ---------------------------khand player start----------------------------------
            historic_event khand_start factions { khand, }
            if I_IsFactionAIControlled spain
                if I_SettlementOwner Far_Harad = slave
                    spawn_army
                        faction spain
                        character	random_name, named character, age 26, x 360, y 75, family, direction S, label harad_attackers_10
                        traits		BadManRace 1, Haradrim 1, AIBoost 1, GoodAdministrator 1, GoodAttacker 1, GoodCommander 2, BattleChivalryEvil 2, LogisticalSkill 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, TrollmenStrat 1, CustomBG 1
                        unit		Troll-men Warriors			exp 5 armour 0 weapon_lvl 0
                    end
                    console_command create_unit harad_attackers_10 "Haradrim Spearmen" 1 2 0 0
                    console_command create_unit harad_attackers_10 "Haradrim Archers" 1 2 0 0
                    console_command auto_win attacker
                    siege_settlement harad_attackers_10, Far_Harad, attack
                    console_command create_unit Far_Harad "Mumakil"
                end_if
            end_if
        end_if

        ; Rohan Player start
        if not I_IsFactionAIControlled milan
            log always ---------------------------rohan player start----------------------------------
            historic_event rohan_start factions { milan, }
            historic_event glittering_caves factions { milan, }
            historic_event theoden_deceived factions { milan, }
            if I_IsFactionAIControlled france
                increment_kings_purse france 4000
                add_money france 10000
                console_command create_unit Nan_Curunir "Uruk-hai Infantry" 1 1 0 0
                console_command create_unit Nan_Curunir "Uruk-hai Pikemen" 1 1 0 0
                console_command create_unit Nan_Curunir "Half Orc Baneguard" 2 1 0 0
                console_command create_unit Nan_Curunir "Half Orc Spearmen" 2 1 0 0
                spawn_army
                    faction france, sub_faction aztecs
                    character	Luag, named character, age 34, x 222, y 273, family, portrait Luag, battle_model dunland_general
                    traits		Luag 1, CustomBG 1, MiddleManRace 1, Dunlending 1, AIBoost 1, Drink 1, GoodAttacker 1, GoodCommander 3, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1, Wulfingir 1
                    unit		Brehins Oathband				exp 5 armour 0 weapon_lvl 0
                    unit		Dunnish Warspear-Throng				exp 2 armour 2 weapon_lvl 0
                    unit		Dunnish Warspear-Throng				exp 2 armour 2 weapon_lvl 0
                    unit		Dunnish Warspear-Throng				exp 2 armour 2 weapon_lvl 0
                    unit		Dunnish Warspear-Throng				exp 2 armour 2 weapon_lvl 0
                    unit		Huntmasters			exp 3 armour 1 weapon_lvl 0
                    unit		Huntmasters			exp 3 armour 1 weapon_lvl 0
                    unit		Huntmasters			exp 3 armour 1 weapon_lvl 0
                    unit		Dunforgoil Riders			exp 1 armour 1 weapon_lvl 1
                    unit		Dunforgoil Riders			exp 1 armour 1 weapon_lvl 1
                    unit		Dunforgoil Riders			exp 1 armour 1 weapon_lvl 1
                end
                spawn_army
                    faction aztecs
                    character	Karstaizir, named character, age 22, x 222, y 266, family
                    traits		MiddleManRace 1, Dunlending 1, AIBoost 1, Drink 1, GoodAttacker 1, GoodCommander 1, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1, DaenRaider 4, Wulfingir 1
                    unit		Brehins Oathband			exp 5 armour 0 weapon_lvl 0
                    unit		Horse-fellers						exp 2 armour 2 weapon_lvl 0
                    unit		Horse-fellers						exp 2 armour 2 weapon_lvl 0
                    unit		Horse-fellers						exp 2 armour 2 weapon_lvl 0
                    unit		Dunnish Derfelmen				exp 2 armour 2 weapon_lvl 0
                    unit		Hillsteed Riders				exp 2 armour 2 weapon_lvl 0
                    unit		Huntmasters					exp 3 armour 1 weapon_lvl 0
                    unit		Huntmasters					exp 3 armour 1 weapon_lvl 0
                    unit		Brehins Sword-Wielders			exp 1 armour 1 weapon_lvl 1
                    unit		Brehins Sword-Wielders			exp 1 armour 1 weapon_lvl 1
                    unit		Dunforgoil Riders				exp 1 armour 1 weapon_lvl 1
                end
                console_command create_unit amon_hen_custom1 "Orc Scouts" 2 2 0 0
                console_command create_unit amon_hen_custom1 "Raider Warband" 2 1 1 0
                console_command create_unit amon_hen_custom1 "Raider Skirmishers" 2 0 0 0
            end_if
            if I_IsFactionAIControlled aztecs
                increment_kings_purse aztecs 3000
            end_if
            if I_IsFactionAIControlled poland
                increment_kings_purse poland 1200
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 1200
            end_if
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily -1200
            end_if
        end_if

        ; Woodland Realm Player start
        if not I_IsFactionAIControlled mongols
            log always ---------------------------wr player start----------------------------------
            historic_event thranduil_start factions { mongols, }
            historic_event silvan_union_start factions { mongols, }
            if I_IsFactionAIControlled poland
                increment_kings_purse poland 1200
                if I_SettlementOwner Far_Rhovanion = slave
                    spawn_army
                        faction poland
                        character	random_name, named character, age 24, x 327, y 377, family, direction E, label mirkwood_attackers_thran
                        traits		OrcRace 1, AIBoost 1, Brave 2, Disciplinarian 1, GoodCommander 3, GoodDefender 2, LogisticalSkill 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, OneRingAvailable 1
                        unit		Mirkwood Uruks				exp 7 armour 1 weapon_lvl 1
                    end
                    console_command create_unit mirkwood_attackers_thran "Dol Guldur Host" 2 3 0 0
                    console_command create_unit mirkwood_attackers_thran "Dol Guldur Archers" 2 2 1 0
                    console_command auto_win attacker
                    siege_settlement mirkwood_attackers_thran, Far_Rhovanion, attack
                end_if
            end_if
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad 2000
            end_if
        end_if

        ;Erebor Player start
        if not I_IsFactionAIControlled moors
            log always ---------------------------erebor player start----------------------------------
            historic_event erebor_start factions { moors, }
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad 3000
                add_money gundabad 10000
                if I_SettlementOwner Withered = slave
                    spawn_army
                        faction gundabad
                        character	random_name, named character, age 26, x 313, y 438, family, direction E, label gund_attackers_4
                        traits		SnowRace 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, OneRingAvailable 1, Bolg 1, CustomBG 1
                        unit		Bolgs Champions			    exp 5 armour 0 weapon_lvl 0
                    end
                    console_command create_unit gund_attackers_4 "Bolgs Champions" 1 3 0 0
                    console_command create_unit gund_attackers_4 "Snow-Orc Spearmen" 3 2 0 0
                    console_command create_unit gund_attackers_4 "Snow-Orc Raiders" 2 2 0 0
                    console_command create_unit gund_attackers_4 "Snow-Orc Scouts" 2 3 0 0
                    console_command auto_win attacker
                    siege_settlement gund_attackers_4, Withered, attack
                end_if
                if I_SettlementOwner Grey_Foothills = slave
                    spawn_army
                        faction gundabad
                        character	random_name, named character, age 27, x 311, y 430, family, direction E, label gund_attackers_5
                        traits		SnowRace 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 3, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, OneRingAvailable 1
                        unit		Mountain Guard			exp 9 armour 1 weapon_lvl 0
                        unit		Snow-Orc Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Snow-Orc Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Snow-Orc Spearmen			exp 2 armour 0 weapon_lvl 0
                        unit		Snow-Orc Spearmen			exp 2 armour 0 weapon_lvl 0
                        unit		Snow-Orc Spearmen			exp 2 armour 0 weapon_lvl 0
                        unit		Snow-Orc Scouts			exp 3 armour 0 weapon_lvl 0
                        unit		Snow-Orc Scouts			exp 3 armour 0 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement gund_attackers_5, Grey_Foothills, attack
                end_if
            end_if
            if I_IsFactionAIControlled venice
                increment_kings_purse venice 1500
                add_money venice 800
                if I_IsFactionAIControlled byzantium
                    if I_SettlementOwner Rhun = slave
                        spawn_army
                            faction venice
                            character	random_name, named character, age 23, x 443, y 300, family, direction W, label rhun_attackers_3
                            traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                            unit		Loke-Innas Rim			exp 2 armour 0 weapon_lvl 1
                            unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                            unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                            unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                            unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                            unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                            unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                            unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                            unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                            unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                            unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                            unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement rhun_attackers_3, Rhun, attack
                    end_if
                end_if
                if I_SettlementOwner Wintirion = slave
                    spawn_army
                        faction venice
                        character	random_name, named character, age 23, x 460, y 341, family, direction W, label rhun_attackers_e
                        traits		BadManRace 1, AruladClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                        unit		Loke Rim Bodyguard					exp 2 armour 0 weapon_lvl 1
                        unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                        unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                    end
                    console_command auto_win attacker
                    siege_settlement rhun_attackers_e, Wintirion, attack
                end_if
            end_if
        end_if

        ; Bree Player start
        if not I_IsFactionAIControlled normans
            log always ---------------------------bree player start----------------------------------
            historic_event shire_start factions { normans, }
            historic_event bree_choice_intro factions { normans, }
            historic_event forsaken_inn_intro factions { normans, }
            if I_IsFactionAIControlled aztecs
                increment_kings_purse aztecs 800
                spawn_army
                    faction aztecs
                    character	random_name, named character, age 26, x 180, y 318, family, direction E, label dunland_attackers_2
                    traits		MiddleManRace 1, Dunlending 1,  AIBoost 1, Berserker 1, GoodAttacker 2, GoodCommander 2, BattleChivalryEvil 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, DaenRaider 4, Isendraich 1
                    unit		Isendraich Towersworn			exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit dunland_attackers_2 "Huntmasters" 2 3 1 0
                console_command create_unit dunland_attackers_2 "Dunnish Warspear-Throng" 2 1 0 0
                console_command create_unit dunland_attackers_2 "Hillsteed Riders" 2 3 0 0
                console_command create_unit dunland_attackers_2 "Dunforgoil Riders" 1 1 0 0
            end_if
            if I_IsFactionAIControlled portugal
                increment_kings_purse portugal 2500
            end_if
        end_if

        ; Khazad-dum Player start
        if not I_IsFactionAIControlled norway
            log always ---------------------------kd player start----------------------------------
            historic_event khazad_start factions { norway, }
            set_counter give_moria_to_hre 1
        end_if

        ; Angmar Player start
        if not I_IsFactionAIControlled portugal
            log always ---------------------------angmar player start----------------------------------
            historic_event angmar_start factions { portugal, }
            add_money portugal 3000
            if I_IsFactionAIControlled turks
                increment_kings_purse turks 2000
                add_money turks 900
            end_if
            if I_IsFactionAIControlled saxons
                increment_kings_purse saxons 2000
                add_money saxons 1800
                console_command create_unit Imladris "Lindar Bowmen" 2 1 1 0
                console_command create_unit Imladris "Lindar Guards" 2 1 1 1
                console_command create_unit Imladris "Amanyar Riders" 1 1 1 1
                if I_IsFactionAIControlled hre
                    if I_SettlementOwner Mitheithel = slave
                        spawn_army
                            faction saxons
                            character	random_name, named character, age 50, x 240, y 395, family, direction E, label imladris_attackers_1
                            traits		ElvenRace 1, Noldor 1, AIBoost 1, Energetic 1, Handsome 1, GoodAttacker 3, GoodCommander 3, GoodDefender 3, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1, NoldorStrat 1, CustomBG 1
                            unit		Calaquendi Lords			exp 9 armour 1 weapon_lvl 1
                            unit		Amanyar Swordmasters		exp 1 armour 0 weapon_lvl 0
                            unit		Lindar Guards		exp 1 armour 0 weapon_lvl 0
                            unit		Lindar Bowmen		exp 3 armour 0 weapon_lvl 0
                            unit		Amanyar Riders		exp 1 armour 0 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement imladris_attackers_1, Mitheithel, attack
                    end_if
                end_if
            end_if
            if I_IsFactionAIControlled hungary
                increment_kings_purse hungary 1000
            end_if
            if I_IsFactionAIControlled hre
                increment_kings_purse hre -2000
            end_if
            if I_IsFactionAIControlled hungary
                if I_SettlementOwner Forochel = slave
                    spawn_army
                        faction hungary
                        character	random_name, named character, age 23, x 106, y 455, family, direction E, label eredluin_attackers_1
                        traits		DwarvenRace 1, Broadbeam 1, Drink 1, Energetic 1, GoodCommander 2, GoodDefender 2, HaleAndHearty 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                        unit		Broadbeam Marksmen					exp 9 armour 1 weapon_lvl 0
                    end
                    console_command create_unit eredluin_attackers_1 "Ered Luin Pikemen" 3 3 0 0
                    console_command create_unit eredluin_attackers_1 "Firebeard Warriors" 2 2 0 0
                    console_command auto_win attacker
                    siege_settlement eredluin_attackers_1, Forochel, attack
                end_if
            end_if
            if I_IsFactionAIControlled turks
                spawn_army
                    faction turks
                    character	random_name, named character, age 27, x 180, y 401, family, label nd_extra_1
                    traits		DunedainRace 1, DunedainRanger 1, AIBoost 1, GoodAttacker 2, GoodCommander 3, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Cardolan Riders				exp 7 armour 1 weapon_lvl 0
                end
                console_command create_unit nd_extra_1 "Dunedain Wardens" 2 3 1 0
                console_command create_unit nd_extra_1 "Cardolan Sentinels" 2 2 1 0
                console_command create_unit nd_extra_1 "Cardolan Riders" 3 4 1 0
                console_command create_unit nd_extra_1 "Dunedain Scouts" 1 4 1 0
                if I_IsFactionAIControlled hre
                    if I_SettlementOwner Arthedain_Rammas = slave
                        spawn_army
                            faction turks
                            character	random_name, named character, age 26, x 151, y 428, family, direction E, label dunedain_attackers_4
                            traits		DunedainRace 1, DunedainRanger 1, AIBoost 1, GoodAttacker 3, GoodCommander 3, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                            unit		Dunedain Bodyguard				exp 7 armour 1 weapon_lvl 0
                            unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                            unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                            unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                            unit		Dunedain Wardens		exp 3 armour 1 weapon_lvl 0
                            unit		Dunedain Rangers				exp 2 armour 0 weapon_lvl 0
                            unit		Dunedain Rangers				exp 2 armour 0 weapon_lvl 0
                            unit		Cardolan Riders			exp 4 armour 1 weapon_lvl 0
                            unit		Cardolan Riders			exp 4 armour 1 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement dunedain_attackers_4, Arthedain_Rammas, attack
                    end_if
                end_if
            end_if
            if I_IsFactionAIControlled normans
                spawn_army
                    faction normans
                    character	random_name, named character, age 25, x 187, y 388, family, label bree_extra_1
                    traits		MiddleManRace 1, Breelander 1, AIBoost 1, GoodCommander 3, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                    unit		Merchant Infantry		exp 7 armour 0 weapon_lvl 1
                end
                console_command create_unit bree_extra_1 "Merchant Cavalry" 2 3 1 0
                console_command create_unit bree_extra_1 "Watch Shirriffs" 3 2 0 0
            end_if
        end_if

        ; Dol Guldur Player start
        if not I_IsFactionAIControlled poland
            log always ---------------------------dg player start----------------------------------
            historic_event shadow_start factions { poland, }
            if I_IsFactionAIControlled scotland
                increment_kings_purse scotland 800
            end_if
            if I_IsFactionAIControlled timurids
                increment_kings_purse timurids 600
                spawn_army
                    faction timurids
                    character	random_name, named character, age 26, x 283, y 398, family, hero_ability SHIELD
                    traits		BeorningRace 1, HeroAbilityShield 1, GoodCommander 2, RiskyDefender 1, KindRuler 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Skin-Changers					exp 5 armour 0 weapon_lvl 0
                    unit		Beorning Warriors			exp 1 armour 1 weapon_lvl 0
                    unit		Beorning Warriors			exp 1 armour 1 weapon_lvl 0
                    unit		Beorning Warriors			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Woodmen Trackers			exp 2 armour 0 weapon_lvl 0
                    unit		Eotheod Longbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Eotheod Longbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Shieldbearers			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Shieldbearers			exp 0 armour 0 weapon_lvl 0
                    unit		Beorning Riders			exp 1 armour 0 weapon_lvl 0
                    unit		Beorning Riders			exp 1 armour 0 weapon_lvl 0
                end
            end_if
            if I_IsFactionAIControlled ireland
                increment_kings_purse ireland 2000
                console_command create_unit Celebrant "Lothlorien Marchwardens" 3 2 1 1
                console_command create_unit Celebrant "Lorien Lancers" 2 2 1 1
                console_command create_unit Celebrant "Lorien Sentries" 2 2 1 1
            end_if
            if I_IsFactionAIControlled mongols
                increment_kings_purse mongols 2500
                console_command create_unit Elven_Mirkwood "Woodland Spearmen" 2 2 1 1
                console_command create_unit Elven_Mirkwood "Woodland Sentinels" 3 2 1 1
                console_command create_unit Elven_Mirkwood "Woodland Horsearchers" 2 2 1 1
            end_if
        end_if

        ; AA Player start
        if not I_IsFactionAIControlled russia
            log always ---------------------------AA player start----------------------------------
            historic_event umbar_start factions { russia, }
            snap_strat_camera 210, 55
            campaign_wait 1
            console_command surrender_regions russia
            campaign_wait 1
            unfreeze_faction_ai russia
            console_command create_unit Far_Harad "Mumakil"
            if I_SettlementOwner Umbar = slave
                console_command create_unit Umbar "Hasharii Blades" 2 2 0 0
                console_command create_unit Umbar "Hasharii Shadows" 1 2 0 0
                console_command create_unit Umbar "Southron Pikemen" 3 2 0 0
                console_command create_unit Umbar "Southron Warband" 2 2 0 0
                console_command create_unit Umbar "Southron Archers" 2 2 0 0
                console_command create_unit Umbar "Haradrim Spearmen" 4 2 0 0
                console_command create_unit Umbar "Haradrim Archers" 3 2 0 0
                console_command create_unit Umbar "Serpent Bladesmen" 2 2 0 0
                console_command create_unit Umbar "Serpent Archers" 1 2 0
            end_if
            move_strat_camera 265, 81
            spawn_character russia, Zagarakhor, diplomat, age 21, x 265, y 82
            console_command give_trait Zagarakhor NaturalDiplomatSkill 2
            console_command give_trait Zagarakhor GoodDiplomat 4
            console_command give_ancillary Zagarakhor numenorean_ancestry
            console_command give_ancillary Zagarakhor umbar_spy
            spawn_character russia, Indrazor, spy, age 21, x 289, y 77
            console_command give_trait Indrazor SpySkill 4
            console_command give_trait Indrazor NaturalSpySkill  1
            console_command give_ancillary Indrazor coin_bag
            console_command give_ancillary Indrazor black_cat
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily 1500
            end_if
            if I_IsFactionAIControlled denmark
                increment_kings_purse denmark 2000
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 2000
            end_if
            if I_IsFactionAIControlled turks
                increment_kings_purse turks 2000
            end_if
        end_if

        ; High Elves Player Start
        if not I_IsFactionAIControlled saxons
            log always ---------------------------HE player start----------------------------------
            historic_event lindon_start factions { saxons, }
            historic_event elven_barracks factions { saxons, }
            historic_event elven_generals factions { saxons, }
            if I_IsFactionAIControlled hre
                increment_kings_purse hre 1800
                console_command create_unit Hollin "Warg Riders" 2 1 0 0
                console_command create_unit Hollin "Heavy Goblin Infantry" 3 1 0 0
                console_command create_unit Central_Mountains "Heavy Goblin Infantry" 2 1 0 0
                console_command create_unit Central_Mountains "Heavy Goblin Archers" 2 1 0 0
                console_command create_unit Central_Mountains "Warg Riders" 2 1 0 0
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 1000
            end_if
            if I_IsFactionAIControlled portugal
                increment_kings_purse portugal 2800
                console_command create_unit Carn_Dum "Iron Crown Longbowmen" 1 1 0 0
                console_command create_unit Carn_Dum "Iron Crown Halberdiers" 3 1 0 0
                console_command create_unit Carn_Dum "Iron Crown Warriors" 2 1 0 0
            end_if
            send_character_off_map elladan_1
            send_character_off_map elrohir_1
            destroy_units saxons Dunedain Bodyguard
            console_command create_unit Forlindon "Lindon Longspears" 1 0 0 0
            console_command create_unit Forlindon "Lindar Bowmen" 1 0 0 0
            console_command create_unit Harlindon "Lindon Longspears" 1 0 0 0
            console_command create_unit Harlindon "Lindar Mariners" 1 0 0 0
        end_if

        ; Dale Player start
        if not I_IsFactionAIControlled scotland
            log always ---------------------------Dale player start----------------------------------
            historic_event dale_start factions { scotland, }
            historic_event allegiances factions { scotland, }
            increment_kings_purse scotland -100
            if I_IsFactionAIControlled venice
                increment_kings_purse venice 1500
                add_money venice 10000
                if I_IsFactionAIControlled byzantium
                    and I_IsFactionAIControlled moors
                    if I_SettlementOwner Rhun = slave
                        spawn_army
                            faction venice
                            character	random_name, named character, age 23, x 443, y 300, family, direction W, label rhun_attackers_3
                            traits		BadManRace 1, AruladClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                            unit		Loke-Innas Rim			exp 2 armour 0 weapon_lvl 1
                            unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                            unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                            unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                            unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                            unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                            unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                            unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                            unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                            unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                            unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                            unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                            unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement rhun_attackers_3, Rhun, attack
                    end_if
                end_if
                if I_IsFactionAIControlled moors
                    if I_SettlementOwner Wintirion = slave
                        spawn_army
                            faction venice
                            character	random_name, named character, age 23, x 460, y 341, family, direction W, label rhun_attackers_d
                            traits		BadManRace 1, AruladClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, OneRingAvailable 1
                            unit		Loke Rim Bodyguard					exp 2 armour 0 weapon_lvl 1
                            unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                            unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement rhun_attackers_d, Wintirion, attack
                    end_if
                end_if
            end_if
            if I_IsFactionAIControlled poland
                increment_kings_purse poland 1600
                if I_IsFactionAIControlled mongols
                    if I_SettlementOwner Far_Rhovanion = slave
                        spawn_army
                            faction poland
                            character	random_name, named character, age 24, x 327, y 377, family, direction E, label mirkwood_attackers_dale
                            traits		OrcRace 1, AIBoost 1, Brave 2, Disciplinarian 1, GoodCommander 3, GoodDefender 2, LogisticalSkill 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, OneRingAvailable 1
                            unit		Mirkwood Uruks				exp 7 armour 0 weapon_lvl 0
                            unit		Dol Guldur Host				exp 3 armour 0 weapon_lvl 0
                            unit		Dol Guldur Host				exp 3 armour 0 weapon_lvl 0
                            unit		Dol Guldur Archers			exp 1 armour 1 weapon_lvl 0
                            unit		Dol Guldur Archers			exp 1 armour 1 weapon_lvl 0
                        end
                        console_command auto_win attacker
                        siege_settlement mirkwood_attackers_dale, Far_Rhovanion, attack
                    end_if
                end_if
            end_if
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad 2000
            end_if
            if I_IsFactionAIControlled byzantium
                increment_kings_purse byzantium -500
            end_if
            console_command create_unit Celduin_North "Rhovanion Spearmen" 2 1 0 0
            console_command create_unit Celduin_North "Rhovanion Hunters" 2 1 0 1
            console_command create_unit Far_Rhovanion "Rhovanion Spearmen" 1 1 0 0
            console_command create_unit Far_Rhovanion "Rhovanion Hunters" 2 1 0 0
        end_if

        ; Gondor Player start
        if not I_IsFactionAIControlled sicily
            log always ---------------------------Gondor player start----------------------------------
            historic_event gondor_start factions { sicily, }
            if I_IsFactionAIControlled england
                add_money england 10000
                increment_kings_purse england 2000
                console_command create_unit Morgul_Vale "Black Uruks" 3 3 0 0
                console_command create_unit Morgul_Vale "Orc Archers" 2 3 0 0
                spawn_army
                    faction england
                    character	random_name, named character, age 26, x 347, y 226, family, hero_ability WHIPING, label mordor_extra_3
                    traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                    unit		Black Uruk Halberds		exp 7 armour 0 weapon_lvl 0
                end
                console_command create_unit mordor_extra_3 "Black Uruk Archers" 1 2 0 0
                console_command create_unit mordor_extra_3 "Orc Archers" 2 2 0 0
                console_command create_unit mordor_extra_3 "Black Uruks" 1 3 0 0
                console_command create_unit mordor_extra_3 "Morgul Chosen" 1 3 0 0
                console_command create_unit mordor_extra_3 "Orc Host" 2 1 0 0
                spawn_army
                    faction england
                    character	random_name, named character, age 26, x 348, y 247, family, hero_ability WHIPING, label mordor_extra_4
                    traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                    unit		Variag Lancers			exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit mordor_extra_4 "Southron Warband" 2 2 0 0
                console_command create_unit mordor_extra_4 "Loke-Gamp Rim" 2 2 0 0
                console_command create_unit mordor_extra_4 "Loke-Innas Rim" 2 0 0 0
            end_if
            if I_IsFactionAIControlled spain
                increment_kings_purse spain 2050
                if I_IsFactionAIControlled denmark
                    if I_SettlementOwner South_Mithlond = slave
                        spawn_army
                            faction spain
                            character	random_name, named character, age 26, x 340, y 123, family, direction N, label harad_attackers_8
                            traits		BadManRace 1, Haradrim 1, AIBoost 1, GoodAdministrator 1, GoodAttacker 1, GoodCommander 2, BattleChivalryEvil 2, LogisticalSkill 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, HashariiStrat 1, CustomBG 1
                            unit		Hasharii Blades				exp 5 armour 0 weapon_lvl 0
                        end
                        console_command create_unit harad_attackers_8 "Southron Warband" 2 2 0 0
                        console_command create_unit harad_attackers_8 "Southron Lancers" 2 2 0 0
                        console_command auto_win attacker
                        siege_settlement harad_attackers_8, South_Mithlond, attack
                    end_if
                end_if
            end_if
            if I_IsFactionAIControlled denmark
                increment_kings_purse denmark -1200
            end_if
            if I_IsFactionAIControlled khand
                if I_IsFactionAIControlled denmark
                    if I_SettlementOwner Far_Desert = slave
                        spawn_army
                            faction khand
                            character	random_name, named character, age 31, x 473, y 105, family, direction S, label khand_attackers_3
                            traits		BadManRace 1, VariagTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodAttacker 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1, OneRingAvailable 1
                            unit		Variag Horse Archers			exp 5 armour 1 weapon_lvl 0
                        end
                        console_command create_unit khand_attackers_3 "Khandish Raiders" 3 1 1 0
                        console_command create_unit khand_attackers_3 "Nomad Horsemen" 2 1 1 0
                        console_command auto_win attacker
                        siege_settlement khand_attackers_3, Far_Desert, attack
                    end_if
                end_if
            end_if
        end_if

        ; Harad Player start
        if not I_IsFactionAIControlled spain
            log always ---------------------------harad player start----------------------------------
            historic_event harad_start factions { spain, }
            console_command create_unit Far_Harad "Mumakil"
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily 1600
            end_if
            if I_IsFactionAIControlled khand
                increment_kings_purse denmark 1800
                spawn_army
                    faction denmark
                    character	random_name, named character, age 26, x 279, y 156, family, direction W, label DA_attackers_4
                    traits		DunedainRace 1, Amrothian 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                    unit		Nimrodel Mariners     			exp 2 armour 1 weapon_lvl 0
                end
                console_command create_unit DA_attackers_4 "Nimrodel Mariners" 1 1 0 0
                console_command create_unit DA_attackers_4 "Amrothian Squires" 2 1 0 0
                console_command create_unit DA_attackers_4 "Amrothian Guardsmen" 2 1 0 0
                console_command auto_win attacker
                siege_settlement DA_attackers_4, Barad_Harn, attack
            end_if
            spawn_army
                faction slave, sub_faction spain
                character	Siraj, named character, age 24, x 366, y 131, family
                traits		BadManRace 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Muhad Beastmasters		    exp 4 armour 0 weapon_lvl 0
                unit		Muhad Tribesmen		    	exp 2 armour 0 weapon_lvl 0
                unit		Muhad Tribesmen		    	exp 2 armour 0 weapon_lvl 0
                unit		Haradrim Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Haradrim Spearmen			exp 1 armour 1 weapon_lvl 0
            end
            spawn_army
                faction slave, sub_faction spain
                character	Tahar, named character, age 24, x 310, y 128, family
                traits		BadManRace 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Black Snake Guard					exp 2 armour 0 weapon_lvl 0
                unit		Southron Lancers			exp 0 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 1 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 1 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 1 weapon_lvl 0
                unit		Southron Archers			exp 2 armour 1 weapon_lvl 0
                unit		Haradrim Archers			exp 0 armour 0 weapon_lvl 0
                unit		Haradrim Archers			exp 0 armour 0 weapon_lvl 0
            end
            spawn_army
                faction slave, sub_faction spain
                character	Saahir, named character, age 24, x 282, y 145, family
                traits		BadManRace 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Black Snake Guard					exp 2 armour 0 weapon_lvl 0
                unit		Southron Lancers			exp 0 armour 0 weapon_lvl 0
                unit		Southron Pikemen			exp 2 armour 0 weapon_lvl 0
                unit		Southron Pikemen			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Archers			exp 2 armour 0 weapon_lvl 0
                unit		Haradrim Archers			exp 0 armour 0 weapon_lvl 0
                unit		Haradrim Archers			exp 0 armour 0 weapon_lvl 0
            end
        end_if

        ; Enedwaith Player start
        if not I_IsFactionAIControlled teutonic_order
            log always ---------------------------enedwaith player start----------------------------------
            historic_event enedwaith_start factions { teutonic_order, }
            historic_event enedwaith_united_start factions { teutonic_order, }
            if I_IsFactionAIControlled aztecs
                increment_kings_purse aztecs 2000
                if I_IsFactionAIControlled normans
                    spawn_army
                        faction aztecs
                        character	random_name, named character, age 26, x 180, y 318, family, direction E, label dunland_attackers_2
                        traits		MiddleManRace 1, Dunlending 1, AIBoost 1, Berserker 1, GoodAttacker 2, GoodCommander 2, BattleChivalryEvil 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, DaenRaider 4, Wulfingir 1
                        unit		Brehins Oathband			exp 3 armour 0 weapon_lvl 0
                        unit		Huntmasters		exp 2 armour 1 weapon_lvl 0
                        unit		Dunnish Warspear-Throng			exp 1 armour 0 weapon_lvl 0
                        unit		Dunnish Warspear-Throng			exp 1 armour 0 weapon_lvl 0
                        unit		Hillsteed Riders		exp 3 armour 0 weapon_lvl 0
                        unit		Hillsteed Riders		exp 3 armour 0 weapon_lvl 0
                        unit		Dunforgoil Riders		exp 1 armour 0 weapon_lvl 0
                    end
                end_if
            end_if
            if I_IsFactionAIControlled normans
                increment_kings_purse normans 2000
                if I_IsFactionAIControlled aztecs
                    if I_SettlementOwner Metraith = slave
                        spawn_army
                            faction normans
                            character	random_name, named character, age 23, x 167, y 356, family, direction S, label bree_attackers_de
                            traits		MiddleManRace 1, Breelander 1, AIBoost 1, GoodCommander 3, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                            unit		Merchant Infantry					exp 2 armour 0 weapon_lvl 1
                        end
                        console_command create_unit bree_attackers_de "Merchant Militia" 2 1 0 0
                        console_command create_unit bree_attackers_de "Merchant Cavalry" 2 1 1 0
                        console_command auto_win attacker
                        siege_settlement bree_attackers_de, Metraith, attack
                    end_if
                end_if
            end_if
            increment_kings_purse teutonic_order 800
            console_command create_unit Druwaith_Iaur "Greyflood Raiders" 2 2 0 0
            console_command create_unit Druwaith_Iaur "Enedwaith Hunters" 2 1 0 0
        end_if

        ; Anduin Player start
        if not I_IsFactionAIControlled timurids
            log always ---------------------------anduin player start----------------------------------
            historic_event anduin_start factions { timurids, }
            if I_IsFactionAIControlled hre
                increment_kings_purse hre 900
            end_if
            if I_IsFactionAIControlled poland
                console_command create_unit Deep_Mirkwood  "Warg Marauders" 2 1 0 0
                increment_kings_purse poland 1600
            end_if
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad 1800
                spawn_army
                    faction gundabad
                    character	random_name, named character, age 24, x 255, y 437, family
                    traits		SnowRace 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                    unit		Mountain Guard					exp 4 armour 0 weapon_lvl 0
                    unit		Snow-Orc Spearmen				exp 2 armour 0 weapon_lvl 0
                    unit		Snow-Orc Spearmen				exp 2 armour 0 weapon_lvl 0
                    unit		Snow-Orc Raiders	    		exp 1 armour 0 weapon_lvl 0
                    unit		Snow-Orc Raiders	    		exp 1 armour 0 weapon_lvl 0
                    unit		Snow-Orc Scouts	    			exp 1 armour 0 weapon_lvl 0
                    unit		Snow-Orc Scouts	    			exp 1 armour 0 weapon_lvl 0
                end
            end_if
        end_if

        ; ND Player start
        if not I_IsFactionAIControlled turks
            log always ---------------------------nd player start----------------------------------
            historic_event dunedain_start factions { turks, }
            if I_IsFactionAIControlled portugal
                increment_kings_purse portugal 2000
                add_money portugal 2000
                console_command create_unit Carn_Dum "Iron Crown Longbowmen" 2 4 1 1
                console_command create_unit Carn_Dum "Iron Crown Halberdiers" 2 4 1 1
                console_command create_unit Carn_Dum "Iron Crown Warriors" 2 4 1 1
            end_if
            if I_IsFactionAIControlled sicily
                increment_kings_purse sicily -800
            end_if
            if I_IsFactionAIControlled england
                increment_kings_purse england 1000
            end_if
            if I_IsFactionAIControlled hre
                increment_kings_purse hre -1000
            end_if
            if I_IsFactionAIControlled aztecs
                and I_IsFactionAIControlled teutonic_order
                and I_IsFactionAIControlled normans
                spawn_army
                    faction aztecs
                    character	random_name, named character, age 26, x 180, y 318, family, direction E, label dunland_attackers_2
                    traits		MiddleManRace 1, Dunlending 1,  AIBoost 1, Berserker 1, GoodAttacker 2, GoodCommander 2, BattleChivalryEvil 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Energetic 1, OneRingAvailable 1, DaenRaider 4, Isendraich 1
                    unit		Isendraich Towersworn			exp 7 armour 0 weapon_lvl 0
                end
                console_command create_unit dunland_attackers_2 "Huntmasters" 2 2 1 0
                console_command create_unit dunland_attackers_2 "Dunnish Warspear-Throng" 2 1 0 0
                console_command create_unit dunland_attackers_2 "Hillsteed Riders" 2 3 0 0
                console_command create_unit dunland_attackers_2 "Dunforgoil Riders" 1 1 0 0
            end_if
        end_if

        ; Rhun Player Start
        if not I_IsFactionAIControlled venice
            log always ---------------------------rhun player start----------------------------------
            historic_event rhun_start factions { venice, }
            console_command create_unit Farest_Rhun "Rhovanion Spearmen" 1 2 0 1
            console_command create_unit Farest_Rhun "Rhovanion Hunters" 2 1 0 0
            console_command create_unit Tirith_Thoron "Rhovanion Riders" 1 2 1 0
            console_command create_unit Tirith_Thoron "Rhovanion Spearmen" 2 1 0 1
            console_command create_unit Tirith_Thoron "Rhovanion Hunters" 2 1 0 1
            if I_IsFactionAIControlled byzantium
                increment_kings_purse byzantium 1500
                if I_SettlementOwner North_Rhovanion = slave
                    spawn_army
                        faction byzantium
                        character	random_name, named character, age 24, x 400, y 351, family, direction E, label dor_attackers_R
                        traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, GoodAdministrator 2, StrategyChivalryGood 1, GoodAttacker 1, GoodCommander 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Just 1, Energetic 1, OneRingAvailable 1
                        unit		Vintner-Court Nobles				    exp 7 armour 0 weapon_lvl 0
                    end
                    console_command create_unit dor_attackers_R "Rouadengi Shieldbearers" 2 3 0 0
                    console_command create_unit dor_attackers_R "Rouadengi CitizenGuard" 3 2 0 0
                    console_command create_unit dor_attackers_R "Rouadengi Piercers" 3 3 1 0
                    console_command create_unit dor_attackers_R "Leofthiuda Far-riders" 2 2 0 0
                    console_command create_unit dor_attackers_R "Vinefleet Mariners" 2 2 0 0
                    console_command auto_win attacker
                    siege_settlement dor_attackers_R, North_Rhovanion, attack
                end_if
            end_if
            if I_IsFactionAIControlled moors
                increment_kings_purse moors 1000
            end_if
            if I_IsFactionAIControlled scotland
                increment_kings_purse scotland 500
            end_if
            if I_IsFactionAIControlled gundabad
                increment_kings_purse gundabad -700
            end_if
            if I_IsFactionAIControlled venice
                increment_kings_purse venice 500
            end_if
        end_if

        ; Gondor AI start
        if I_IsFactionAIControlled sicily
            increment_kings_purse sicily 1000
        end_if

        ; Rohan AI start
        if I_IsFactionAIControlled milan
            log always ---------------------------rohan AI start----------------------------------
            console_command create_unit Helms_Deep "Eored Swordsmen" 1 0 0 0
            console_command create_unit Helms_Deep "Riddermark Axemen" 1 0 0 0
            console_command create_unit Helms_Deep "Helmingas" 1 0 0 0
            increment_kings_purse milan 400
            kill_character amon_hen_custom1
        end_if

        ; Dunland AI start
        if I_IsFactionAIControlled aztecs
            log always ---------------------------dunland AI start----------------------------------
            add_money aztecs 700
            increment_kings_purse aztecs 200
            spawn_army
                faction aztecs
                character	random_name, named character, age 18, x 222, y 266, family
                traits		MiddleManRace 1, Dunlending 1, AIBoost 1, Drink 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1, DaenRaider 4, Wulfingir 1
                unit		Brehins Oathband		exp 2 armour 0 weapon_lvl 0
                unit		Dunnish Speutamen		        exp 1 armour 0 weapon_lvl 0
                unit		Clan-folk Fighters			    exp 1 armour 0 weapon_lvl 0
                unit		Dunnish Speutamen		        exp 1 armour 0 weapon_lvl 0
                unit		Clan-folk Fighters			    exp 1 armour 0 weapon_lvl 0
                unit		Clan-folk Slingers			    exp 1 armour 0 weapon_lvl 1
                unit		Clan-folk Slingers			    exp 1 armour 0 weapon_lvl 1
                unit		Clan-folk Slingers			    exp 1 armour 0 weapon_lvl 1
                unit		Clan-folk Slingers			    exp 1 armour 0 weapon_lvl 1
            end
        end_if

        ; Mordor AI start
        if I_IsFactionAIControlled england
            log always ---------------------------mordor AI start----------------------------------
            if not I_IsFactionAIControlled sicily
                console_command create_building Morgul_Vale drill_square
            end_if
            if not I_IsFactionAIControlled denmark
            and I_IsFactionAIControlled sicily
                console_command create_building Morgul_Vale drill_square
            end_if
            set_recruit_pool Morgul_Vale_Province 2 Southron Lancers
            set_recruit_pool Morgul_Vale_Province 2 Southron Warband
            set_recruit_pool Morgul_Vale_Province 0 Loke-Gamp Rim
            set_recruit_pool Morgul_Vale_Province 0 Loke-Innas Rim
            set_recruit_pool Morgul_Vale_Province 2 Marauders
            set_recruit_pool Morgul_Vale_Province 0 Balchoth Tribesmen
            set_recruit_pool Morgul_Vale_Province 2 Southron Pikemen
            set_recruit_pool Morgul_Vale_Province 0 Udege Marines
            set_recruit_pool Morgul_Vale_Province 0 Daritai Crossbowmen
            set_recruit_pool Morgul_Vale_Province 2 Southron Archers
            set_recruit_pool Morgul_Vale_Province 2 Muhad Tribesmen
            set_recruit_pool Morgul_Vale_Province 2 Nomad Warriors
            set_recruit_pool Morgul_Vale_Province 2 Khandish Raiders
            set_recruit_pool Morgul_Vale_Province 2 Variag Bowmen
            set_recruit_pool Udun_Province 0 Southron Lancers
            set_recruit_pool Udun_Province 0 Southron Warband
            set_recruit_pool Udun_Province 2 Loke-Gamp Rim
            set_recruit_pool Udun_Province 2 Loke-Innas Rim
            set_recruit_pool Udun_Province 1 Marauders
            set_recruit_pool Udun_Province 2 Balchoth Tribesmen
            set_recruit_pool Udun_Province 0 Southron Pikemen
            set_recruit_pool Udun_Province 1 Udege Marines
            set_recruit_pool Udun_Province 2 Daritai Crossbowmen
            set_recruit_pool Udun_Province 0 Southron Archers
            set_recruit_pool Udun_Province 0 Muhad Tribesmen
            set_recruit_pool Udun_Province 1 Nomad Warriors
            set_recruit_pool Udun_Province 1 Khandish Raiders
            set_recruit_pool Udun_Province 1 Variag Bowmen
        end_if

        ; High Elves AI start
        if I_IsFactionAIControlled saxons
            log always ---------------------------High Elves AI start----------------------------------
            increment_kings_purse saxons 1000
            set_event_counter imladris_controlled 1
            set_event_counter mithlond_controlled 1
            set_event_counter jewel_guild_rebuilt 1
            set_event_counter eregion_reclaimed 1
            console_command create_unit Forlindon "Lindon Longspears" 2 0 0 0
            console_command create_unit Forlindon "Lindar Bowmen" 1 0 0 0
            console_command create_unit Harlindon "Lindon Longspears" 2 0 0 0
            console_command create_unit Harlindon "Lindar Mariners" 1 0 0 0
            console_command create_unit Imladris  "Amanyar Swordmasters" 1 1 0 0
            console_command create_unit Imladris  "Amanyar Riders" 1 1 0 0
            console_command create_unit Imladris  "Amanyar Rangers" 1 1 0 0
            console_command create_unit Imladris  "Lindar Bowmen" 1 1 0 0
            if I_CharacterExists elrohir_1
                reposition_character elrohir_1, 249, 376
            end_if
            if I_CharacterExists gildor_1
                reposition_character gildor_1, 242, 381
            end_if
        end_if

        ; Isengard AI start
        if I_IsFactionAIControlled france
            log always ---------------------------Isengard AI start----------------------------------
            add_money france 800
            increment_kings_purse france 1000
            console_command create_unit Nan_Curunir "Dunforgoil Riders" 2 2 0 0
            console_command create_unit Nan_Curunir "Dunnish Warspear-Throng" 3 3 0 0
            console_command create_unit Nan_Curunir "Huntmasters" 2 2 0 0
            set_event_counter isengard_barracks_lvl1_ready 1
            set_event_counter isengard_barracks_lvl2_ready 1
            set_event_counter isengard_barracks_lvl3_ready 1
            console_command create_building Nan_Curunir c_isengard_barracks_lvl2
            console_command create_building Nan_Curunir mines+1
            console_command create_building Nan_Curunir armourer
        end_if

        ; Moria AI start
        if I_IsFactionAIControlled hre
            log always ---------------------------Moria Ai start----------------------------------
            increment_kings_purse hre 2200
        end_if

        ; Gundabad AI start
        if I_IsFactionAIControlled gundabad
            log always ---------------------------Gundabad AI start----------------------------------
            increment_kings_purse gundabad 1000
            add_money gundabad 700
            set_event_counter snaga_gundabad 1
            set_event_counter moria_gundabad 1
            set_event_counter guldur_gundabad 1
            set_event_counter gate_gundabad 1
            set_event_counter mordor_gundabad 1
            set_event_counter isen_gundabad 1
            set_event_counter angmar_gundabad 1
            set_event_counter rhudaur_gundabad 1
            set_event_counter uruk_gundabad 1
            if I_IsFactionAIControlled hre
            and I_SettlementOwner High_Pass = slave
                spawn_army
                    faction hre
                    character	random_name, named character, age 24, x 259, y 393, family, direction E, label ootmm_attackers_2
                    traits		OrcRace 1, AIBoost 1, Disciplinarian 1, GoodAttacker 1, GoodCommander 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, OneRingAvailable 1
                    unit		Heavy Goblin Crossbows	exp 2 armour 1 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry			exp 2 armour 0 weapon_lvl 0
                    unit		Heavy Goblin Crossbows			exp 1 armour 1 weapon_lvl 0
                    unit		Heavy Goblin Crossbows			exp 1 armour 1 weapon_lvl 0
                    unit		Heavy Goblin Crossbows			exp 1 armour 1 weapon_lvl 0
                    unit		Raider Warband		exp 1 armour 1 weapon_lvl 1
                    unit		Raider Warband		exp 1 armour 1 weapon_lvl 1
                    unit		Trolls				exp 1 armour 0 weapon_lvl 0
                    unit		Trolls				exp 1 armour 0 weapon_lvl 0
                end
                console_command auto_win attacker
                siege_settlement ootmm_attackers_2, High_Pass, attack
            end_if
        end_if

        ; Dol Amroth AI start
        if I_IsFactionAIControlled denmark
            log always ---------------------------dol amroth AI start----------------------------------
            increment_kings_purse denmark 2000
        end_if

        ; Dorwinion AI start
        if I_IsFactionAIControlled scotland
            log always ---------------------------Dorwinion AI start----------------------------------
            increment_kings_purse byzantium -400
        end_if

        ; Dol Guldur AI start
        if I_IsFactionAIControlled poland
            log always ---------------------------dol guldur AI start----------------------------------
            increment_kings_purse poland 2500
            add_money poland 10000
            spawn_army
                faction poland
                character	random_name, named character, age 22, x 493, y 478, family
                traits		OrcRace 1, AIBoost 1, Disciplinarian 1, GoodCommander 2, GoodDefender 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, StrategicSkill 1, Locked 1
                unit		Uruk Bodyguard					exp 3 armour 1 weapon_lvl 0
            end
            spawn_army
                faction poland
                character	random_name, named character, age 22, x 326, y 345, family
                traits		OrcRace 1, AIBoost 1, Coward 1, Disciplinarian 1, GoodCommander 2, GoodDefender 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, StrategicSkill 1
                unit		Goblin Stalkers					exp 3 armour 1 weapon_lvl 0
                unit		Dol Guldur Host			exp 0 armour 0 weapon_lvl 0
                unit		Dol Guldur Archers			exp 0 armour 0 weapon_lvl 0
            end
            spawn_army
                faction poland
                character	random_name, named character, age 19, x 296, y 331, family
                traits		OrcRace 1, AIBoost 1, Bloodthirsty 1, GoodAttacker 2, GoodCommander 2, HarshRuler 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Goblin Headhunters	exp 3 armour 1 weapon_lvl 0
                unit		Orc Maulers			exp 0 armour 0 weapon_lvl 0
                unit		Orc Maulers			exp 0 armour 0 weapon_lvl 0
            end
        end_if

        ; Lorien AI start
        if I_IsFactionAIControlled ireland
            log always ---------------------------lorien AI start----------------------------------
            increment_kings_purse ireland 1600
        end_if

        ; Harad AI start
        if I_IsFactionAIControlled ireland
            log always ---------------------------Harad AI start----------------------------------
            increment_kings_purse spain 2000
        end_if

        ; Woodland Realm AI start
        if I_IsFactionAIControlled mongols
            log always ---------------------------wr AI start----------------------------------
            increment_kings_purse mongols 1800
        end_if

        ; Bree AI start
        if I_IsFactionAIControlled normans
            log always ---------------------------bree AI start----------------------------------
            console_command move_character breeheir, 115, 380
        end_if

        ; AA AI start
        if I_IsFactionAIControlled russia
            log always ---------------------------aa AI start----------------------------------
            increment_kings_purse russia 1500
            console_command move_character bn_army_1, 268, 81
            console_command move_character bn_army_2, 281, 113
            console_command move_character bn_army_3, 292, 77
            console_command move_character bn_army_4, 257, 79
        end_if

        ; ND AI start
        if I_IsFactionAIControlled turks
            log always ---------------------------nd AI start----------------------------------
            increment_kings_purse turks 200
            console_command create_unit Weather_Hills "Dunedain Rangers" 3 1 0 1
            console_command create_unit Angle "Dunedain Wardens" 3 1 0 1
        end_if

        ; Rhun AI start
        if I_IsFactionAIControlled venice
            log always ---------------------------rhun AI start----------------------------------
            console_command move_character rhunheir, 389, 256
            increment_kings_purse venice 2000
        end_if

        ; Angmar AI start
        if I_IsFactionAIControlled portugal
            log always ---------------------------angmar AI start----------------------------------
            increment_kings_purse portugal 1200
            spawn_army
                faction portugal
                character	random_name, named character, age 27, x 203, y 453
                traits		AngmarManRace 1, AIBoost 1, ColdWarrior 1, LoyaltyStarter 1, GoodCommander 1, Berserker 1, Bloodthirsty 2 , StrategyChivalryEvil 1, Northguard 1, CustomBG 1
                unit		Northguard			        exp 1 armour 0 weapon_lvl 0
                unit		Angmarim Levies				exp 1 armour 0 weapon_lvl 0
                unit		Angmarim Levies				exp 1 armour 0 weapon_lvl 0
                unit		Angmarim Archers			exp 1 armour 0 weapon_lvl 0
                unit		Angmarim Archers			exp 1 armour 0 weapon_lvl 0
                unit		Angmarim Infantry			exp 3 armour 0 weapon_lvl 0
            end
            spawn_army
                faction portugal
                character	random_name, named character, age 35, x 207, y 449
                traits		MiddleManRace 1, Hillman 1, AIBoost 1, BattleChivalryEvil 1, LoyaltyStarter 1, Hatred 1, Berserker 1, GoodCommander 2
                unit		Rhudaur Huscarles			exp 1 armour 0 weapon_lvl 0
                unit		Rhudaur Savages				exp 1 armour 0 weapon_lvl 0
                unit		Rhudaur Savages				exp 1 armour 0 weapon_lvl 0
                unit		Rhudaur Pikemen				exp 1 armour 0 weapon_lvl 0
                unit		Hillmen						exp 1 armour 0 weapon_lvl 0
                unit		Hillmen						exp 1 armour 0 weapon_lvl 0
            end
        end_if
        terminate_monitor
    end_monitor

    ;################ Script: Buildings & Settlements ####################

    ;##### Capital Change Cost

    monitor_event FactionNewCapital FactionIsLocal
        log always ---------------------------Capital change player----------------------------------
        console_command add_money -150
        historic_event capital_change
    end_monitor

    ;##### Mithril Mines

    monitor_event BuildingCompleted SettlementName East_Moria
        and SettlementBuildingFinished = m_mines
        log always ---------------------------mithril mines build----------------------------------
        if  I_SettlementOwner East_Moria = hungary
            increment_kings_purse hungary 360
            historic_event mithril_mines_rebuild factions { hungary, }
        end_if
        if I_SettlementOwner East_Moria = moors
            increment_kings_purse moors 360
            historic_event mithril_mines_rebuild factions { moors, }
        end_if
        if I_SettlementOwner East_Moria = norway
            increment_kings_purse norway 720
            historic_event mithril_mines_rebuild factions { norway, }
        end_if
        terminate_monitor
    end_monitor

    ;##### Osgiliath, Tharbad, Fornost & Annuminas

    monitor_event BuildingCompleted SettlementName East_Osgiliath
        and SettlementBuildingFinished = huge_stone_wall
        log always ---------------------------east osgiliath rebuild----------------------------------
        historic_event osgiliath_east_rebuild
        terminate_monitor
    end_monitor

    monitor_event BuildingCompleted SettlementName West_Osgiliath
        and SettlementBuildingFinished = citadel
        log always ---------------------------west osgiliath rebuild----------------------------------
        historic_event osgiliath_west_rebuild
        terminate_monitor
    end_monitor

    monitor_event BuildingCompleted SettlementName Tharbad
        and SettlementBuildingFinished = huge_stone_wall
        log always ---------------------------tharbad rebuild----------------------------------
        historic_event tharbad_east_rebuild
        terminate_monitor
    end_monitor

    monitor_event BuildingCompleted SettlementName Arthedain
        and SettlementBuildingFinished = fortress
        log always ---------------------------fornost rebuild----------------------------------
        change_settlement_name Arthedain Fornost
        historic_event fornost_rebuild
        terminate_monitor
    end_monitor

    monitor_event BuildingCompleted SettlementName Lake_Evendim
        and SettlementBuildingFinished = huge_stone_wall
        log always ---------------------------annuminas rebuild----------------------------------
        historic_event annuminas_rebuild
        terminate_monitor
    end_monitor

    ;############################ Aragorn RPG ############################

    ;Aragorns quest, a big part is done in EDCT
    monitor_event FactionTurnStart FactionIsLocal
        log always ---------------------------aragorns quest monitor---------------------------------
        if I_IsFactionAIControlled turks
            set_event_counter aragorn_army_dead_middle -1
            terminate_monitor
        end_if
        if I_FactionLeaderTrait turks Aragorn = 7
            spawn_army
                faction scripts
                character	King_of_the_Dead, named character, age 40, x 208, y 483, portrait KingDead
                traits		LoyaltyStarter 1, PietyStarter 1
                unit		Ents		exp 0 armour 0 weapon_lvl 0
            end
            give_everything_to_faction scripts turks false
            console_command give_trait King_of_the_Dead KingDead 1
            console_command give_trait King_of_the_Dead Hero 1
            console_command give_trait King_of_the_Dead CustomBG 1
            console_command give_trait King_of_the_Dead FearGeneral 1
            console_command give_trait King_of_the_Dead HeroAbilityKingDead 1
            console_command give_trait King_of_the_Dead BattleFear 5
            console_command give_trait King_of_the_Dead GoodCommander 2
            console_command give_trait King_of_the_Dead GoodAttacker 2
            console_command give_trait King_of_the_Dead Loyal 4
            create_unit King_of_the_Dead, Ents, num 1, exp 0, arm 0, wep 0
            send_character_off_map King_of_the_Dead
            destroy_units turks Ents
            spawn_army
                faction turks
                character	King_of_the_Dead, named character, x 251, y 247, battle_model king_of_the_dead, hero_ability Terror_of_the_Dead
                unit		Oathbreakers	exp 9 armour 0 weapon_lvl 0
            end
            historic_event aragorn_army_dead_middle factions { turks, }
            set_event_counter army_dead_last 1
            set_event_counter aragorn_army_dead_initial 0
            terminate_monitor
        end_if
        if I_FactionLeaderTrait turks Aragorn = 6
            and I_EventCounter aragorn_army_dead_initial = 0
            historic_event aragorn_army_dead_initial factions { turks, }
            set_event_counter aragorn_rpg_anduril 0
        end_if
        if I_FactionLeaderTrait turks Aragorn = 5
            and I_EventCounter aragorn_rpg_anduril = 0
            console_command remove_ancillary aragorn_1 narsil
            console_command give_ancillary aragorn_1 anduril
            historic_event aragorn_rpg_anduril factions { turks, }
            set_event_counter aragorn_rpg_back 0
        end_if
        if I_FactionLeaderTrait turks Aragorn = 4
            and I_EventCounter aragorn_rpg_back = 0
            historic_event aragorn_rpg_back factions { turks, }
            set_event_counter aragorn_rpg_gollum 0
        end_if
        if I_FactionLeaderTrait turks Aragorn = 3
            and I_EventCounter aragorn_rpg_gollum = 0
            console_command give_ancillary aragorn_1 kingsfoil
            historic_event aragorn_rpg_gollum factions { turks, }
            set_event_counter aragorn_rpg_letter 0
        end_if
        if I_FactionLeaderTrait turks Aragorn = 2
            and I_EventCounter aragorn_rpg_letter = 0
            historic_event aragorn_rpg_letter factions { turks, }
            set_event_counter aragorn_rpg_start 0
        end_if
        if I_TurnNumber = 16
            ui_flash_stop
        end_if
        if I_TurnNumber = 15
            snap_strat_camera 166, 380
            point_at_settlement Bree
            historic_event aragorn_rpg_start factions { turks, }
        end_if
    end_monitor

    declare_counter oathbreaker_timer

    ;3 times battle limit for Oathbreakers
    monitor_event PostBattle Trait KingDead > 0
        log always ---------------------oathbreaker monitor---------------------
        inc_counter oathbreaker_timer 1
        if I_CompareCounter oathbreaker_timer = 3
            if I_CharacterExists King_of_the_Dead
                kill_character King_of_the_Dead
            end_if
            historic_event aragorn_army_dead_final factions { turks, }
            destroy_units turks Oathbreakers
            terminate_monitor
        end_if
    end_monitor

    ;########################## Script: Gandalf ##########################
    declare_counter gandalf_cd
    declare_counter gandalf_cd_start

    monitor_event PreFactionTurnStart FactionType france
    and DiplomaticStanceFromFaction milan = AtWar
    and I_EventCounter gandalf_spawn = 0
        historic_event gandalf_spawn factions { turks, }
        console_command diplomatic_stance france turks war
        console_command diplomatic_stance france saxons war
        console_command diplomatic_stance france ireland war
        set_faction_standing france turks -1.00
        set_faction_standing turks france -1.00
        set_faction_standing france saxons -1.00
        set_faction_standing saxons france -1.00
        set_faction_standing france ireland -1.00
        set_faction_standing ireland france -1.00
        terminate_monitor
    end_monitor

    set_counter gandalf_cd -1

    monitor_event FactionTurnStart FactionType turks
        and I_EventCounter gandalf = 1
        and not I_WorldwideAncillaryExists staff_gandalf
        log always --------------------------- gandalf timer start--------------------------

        if I_CompareCounter gandalf_cd_start = 0
            set_counter gandalf_cd 15
            set_counter gandalf_cd_start 1
        end_if

        if I_CompareCounter gandalf_cd > 0
            inc_counter gandalf_cd -1
        end_if

        if I_CompareCounter gandalf_cd = 0
            terminate_monitor
        end_if

    end_monitor


    monitor_event FactionTurnStart FactionType turks
        and I_EventCounter gandalf_spawn = 1
        and not I_WorldwideAncillaryExists staff_gandalf
        log always --------------------------- gandalf spawning monitor--------------------------
        if I_EventCounter gandalf = 1
            and I_CompareCounter gandalf_cd = 0
            if I_SettlementOwner Angle = turks
                set_event_counter gandalf 2
                if not I_IsFactionAIControlled turks
                    and I_CompareCounter faction_ID_turks == 1
                    snap_strat_camera 216, 360
                    console_command message_collation_set on
                end_if
            end_if
            if I_SettlementOwner Weather_Hills = turks
                set_event_counter gandalf 2
                if not I_IsFactionAIControlled turks
                    and I_CompareCounter faction_ID_turks == 1
                    and not I_SettlementOwner Angle = turks
                    snap_strat_camera 191, 380
                    console_command message_collation_set on
                end_if
            end_if
            if I_EventCounter gandalf = 2
                spawn_army
                    faction turks
                    character	Gandalf, named character, age 22, x 216, y 360, direction S, portrait GandalfWhite, battle_model gandalf_white, hero_ability WHITE_GANDALF, label gandalf_2
                    traits		GandalfWhite 1, CustomBG 1, Hero 1, MaiaRace 1, HeroAbilityGandalfWhite 1, Brave 2, GoodAttacker 2, GoodCommander 4, InspiringSpeaker 1, Intelligent 1, Just 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 2, NaturalMilitarySkill 1, NaturalManagementSkill 1, OneRingAvailable 1
                    unit		Arthedain Royal Guard		exp 9 armour 0 weapon_lvl 1
                end
                if not I_SettlementOwner Angle = turks
                    reposition_character gandalf_1, 191, 380
                end_if
                console_command give_ancillary gandalf_2 staff_gandalf
                console_command give_ancillary gandalf_2 wisdom
                if not I_WorldwideAncillaryExists narya
                    console_command give_ancillary gandalf_2 narya
                end_if
                console_command give_ancillary gandalf_2 glamdring
                console_command give_ancillary gandalf_2 shadowfax
                if not I_IsFactionAIControlled turks
                    console_command message_collation_set off
                    campaign_wait 1
                    historic_event gandalf_return factions { turks, }
                end_if
                terminate_monitor
            end_if
        end_if
        if I_EventCounter gandalf = 0
            if I_SettlementOwner Angle = turks
                set_event_counter gandalf 1
                if not I_IsFactionAIControlled turks
                and I_CompareCounter faction_ID_turks == 1
                    snap_strat_camera 216, 360
                    console_command message_collation_set on
                end_if
            end_if
            if I_SettlementOwner Weather_Hills = turks
                set_event_counter gandalf 1
                if not I_IsFactionAIControlled turks
                and I_CompareCounter faction_ID_turks == 1
                and not I_SettlementOwner Angle = turks
                    snap_strat_camera 191, 380
                    console_command message_collation_set on
                end_if
            end_if
            if I_EventCounter gandalf = 1
                spawn_army
                    faction turks
                    character	Gandalf, named character, age 22, x 216, y 360, direction S, portrait Gandalf, battle_model gandalf, hero_ability GANDALF, label gandalf_1
                    traits		Gandalf 1, CustomBG 1, Hero 1, MaiaRace 1, HeroAbilityGandalf 1, Brave 3, GoodAttacker 1, GoodCommander 3, Intelligent 1, Just 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 1, NaturalMilitarySkill 1, NaturalManagementSkill 1, OneRingAvailable 1
                    unit		Dunedain Cavalry		exp 7 armour 0 weapon_lvl 0
                end
                if not I_SettlementOwner Angle = turks
                    reposition_character gandalf_1, 191, 380
                end_if
                console_command give_ancillary gandalf_1 staff_gandalf
                console_command give_ancillary gandalf_1 glamdring
                console_command give_ancillary gandalf_1 wisdom
                if I_CharacterExists cirdan_1
                    console_command remove_ancillary cirdan_1 narya
                    console_command give_ancillary gandalf_1 narya
                    if not I_IsFactionAIControlled saxons
                        historic_event gandalf_cirdan factions { saxons, }
                    end_if
                end_if
                if not I_CharacterExists cirdan_1
                    and not I_WorldwideAncillaryExists narya
                    console_command give_ancillary gandalf_1 narya
                end_if
                if not I_IsFactionAIControlled turks
                    console_command message_collation_set off
                    campaign_wait 1
                    historic_event gandalf factions { turks, }
                    set_event_counter gandalf 1
                end_if
            end_if
        end_if
    end_monitor

    ;########################## Arnor Restoration ########################################


    declare_counter arthedain_admin
    declare_counter cardolan_admin

	monitor_event PreFactionTurnStart FactionType russia

        if I_EventCounter arnor_restored = 1
            terminate_monitor
        end_if

        if I_NumberOfSettlements turks = 0
        and I_SettlementOwner Lake_Evendim = russia
            set_event_counter house_of_kings_ready 1
            terminate_monitor
        end_if

    end_monitor

	monitor_event PreFactionTurnStart FactionType turks
        if I_EventCounter arnor_restored = 1
            terminate_monitor
        end_if
        if I_IsFactionAIControlled turks
        and I_IsFactionAIControlled sicily
        and I_EventCounter house_of_kings_ready = 0
        and I_TurnNumber > 40
        and I_NumberOfSettlements turks > 3
        and RandomPercent <= 30
            set_event_counter house_of_kings_ready 1
            terminate_monitor
        end_if
        if I_CompareCounter arthedain_admin < 3
            set_event_counter house_of_kings_ready 0
        end_if
        if I_CompareCounter cardolan_admin < 3
            set_event_counter house_of_kings_ready 0
        end_if
        if I_CompareCounter arthedain_admin >= 3
        and I_CompareCounter cardolan_admin >= 3
        and I_EventCounter house_of_kings_ready = 0
        and I_EventCounter scouring_shire = 0
        and I_SettlementOwner Lake_Evendim = turks
            historic_event house_of_kings_ready factions { turks, }
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType turks
        if I_EventCounter arnor_restored = 1
            terminate_monitor
        end_if
        set_counter arthedain_admin 0
        set_counter cardolan_admin 0
    end_monitor

    monitor_event SettlementTurnStart FactionType turks
    and SettlementBuildingExists = house_of_kings
        if not I_IsFactionAIControlled turks
            historic_event arnor_restored factions { turks, }
        end_if
        if I_IsFactionAIControlled turks
            historic_event arnor_restored_ai factions { all, }
            set_event_counter arnor_restored 1
        end_if
        increment_kings_purse turks 300
        add_money turks 5000
        terminate_monitor
    end_monitor

    monitor_event SettlementTurnEnd FactionType turks
    and SettlementBuildingExists = arthedain_administration
        if I_EventCounter arnor_restored = 1
            terminate_monitor
        end_if
        inc_counter arthedain_admin 1
    end_monitor

    monitor_event SettlementTurnEnd FactionType turks
    and SettlementBuildingExists = cardolan_administration
        if I_EventCounter arnor_restored = 1
            terminate_monitor
        end_if
        inc_counter cardolan_admin 1
    end_monitor



;########################## Re-united Kingdom: ND ##########################

    declare_counter minas_tirith_check

    ; check for if Minas Tirith is held by evil faction
    monitor_event PreFactionTurnStart FactionType turks
        log always ---------------------------minas tirith monitor---------------------------------
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
        if I_SettlementOwner Anorien = poland
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = gundabad
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = england
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = hre
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = venice
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = portugal
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = russia
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = france
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = aztecs
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = spain
            set_counter minas_tirith_check 0
        end_if
        if I_SettlementOwner Anorien = slave
            set_counter minas_tirith_check 0
        end_if
    end_monitor

    monitor_event FactionTurnEnd FactionType turks
        log always ---------------------------minas tirith monitor 2---------------------------------
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
        set_counter minas_tirith_check 1
    end_monitor

    declare_counter reunited_kingdom_nd_answer

    set_counter reunited_kingdom_nd_answer 0

    ;Reunited Kingdom accept/decline pop up
    monitor_event FactionTurnStart FactionIsLocal
        and FactionType turks
        ;and I_TurnNumber = 1
        and I_CompareCounter minas_tirith_check == 1
        and DiplomaticStanceFromFaction sicily = Allied
        ;and DiplomaticStanceFromFaction normans = Allied
        and DiplomaticStanceFromFaction denmark = Allied
        and I_FactionLeaderTrait turks Aragorn = 8
        and I_EventCounter arnor_restored = 1
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
        set_counter reunited_kingdom_nd_answer 1
        historic_event reunited_kingdom_nd true factions { turks, }
        log always ---------------------------reunited kingdom popup---------------------------------
        terminate_monitor
    end_monitor

    declare_counter reunited_kingdom_gondor_answer

    monitor_event CharacterTurnEnd CharacterIsLocal
    and Trait HouseDenethor > 0
    and IsRegionOneOf Imladris_Province
    and TimeInRegion > 2
    and I_EventCounter gondor_dream = 1
        set_counter reunited_kingdom_gondor_answer 1
        historic_event reunited_kingdom_gondor true factions { sicily, }
        log always ---------------------------reunited kingdom popup gondor---------------------------------
        terminate_monitor
    end_monitor

    declare_counter gondor_rk_start
    declare_counter reunited_kingdom_gondor_bat_answer

    ; RK gondor choice (requires eop)
    monitor_event PreFactionTurnStart FactionIsLocal

        if I_HotseatEnabled
            terminate_monitor
        end_if

        if I_IsFactionAIControlled sicily
            terminate_monitor
        end_if

        if not I_IsFactionAIControlled sicily
        and I_IsFactionAIControlled turks
            send_character_off_map aragorn_1
        end_if

        if I_EventCounter reunited_kingdom = 1
            terminate_monitor
        end_if

        if I_TurnNumber > 50
        and RandomPercent <= 5
        and I_EventCounter faramir_dream = 0
        and I_EventCounter boromir_dream = 0
            if I_CharacterExists faramir_1
                historic_event faramir_dream factions { sicily, }
                set_event_counter gondor_dream 1
            end_if
            if I_CharacterExists boromir_1
            and I_EventCounter faramir_dream = 0
                historic_event boromir_dream factions { sicily, }
                set_event_counter gondor_dream 1
            end_if
        end_if

        if I_EventCounter reunited_kingdom_gondor_accepted = 1
            set_counter reunited_kingdom_gondor_answer 0
            inc_counter gondor_rk_start 1
            if I_CompareCounter gondor_rk_start == 5
                set_event_counter reunited_kingdom_gondor_start 1
            end_if
        end_if

    end_monitor

    ;RK start Gondor
    monitor_event EventCounter EventCounterType reunited_kingdom_gondor_start
        and I_EventCounter reunited_kingdom_gondor_start = 1
        log always ---------------------------rk accepted gondor---------------------------------
        historic_event reunited_kingdom_gondor_bat true factions { sicily, }
        set_counter reunited_kingdom_gondor_bat_answer 1
        terminate_monitor
    end_monitor

    ;RK accepted Gondor batch
    monitor_event EventCounter EventCounterType reunited_kingdom_gondor_bat_accepted
        and I_EventCounter reunited_kingdom_gondor_bat_accepted = 1
        log always ---------------------------rk accepted gondor---------------------------------
        set_counter reunited_kingdom_gondor_bat_answer 0
        set_event_counter reunited_kingdom 1
        set_event_counter nd_rk 1
        set_event_counter gondor_rk 1
        terminate_monitor
    end_monitor

    ; RK declined Gondor
    monitor_event EventCounter EventCounterType reunited_kingdom_gondor_declined
        and I_EventCounter reunited_kingdom_gondor_declined = 1
        log always ---------------------------rk declined---------------------------------
        set_counter reunited_kingdom_gondor_answer 0
        spawn_army
            faction turks
            character	Aragorn, named character, age 38, x 216, y 358, portrait Aragorn, battle_model aragorn, hero_ability STRIDER, label aragorn_1
            traits		Aragorn 1, CustomBG 1, Hero 1, DunedainRace 1, DunedainRanger 1, HouseElendil 1, FactionLeaderCustom 1, HeroAbilityAragorn 1, Brave 2, UmbarPortRaid 1, AragornJourney 1, GoodAttacker 1, GoodAttacker 2, GoodCommander 4, InspiringSpeaker 1, Just 2, KindRuler 3, PietyStarter 1, NaturalMilitarySkill 3, LogisticalSkill 2, Scout 1, Energetic 1, ElvenWife 1
            unit		Grey Company			exp 1 armour 3 weapon_lvl 1
        end
        console_command give_ancillary aragorn_1 elf_friend
        console_command give_ancillary aragorn_1 elendilmir
        console_command give_ancillary aragorn_1 evenstar
        console_command give_ancillary aragorn_1 narsil
        terminate_monitor
    end_monitor

    monitor_event FactionTurnEnd FactionIsLocal
    and I_EventCounter reunited_kingdom_gondor_bat_accepted = 1

        console_command control turks
        set_event_counter control_turks 1
        terminate_monitor

    end_monitor

    ; RK declined ND
    monitor_event EventCounter EventCounterType reunited_kingdom_nd_declined
        and I_EventCounter reunited_kingdom_nd_declined = 1
        log always ---------------------------rk declined---------------------------------
        set_counter reunited_kingdom_nd_answer 0
        set_event_counter army_dead_last 0
        terminate_monitor
    end_monitor


    ; RK accepted ND
    monitor_event EventCounter EventCounterType reunited_kingdom_nd_accepted
        and I_EventCounter reunited_kingdom_nd_accepted = 1
        log always ---------------------------rk accepted---------------------------------
        set_counter reunited_kingdom_nd_answer 0
        set_event_counter reunited_kingdom 1
        set_event_counter nd_rk 1
        set_event_counter gondor_rk 1
        set_event_counter army_dead_last 0
        if I_SettlementOwner East_Osgiliath =  sicily
        and I_EventCounter osgiliath_east_rebuild = 0
            console_command upgrade_settlement East_Osgiliath
        end_if
        terminate_monitor
    end_monitor

    ; Reunited kingdom script
    monitor_event PreFactionTurnStart FactionType turks
    and I_EventCounter reunited_kingdom = 1
        log always ---------------------------reunited kingdom script---------------------------------
        give_everything_to_faction sicily turks false
        give_everything_to_faction denmark turks false
        increment_kings_purse turks 500
        add_money turks 12000
        console_command message_collation_set on
        console_command diplomatic_stance turks spain war
        set_faction_standing turks spain -1.00
        set_faction_standing spain turks -1.00
        console_command diplomatic_stance turks venice war
        set_faction_standing turks venice -1.00
        set_faction_standing venice turks -1.00
        console_command diplomatic_stance turks france war
        set_faction_standing turks france -1.00
        set_faction_standing france turks -1.00
        console_command diplomatic_stance turks russia war
        set_faction_standing turks russia -1.00
        set_faction_standing russia turks -1.00
        console_command diplomatic_stance turks poland war
        set_faction_standing turks poland -1.00
        set_faction_standing poland turks -1.00
        console_command diplomatic_stance turks england war
        set_faction_standing turks england -1.00
        set_faction_standing england turks -1.00
        console_command diplomatic_stance turks portugal war
        set_faction_standing turks portugal -1.00
        set_faction_standing portugal turks -1.00
        console_command diplomatic_stance turks hre war
        set_faction_standing turks hre -1.00
        set_faction_standing hre turks -1.00
        if I_EventCounter blue_wizards_fail = 1
            console_command diplomatic_stance turks khand war
            set_faction_standing turks khand -1.00
            set_faction_standing khand turks -1.00
        end_if
        if I_EventCounter blue_wizards_succeed = 1
            console_command diplomatic_stance turks khand allied
            set_faction_standing turks khand 1.00
            set_faction_standing khand turks 1.00
        end_if
        console_command diplomatic_stance turks milan allied
        console_command diplomatic_stance turks ireland allied
        console_command diplomatic_stance turks saxons allied
        set_faction_standing turks milan 1.00
        set_faction_standing turks ireland 1.00
        set_faction_standing milan turks 1.00
        set_faction_standing ireland turks 1.00
        if I_NumberOfSettlements poland > 0
        and I_IsFactionAIControlled poland
            increment_kings_purse poland 300
        end_if
        if I_NumberOfSettlements england > 0
        and I_IsFactionAIControlled england
            increment_kings_purse england 1000
            add_money england 3000
            if I_SettlementOwner Morgul_Vale = england
                console_command create_unit Morgul_Vale "Black Uruks" 3 3 0 0
                console_command create_unit Morgul_Vale "Orc Archers" 2 3 0 0
            end_if
            spawn_army
                faction england
                character	random_name, named character, age 26, x 347, y 226, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 7 armour 0 weapon_lvl 0
                unit		Black Uruk Halberds			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Black Uruks			exp 3 armour 0 weapon_lvl 0
                unit		Morgul Chosen			exp 3 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
            end
            spawn_army
                faction england
                character	random_name, named character, age 26, x 348, y 247, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 5 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements spain > 0
            and I_IsFactionAIControlled spain
            increment_kings_purse spain 1250
            spawn_army
                faction spain
                character	random_name, named character, age 26, x 340, y 123, family, direction N
                traits		BadManRace 1, Haradrim 1, AIBoost 1, GoodAdministrator 1, GoodAttacker 1, GoodCommander 2, BattleChivalryEvil 2, LogisticalSkill 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1
                unit		Black Snake Guard					exp 5 armour 0 weapon_lvl 0
                unit		Southron Lancers			exp 2 armour 0 weapon_lvl 0
                unit		Southron Lancers			exp 2 armour 0 weapon_lvl 0
                unit		Southron Lancers			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements khand > 0
            and I_IsFactionAIControlled khand
            and I_EventCounter blue_wizards_fail = 1
            spawn_army
                faction khand
                character	random_name, named character, age 31, x 473, y 105, family, direction S
                traits		BadManRace 1, VariagTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodAttacker 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1
                unit		Variag Nobles						exp 5 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
            end
            spawn_army
                faction khand
                character	random_name, named character, age 31, x 332, y 176, family, direction S
                traits		BadManRace 1, WainriderTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodDefender 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1
                unit		Variag Nobles						exp 5 armour 0 weapon_lvl 0
                unit		Nomad Warriors				exp 1 armour 1 weapon_lvl 0
                unit		Nomad Warriors				exp 1 armour 1 weapon_lvl 0
                unit		Nomad Warriors				exp 1 armour 1 weapon_lvl 0
                unit		Nomad Warriors				exp 1 armour 1 weapon_lvl 0
                unit		Khandish Hunters					exp 1 armour 1 weapon_lvl 0
                unit		Khandish Hunters					exp 1 armour 1 weapon_lvl 0
                unit		Khandish Hunters					exp 1 armour 1 weapon_lvl 0
                unit		Khandish Hunters					exp 1 armour 1 weapon_lvl 0
            end
        end_if
        ;characters get killed and respawned to retain custom bodyguards
        if I_CharacterExists faramir_1
            kill_character faramir_1
            spawn_army
                faction turks
                character	Faramir, named character, age 28, x 332, y 231, family, portrait Faramir, battle_model faramir, hero_ability CAPTAIN, label faramir_rk
                traits		FaramirRk 1, CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityCaptain 1, Aesthetic 1, GoodAttacker 3, GoodCommander 2, Intelligent 1, Just 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, NaturalMilitarySkill 1
                unit		Ithilien Rangers				exp 5 armour 3 weapon_lvl 1
            end
        end_if
        if I_CharacterExists boromir_1
            kill_character boromir_1
            spawn_army
                faction turks
                character	Boromir, named character, age 33, x 325, y 218, family, portrait Boromir, battle_model boromir, hero_ability SHIELD, label boromir_rk
                traits		BoromirRk 1, CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, FactionHeirCustom 1, HeroAbilityShield 1, Energetic 1, GoodCommander 3, HaleAndHearty 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, NaturalMilitarySkill 2
                unit		Wardens White Tower					exp 3 armour 1 weapon_lvl 1
            end
        end_if
        if I_CharacterExists angbor_1
            kill_character angbor_1
            spawn_army
                faction turks
                character	Angbor, named character, age 56, x 240, y 221, portrait Angbor, battle_model angbor, hero_ability CAPTAIN, label angbor_rk
                traits		AngborRk 1, CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityCaptain 1, GoodCommander 2, Just 2, Loyal 1, LoyaltyStarter 1, PietyStarter 1, Brave 3
                unit		Lamedon Clansmen			exp 3 armour 2 weapon_lvl 1
            end
        end_if
        if I_CharacterExists denethor_1
            kill_character denethor_1
            spawn_army
                faction turks
                character	Denethor, named character, age 60, x 324, y 217, family, portrait Denethor, battle_model denethor, hero_ability IRON_FIST, label denethor_rk
                traits		DenethorRk 1, CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityIronFist 1, RenownLegacy 1, GoodCommander 2, NaturalMilitarySkill 1, PoliticsSkill 2, PietyStarter 1, AnorStone 1
                unit		Gondor Bodyguard					exp 3 armour 1 weapon_lvl 1
            end
        end_if
        if I_CharacterExists mistven_1
            kill_character mistven_1
            spawn_army
                faction turks
                character	Mistven, named character, age 31, x 251, y 202, portrait Mistven, label mistven_rk
                traits		DunedainRace 1, Amrothian 1, BattleChivalryGood 2, Brave 1, Loyal 1, GoodAttacker 2, GoodCommander 1, GoodAttacker 2, Scout 2, NightBattleCapable 1, LoyaltyStarter 1, PietyStarter 1
                unit		Nimrodel Mariners				    exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_CharacterExists adrahil_1
            kill_character adrahil_1
            spawn_army
                faction turks
                character	Adrahil, named character, age 73, x 243, y 189, family, portrait Adrahil, hero_ability IRON_FIST, label adrahil_rk
                traits		AdrahilRk 1, Hero 1, DunedainRace 1, Amrothian 1, HeroAbilityIronFist 1, BattleChivalryGood 1, GoodCommander 2, GoodDefender 1, Just 1, KindRuler 1, PietyStarter 1, StrategyChivalryGood 3, NaturalMilitarySkill 1
                unit		Talon Knights				    exp 4 armour 0 weapon_lvl 1
            end
        end_if
        if I_CharacterExists imrahil_1
            kill_character imrahil_1
            spawn_army
                faction turks
                character	Imrahil, named character, age 35, x 254, y 169, family, portrait Imrahil, hero_ability IRON_FIST, label imrahil_rk
                traits		ImrahilRk 1, Hero 1, DunedainRace 1, Amrothian 1, HeroAbilityIronFist 1, BattleChivalryGood 2, GoodCommander 3, GoodDefender 1, HaleAndHearty 2, Just 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 2, TacticalSkill 1, NaturalMilitarySkill 1, TourneyKnight 3
                unit		Royal Swan-Guard         			exp 3 armour 1 weapon_lvl 1
            end
        end_if
        if I_CharacterExists elphir_1
            kill_character elphir_1
            spawn_army
                faction turks
                character	Elphir, named character, age 33, x 264, y 182, portrait Amandir, label elphir_rk
                traits		DunedainRace 1, Amrothian 1, GoodCommander 1, GoodTrader 1, KindRuler 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 1, OneRingAvailable 1, MilitaryEducation 2, GovEducation 2
                unit		Royal Swan-Guard				    exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_CharacterExists dinenion_1
            kill_character dinenion_1
            spawn_army
                faction turks
                character	Dinenion, named character, age 40, x 176, y 200, portrait Dinenion
                traits		DunedainRace 1, Gondorian 1, GoodCommander 1, LoyaltyStarter 1, BattleChivalryGood 1, PietyStarter 1, TacticalSkill 2
                unit		Anfalas Pikemen				exp 2 armour 2 weapon_lvl 1
            end
        end_if
        if I_CharacterExists duinhir_1
            kill_character duinhir_1
            spawn_army
                faction turks
                character	Duinhir, named character, age 56, x 250, y 236, portrait Duinhir, hero_ability CAPTAIN, label duinhir_rk
                traits		Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityCaptain 1, Brave 2, GoodAttacker 1, GoodCommander 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Blackroot Vale Archers			exp 2 armour 2 weapon_lvl 1
            end
        end_if
        if I_CharacterExists forlong_1
            kill_character forlong_1
            spawn_army
                faction turks
                character	Forlong, named character, age 46, x 320, y 205, portrait Forlong, hero_ability CAPTAIN, label forlong_rk
                traits		CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityCaptain 1, BattleChivalryGood 3, GoodCommander 2, HaleAndHearty 1, LoyaltyStarter 1, PietyStarter 1
                unit		Lossarnach Axemen			exp 2 armour 3 weapon_lvl 1
            end
        end_if
        if I_CharacterExists golasgil_1
            kill_character golasgil_1
            spawn_army
                faction turks
                character	Golasgil, named character, age 45, x 216, y 202, portrait Golasgil, hero_ability SHIELD, label golasgil_rk
                traits		Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityShield 1, BattleChivalryGood 2, GoodCommander 2, Intelligent 1, LoyaltyStarter 1, PietyStarter 1
                unit		Anfalas Pikemen				exp 2 armour 2 weapon_lvl 1
            end
        end_if
        if I_CharacterExists hirluin_1
            kill_character hirluin_1
            spawn_army
                faction turks
                character	Hirluin, named character, age 32, x 216, y 216, portrait Hirluin, hero_ability SHIELD, label hirluin_rk
                traits		CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityShield 1, Brave 2, GoodCommander 2, LoyaltyStarter 1, KindRuler 2, PietyStarter 1
                unit		Pinnath Gelin Cavalry				exp 1 armour 1 weapon_lvl 0
            end
        end_if
        if I_CharacterExists iorthon_1
            kill_character iorthon_1
            spawn_army
                faction turks
                character	Iorthon, named character, age 48, x 277, y 206, portrait Iorthon
                traits		DunedainRace 1, Gondorian 1, BattleChivalryGood 1, Brave 2, GoodAttacker 2, GoodCommander 2, SiegeDefender 1, LoyaltyStarter 1, PietyStarter 1
                unit		Royal Swan-Guard					exp 2 armour 1 weapon_lvl 0
            end
        end_if
        if I_CharacterExists erchirion_1
            kill_character erchirion_1
            spawn_army
                faction turks
                character	Erchirion, named character, age 32, x 270, y 163, portrait Baragund
                traits		DunedainRace 1, Amrothian 1, GoodCommander 1, GoodTrader 1, KindRuler 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 1
                unit		Sea-ward Spearmen	    exp 1 armour 1 weapon_lvl 0
            end
        end_if
        if I_CharacterExists orodreth_1
            kill_character orodreth_1
            spawn_army
                faction turks
                character	Orodreth, named character, age 51, x 314, y 184, portrait Orodreth, hero_ability CAPTAIN, label orodreth_rk
                traits		CustomBG 1, Hero 1, DunedainRace 1, Gondorian 1, HeroAbilityCaptain 1, GoodCommander 2, GoodDefender 2, GoodTrader 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 1
                unit		Lebennin Marines			exp 1 armour 3 weapon_lvl 1
            end
        end_if
        if I_EventCounter reunited_kingdom_gondor_bat_accepted = 1
            spawn_army
                faction turks
                character	Aragorn, named character, age 38, x 326, y 222, portrait Aragorn, battle_model aragorn, hero_ability STRIDER, label aragorn_1
                traits		Aragorn 1, CustomBG 1, Hero 1, DunedainRace 1, DunedainRanger 1, HouseElendil 1, FactionLeaderCustom 1, HeroAbilityAragorn 1, Brave 2, UmbarPortRaid 1, AragornJourney 1, GoodAttacker 1, GoodAttacker 2, GoodCommander 4, InspiringSpeaker 1, Just 2, KindRuler 3, PietyStarter 1, NaturalMilitarySkill 3, LogisticalSkill 2, Scout 1, Energetic 1, ElvenWife 1
                unit		Grey Company			exp 9 armour 3 weapon_lvl 1
            end
            console_command give_ancillary aragorn_1 elf_friend
            console_command give_ancillary aragorn_1 elendilmir
            console_command give_ancillary aragorn_1 evenstar
            console_command give_ancillary aragorn_1 narsil
            console_command give_ancillary aragorn_1 elendil_crown
        end_if
        console_command give_ancillary aragorn_1 elendil_crown ;elendil crown ancillary given
        ; give ancillaries to the new characters
        if I_CharacterExists faramir_rk
            console_command give_ancillary faramir_rk gondor_horn
            console_command give_ancillary faramir_rk warden
            console_command give_ancillary faramir_rk ithilen_bow
            console_command give_ancillary faramir_rk ranger_ithilien
        end_if
        if I_CharacterExists boromir_rk
            console_command give_ancillary boromir_rk high_warden
            console_command give_ancillary boromir_rk troops_gondor
            console_command give_ancillary boromir_rk gondor_horn
            console_command give_ancillary boromir_rk writings_isildur
            console_command give_ancillary boromir_rk gondor_shield
        end_if
        if I_CharacterExists angbor_rk
            console_command give_ancillary angbor_rk lord_lamedon
            console_command give_ancillary angbor_rk gondor_sword
            console_command give_ancillary angbor_rk gondorian_armour
        end_if
        if I_CharacterExists denethor_rk
            console_command give_ancillary denethor_rk steward_gondor
            console_command give_ancillary denethor_rk drillmaster
            console_command give_ancillary denethor_rk gondorian_armour
            console_command give_ancillary denethor_rk human_overseer
            console_command give_ancillary denethor_rk anor_stone
        end_if
        if I_CharacterExists adrahil_rk
            console_command give_ancillary adrahil_rk prince_dol_amroth
            console_command give_ancillary adrahil_rk veteran_officer
            console_command give_ancillary adrahil_rk da_shield
        end_if
        if I_CharacterExists imrahil_rk
            console_command give_ancillary imrahil_rk knight_armour
            console_command give_ancillary imrahil_rk war_horse
        end_if
        if I_CharacterExists elphir_rk
            console_command give_ancillary elphir_rk lance
        end_if
        if I_CharacterExists duinhir_rk
            console_command give_ancillary duinhir_rk lord_morthond
            console_command give_ancillary duinhir_rk human_miner
        end_if
        if I_CharacterExists forlong_rk
            console_command give_ancillary forlong_rk lord_lossarnach
            console_command give_ancillary forlong_rk axe_lossarnach
        end_if
        if I_CharacterExists golasgil_rk
            console_command give_ancillary golasgil_rk lord_anfalas
            console_command give_ancillary golasgil_rk human_overseer
        end_if
        if I_CharacterExists hirluin_rk
            console_command give_ancillary hirluin_rk lord_pinnath_gelin
            console_command give_ancillary hirluin_rk gondor_shield
        end_if
        if I_CharacterExists orodreth_rk
            console_command give_ancillary orodreth_rk lord_lebennin
            console_command give_ancillary orodreth_rk human_trader
        end_if
        console_command message_collation_set off
        terminate_monitor
    end_monitor

    ; show the event again if reloaded game on the turn you have to make the choice
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_turks == 1
        and I_CompareCounter reunited_kingdom_nd_answer = 1
            campaign_wait 0.1
            historic_event reunited_kingdom_nd true factions { turks, }
        end_if
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
    end_monitor

    ; show the event again if reloaded game on the turn you have to make the choice
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_turks == 1
        and I_CompareCounter reunited_kingdom_gondor_answer = 1
            campaign_wait 0.1
            historic_event reunited_kingdom_gondor true factions { turks, }
        end_if
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
    end_monitor

    ; show the event again if reloaded game on the turn you have to make the choice
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_turks == 1
        and I_CompareCounter reunited_kingdom_gondor_bat_answer = 1
            campaign_wait 0.1
            historic_event reunited_kingdom_gondor_bat true factions { turks, }
        end_if
        if I_IsFactionAIControlled turks
            terminate_monitor
        end_if
    end_monitor

    ;########################## Ents Attack ##########################

    declare_counter ent_counter

    monitor_event SettlementTurnStart FactionType france
    and SettlementBuildingExists = c_logging_house

        historic_event isengard_barracks_lvl1_ready factions { france, }
        terminate_monitor

    end_monitor


    monitor_event SettlementTurnStart FactionType france
    and SettlementBuildingExists = c_sawmill

        historic_event isengard_barracks_lvl2_ready factions { france, }
        terminate_monitor

    end_monitor

   ; monitor_event PreFactionTurnStart FactionType france
    monitor_event SettlementTurnStart FactionType france
    and SettlementBuildingExists = c_lumber_yard

        if not I_IsFactionAIControlled ireland
            terminate_monitor
        end_if

        if not I_IsFactionAIControlled mongols
            terminate_monitor
        end_if

        if I_EventCounter isengard_barracks_lvl3_ready = 0
            historic_event isengard_barracks_lvl3_ready factions { france, }
        end_if

        inc_counter ent_counter 1
		
		if not I_IsFactionAIControlled france
			inc_counter ent_counter 1
		end_if

        ;if I_TurnNumber = 1
        if I_CompareCounter ent_counter = 40
        and I_IsFactionAIControlled ireland
        and I_IsFactionAIControlled mongols
        and I_SettlementOwner Fangorn = france
            set_counter ent_counter 0
            if I_NumberOfSettlements ireland > 0
            and I_EventCounter ents_spawned < 1
                spawn_army
                    faction scripts
                    character	Beechbone, named character, age 25, x 243, y 281, portrait Treebeard, battle_model Elephant_Crew3, label ents_1
                    traits     GoodCommander 3
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                end
                give_everything_to_faction scripts ireland false
                send_character_off_map ents_1
                set_event_counter ents_spawned 1
                spawn_army
                    faction ireland
                    character	Beechbone, named character, age 25, x 243, y 281, portrait Treebeard, battle_model Elephant_Crew3, label ents_1
                    traits     GoodCommander 3
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                end
                console_command give_trait ents_1 EntsRace 1
                console_command damage_wall Fangorn breach
                console_command damage_wall Fangorn gate
                siege_settlement ents_1, Fangorn, attack
                if not I_IsFactionAIControlled france
                    campaign_wait 2
                    disable_cursor
                    ui_flash_start prebattle_fight_button
                    campaign_wait 5
                    select_ui_element prebattle_fight_button
                    simulate_mouse_click lclick_down
                    simulate_mouse_click lclick_up
                    enable_cursor
                    ui_flash_stop prebattle_fight_button
                    terminate_monitor
               end_if
            end_if
            if I_NumberOfSettlements mongols > 0
            and I_EventCounter ents_spawned < 1
                spawn_army
                    faction scripts
                    character	Beechbone, named character, age 25, x 243, y 281, portrait Treebeard, battle_model Elephant_Crew3, label ents_2
                    traits     GoodCommander 3
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                end
                give_everything_to_faction scripts mongols false
                send_character_off_map ents_2
                set_event_counter ents_spawned 1
                spawn_army
                    faction mongols
                    character	Beechbone, named character, age 25, x 243, y 281, portrait Treebeard, battle_model Elephant_Crew3, label ents_2
                    traits     GoodCommander 3
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                    unit		Ents				exp 9 armour 0 weapon_lvl 0
                end
                console_command give_trait ents_2 EntsRace 1
                console_command damage_wall Fangorn breach
                console_command damage_wall Fangorn gate
                siege_settlement ents_2, Fangorn, attack
                if not I_IsFactionAIControlled france
                    campaign_wait 2
                    disable_cursor
                    ui_flash_start prebattle_fight_button
                    campaign_wait 5
                    select_ui_element prebattle_fight_button
                    simulate_mouse_click lclick_down
                    simulate_mouse_click lclick_up
                    enable_cursor
                    ui_flash_stop prebattle_fight_button
                    terminate_monitor
                end_if
            end_if
            if I_NumberOfSettlements ireland = 0
            and I_NumberOfSettlements mongols = 0
                terminate_monitor
            end_if
        end_if


    end_monitor

    declare_counter ents_attack

    monitor_event PreFactionTurnStart FactionType france

        if not I_IsFactionAIControlled ireland
            terminate_monitor
        end_if

        if not I_IsFactionAIControlled mongols
            terminate_monitor
        end_if

        if I_EventCounter ents_spawned = 1
        and not I_SettlementOwner Fangorn = france
        and I_SettlementOwner Nan_Curunir = france
            inc_counter ents_attack 1
		
			if not I_IsFactionAIControlled france
				inc_counter ent_counter 1
			end_if

            ;if I_CompareCounter ents_attack = 2
            if I_CompareCounter ents_attack = 20
            and I_IsFactionAIControlled ireland
            and I_IsFactionAIControlled mongols
                set_counter ents_attack 0
                if I_NumberOfSettlements ireland > 0
                and I_EventCounter ents_spawned2 < 1
                    spawn_army
                        faction scripts
                        character	Treebeard, named character, age 25, x 224, y 277, portrait Treebeard, battle_model Elephant_Crew3, label ents_3
                        traits     GoodCommander 3
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                    end
                    give_everything_to_faction scripts ireland false
                    send_character_off_map ents_3
                    set_event_counter ents_spawned2 1
                    spawn_army
                        faction ireland
                        character	Treebeard, named character, age 25, x 224, y 277, portrait Treebeard, battle_model Elephant_Crew3, label ents_3
                        traits     GoodCommander 3
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                    end
                    console_command give_trait ents_3 EntsRace 1
                    console_command damage_wall Nan_Curunir breach
                    console_command damage_wall Nan_Curunir gate
                    siege_settlement ents_3, Nan_Curunir, attack
                    if not I_IsFactionAIControlled france
                        campaign_wait 2
                        disable_cursor
                        ui_flash_start prebattle_fight_button
                        campaign_wait 5
                        select_ui_element prebattle_fight_button
                        simulate_mouse_click lclick_down
                        simulate_mouse_click lclick_up
                        enable_cursor
                        ui_flash_stop prebattle_fight_button
                        terminate_monitor
                   end_if
                end_if
                if I_NumberOfSettlements mongols > 0
                and I_EventCounter ents_spawned2 < 1
                    spawn_army
                        faction scripts
                        character	Treebeard, named character, age 25, x 224, y 277, portrait Treebeard, battle_model Elephant_Crew3, label ents_4
                        traits     GoodCommander 3
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                    end
                    give_everything_to_faction scripts mongols false
                    send_character_off_map ents_4
                    set_event_counter ents_spawned2 1
                    spawn_army
                        faction mongols
                        character	Treebeard, named character, age 25, x 224, y 277, portrait Treebeard, battle_model Elephant_Crew3, label ents_4
                        traits     GoodCommander 3
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                        unit		Ents				exp 9 armour 0 weapon_lvl 0
                    end
                    console_command give_trait ents_4 EntsRace 1
                    console_command damage_wall Nan_Curunir breach
                    console_command damage_wall Nan_Curunir gate
                    siege_settlement ents_4, Nan_Curunir, attack
                    if not I_IsFactionAIControlled france
                        campaign_wait 2
                        disable_cursor
                        ui_flash_start prebattle_fight_button
                        campaign_wait 5
                        select_ui_element prebattle_fight_button
                        simulate_mouse_click lclick_down
                        simulate_mouse_click lclick_up
                        enable_cursor
                        ui_flash_stop prebattle_fight_button
                        terminate_monitor
                   end_if
                end_if
                if I_NumberOfSettlements ireland = 0
                and I_NumberOfSettlements mongols = 0
                    terminate_monitor
                end_if
            end_if
        end_if
    end_monitor

    ;########################## Beacons of Gondor ##########################

    monitor_event PreFactionTurnStart FactionType sicily
    and DiplomaticStanceFromFaction milan = Allied
        if I_NumberOfSettlements milan = 0
            terminate_monitor
        end_if

        if not I_IsFactionAIControlled milan
            terminate_monitor
        end_if


        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_SettlementUnderSiege Anorien
        and I_SettlementOwner Anorien = sicily
        and I_EventCounter beacon1_spawn = 0
            set_event_counter beacon1_spawn 1
            historic_event beacons_of_gondor factions { sicily, }
            spawn_army
                faction sicily
                character	Hallas, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Eored Lancers	    exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_TurnNumber = 30
        and I_SettlementOwner Anorien = sicily
        and I_EventCounter beacon1_spawn = 0
            set_event_counter beacon1_spawn 1
            historic_event beacons_of_gondor factions { sicily, }
            spawn_army
                faction sicily
                character	Hallas, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Eored Lancers	    exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_SettlementUnderSiege Anorien
        and I_SettlementOwner Anorien = sicily
        and I_TurnNumber > 30
        and I_EventCounter beacon2_spawn = 0
            set_event_counter beacon2_spawn 1
            historic_event beacons_of_gondor2 factions { sicily, }
            spawn_army
                faction sicily
                character	Himion, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Eored Lancers	    exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Eored Skirmishers	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_TurnNumber = 50
        and I_SettlementOwner Anorien = sicily
        and I_EventCounter beacon2_spawn = 0
            set_event_counter beacon2_spawn 1
            historic_event beacons_of_gondor2 factions { sicily, }
            spawn_army
                faction sicily
                character	Himion, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Eored Lancers	    exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Eored Skirmishers	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_SettlementUnderSiege Anorien
        and I_SettlementOwner Anorien = sicily
        and I_TurnNumber > 50
        and I_EventCounter beacon3_spawn = 0
            set_event_counter beacon3_spawn 1
            historic_event beacons_of_gondor3 factions { sicily, }
            spawn_army
                faction sicily
                character	Mallach, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Royal Guard	        exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Eored Lancers		exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Eored Skirmishers	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements milan > 5
        and I_SettlementOwner Kings_Land = milan
        and I_TurnNumber = 80
        and I_SettlementOwner Anorien = sicily
        and I_EventCounter beacon3_spawn = 0
            set_event_counter beacon3_spawn 1
            historic_event beacons_of_gondor3 factions { sicily, }
            spawn_army
                faction sicily
                character	Mallach, named character, age 32, x 326, y 219
                traits		GoodManRace 1, Rohirrim 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, Loyal 1, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Royal Guard	        exp 1 armour 1 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim			exp 1 armour 0 weapon_lvl 0
                unit		Eored Lancers		exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Rohirrim Archers	exp 1 armour 0 weapon_lvl 0
                unit		Eored Skirmishers	exp 1 armour 0 weapon_lvl 0
            end
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
    and DiplomaticStanceFromFaction sicily = Allied
        if I_NumberOfSettlements sicily = 0
            terminate_monitor
        end_if

        if not I_IsFactionAIControlled sicily
            terminate_monitor
        end_if


        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_SettlementUnderSiege Kings_Land
        and I_SettlementOwner Kings_Land = milan
        and I_EventCounter beacon1_spawn_rohan = 0
            set_event_counter beacon1_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Fulor, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Blackroot Vale Archers	exp 1 armour 1 weapon_lvl 0
                unit		Gondor Militia		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Militia		    exp 1 armour 0 weapon_lvl 0
                unit		Territorial Guardsmen	exp 1 armour 0 weapon_lvl 0
                unit		Territorial Guardsmen	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_TurnNumber = 30
        and I_SettlementOwner Kings_Land = milan
        and I_EventCounter beacon1_spawn_rohan = 0
            set_event_counter beacon1_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Fulor, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Blackroot Vale Archers	exp 1 armour 1 weapon_lvl 0
                unit		Gondor Militia		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Militia		    exp 1 armour 0 weapon_lvl 0
                unit		Territorial Guardsmen	exp 1 armour 0 weapon_lvl 0
                unit		Territorial Guardsmen	exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_SettlementUnderSiege Kings_Land
        and I_SettlementOwner Kings_Land = milan
        and I_TurnNumber > 30
        and I_EventCounter beacon2_spawn_rohan = 0
            set_event_counter beacon2_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Heostor, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Gondor Bodyguard	        exp 1 armour 1 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_TurnNumber = 50
        and I_SettlementOwner Kings_Land = milan
        and I_EventCounter beacon2_spawn_rohan = 0
            set_event_counter beacon2_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Heostor, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Gondor Bodyguard	        exp 1 armour 1 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_SettlementUnderSiege Kings_Land
        and I_SettlementOwner Kings_Land = milan
        and I_TurnNumber > 50
        and I_EventCounter beacon3_spawn_rohan = 0
            set_event_counter beacon3_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Herumer, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Gondor Bodyguard	        exp 1 armour 1 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements sicily > 12
        and I_SettlementOwner Anorien = sicily
        and I_TurnNumber = 80
        and I_SettlementOwner Kings_Land = milan
        and I_EventCounter beacon3_spawn_rohan = 0
            set_event_counter beacon3_spawn_rohan 1
            historic_event beacons_of_rohan factions { milan, }
            spawn_army
                faction milan
                character	Herumer, named character, age 32, x 284, y 231
                traits		DunedainRace 1, Gondorian 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Intelligent 1, Loyal 2, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Gondor Bodyguard	        exp 1 armour 1 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Infantry		    exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Spearmen	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
                unit		Gondor Archers	        exp 1 armour 0 weapon_lvl 0
            end
        end_if
    end_monitor


    ;########################## Faction: Anduin ##########################

    ; Keep the Roads Safe
    ; clear mirkwood


    set_counter roads_are_safe_check 0
    set_counter mirkwood_safe_check 0
    set_counter anduin_tolls 0
    set_event_counter roads_are_safe 0
    set_event_counter roads_are_not_safe 0
    set_event_counter anduin_high_pass_lost 1
    set_event_counter anduin_high_pass 0
    set_event_counter mirkwood_safe 0
    set_event_counter mirkwood_not_safe 1

    ; clear mirkwood message timing
    monitor_event FactionTurnStart FactionIsLocal
        and FactionType timurids
        and I_EventCounter roads_are_safe = 1
        and I_CompareCounter mirkwood_safe_check == 0
        log always ---------------------------clear mirkwood msg---------------------------------
        historic_event clear_mirkwood factions { timurids, }
        terminate_monitor
    end_monitor

    ; check if mirkwood is safe
    monitor_event FactionTurnStart FactionType timurids
        log always ---------------------------mirkwood safe check---------------------------------
        if I_CompareCounter mirkwood_safe_check == 1
            if I_EventCounter mirkwood_safe = 0
                historic_event mirkwood_safe factions { timurids, }
                set_event_counter mirkwood_safe 1
                set_event_counter mirkwood_not_safe 0
            end_if
        end_if
        if I_CompareCounter mirkwood_safe_check == 0
            if I_EventCounter mirkwood_not_safe = 0
                historic_event mirkwood_not_safe factions { timurids, }
                set_event_counter mirkwood_safe 0
                set_event_counter mirkwood_not_safe 1
            end_if
        end_if
    end_monitor

    ; check if roads are safe
    monitor_event FactionTurnStart FactionType timurids
        log always ---------------------------roads monitor---------------------------------
        if I_CompareCounter roads_are_safe_check == 1
            log always ---------------------------roads safe check---------------------------------
            if I_EventCounter roads_are_safe = 0
                historic_event roads_are_safe factions { timurids, }
                set_event_counter roads_are_safe 1
                set_event_counter roads_are_not_safe 0
            end_if
            if I_SettlementOwner High_Pass = timurids   ;extra money for owning high pass (goblin-town)
                if I_EventCounter anduin_high_pass = 0
                    historic_event anduin_high_pass factions { timurids, }
                    set_event_counter anduin_high_pass 1
                    set_event_counter anduin_high_pass_lost 0
                    increment_kings_purse timurids 500
                end_if
                set_counter anduin_tolls 1
            end_if
        end_if
        if I_CompareCounter roads_are_safe_check == 0
            log always ---------------------------roads not safe check---------------------------------
            if I_EventCounter roads_are_not_safe = 0
                historic_event roads_are_not_safe factions { timurids, }
                set_event_counter roads_are_safe 0
                set_event_counter roads_are_not_safe 1
            end_if
            if I_CompareCounter anduin_tolls = 1
                if I_EventCounter anduin_high_pass_Lost = 0
                    historic_event anduin_high_pass_lost factions { timurids, }
                    set_event_counter anduin_high_pass 0
                    set_event_counter anduin_high_pass_lost 1
                    increment_kings_purse timurids -500
                end_if
                set_counter anduin_tolls 0
            end_if
        end_if
    end_monitor


    ;########################## Elven Union #########################

    ; Woodland Realm

    declare_counter elven_union_answer
    set_counter elven_union_answer 0
    set_event_counter elven_union 0

    ; conditions for wr uniting
    monitor_event FactionTurnStart FactionIsLocal
        and FactionType mongols
        ;and I_TurnNumber = 1
        and DiplomaticStanceFromFaction ireland = Allied
        and DiplomaticStanceFromFaction timurids = Allied
        and I_CompareCounter mirkwood_safe_check == 1
        and I_NumberOfSettlements poland = 0
        and not I_CharacterExists spiders_1
        and not I_CharacterExists spiders_2
        and not I_CharacterExists spiders_3
        and not I_CharacterExists spiders_4
        and not I_CharacterExists spiders_5
        and not I_CharacterExists spiders_6
        and not I_CharacterExists spiders_7
        and not I_CharacterExists spiders_8
        log always ---------------------------unite wr message---------------------------------
        if I_IsFactionAIControlled mongols
            terminate_monitor
        end_if
        if I_EventCounter elven_union = 1
            terminate_monitor
        end_if
        set_counter elven_union_answer 1
        historic_event elven_union_wr true factions { mongols, }
        terminate_monitor
    end_monitor

    ; the uniting script itself
    monitor_event EventCounter EventCounterType elven_union_wr_accepted
        and I_EventCounter elven_union_wr_accepted = 1
        log always ---------------------------wr is uniting---------------------------------
        historic_event elven_union_wr_agreed factions { mongols, }
        set_counter elven_union_answer 0
        set_event_counter elven_union 1
        give_everything_to_faction ireland mongols false
        add_money mongols 2000
        console_command diplomatic_stance mongols spain war
        set_faction_standing mongols spain -1.00
        set_faction_standing spain mongols -1.00
        console_command diplomatic_stance mongols venice war
        set_faction_standing mongols venice -1.00
        set_faction_standing venice mongols -1.00
        console_command diplomatic_stance mongols france war
        set_faction_standing mongols france -1.00
        set_faction_standing france mongols -1.00
        console_command diplomatic_stance mongols england war
        set_faction_standing mongols england -1.00
        set_faction_standing england mongols -1.00
        console_command diplomatic_stance mongols portugal war
        set_faction_standing mongols portugal -1.00
        set_faction_standing portugal mongols -1.00
        console_command diplomatic_stance mongols hre war
        set_faction_standing mongols hre -1.00
        set_faction_standing hre mongols -1.00
        console_command diplomatic_stance mongols gundabad war
        set_faction_standing mongols gundabad -1.00
        set_faction_standing gundabad mongols -1.00
        if I_EventCounter blue_wizards_fail = 1
            console_command diplomatic_stance mongols khand war
            set_faction_standing mongols khand -1.00
            set_faction_standing khand mongols -1.00
        end_if
        console_command diplomatic_stance mongols milan allied
        console_command diplomatic_stance mongols sicily allied
        console_command diplomatic_stance mongols saxons allied
        console_command diplomatic_stance mongols denmark allied
        console_command diplomatic_stance mongols turks allied
        set_faction_standing mongols milan 1.00
        set_faction_standing mongols sicily 1.00
        set_faction_standing mongols saxons 1.00
        set_faction_standing mongols denmark 1.00
        set_faction_standing mongols turks 1.00
        set_faction_standing milan mongols 1.00
        set_faction_standing sicily mongols 1.00
        set_faction_standing saxons mongols 1.00
        set_faction_standing denmark mongols 1.00
        set_faction_standing turks mongols 1.00
        spawn_army
            faction mongols
            character	Berangrim, named character, age 26, x 311, y 383, portrait Berangrim, battle_model timurids_general, hero_ability BEORN
            traits		Beornwr 1, Hero 1, BeorningRace 1, HeroAbilityBeorning 1, GoodCommander 1, GoodDefender 1, HaleAndHearty 2, LoyaltyStarter 1, PietyStarter 1
            unit		Beorning Warriors					exp 7 armour 0 weapon_lvl 0
            unit		Greenwood Foresters				exp 2 armour 0 weapon_lvl 0
            unit		Woodmen Warriors				exp 1 armour 1 weapon_lvl 0
            unit		Woodmen Trackers				exp 1 armour 0 weapon_lvl 0
            unit		Woodmen Trackers				exp 1 armour 0 weapon_lvl 0
        end
        if I_NumberOfSettlements england > 0
            and I_IsFactionAIControlled england
            increment_kings_purse england 1000
            add_money england 3000
            if I_SettlementOwner Morgul_Vale = england
                console_command create_unit Morgul_Vale "Black Uruks" 3 3 0 0
                console_command create_unit Morgul_Vale "Orc Archers" 2 3 0 0
            end_if
            spawn_army
                faction england
                character	random_name, named character, age 26, x 330, y 261, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 7 armour 0 weapon_lvl 0
                unit		Black Uruk Halberds			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Black Uruks			exp 3 armour 0 weapon_lvl 0
                unit		Morgul Chosen			exp 3 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
            end
            spawn_army
                faction england
                character	random_name, named character, age 26, x 338, y 278, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 5 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements venice > 0
            and I_IsFactionAIControlled venice
            increment_kings_purse venice 1000
            spawn_army
                faction venice
                character	random_name, named character, age 23, x 350, y 327, family, direction W
                traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                unit		Loke Rim Bodyguard			exp 2 armour 0 weapon_lvl 1
                unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements khand > 0
            and I_IsFactionAIControlled khand
            and I_EventCounter blue_wizards_fail = 1
            spawn_army
                faction khand
                character	random_name, named character, age 31, x 367, y 307, family, direction S
                traits		BadManRace 1, VariagTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodAttacker 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1
                unit		Variag Nobles						exp 5 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
            end
        end_if
        if I_CharacterExists celeborn_1
            kill_character celeborn_1
            spawn_army
                faction mongols
                character	Celeborn, named character, age 57, x 268, y 327, portrait Celeborn, battle_model celeborn, hero_ability SILVAN, label celeborn_union
                traits		CelebornUnion 1, CustomBG 1, Hero 1, ElvenRace 1, Sindar 1, HouseElwe 1, HeroAbilitySilvanElf 1, Handsome 2, ElvesSauronWar 1, BattleChivalryGood 2, GoodCommander 2, GoodDefender 1, Just 1, LivedAges 1, PoliticsSkill 1, PietyStarter 1
                unit		Berio I Ngelaidh			exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_CharacterExists haldir_1
            kill_character haldir_1
            spawn_army
                faction mongols
                character	Haldir, named character, age 31, x 258, y 322, portrait Haldir, battle_model haldir, hero_ability Light_of_the_Faith, label haldir_union
                traits		HaldirUnion 1, Hero 1, ElvenRace 1, Nandor 1, HouseAmdir 1, HeroAbilityElf 1, Handsome 1, CommanderMarchwardens 1, BattleChivalryGood 1, GoodCommander 1, Loyal 3, LoyaltyStarter 1, PietyStarter 1
                unit		Galadhrim Archers			exp 4 armour 1 weapon_lvl 1
            end
        end_if
        if I_CharacterExists celeborn_union
            console_command give_ancillary celeborn_union king_lorien
            console_command give_ancillary celeborn_union lady_of_lorien
            console_command give_ancillary celeborn_union galadriel_mirror
            console_command give_ancillary celeborn_union nenya
        end_if
        if I_CharacterExists haldir_union
            console_command give_ancillary haldir_union troops_gala
            console_command give_ancillary haldir_union light_earendil
            console_command give_ancillary haldir_union marchwarden
        end_if
        terminate_monitor
    end_monitor

    ; union declined
    monitor_event EventCounter EventCounterType elven_union_wr_declined
        and I_EventCounter elven_union_wr_declined = 1
        log always ---------------------------wr union declined---------------------------------
        set_counter elven_union_answer 0
        terminate_monitor
    end_monitor

    ;make sure message pops up on game reload
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_mongols == 1
            and I_CompareCounter elven_union_answer = 1
            campaign_wait 0.1
            historic_event elven_union_wr true factions { mongols, }
        end_if
        if I_IsFactionAIControlled mongols
            terminate_monitor
        end_if
    end_monitor

    ; Lothlorien

    ; conditions for lorien uniting
    monitor_event FactionTurnStart FactionType ireland
        ;and I_TurnNumber = 1
        and DiplomaticStanceFromFaction mongols = Allied
        and DiplomaticStanceFromFaction timurids = Allied
        and I_CompareCounter mirkwood_safe_check == 1
        and not I_CharacterExists spiders_1
        and not I_CharacterExists spiders_2
        and not I_CharacterExists spiders_3
        and not I_CharacterExists spiders_4
        and not I_CharacterExists spiders_5
        and not I_CharacterExists spiders_6
        and not I_CharacterExists spiders_7
        and not I_CharacterExists spiders_8
        and I_NumberOfSettlements poland = 0
        log always ---------------------------lorien unite message---------------------------------
        if I_IsFactionAIControlled ireland
            if not I_IsFactionAIControlled mongols
                terminate_monitor
            end_if
            if I_IsFactionAIControlled mongols
                set_event_counter elven_union_lorien_accepted 1
            end_if
        end_if
        if I_EventCounter elven_union = 1
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled ireland
            set_counter elven_union_answer 1
            historic_event elven_union_lorien true factions { ireland, }
        end_if
        terminate_monitor
    end_monitor

    ; the uniting script itself
    monitor_event EventCounter EventCounterType elven_union_lorien_accepted
        and I_EventCounter elven_union_lorien_accepted = 1
        log always ---------------------------lorien is uniting---------------------------------
        historic_event elven_union_lorien_agreed factions { ireland, }
        set_counter elven_union_answer 0
        set_event_counter elven_union 1
        give_everything_to_faction mongols ireland false
        add_money ireland 2000
        console_command diplomatic_stance ireland spain war
        set_faction_standing ireland spain -1.00
        set_faction_standing spain ireland -1.00
        console_command diplomatic_stance ireland venice war
        set_faction_standing ireland venice -1.00
        set_faction_standing venice ireland -1.00
        console_command diplomatic_stance ireland france war
        set_faction_standing ireland france -1.00
        set_faction_standing france ireland -1.00
        console_command diplomatic_stance ireland england war
        set_faction_standing ireland england -1.00
        set_faction_standing england ireland -1.00
        console_command diplomatic_stance ireland portugal war
        set_faction_standing ireland portugal -1.00
        set_faction_standing portugal ireland -1.00
        console_command diplomatic_stance ireland hre war
        set_faction_standing ireland hre -1.00
        set_faction_standing hre ireland -1.00
        console_command diplomatic_stance ireland gundabad war
        set_faction_standing ireland gundabad -1.00
        set_faction_standing gundabad ireland -1.00
        if I_EventCounter blue_wizards_fail = 1
            console_command diplomatic_stance ireland khand war
            set_faction_standing ireland khand -1.00
            set_faction_standing khand ireland -1.00
        end_if
        console_command diplomatic_stance ireland milan allied
        console_command diplomatic_stance ireland sicily allied
        console_command diplomatic_stance ireland saxons allied
        console_command diplomatic_stance ireland denmark allied
        console_command diplomatic_stance ireland turks allied
        set_faction_standing ireland milan 1.00
        set_faction_standing ireland sicily 1.00
        set_faction_standing ireland saxons 1.00
        set_faction_standing ireland denmark 1.00
        set_faction_standing ireland turks 1.00
        set_faction_standing milan ireland 1.00
        set_faction_standing sicily ireland 1.00
        set_faction_standing saxons ireland 1.00
        set_faction_standing denmark ireland 1.00
        set_faction_standing turks ireland 1.00
        spawn_army
            faction ireland
            character	Berangrim, named character, age 26, x 311, y 383, portrait Berangrim, battle_model timurids_general, hero_ability BEORN
            traits		Beornlorien 1, Hero 1, BeorningRace 1, HeroAbilityBeorning 1, GoodCommander 1, GoodDefender 1, HaleAndHearty 2, LoyaltyStarter 1, PietyStarter 1
            unit		Beorning Warriors					exp 7 armour 0 weapon_lvl 0
            unit		Greenwood Foresters				exp 2 armour 0 weapon_lvl 0
            unit		Woodmen Warriors				exp 1 armour 1 weapon_lvl 0
            unit		Woodmen Trackers				exp 1 armour 0 weapon_lvl 0
            unit		Woodmen Trackers				exp 1 armour 0 weapon_lvl 0
        end
        if I_NumberOfSettlements england > 0
            and I_IsFactionAIControlled england
            increment_kings_purse england 1000
            add_money england 3000
            if I_SettlementOwner Morgul_Vale = england
                console_command create_unit Morgul_Vale "Black Uruks" 3 3 0 0
                console_command create_unit Morgul_Vale "Orc Archers" 2 3 0 0
            end_if
            spawn_army
                faction england
                character	random_name, named character, age 26, x 330, y 261, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 7 armour 0 weapon_lvl 0
                unit		Black Uruk Halberds			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers			exp 2 armour 0 weapon_lvl 0
                unit		Black Uruks			exp 3 armour 0 weapon_lvl 0
                unit		Morgul Chosen			exp 3 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
                unit		Orc Host			exp 1 armour 0 weapon_lvl 0
            end
            spawn_army
                faction england
                character	random_name, named character, age 26, x 338, y 278, family, hero_ability WHIPING
                traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk Bodyguard					exp 5 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements venice > 0
            and I_IsFactionAIControlled venice
            increment_kings_purse venice 1000
            spawn_army
                faction venice
                character	random_name, named character, age 23, x 350, y 327, family, direction W
                traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                unit		Loke Rim Bodyguard			exp 2 armour 0 weapon_lvl 1
                unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Warriors			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                unit		Daritai Crossbowmen		exp 0 armour 0 weapon_lvl 0
                unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Hunters			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
                unit		Daritai Clansmen			exp 1 armour 0 weapon_lvl 0
            end
        end_if
        if I_NumberOfSettlements khand > 0
            and I_IsFactionAIControlled khand
            and I_EventCounter blue_wizards_fail = 1
            spawn_army
                faction khand
                character	random_name, named character, age 31, x 367, y 307, family, direction S
                traits		BadManRace 1, VariagTribe 1, AIBoost 1, BattleChivalryEvil 1, GoodAttacker 2, GoodCavalryGeneral 1, GoodCommander 2, HarshRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Energetic 1
                unit		Variag Nobles						exp 5 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Khandish Raiders			exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
                unit		Nomad Horsemen					exp 1 armour 1 weapon_lvl 0
            end
        end_if
        if I_CharacterExists thranduil_1
            kill_character thranduil_1
            spawn_army
                faction ireland
                character	Thranduil, named character, age 44, x 325, y 413, portrait Thranduil, battle_model thranduil, hero_ability SILVAN, label thranduil_union
                traits		ThranduilUnion 1, CustomBG 1, Hero 1, ElvenRace 1, Sindar 1, HouseOropher 1, HeroAbilitySilvanElf 1, Handsome 2, LastAllianceWar 1, GoodAttacker 2, GoodCommander 2, KindRuler 2, LivedAges 1, PietyStarter 1, StrategyChivalryGood 1
                unit		Aredhirith				exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_CharacterExists legolas_1
            kill_character legolas_1
            spawn_army
                faction ireland
                character	Legolas, named character, age 32, x 300, y 408, portrait Legolas, battle_model legolas, hero_ability SILVAN, label legolas_union
                traits		LegolasUnion 1, CustomBG 1, Hero 1, ElvenRace 1, Sindar 1, HouseOropher 1, HeroAbilitySilvanElf 1, Handsome 1, Brave 2, GoodAttacker 3, GoodCommander 3, Just 1, Loyal 3, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 2
                unit		Hin e-Daur				exp 5 armour 1 weapon_lvl 1
            end
        end_if
        if I_CharacterExists thranduil_union
            console_command give_ancillary thranduil_union king_woodland_realm
            console_command give_ancillary thranduil_union emeralds_girion
        end_if
        if I_CharacterExists legolas_union
            console_command give_ancillary legolas_union troops_silvan
            console_command give_ancillary legolas_union legolas_knife
            console_command give_ancillary legolas_union light_earendil
        end_if
        terminate_monitor
    end_monitor

    ; union declined
    monitor_event EventCounter EventCounterType elven_union_lorien_declined
        and I_EventCounter elven_union_lorien_declined = 1
        log always ---------------------------lorien union declined---------------------------------
        set_counter elven_union_answer 0
        terminate_monitor
    end_monitor

    ;make sure message pops up on game reload
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_ireland == 1
            and I_CompareCounter elven_union_answer = 1
            campaign_wait 0.1
            historic_event elven_union_lorien true factions { ireland, }
        end_if
        if I_IsFactionAIControlled ireland
            terminate_monitor
        end_if
    end_monitor
    
    monitor_event CharacterTurnStart Trait Thranduil > 0
    and IsRegionOneOf Elven_Mirkwood_Province
        
        add_money mongols 800
        
    end_monitor
    
    monitor_event CharacterTurnStart Trait ThranduilUnion > 0
    and IsRegionOneOf Elven_Mirkwood_Province
        
        add_money ireland 800
        
    end_monitor
    
    monitor_event CharacterTurnStart Trait Celeborn > 0
    and IsRegionOneOf Celebrant_Province
        
        add_money ireland 800
        
    end_monitor
    
    monitor_event CharacterTurnStart Trait CelebornUnion > 0
    and IsRegionOneOf Celebrant_Province
        
        add_money mongols 800
        
    end_monitor

    ;########################## Scouring of the Shire ######################

    ;Sharkey

    monitor_event PreFactionTurnStart FactionIsLocal
        and I_NumberOfSettlements france = 0
        log always ---------------------------sharkey spawning--------------------------------
        if I_IsFactionAIControlled normans
            and I_NumberOfSettlements normans > 0
            and RandomPercent <= 80
            if I_EventCounter corrupt_shire_ai = 0
                set_event_counter scouring_shire_ai 1
                historic_event scouring_shire factions { all, }
                set_event_counter scouring_shire 1
                link_faction_ai normans corrupt_bree
                link_faction_ai turks   arnor_corrupt_bree
                console_command diplomatic_stance normans turks neutral
                set_faction_standing normans turks -1.00
                set_faction_standing turks normans -1.00
                console_command diplomatic_stance normans sicily neutral
                set_faction_standing normans sicily -1.00
                set_faction_standing sicily normans -1.00
                console_command diplomatic_stance normans denmark neutral
                set_faction_standing normans denmark -1.00
                set_faction_standing denmark normans -1.00
                console_command diplomatic_stance normans saxons neutral
                set_faction_standing normans saxons -1.00
                set_faction_standing saxons normans -1.00
                console_command diplomatic_stance normans mongols neutral
                set_faction_standing normans mongols -1.00
                set_faction_standing mongols normans -1.00
                console_command diplomatic_stance normans ireland neutral
                set_faction_standing normans ireland -1.00
                set_faction_standing ireland normans -1.00
                console_command diplomatic_stance normans timurids neutral
                set_faction_standing normans timurids -1.00
                set_faction_standing timurids normans -1.00
                console_command diplomatic_stance normans milan neutral
                set_faction_standing normans milan -1.00
                set_faction_standing milan normans -1.00
                console_command diplomatic_stance normans moors neutral
                set_faction_standing normans moors -1.00
                set_faction_standing moors normans -1.00
                console_command diplomatic_stance normans norway neutral
                set_faction_standing normans norway -1.00
                set_faction_standing norway normans -1.00
                console_command diplomatic_stance normans aztecs allied
                set_faction_standing normans aztecs 0.80
                set_faction_standing aztecs normans 0.80
                if I_EventCounter enedwaith_evil = 1
                    console_command diplomatic_stance normans teutonic_order allied
                    set_faction_standing normans teutonic_order 0.80
                    set_faction_standing teutonic_order normans 0.80
                end_if
                if I_EventCounter enedwaith_good = 1
                    console_command diplomatic_stance normans teutonic_order war
                    set_faction_standing normans teutonic_order -0.80
                    set_faction_standing teutonic_order normans -0.80
                end_if
                if I_TurnNumber <= 29
                    console_command diplomatic_stance normans hungary neutral
                    set_faction_standing normans hungary -1.00
                    set_faction_standing hungary normans -1.00
                end_if
                if I_TurnNumber > 29
                    and I_EventCounter luin_ring_rejected = 1
                    console_command diplomatic_stance normans hungary neutral
                    set_faction_standing normans hungary -1.00
                    set_faction_standing hungary normans -1.00
                end_if
                spawn_army
                    faction normans
                    character   Lothos, named character, age 92, x 167, y 379, family, portrait Lotho, label lotho_1
                    traits		HobbitRace 1, Breelander 1, InspiringSpeaker 1, Drink 3, Corrupt 1, CustomBG 1
                    unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
                    unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
                    unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
                    unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
                end
                spawn_army
                    faction normans
                    character   Ferny, named character, age 40, x 167, y 379, family, portrait Bill_Ferny, label ferny_1
                    traits		MiddleManRace 1, Breelander 1, Hatred 1, Liar 2, SpyMaster 2, Corrupt 3
                    unit		Gate Keepers    			exp 3 armour 1 weapon_lvl 0
                    unit		Bandits           		    exp 1 armour 0 weapon_lvl 0
                    unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
                    unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
                end
                spawn_army
                    faction normans
                    character   Sandyman, named character, age 120, x 144, y 368, family, portrait Sandyman, label sandyman_1
                    traits		Sandyman 1, Breelander 1, Liar 1, Xenophobia 1, InspiringSpeaker 1, Drink 3, CustomBG 1
                    unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
                    unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
                    unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
                    unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
                end
                if I_CharacterExists bilbo_1
                    send_character_off_map bilbo_1
                end_if
                if I_CharacterExists barliman_1
                    send_character_off_map barliman_1
                end_if
                if I_CharacterExists frodo_1
                    send_character_off_map frodo_1
                end_if
                if I_CharacterExists brathor1
                    kill_character brathor1
                end_if
                destroy_units normans Dunedain Rangers
                destroy_units normans Dunedain Wardens
                destroy_units normans Sworn Horsemen
                destroy_units normans Dunedain Blademasters
                spawn_army
                    faction normans
                    character Sharkey, named character, age 19, x 133, y 383, family, portrait saruman, battle_model saruman, hero_ability THE_VOICE, label sharkey_1
                    traits		Sharkey 1, MaiaRace 1, HeroAbilitySaruman 1, GoodCommander 3, InspiringSpeaker 3, FearGeneral 1, NaturalManagementSkill 2, NaturalMilitarySkill 2, Intelligent 2, CustomBG 1
                    unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
                    unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                end
                console_command give_ancillary sharkey_1 crebain
                console_command give_ancillary sharkey_1 imported_goods
                console_command give_ancillary sharkey_1 saruman_ring
                console_command give_ancillary sharkey_1 staff_saruman
            end_if
            if I_EventCounter corrupt_shire_ai = 1
                spawn_army
                    faction normans
                    character Sharkey, named character, age 19, x 133, y 383, family, portrait saruman, battle_model saruman, hero_ability THE_VOICE, label sharkey_2
                    traits		Sharkey 1, MaiaRace 1, HeroAbilitySaruman 1, GoodCommander 3, InspiringSpeaker 3, FearGeneral 1, NaturalManagementSkill 2, NaturalMilitarySkill 2, Intelligent 2, CustomBG 1
                    unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
                    unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                    unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                end
                console_command give_ancillary sharkey_2 crebain
                console_command give_ancillary sharkey_2 imported_goods
                console_command give_ancillary sharkey_2 saruman_ring
                console_command give_ancillary sharkey_2 staff_saruman
            end_if
        end_if
        if not I_IsFactionAIControlled normans
            and I_EventCounter corrupt_shire = 0
            spawn_army
                faction slave, sub_faction france
                character Sharkey, named character, age 19, x 133, y 383, portrait saruman, battle_model saruman, hero_ability THE_VOICE, label sharkey_3
                traits		SharkeyRebel 1, MaiaRace 1, HeroAbilitySaruman 1, GoodCommander 3, InspiringSpeaker 3, FearGeneral 1, NaturalManagementSkill 2, NaturalMilitarySkill 2, Intelligent 2
                unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
            end
            console_command give_ancillary sharkey_3 crebain
            console_command give_ancillary sharkey_3 imported_goods
            console_command give_ancillary sharkey_3 saruman_ring
            console_command give_ancillary sharkey_3 staff_saruman
        end_if
        if not I_IsFactionAIControlled normans
            and I_EventCounter corrupt_shire = 1
            spawn_army
                faction normans
                character Sharkey, named character, age 19, x 133, y 383, family, portrait saruman, battle_model saruman, hero_ability THE_VOICE, label sharkey_4
                traits		Sharkey 1, MaiaRace 1, HeroAbilitySaruman 1, GoodCommander 3, InspiringSpeaker 3, FearGeneral 1, NaturalManagementSkill 2, NaturalMilitarySkill 2, Intelligent 2, CustomBG 1
                unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
            end
            console_command give_ancillary sharkey_4 crebain
            console_command give_ancillary sharkey_4 imported_goods
            console_command give_ancillary sharkey_4 saruman_ring
            console_command give_ancillary sharkey_4 staff_saruman
        end_if
        terminate_monitor
    end_monitor

    ; sharkey is dead
    monitor_event FactionTurnEnd FactionIsLocal
    and I_EventCounter scouring_shire_ai = 1
    and not I_CharacterExists sharkey_1
    and not I_CharacterExists sharkey_2
    and not I_CharacterExists sharkey_3
    and not I_CharacterExists sharkey_4
    and I_NumberOfSettlements normans > 0
        log always ---------------------------sharkey is dead--------------------------------
        set_event_counter scouring_shire 0
        historic_event shire_freed factions { all, }
        link_faction_ai normans bree
        link_faction_ai turks   arnor
        console_command diplomatic_stance normans turks allied
        set_faction_standing normans turks 1.00
        set_faction_standing turks normans 1.00
        console_command diplomatic_stance normans sicily neutral
        set_faction_standing normans sicily 0.50
        set_faction_standing sicily normans 0.50
        console_command diplomatic_stance normans denmark neutral
        set_faction_standing normans denmark 0.50
        set_faction_standing denmark normans 0.50
        console_command diplomatic_stance normans saxons allied
        set_faction_standing normans saxons 1.00
        set_faction_standing saxons normans 1.00
        console_command diplomatic_stance normans mongols neutral
        set_faction_standing normans mongols 0.50
        set_faction_standing mongols normans 0.50
        console_command diplomatic_stance normans ireland neutral
        set_faction_standing normans ireland 0.50
        set_faction_standing ireland normans 0.50
        console_command diplomatic_stance normans timurids neutral
        set_faction_standing normans timurids 0.50
        set_faction_standing timurids normans 0.50
        console_command diplomatic_stance normans milan neutral
        set_faction_standing normans milan 0.50
        set_faction_standing milan normans 0.50
        console_command diplomatic_stance normans moors neutral
        set_faction_standing normans moors 0.50
        set_faction_standing moors normans 0.50
        console_command diplomatic_stance normans norway neutral
        set_faction_standing normans norway 0.50
        set_faction_standing norway normans 0.50
        console_command diplomatic_stance normans aztecs war
        set_faction_standing normans aztecs -1.00
        set_faction_standing aztecs normans -1.00
        if I_EventCounter enedwaith_evil = 1
            console_command diplomatic_stance normans teutonic_order war
            set_faction_standing normans teutonic_order -0.80
            set_faction_standing teutonic_order normans -0.80
        end_if
        if I_EventCounter enedwaith_good = 1
            console_command diplomatic_stance normans teutonic_order allied
            set_faction_standing normans teutonic_order 0.80
            set_faction_standing teutonic_order normans 0.80
        end_if
        if I_TurnNumber <= 29
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary 0.50
            set_faction_standing hungary normans 0.50
        end_if
        if I_TurnNumber > 29
            and I_EventCounter luin_ring_rejected = 1
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary 0.50
            set_faction_standing hungary normans 0.50
        end_if
        kill_character ferny_1
        kill_character lotho_1
        destroy_units normans Bandits
        destroy_units normans Half Orc Baneguard
        destroy_units normans Half Orc Spearmen
        destroy_units normans Clan-folk Fighters
        destroy_units normans Brehins Sword-Wielders
        destroy_units normans Hillsteed Riders
        destroy_units normans Horse-fellers
        destroy_units normans Dunforgoil Riders
        destroy_units normans Dunnish Warspear-Throng
        spawn_army
            faction normans
            character   Barliman, named character, age 50, x 166, y 380, family, portrait Barliman, hero_ability SHIELD, battle_model barliman, label barliman_2
            traits		Larry 1, CustomBG 1, Hero 1, MiddleManRace 1, Breelander 1, FactionLeader 1, HeroAbilityShield 1, BattleChivalryGood 1, GoodAdministrator 1, GoodAttacker 2, GoodCommander 2, GoodTrader 2, Just 2, PoliticsSkill 1, PietyStarter 1, StrategyChivalryGood 2, OneRingAvailable 1
            unit		Gate Keepers				exp 3 armour 0 weapon_lvl 1
            unit		Breeland Militia			exp 1 armour 1 weapon_lvl 0
            unit		Breeland Militia			exp 1 armour 1 weapon_lvl 0
            unit		Archer Militia			    exp 1 armour 0 weapon_lvl 0
            unit		Archer Militia			    exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Bilbo, named character, age 120, x 133, y 385, family, portrait Bilbo, battle_model bandrobas_archers_upg, label bilbo_2
            traits		Bilbo 1, HobbitRace 1, Brave 3, GoodCommander 1, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, OneRingAvailable 1
            unit		Dwarven Travellers			    exp 4 armour 1 weapon_lvl 1
            unit		Dwarven Travellers				exp 2 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Frodo, named character, age 48, x 136, y 381, family, portrait Frodo, battle_model frodo, label frodo_2
            traits		Frodo 1, Brave 3, GoodCommander 3, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, OneRingAvailable 1, CustomBG 1
            unit		Bandobras Archers			exp 4 armour 1 weapon_lvl 1
            unit		Bandobras Archers			exp 2 armour 0 weapon_lvl 0
        end
        terminate_monitor
    end_monitor

    declare_counter corrupt_shire_answer
    set_counter corrupt_shire_answer 0

    ; event warning message pops up
    monitor_event PreFactionTurnStart FactionIsLocal
        and FactionType normans
        and I_TurnNumber >= 14
        and I_NumberOfSettlements france > 0
        and I_NumberOfSettlements aztecs > 0
        log always ---------------------------shire warning message--------------------------------
        historic_event scouring_warning factions { normans, }
        terminate_monitor
    end_monitor

    ; corrupt shire choice
    monitor_event PreFactionTurnStart FactionIsLocal
        and FactionType normans
        and I_TurnNumber >= 29
        and I_NumberOfSettlements france > 0
        and I_NumberOfSettlements aztecs > 0
        log always ---------------------------shire choice message--------------------------------
        set_counter corrupt_shire_answer 1
        historic_event corrupt_shire_choice true factions { normans, }
        terminate_monitor
    end_monitor

    ; corrupt shire choice for AI
    monitor_event FactionTurnEnd FactionIsLocal
        and I_IsFactionAIControlled normans
        and I_TurnNumber = 29
        and I_NumberOfSettlements france > 0
        and I_NumberOfSettlements aztecs > 0
        and I_IsFactionAIControlled france
        and I_SettlementOwner Shire_South = normans
        log always ---------------------------ai bree choice--------------------------------
        generate_random_counter corrupt_shire_ai 1 3
        if I_EventCounter corrupt_shire_ai = 1
            historic_event corrupt_shire_ai factions { all, }
            set_event_counter corrupt_shire_ai 1
            set_event_counter corrupt_shire 1
            spawn_army
                faction france
                character   Dushrat, named character, age 23, x 147, y 361, family, label shire_attackers_1
                traits      OrcRace 1, AIBoost 1, GoodAttacker 3, GoodCommander 1, Loyal 1, LoyaltyStarter 1, LogisticalSkill 1, PietyStarter 1, OneRingAvailable 1, HalfOrc 1, CustomBG 1
                unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
                unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
            end
            console_command auto_win attacker
            siege_settlement shire_attackers_1, Shire_South, attack
            link_faction_ai normans corrupt_bree
            link_faction_ai turks   arnor_corrupt_bree
            set_event_counter scouring_shire 1
            spawn_army
                faction normans
                character   Lothos, named character, age 40, x 167, y 379, family, portrait Lotho
                traits		HobbitRace 1, Breelander 1, InspiringSpeaker 1, Drink 3, Corrupt 1, CustomBG 1
                unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
                unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
                unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
                unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
            end
            spawn_army
                faction normans
                character   Ferny, named character, age 40, x 167, y 379, family, portrait Bill_Ferny
                traits		MiddleManRace 1, Breelander 1, Hatred 1, Liar 2, SpyMaster 2, Corrupt 3
                unit		Gate Keepers    			exp 3 armour 1 weapon_lvl 0
                unit		Bandits           		    exp 1 armour 0 weapon_lvl 0
                unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
                unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
            end
            spawn_army
                faction normans
                character   Sandyman, named character, age 120, x 144, y 368, family, portrait Sandyman
                traits		Sandyman 1, Breelander 1, Liar 1, Xenophobia 1, InspiringSpeaker 1, Drink 1, CustomBG 1
                unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
                unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
                unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
                unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
            end
            if I_CharacterExists bilbo_1
                send_character_off_map bilbo_1
            end_if
            if I_CharacterExists barliman_1
                send_character_off_map barliman_1
            end_if
            if I_CharacterExists brathor1
                kill_character brathor1
            end_if
            destroy_units normans Dunedain Rangers
            destroy_units normans Dunedain Wardens
            destroy_units normans Sworn Horsemen
            destroy_units normans Dunedain Blademasters
        end_if
        if I_EventCounter corrupt_shire_ai > 1
            set_event_counter corrupt_shire_ai 0
            console_command diplomatic_stance normans aztecs war
            set_faction_standing normans aztecs -1.00
            set_faction_standing aztecs normans -1.00
            console_command diplomatic_stance normans france war
            set_faction_standing normans aztecs -1.00
            set_faction_standing aztecs normans -1.00
            spawn_army
                faction normans
                character   Frodo, named character, age 48, x 136, y 381, family, portrait frodo, battle_model frodo
                traits		Frodo 1, Brave 3, GoodCommander 3, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, CustomBG 1
                unit		Bandobras Archers			exp 4 armour 1 weapon_lvl 1
                unit		Bandobras Archers			exp 2 armour 0 weapon_lvl 0
            end
        end_if
        terminate_monitor
    end_monitor

    ; diplomatic stuff on AI choice in separate monitor because it has to happen slightly later, because isengard needs to be at war with bree to capture longbottom in previous monitor
    monitor_event FactionTurnStart FactionType normans
        and I_EventCounter corrupt_shire_ai = 1
        log always ---------------------------ai bree diplomatic stuff--------------------------------
        console_command diplomatic_stance normans turks neutral
        set_faction_standing normans turks -1.00
        set_faction_standing turks normans -1.00
        console_command diplomatic_stance normans sicily neutral
        set_faction_standing normans sicily -1.00
        set_faction_standing sicily normans -1.00
        console_command diplomatic_stance normans denmark neutral
        set_faction_standing normans denmark -1.00
        set_faction_standing denmark normans -1.00
        console_command diplomatic_stance normans saxons neutral
        set_faction_standing normans saxons -1.00
        set_faction_standing saxons normans -1.00
        console_command diplomatic_stance normans mongols neutral
        set_faction_standing normans mongols -1.00
        set_faction_standing mongols normans -1.00
        console_command diplomatic_stance normans ireland neutral
        set_faction_standing normans ireland -1.00
        set_faction_standing ireland normans -1.00
        console_command diplomatic_stance normans timurids neutral
        set_faction_standing normans timurids -1.00
        set_faction_standing timurids normans -1.00
        console_command diplomatic_stance normans milan neutral
        set_faction_standing normans milan -1.00
        set_faction_standing milan normans -1.00
        console_command diplomatic_stance normans moors neutral
        set_faction_standing normans moors -1.00
        set_faction_standing moors normans -1.00
        console_command diplomatic_stance normans norway neutral
        set_faction_standing normans norway -1.00
        set_faction_standing norway normans -1.00
        console_command diplomatic_stance normans aztecs allied
        set_faction_standing normans aztecs 0.80
        set_faction_standing aztecs normans 0.80
        console_command diplomatic_stance normans france allied
        set_faction_standing normans france 1.00
        set_faction_standing france normans 1.00
        if I_EventCounter enedwaith_evil = 1
            console_command diplomatic_stance normans teutonic_order allied
            set_faction_standing normans teutonic_order 0.80
            set_faction_standing teutonic_order normans 0.80
        end_if
        if I_EventCounter enedwaith_good = 1
            console_command diplomatic_stance normans teutonic_order war
            set_faction_standing normans teutonic_order -0.80
            set_faction_standing teutonic_order normans -0.80
        end_if
        if I_EventCounter luin_ring_rejected = 1
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary -1.00
            set_faction_standing hungary normans -1.00
        end_if
        terminate_monitor
    end_monitor

    ; player corrupt choice accepted
    monitor_event EventCounter EventCounterType corrupt_shire_choice_accepted
        and I_EventCounter corrupt_shire_choice_accepted = 1
        log always ---------------------------player corrupt choice accepted--------------------------------
        set_counter corrupt_shire_answer 0
        historic_event corrupt_shire factions { normans, }
        historic_event saruman_ring_demand factions { normans, }
        link_faction_ai normans corrupt_bree
        link_faction_ai turks   arnor_corrupt_bree
        set_event_counter scouring_shire 1
        console_command diplomatic_stance normans turks neutral
        set_faction_standing normans turks -1.00
        set_faction_standing turks normans -1.00
        console_command diplomatic_stance normans sicily neutral
        set_faction_standing normans sicily -1.00
        set_faction_standing sicily normans -1.00
        console_command diplomatic_stance normans denmark neutral
        set_faction_standing normans denmark -1.00
        set_faction_standing denmark normans -1.00
        console_command diplomatic_stance normans saxons neutral
        set_faction_standing normans saxons -1.00
        set_faction_standing saxons normans -1.00
        console_command diplomatic_stance normans mongols neutral
        set_faction_standing normans mongols -1.00
        set_faction_standing mongols normans -1.00
        console_command diplomatic_stance normans ireland neutral
        set_faction_standing normans ireland -1.00
        set_faction_standing ireland normans -1.00
        console_command diplomatic_stance normans timurids neutral
        set_faction_standing normans timurids -1.00
        set_faction_standing timurids normans -1.00
        console_command diplomatic_stance normans milan neutral
        set_faction_standing normans milan -1.00
        set_faction_standing milan normans -1.00
        console_command diplomatic_stance normans moors neutral
        set_faction_standing normans moors -1.00
        set_faction_standing moors normans -1.00
        console_command diplomatic_stance normans norway neutral
        set_faction_standing normans norway -1.00
        set_faction_standing norway normans -1.00
        console_command diplomatic_stance normans aztecs allied
        set_faction_standing normans aztecs 0.80
        set_faction_standing aztecs normans 0.80
        console_command diplomatic_stance normans france allied
        set_faction_standing normans france 1.00
        set_faction_standing france normans 1.00
        if I_EventCounter enedwaith_evil = 1
            console_command diplomatic_stance normans teutonic_order allied
            set_faction_standing normans teutonic_order 0.80
            set_faction_standing teutonic_order normans 0.80
        end_if
        if I_EventCounter enedwaith_good = 1
            console_command diplomatic_stance normans teutonic_order war
            set_faction_standing normans teutonic_order -0.80
            set_faction_standing teutonic_order normans -0.80
        end_if
        if I_EventCounter luin_ring_rejected = 1
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary -1.00
            set_faction_standing hungary normans -1.00
        end_if
        spawn_army
            faction normans
            character   Lothos, named character, age 40, x 167, y 379, family, portrait Lotho
            traits		HobbitRace 1, Breelander 1, InspiringSpeaker 1, Drink 3, Corrupt 1, CustomBG 1
            unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
            unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Ferny, named character, age 40, x 167, y 379, family, portrait Bill_Ferny
            traits		MiddleManRace 1, Breelander 1, Hatred 1, Liar 2, SpyMaster 2, Corrupt 3
            unit		Gate Keepers    			exp 3 armour 1 weapon_lvl 0
            unit		Bandits           		    exp 1 armour 0 weapon_lvl 0
            unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
            unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Sandyman, named character, age 120, x 144, y 368, family, portrait Sandyman
            traits		Sandyman 1, Breelander 1, Liar 1, Xenophobia 1, InspiringSpeaker 1, Drink 3, CustomBG 1
            unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
            unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
        end
        if I_CharacterExists bilbo_1
            kill_character bilbo_1
        end_if
        if I_CharacterExists barliman_1
            kill_character barliman_1
        end_if
        if I_CharacterExists brathor1
            kill_character brathor1
        end_if
        destroy_units normans Dunedain Rangers
        destroy_units normans Dunedain Wardens
        destroy_units normans Sworn Horsemen
        destroy_units normans Dunedain Blademasters
        terminate_monitor
    end_monitor

    ; player corrupt choice declined
    monitor_event EventCounter EventCounterType corrupt_shire_choice_declined
        and I_EventCounter corrupt_shire_choice_declined = 1
        log always ---------------------------player corrupt choice declined--------------------------------
        set_event_counter corrupt_shire 0
        set_event_counter corrupt_shire_ai 0
        set_counter corrupt_shire_answer 0
        set_event_counter scouring_shire 0
        console_command diplomatic_stance normans aztecs war
        set_faction_standing normans aztecs -1.00
        set_faction_standing aztecs normans -1.00
        console_command diplomatic_stance normans france war
        set_faction_standing normans aztecs -1.00
        set_faction_standing aztecs normans -1.00
        spawn_army
            faction normans
            character   Frodo, named character, age 48, x 136, y 381, family, portrait frodo, battle_model frodo
            traits		Frodo 1, Brave 3, GoodCommander 3, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, CustomBG 1
            unit		Bandobras Archers			exp 4 armour 1 weapon_lvl 1
            unit		Bandobras Archers			exp 2 armour 0 weapon_lvl 0
        end
        terminate_monitor
    end_monitor

    ; corrupt AI gets liberated
    monitor_event FactionTurnEnd FactionType france
        and I_EventCounter corrupt_shire_ai = 1
        and not I_SettlementOwner Shire_South = france
        log always ---------------------------corrupt bree is liberated--------------------------------
        set_event_counter scouring_shire 0
        set_event_counter corrupt_shire 0
        set_event_counter corrupt_shire_ai 0
        historic_event shire_freed factions { all, }
        link_faction_ai normans bree
        link_faction_ai turks   arnor
        console_command diplomatic_stance normans turks allied
        set_faction_standing normans turks 1.00
        set_faction_standing turks normans 1.00
        console_command diplomatic_stance normans sicily neutral
        set_faction_standing normans sicily 0.50
        set_faction_standing sicily normans 0.50
        console_command diplomatic_stance normans denmark neutral
        set_faction_standing normans denmark 0.50
        set_faction_standing denmark normans 0.50
        console_command diplomatic_stance normans saxons allied
        set_faction_standing normans saxons 1.00
        set_faction_standing saxons normans 1.00
        console_command diplomatic_stance normans mongols neutral
        set_faction_standing normans mongols 0.50
        set_faction_standing mongols normans 0.50
        console_command diplomatic_stance normans ireland neutral
        set_faction_standing normans ireland 0.50
        set_faction_standing ireland normans 0.50
        console_command diplomatic_stance normans timurids neutral
        set_faction_standing normans timurids 0.50
        set_faction_standing timurids normans 0.50
        console_command diplomatic_stance normans milan neutral
        set_faction_standing normans milan 0.50
        set_faction_standing milan normans 0.50
        console_command diplomatic_stance normans moors neutral
        set_faction_standing normans moors 0.50
        set_faction_standing moors normans 0.50
        console_command diplomatic_stance normans norway neutral
        set_faction_standing normans norway 0.50
        set_faction_standing norway normans 0.50
        console_command diplomatic_stance normans aztecs war
        set_faction_standing normans aztecs -1.00
        set_faction_standing aztecs normans -1.00
        console_command diplomatic_stance normans france war
        set_faction_standing normans france -1.00
        set_faction_standing france normans -1.00
        if I_TurnNumber <= 29
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary 0.50
            set_faction_standing hungary normans 0.50
        end_if
        if I_TurnNumber > 29
            and I_EventCounter luin_ring_rejected = 1
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary 0.50
            set_faction_standing hungary normans 0.50
        end_if
        if I_EventCounter enedwaith_evil = 1
            console_command diplomatic_stance normans teutonic_order war
            set_faction_standing normans teutonic_order -0.80
            set_faction_standing teutonic_order normans -0.80
        end_if
        if I_EventCounter enedwaith_good = 1
            console_command diplomatic_stance normans teutonic_order allied
            set_faction_standing normans teutonic_order 0.80
            set_faction_standing teutonic_order normans 0.80
        end_if
        kill_character Ferny
        kill_character Lothos
        destroy_units normans Bandits
        destroy_units normans Half Orc Baneguard
        destroy_units normans Half Orc Spearmen
        destroy_units normans Clan-folk Fighters
        destroy_units normans Brehins Sword-Wielders
        destroy_units normans Hillsteed Riders
        destroy_units normans Horse-fellers
        destroy_units normans Dunforgoil Riders
        destroy_units normans Dunnish Warspear-Throng
        spawn_army
            faction normans
            character   Barliman, named character, age 65, x 166, y 380, family, portrait Barliman, hero_ability SHIELD, battle_model barliman, label barliman_1
            traits		Larry 1, CustomBG 1, Hero 1, MiddleManRace 1, Breelander 1, FactionLeader 1, HeroAbilityShield 1, BattleChivalryGood 1, GoodAdministrator 1, GoodAttacker 2, GoodCommander 2, GoodTrader 2, Just 2, PoliticsSkill 1, PietyStarter 1, StrategyChivalryGood 2, OneRingAvailable 1
            unit		Gate Keepers				exp 3 armour 0 weapon_lvl 1
            unit		Breeland Militia			exp 1 armour 1 weapon_lvl 0
            unit		Breeland Militia			exp 1 armour 1 weapon_lvl 0
            unit		Archer Militia			    exp 1 armour 0 weapon_lvl 0
            unit		Archer Militia			    exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Bilbo, named character, age 120, x 133, y 385, family, portrait Bilbo, battle_model bandrobas_archers_upg, label bilbo_1
            traits		Bilbo 1, HobbitRace 1, Brave 3, GoodCommander 1, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, OneRingAvailable 1
            unit		Dwarven Travellers			exp 4 armour 1 weapon_lvl 1
            unit		Dwarven Travellers			exp 2 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Frodo, named character, age 48, x 136, y 381, family, portrait frodo, battle_model frodo, label frodo_1
            traits		Frodo 1, Brave 3, GoodCommander 3, Just 3, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Scout 2, Energetic 2, OneRingAvailable 1, CustomBG 1
            unit		Bandobras Archers			exp 4 armour 1 weapon_lvl 1
            unit		Bandobras Archers			exp 2 armour 0 weapon_lvl 0
        end
        terminate_monitor
    end_monitor

    declare_counter shire_control_choice_answer
    set_counter shire_control_choice_answer 0

    ; control the shire choice for isengard
    monitor_event FactionTurnEnd FactionIsLocal
        and FactionType france
        and I_IsFactionAIControlled normans
        and I_SettlementOwner Shire_South = france
        and I_NumberOfSettlements normans > 0
        and I_CharacterExists saruman_1
        log always ---------------------------shire control choice--------------------------------
        set_counter shire_control_choice_answer 1
        historic_event shire_control_choice true factions { france, }
        terminate_monitor
    end_monitor
    
    monitor_event FactionTurnEnd FactionIsLocal
    
        if not I_IsFactionAIControlled normans
            terminate_monitor
        end_if
        
        if I_NumberOfSettlements normans < 1
        and I_EventCounter scouring_shire = 1
            set_event_counter scouring_shire 0
            terminate_monitor
        end_if
        
    end_monitor

    ; control shire choice accepted
    monitor_event EventCounter EventCounterType shire_control_choice_accepted
        and I_EventCounter shire_control_choice_accepted = 1
        log always ---------------------------shire control accepted--------------------------------
        set_event_counter scouring_shire 1
        set_counter shire_control_choice_answer 0
        set_event_counter corrupt_shire 1
        set_event_counter corrupt_shire_ai 1
        link_faction_ai normans corrupt_bree
        link_faction_ai turks   arnor_corrupt_bree
        spawn_army
            faction normans
            character   Lothos, named character, age 40, x 167, y 379, family, portrait Lotho
            traits		HobbitRace 1, Breelander 1, InspiringSpeaker 1, Drink 3, Corrupt 1, CustomBG 1
            unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
            unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Ferny, named character, age 40, x 167, y 379, family, portrait Bill_Ferny
            traits		MiddleManRace 1, Breelander 1, Hatred 1, Liar 2, SpyMaster 2, Corrupt 3, CustomBG 1
            unit		Gate Keepers    			exp 3 armour 1 weapon_lvl 0
            unit		Bandits           		    exp 1 armour 0 weapon_lvl 0
            unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
            unit		Bandits  			        exp 1 armour 0 weapon_lvl 0
        end
        spawn_army
            faction normans
            character   Sandyman, named character, age 120, x 144, y 368, family, portrait Sandyman
            traits		Sandyman 1, Breelander 1, Liar 1, Xenophobia 1, InspiringSpeaker 1, Drink 3, CustomBG 1
            unit		Watch Shirriffs				exp 1 armour 0 weapon_lvl 1
            unit		Watch Shirriffs	           	exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers  			exp 1 armour 0 weapon_lvl 0
            unit		Bandobras Archers 			exp 1 armour 0 weapon_lvl 0
        end
        if I_CharacterExists bilbo_1
            send_character_off_map bilbo_1
        end_if
        if I_CharacterExists barliman_1
            send_character_off_map barliman_1
        end_if
        if I_CharacterExists brathor1
            kill_character brathor1
        end_if
        destroy_units normans Dunedain Rangers
        destroy_units normans Dunedain Wardens
        destroy_units normans Sworn Horsemen
        destroy_units normans Dunedain Blademasters
        console_command diplomatic_stance normans turks neutral
        set_faction_standing normans turks -1.00
        set_faction_standing turks normans -1.00
        console_command diplomatic_stance normans sicily neutral
        set_faction_standing normans sicily -1.00
        set_faction_standing sicily normans -1.00
        console_command diplomatic_stance normans denmark neutral
        set_faction_standing normans denmark -1.00
        set_faction_standing denmark normans -1.00
        console_command diplomatic_stance normans saxons neutral
        set_faction_standing normans saxons -1.00
        set_faction_standing saxons normans -1.00
        console_command diplomatic_stance normans mongols neutral
        set_faction_standing normans mongols -1.00
        set_faction_standing mongols normans -1.00
        console_command diplomatic_stance normans ireland neutral
        set_faction_standing normans ireland -1.00
        set_faction_standing ireland normans -1.00
        console_command diplomatic_stance normans timurids neutral
        set_faction_standing normans timurids -1.00
        set_faction_standing timurids normans -1.00
        console_command diplomatic_stance normans milan neutral
        set_faction_standing normans milan -1.00
        set_faction_standing milan normans -1.00
        console_command diplomatic_stance normans moors neutral
        set_faction_standing normans moors -1.00
        set_faction_standing moors normans -1.00
        console_command diplomatic_stance normans norway neutral
        set_faction_standing normans norway -1.00
        set_faction_standing norway normans -1.00
        console_command diplomatic_stance normans aztecs allied
        set_faction_standing normans aztecs 0.80
        set_faction_standing aztecs normans 0.80
        console_command diplomatic_stance normans france allied
        set_faction_standing normans france 1.00
        set_faction_standing france normans 1.00
        if I_EventCounter luin_ring_rejected = 1
            console_command diplomatic_stance normans hungary neutral
            set_faction_standing normans hungary -1.00
            set_faction_standing hungary normans -1.00
        end_if
        if I_EventCounter enedwaith_evil = 1
            console_command diplomatic_stance normans teutonic_order allied
            set_faction_standing normans teutonic_order 0.80
            set_faction_standing teutonic_order normans 0.80
        end_if
        if I_EventCounter enedwaith_good = 1
            console_command diplomatic_stance normans teutonic_order war
            set_faction_standing normans teutonic_order -0.80
            set_faction_standing teutonic_order normans -0.80
        end_if
        spawn_army
            faction france
            character   Dushrat, named character, age 23, x 147, y 361, family, label dushrat_1
            traits      OrcRace 1, GoodAttacker 3, GoodCommander 1, Loyal 1, LoyaltyStarter 1, LogisticalSkill 1, PietyStarter 1, HalfOrc 1, CustomBG 1
            unit		Half Orc Baneguard			exp 1 armour 3 weapon_lvl 1
            unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Baneguard			exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
        end
        console_command give_ancillary dushrat_1 imported_goods
        console_command give_ancillary saruman_1 imported_goods_2
        console_command give_ancillary saruman_1 imported_goods_3
        terminate_monitor
    end_monitor

    ; make sure choice messages pop up on game reloads
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_normans == 1
            and I_CompareCounter corrupt_shire_answer = 1
            campaign_wait 0.1
            historic_event corrupt_shire_choice true factions { normans, }
        end_if
        if I_IsFactionAIControlled normans
            terminate_monitor
        end_if
    end_monitor

    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_france == 1
            and I_CompareCounter shire_control_choice_answer = 1
            campaign_wait 0.1
            historic_event shire_control_choice true factions { france, }
        end_if
        if I_IsFactionAIControlled france
            terminate_monitor
        end_if
    end_monitor

    ;########################## Faction: Isengard #########################

    set_event_counter france_allied_aztecs 1
    set_event_counter france_allied_teutonic 0
    set_event_counter saruman_ring_event 0

    ; Dunland check
    monitor_event PreFactionTurnStart FactionType france
        and DiplomaticStanceFromFaction aztecs = AtWar
		
        set_event_counter dunland_isengard_war 1
		set_event_counter uruk_barracks_dunland 0
		if I_NumberOfSettlements france < 1
		and I_EventCounter dunland_keeps_ring = 1
			set_event_counter uruk_barracks_dunland 1
		end_if
		
    end_monitor
	
    monitor_event PreFactionTurnStart FactionType france
        and DiplomaticStanceFromFaction aztecs = Allied
        and I_EventCounter france_allied_aztecs == 0
        log always ---------------------------dunland allied to isengard--------------------------------
        set_event_counter france_allied_aztecs 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType france
        and I_EventCounter saruman_ring_event = 0
        and I_EventCounter france_allied_aztecs == 1
        and DiplomaticStanceFromFaction aztecs > Allied
        log always ---------------------------dunland not allied to isengard--------------------------------
        set_event_counter france_allied_aztecs 0
    end_monitor

    monitor_event PreFactionTurnStart FactionType france
        and I_EventCounter saruman_ring_event = 1
        log always ---------------------------dunland forced ally isengard--------------------------------
        set_event_counter france_allied_aztecs 1
    end_monitor

    ; Enedwaith check

    monitor_event PreFactionTurnStart FactionType france
        and DiplomaticStanceFromFaction teutonic_order = Allied
        and I_EventCounter france_allied_teutonic == 0
        log always ---------------------------enedwaith allied to isengard--------------------------------
        set_event_counter france_allied_teutonic 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType france
        and I_EventCounter saruman_ring_event = 0
        and I_EventCounter france_allied_teutonic == 1
        and DiplomaticStanceFromFaction teutonic_order > Allied
        log always ---------------------------enedwaith not allied to isengard--------------------------------
        set_event_counter france_allied_teutonic 0
    end_monitor

    monitor_event PreFactionTurnStart FactionType france
        and I_EventCounter saruman_ring_event = 1
        log always ---------------------------enedwaith forced ally isengard--------------------------------
        set_event_counter france_allied_teutonic 1
    end_monitor

    ;########################## Faction: Dunland #########################
    ; Random Choice Event Counters
    set_event_counter dunland_warg_breeding_accepted 0
    set_event_counter dunland_warg_breeding_refused 0

    ; Defeat Rohan
    set_event_counter dunland_homeland 0

    monitor_event PreFactionTurnStart FactionType aztecs
        and I_SettlementOwner Helms_Deep = aztecs
        and I_SettlementOwner Westfold = aztecs
        and I_SettlementOwner Kings_Land = aztecs
        and I_SettlementOwner Eastfold = aztecs
        log always ---------------------------dunland homeland complete--------------------------------
        set_event_counter dunland_homeland 1
        historic_event dunland_homeland factions { aztecs, }
        terminate_monitor
    end_monitor

    ; message for capturing edoras
    monitor_event GeneralCaptureSettlement SettlementName Kings_Land
        log always ---------------------------dunland capture edoras--------------------------------
        if I_IsFactionAIControlled aztecs
            terminate_monitor
        end_if
        if I_SettlementOwner Kings_Land = aztecs
            historic_event rohan_kingship_reclaimed factions { aztecs, }
            terminate_monitor
        end_if
    end_monitor

    ; United
    set_event_counter enedwaith_is_united 0

    ;######################### Faction: Enedwaith #########################
    ; United

    monitor_event PreFactionTurnStart FactionType teutonic_order
        and I_SettlementOwner Druwaith_Iaur = teutonic_order ;Maolfinn
        and I_SettlementOwner East_Cardolan = teutonic_order ;Argond
        and I_SettlementOwner Lond_Angren = teutonic_order ;lond Angren
        and I_SettlementOwner Fortriu = teutonic_order ;Fortriu
        and I_SettlementOwner Heorot = teutonic_order ;Heorotscir
        and I_SettlementOwner North_Enedwaith = teutonic_order ;cairill
        and I_SettlementOwner South_Enedwaith = teutonic_order ;maolrunaidh
        and I_SettlementOwner Suduri = teutonic_order ;saralainn
        and I_SettlementOwner Talsir = teutonic_order ;lugiu
        and I_SettlementOwner Dunland_Hills = teutonic_order ; dunland proper
        and I_SettlementOwner Duneard = teutonic_order ;dunland border
        and I_SettlementOwner Dunland = teutonic_order; Dunland lowlands
        log always ---------------------------enedwaith unite enedwaith--------------------------------
        historic_event enedwaith_united factions { teutonic_order, }
        spawn_army
            faction teutonic_order
            character	random_name, named character, age 24, x 222, y 320, direction SW
            traits		MiddleManRace 1, EnedwaithClansman 1, GoodAttacker 1, GoodCommander 2, GoodDefender 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, EnedGuardian 1, CustomBG 1
            unit		Guardians of Enedwaith		exp 5 armour 1 weapon_lvl 1
            unit		Hillsteed Riders			exp 4 armour 1 weapon_lvl 0
            unit		Dunnish Warspear-Throng			exp 5 armour 1 weapon_lvl 1
            unit		Isendraich Towersworn				exp 3 armour 0 weapon_lvl 0
            unit		Frekkalingir			exp 3 armour 0 weapon_lvl 1
        end
        set_event_counter enedwaith_is_united 1
        terminate_monitor
    end_monitor

    ; AI war/alliances script
    monitor_event PreFactionTurnStart FactionType teutonic_order
        log always ---------------------------enedwaith ai diplomacy--------------------------------
        if not I_IsFactionAIControlled teutonic_order
            terminate_monitor
        end_if
        if I_TurnNumber = 19
            generate_random_counter enedwaith_ai_war 1 3
            if I_EventCounter enedwaith_ai_war = 1 ;good
                log always ---------------------------good enedwaith--------------------------------
                historic_event enedwaith_good
                console_command diplomatic_stance teutonic_order portugal war
                set_faction_standing teutonic_order portugal -1.00
                set_faction_standing portugal teutonic_order -1.00
                console_command diplomatic_stance teutonic_order norway neutral
                console_command diplomatic_stance teutonic_order timurids neutral
                console_command diplomatic_stance teutonic_order venice neutral
                console_command diplomatic_stance teutonic_order khand neutral
                console_command diplomatic_stance teutonic_order sicily allied
                set_faction_standing teutonic_order sicily 1.00
                set_faction_standing sicily teutonic_order 1.00
                console_command diplomatic_stance teutonic_order milan allied
                set_faction_standing teutonic_order milan 1.00
                set_faction_standing milan teutonic_order 1.00
                console_command diplomatic_stance teutonic_order denmark allied
                set_faction_standing teutonic_order denmark 1.00
                set_faction_standing denmark teutonic_order 1.00
                console_command diplomatic_stance teutonic_order scotland neutral
                console_command diplomatic_stance teutonic_order aztecs war
                set_faction_standing teutonic_order aztecs -1.00
                set_faction_standing aztecs teutonic_order -1.00
                console_command diplomatic_stance teutonic_order mongols neutral
                console_command diplomatic_stance teutonic_order turks allied
                set_faction_standing teutonic_order turks 1.00
                set_faction_standing turks teutonic_order 1.00
                console_command diplomatic_stance teutonic_order france war
                set_faction_standing teutonic_order france -1.00
                set_faction_standing france teutonic_order -1.00
                console_command diplomatic_stance teutonic_order hre war
                set_faction_standing teutonic_order hre -1.00
                set_faction_standing hre teutonic_order -1.00
                console_command diplomatic_stance teutonic_order england war
                set_faction_standing teutonic_order england -1.00
                set_faction_standing england teutonic_order -1.00
                console_command diplomatic_stance teutonic_order hungary allied
                set_faction_standing teutonic_order hungary 1.00
                set_faction_standing hungary teutonic_order 1.00
                console_command diplomatic_stance teutonic_order ireland allied
                set_faction_standing teutonic_order ireland 1.00
                set_faction_standing ireland teutonic_order 1.00
                console_command diplomatic_stance teutonic_order poland war
                set_faction_standing teutonic_order poland -1.00
                set_faction_standing poland teutonic_order -1.00
                console_command diplomatic_stance teutonic_order byzantium neutral
                console_command diplomatic_stance teutonic_order moors neutral
                console_command diplomatic_stance teutonic_order russia neutral
                console_command diplomatic_stance teutonic_order spain neutral
                console_command diplomatic_stance teutonic_order saxons allied
                set_faction_standing teutonic_order saxons 1.00
                set_faction_standing saxons teutonic_order 1.00
                console_command diplomatic_stance teutonic_order normans allied
                set_faction_standing teutonic_order normans 1.00
                set_faction_standing normans teutonic_order 1.00
                increment_kings_purse teutonic_order 500
                link_faction_ai teutonic_order enedwaith_good_ai
            end_if
            if I_EventCounter enedwaith_ai_war = 2 ;evil
                log always ---------------------------evil enedwaith--------------------------------
                historic_event enedwaith_evil
                console_command diplomatic_stance teutonic_order portugal neutral
    
                console_command diplomatic_stance teutonic_order norway neutral
                console_command diplomatic_stance teutonic_order timurids neutral
                console_command diplomatic_stance teutonic_order venice neutral
                console_command diplomatic_stance teutonic_order khand neutral
                console_command diplomatic_stance teutonic_order sicily war
                set_faction_standing teutonic_order sicily -1.00
                set_faction_standing sicily teutonic_order -1.00
                console_command diplomatic_stance teutonic_order milan war
                set_faction_standing teutonic_order milan -1.00
                set_faction_standing milan teutonic_order -1.00
                console_command diplomatic_stance teutonic_order denmark war
                set_faction_standing teutonic_order denmark -1.00
                set_faction_standing denmark teutonic_order -1.00
                console_command diplomatic_stance teutonic_order scotland neutral
                console_command diplomatic_stance teutonic_order aztecs allied
                set_faction_standing teutonic_order aztecs 1.00
                set_faction_standing aztecs teutonic_order 1.00
                console_command diplomatic_stance teutonic_order mongols neutral
                console_command diplomatic_stance teutonic_order turks war
                set_faction_standing teutonic_order turks -1.00
                set_faction_standing turks teutonic_order -1.00
                console_command diplomatic_stance teutonic_order france allied
                set_faction_standing teutonic_order france 1.00
                set_faction_standing france teutonic_order 1.00
                console_command diplomatic_stance teutonic_order hre neutral
                console_command diplomatic_stance teutonic_order england neutral
                console_command diplomatic_stance teutonic_order hungary war
                set_faction_standing teutonic_order hungary -1.00
                set_faction_standing hungary teutonic_order -1.00
                console_command diplomatic_stance teutonic_order ireland war
                set_faction_standing teutonic_order ireland -1.00
                set_faction_standing ireland teutonic_order -1.00
                console_command diplomatic_stance teutonic_order poland neutral
                console_command diplomatic_stance teutonic_order byzantium neutral
                console_command diplomatic_stance teutonic_order moors neutral
                console_command diplomatic_stance teutonic_order russia neutral
                console_command diplomatic_stance teutonic_order spain neutral
                console_command diplomatic_stance teutonic_order saxons war
                set_faction_standing teutonic_order saxons -1.00
                set_faction_standing saxons teutonic_order -1.00
                console_command diplomatic_stance teutonic_order normans war
                set_faction_standing teutonic_order normans -1.00
                set_faction_standing normans teutonic_order -1.00
                increment_kings_purse teutonic_order 1000
                link_faction_ai teutonic_order enedwaith_evil_ai
            end_if
            if I_EventCounter enedwaith_ai_war = 3 ;neutral
                log always ---------------------------neutral enedwaith--------------------------------
                set_event_counter enedwaith_neutral 1
            end_if
            terminate_monitor
        end_if
    end_monitor

    ;########################## Faction: Gundabad #########################
    ; gundabad orc enslaving (get aor units from other factions)

    monitor_event FactionTurnEnd FactionType slave
        log always ---------------------------gundabad enslave monitor--------------------------------
        if I_IsFactionAIControlled gundabad
            terminate_monitor
        end_if

        if I_SettlementOwner High_Pass = gundabad
        and I_EventCounter snaga_gundabad = 0
            historic_event snaga_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner East_Moria = gundabad
        and I_EventCounter moria_gundabad = 0
            historic_event moria_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner West_Moria = gundabad
        and I_EventCounter moria_gundabad = 0
            historic_event moria_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner Deep_Mirkwood = gundabad
        and I_EventCounter guldur_gundabad = 0
            historic_event guldur_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner Udun = gundabad
        and I_EventCounter gate_gundabad = 0
            historic_event gate_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner Gorgoroth = gundabad
        and I_EventCounter mordor_gundabad = 0
            historic_event mordor_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner Nan_Curunir = gundabad
        and I_EventCounter isen_gundabad = 0
            historic_event isen_gundabad factions { gundabad, }
        end_if

        if I_SettlementOwner Carn_Dum = gundabad
        and I_EventCounter angmar_gundabad = 0
            historic_event angmar_gundabad factions { gundabad, }
        end_if
    end_monitor

    monitor_event FactionTurnEnd FactionIsLocal
    and FactionType gundabad
    and DiplomaticStanceFromFaction turks = AtWar
    and I_NumberOfSettlements portugal = 0
    and I_EventCounter rhudaur_gundabad = 0
        log always ---------------------------gundabad rhudaur--------------------------------
        historic_event rhudaur_gundabad factions { gundabad, }
        terminate_monitor
    end_monitor

    monitor_event FactionTurnEnd FactionIsLocal
    and FactionType gundabad
    and I_NumberOfSettlements england = 0
    and I_EventCounter uruk_gundabad = 0
    and I_EventCounter gate_gundabad = 1
    and I_EventCounter mordor_gundabad = 1
        log always ---------------------------gundabad uruk--------------------------------
        historic_event uruk_gundabad factions { gundabad, }
        terminate_monitor
    end_monitor


    ;######################### Faction: High Elves ##########################

    ; Eregion Reclaiming
    monitor_event GeneralCaptureSettlement SettlementName Eregion
        log always ---------------------------Eregion Captured--------------------------------
        if not I_IsFactionAIControlled saxons
            terminate_monitor
        end_if
        if I_SettlementOwner Eregion = saxons
            console_command add_population Imladris, -50
            console_command add_population Eregion, 50
            increment_kings_purse saxons 800
            add_events
                event historic	imladris_claim_eregion
                date		0
                position	214, 331
            end_add_events
            terminate_monitor
        end_if
    end_monitor

    ; Glorfindel
    declare_counter glorfindel_spawned

    monitor_event FactionTurnStart FactionType saxons
        log always ---------------------------glorfindel script--------------------------------
        if I_NumberOfSettlements saxons = 0
            terminate_monitor
        end_if
        if I_NumberOfSettlements saxons >= 15
            and I_CompareCounter glorfindel_spawned = 0
            spawn_army
                faction saxons
                character	Glorfindel, named character, age 22, x 245, y 379, direction S, portrait Glorfindel, battle_model glorfin, hero_ability Light_of_the_Faith, label glorfindel_1
                traits		Glorfindel 1, CustomBG 1, Hero 1, ElvenRace 1, Noldor 1, HouseGoldenFlower 1, HeroAbilityElf 1, BattleChivalryGood 2, Brave 3, Handsome 3, BattleOfFornost 1, FallOfGondolin 1, KilledBalrog 1, GoodAttacker 1, GoodCommander 3, Just 1, LivedAges 1, Loyal 3, LoyaltyStarter 1, Reincarnated 1, NaturalMilitarySkill 1, PietyStarter 1, OneRingAvailable 1
                unit		Elderinwe Roquen			exp 6 armour 1 weapon_lvl 0
            end
            set_counter glorfindel_spawned 1
            if I_CompareCounter faction_ID_saxons == 1
                snap_strat_camera 245, 379
                historic_event glorfindel factions { saxons, }
            end_if
        end_if
        if I_NumberOfSettlements portugal <= 2
            and I_CompareCounter glorfindel_spawned = 0
            spawn_army
                faction saxons
                character	Glorfindel, named character, age 22, x 245, y 379, direction S, portrait Glorfindel, battle_model glorfin, hero_ability Light_of_the_Faith, label glorfindel_1
                traits		Glorfindel 1, CustomBG 1, Hero 1, ElvenRace 1, Noldor 1, HouseGoldenFlower 1, HeroAbilityElf 1, BattleChivalryGood 2, Brave 3, Handsome 3, BattleOfFornost 1, FallOfGondolin 1, KilledBalrog 1, GoodAttacker 1, GoodCommander 3, Just 1, LivedAges 1, Loyal 3, LoyaltyStarter 1, Reincarnated 1, NaturalMilitarySkill 1, PietyStarter 1, OneRingAvailable 1
                unit		Elderinwe Roquen			exp 6 armour 1 weapon_lvl 0
            end
            set_counter glorfindel_spawned 1
            if I_CompareCounter faction_ID_saxons == 1
                snap_strat_camera 245, 379
                historic_event glorfindel factions { saxons, }
            end_if
        end_if
        if I_CompareCounter glorfindel_spawned = 1
            console_command give_ancillary glorfindel_1 troops_helf
            console_command give_ancillary glorfindel_1 asfaloth
            console_command give_ancillary glorfindel_1 glorfindel_armour
            console_command give_ancillary glorfindel_1 wisdom
            terminate_monitor
        end_if
    end_monitor

    ; Dornornoston

    monitor_event BuildingCompleted SettlementBuildingFinished = m_gwaith_i_mirdain_guild
        log always ---------------------------Dornornoston script--------------------------------
        spawn_army
            faction saxons
            character	Dornornoston, named character, age 22, x 214, y 335, direction S, portrait Galdor, battle_model eregion_smiths, hero_ability Light_of_the_Faith, label dornornoston_1
            traits		Dornornoston 1, CustomBG 1, Hero 1, ElvenRace 1, Noldor 1, HouseFinarfin 1, HeroAbilityElf 1, BattleChivalryGood 2, Brave 2, Handsome 1, GoodAttacker 1, GoodCommander 2, Just 1, Loyal 3, LoyaltyStarter 1, NaturalMilitarySkill 1, PietyStarter 1
            unit		Eregion Smiths			exp 2 armour 10 weapon_lvl 0
        end
        set_event_counter jewel_guild_rebuilt 1
        if I_CompareCounter faction_ID_saxons == 1
            snap_strat_camera 214, 335
        end_if
        historic_event dornornoston factions { saxons, }
        console_command give_ancillary dornornoston_1 elven_sculptor
        console_command give_ancillary dornornoston_1 eregion_helmet
        console_command give_ancillary dornornoston_1 noldor_shield
        terminate_monitor
    end_monitor

    ; The Twins

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType saxons
        and I_TurnNumber = 15
        log always ---------------------------twins start--------------------------------
        point_at_strat_position 191, 380
        snap_strat_camera 191, 380
        historic_event the_twins_start factions { saxons, }
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType saxons
        and I_TurnNumber >= 15
        log always ---------------------------twins script--------------------------------
        if I_CharacterTypeNearTile saxons diplomat, 5 191, 380
            ui_flash_stop
            zoom_strat_camera 203, 385
            spawn_army
                faction saxons
                character	Elladan, named character, age 18, x 223, y 386, portrait Elladan, battle_model twins_elladan, hero_ability Light_of_the_Faith, label elladan_1
                unit		Dunedain Bodyguard 			exp 2 armour 1 weapon_lvl 0
                unit		Dunedain Scouts 			exp 1 armour 1 weapon_lvl 0
            end
            spawn_army
                faction saxons
                character	Elrohir, named character, age 17, x 186, y 393, portrait Elrohir, battle_model twins_elrohir, hero_ability Light_of_the_Faith, label elrohir_1
                unit		Dunedain Bodyguard 			exp 2 armour 1 weapon_lvl 0
                unit		Dunedain Scouts 			exp 1 armour 1 weapon_lvl 0
            end
            historic_event the_twins factions { saxons, }
            terminate_monitor
        end_if
    end_monitor

    ; Elven Barracks rules


    monitor_event PreFactionTurnStart FactionIsLocal
        and FactionType saxons
        log always ---------------------------elven barracks rule--------------------------------
        if I_SettlementOwner Imladris = saxons
            set_event_counter imladris_controlled 1
        end_if
        if not I_SettlementOwner Imladris = saxons
            set_event_counter imladris_controlled 0
        end_if
        if I_SettlementOwner Mithlond = saxons
            set_event_counter mithlond_controlled 1
        end_if
        if not I_SettlementOwner Mithlond = saxons
            set_event_counter mithlond_controlled 0
        end_if
        if I_SettlementOwner Eregion = saxons
            and I_EventCounter eregion_reclaimed = 0
            historic_event eregion_reclaimed factions { saxons, }
            set_event_counter eregion_reclaimed 1
        end_if
    end_monitor

    ;######################### Faction: Lorien ##########################
    ;Rumil
    declare_counter rumil_spawned

    monitor_event FactionTurnStart FactionType ireland
        and I_TurnNumber >= 30
        log always ---------------------------Rumil script--------------------------------
        if I_SettlementOwner Deep_Mirkwood = ireland
            spawn_army
                faction ireland
                character	Rumil, named character, age 20, x 269, y 329, direction S, portrait rumil, battle_model haldir, label rumil_1
                traits		Rumil 1, ElvenRace 1, Nandor 1, HouseAmdir 1, BattleChivalryGood 1, Brave 1, GoodAttacker 1, GoodCommander 1, Loyal 2, Upright 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, Marchwarden 1, CustomBG 1
                unit		Lothlorien Marchwardens			exp 3 armour 2 weapon_lvl 1
            end
            set_counter rumil_spawned 1
            if not I_IsFactionAIControlled ireland
                snap_strat_camera 269, 329
                historic_event rumil_promoted factions { ireland, }
            end_if
        end_if
        if I_CompareCounter rumil_spawned = 1
            console_command give_ancillary rumil_1 galadhrim_sentinel
            console_command give_ancillary rumil_1 lorien_cloak
            terminate_monitor
        end_if
    end_monitor

    ;Orophin
    declare_counter orophin_spawned

    monitor_event FactionTurnStart FactionType ireland
        and I_TurnNumber >= 30
        log always ---------------------------Orophin script--------------------------------
        if I_NumberOfSettlements ireland >= 8
            spawn_army
                faction ireland
                character	Orophin, named character, age 20, x 272, y 329, direction S, portrait orophin, battle_model haldir, label orophin_1
                traits		Orophin 1, ElvenRace 1, Nandor 1, HouseAmdir 1, BattleChivalryGood 1, Brave 1, GoodAttacker 1, GoodCommander 1, Loyal 2, Upright 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, Marchwarden 1, CustomBG 1
                unit		Lothlorien Marchwardens			exp 3 armour 2 weapon_lvl 1
            end
            set_counter orophin_spawned 1
            if not I_IsFactionAIControlled ireland
                snap_strat_camera 272, 329
                historic_event orophin_promoted factions { ireland, }
            end_if
        end_if
        if I_CompareCounter orophin_spawned = 1
            console_command give_ancillary orophin_1 galadhrim_sentinel
            console_command give_ancillary orophin_1 lorien_bow
            terminate_monitor
        end_if
    end_monitor

    ;############### ND Beacon of Hope ##########################

    ;#BOH Bree

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction normans = Allied
        and I_EventCounter turks_allied_normans == 0
        log always ---------------------------#BOH Bree true --------------------------------
        set_event_counter turks_allied_normans 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and I_EventCounter turks_allied_normans == 1
        and DiplomaticStanceFromFaction normans > Allied
        log always ---------------------------#BOH Bree false --------------------------------
        set_event_counter turks_allied_normans 0
    end_monitor

    ;#BOH Rohan

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction milan = Allied
        log always ---------------------------#BOH Rohan true --------------------------------
        set_event_counter turks_allied_milan 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and I_EventCounter turks_allied_milan == 1
        and DiplomaticStanceFromFaction milan > Allied
        log always ---------------------------#BOH Rohan false --------------------------------
        set_event_counter turks_allied_milan 0
    end_monitor

    ;#BOH Anduin Vale

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction timurids = Allied
        and I_EventCounter turks_allied_timurids == 0
        log always ---------------------------#BOH Anduin true --------------------------------
        set_event_counter turks_allied_timurids 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and I_EventCounter turks_allied_timurids == 1
        and DiplomaticStanceFromFaction timurids > Allied
        log always ---------------------------#BOH Anduin false --------------------------------
        set_event_counter turks_allied_timurids 0
    end_monitor

    ;#BOH Dorwinion

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction byzantium = Allied
        and I_EventCounter turks_allied_byzantium == 0
        log always ---------------------------#BOH Dorwinion true --------------------------------
        set_event_counter turks_allied_byzantium 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and I_EventCounter turks_allied_byzantium == 1
        and DiplomaticStanceFromFaction byzantium > Allied
        log always ---------------------------#BOH Dorwinion false --------------------------------
        set_event_counter turks_allied_byzantium 0
    end_monitor

    ;#BOH Dale

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction scotland = Allied
        and I_EventCounter turks_allied_scotland == 0
        log always ---------------------------#BOH Dale true --------------------------------
        set_event_counter turks_allied_scotland 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and I_EventCounter turks_allied_scotland == 1
        and DiplomaticStanceFromFaction scotland > Allied
        log always ---------------------------#BOH Dale false --------------------------------
        set_event_counter turks_allied_scotland 0
    end_monitor

    ;BOH Rest

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction sicily = AtWar
        log always ---------------------------#BOH Gondor/DA false --------------------------------
        set_event_counter nd_peace_gondor 0
        set_event_counter nd_peace_amroth 0
    end_monitor

    monitor_event PreFactionTurnStart FactionType turks
        and DiplomaticStanceFromFaction denmark = AtWar
        log always ---------------------------#BOH Gondor/DA false --------------------------------
        set_event_counter nd_peace_gondor 0
        set_event_counter nd_peace_amroth 0
    end_monitor

    ;####### Script: Rhun Dragon Relic  ################


    monitor_event FactionTurnStart FactionType venice
        log always ---------------------------dragon relic script--------------------------------
        if I_IsFactionAIControlled venice
            terminate_monitor
        end_if
        if I_EventCounter smaug_scales = 0
            if I_SettlementOwner Esgaroth = venice
                historic_event smaug_scales factions { venice, }
            end_if
            if I_WorldwideAncillaryExists smaug_artefact
                historic_event smaug_scales factions { venice, }
                historic_event smaug_jewels factions { venice, }
            end_if
        end_if
        if I_EventCounter smaug_jewels = 0
            and I_SettlementOwner Esgaroth = venice
            historic_event smaug_jewels factions { venice, }
        end_if
        if I_EventCounter scatha_artefact = 0
            if I_SettlementOwner Lower_Anduin_Vale = venice
                historic_event scatha_artefact factions { venice, }
            end_if
            if I_WorldwideAncillaryExists scatha_artefact
                historic_event scatha_artefact factions { venice, }
            end_if
        end_if
        if I_EventCounter dragon_egg = 0
            if I_SettlementOwner Withered = venice
                historic_event dragon_egg factions { venice, }
            end_if
            if I_WorldwideAncillaryExists egg_artefact
                historic_event dragon_egg factions { venice, }
            end_if
        end_if
        if I_EventCounter smaug_scales = 1
            and I_EventCounter smaug_jewels = 1
            and I_EventCounter scatha_artefact = 1
            and I_EventCounter dragon_egg = 1
            historic_event dragon_relic_complete factions { venice, }
            add_money venice 3400
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType venice
        log always ---------------------------dragon relic script camera movement--------------------------------
        if not I_IsFactionAIControlled venice
            and I_TurnNumber = 2
            if not I_HotseatEnabled
                disable_cursor
                hide_ui
                zoom_strat_camera 1
                campaign_wait 0.2
                snap_strat_camera 285, 380
                campaign_wait 0.5
                move_strat_camera 288, 387
                point_at_settlement Lower_Anduin_Vale
                campaign_wait 0.5
                move_strat_camera 338, 409
                point_at_settlement Esgaroth
                campaign_wait 0.5
                move_strat_camera 315, 438
                point_at_settlement Withered
                campaign_wait 1
                ui_flash_stop
                show_ui
                enable_cursor
                campaign_wait 0.2
            end_if
            historic_event dragon_relic_hunt factions { venice, }
            terminate_monitor
        end_if
        if I_IsFactionAIControlled venice
            terminate_monitor
        end_if
    end_monitor

    ;######## Script: Reclaiming Dwarven Relics  #############
    ;check the final ered luin ring script for counters, turn numbers

    monitor_event FactionTurnStart FactionType hungary
        log always ---------------------------dwarven relic script messages--------------------------------
        if I_IsFactionAIControlled hungary
            terminate_monitor
        end_if
        if I_EventCounter luin_ring_rejected = 1
            terminate_monitor
        end_if
        if I_EventCounter luin_ring_accepted = 1
            and I_EventCounter luin_ring_06 = 1
            and I_EventCounter dwarven_relic_requisition_start = 0
            historic_event dwarven_relic_requisition_start factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ;narsil

    declare_counter narsil_claim_rejected
    set_counter narsil_claim_rejected 0

    monitor_event FactionTurnStart FactionType hungary
        log always ---------------------------dwarven relic narsil--------------------------------
        if I_IsFactionAIControlled hungary
            terminate_monitor
        end_if
        if I_EventCounter luin_ring_rejected = 1
            terminate_monitor
        end_if
        if I_EventCounter narsil_reclaimed = 1
            terminate_monitor
        end_if
        if I_CompareCounter narsil_claim_rejected = 1
            and not I_WorldwideAncillaryExists narsil
            and I_EventCounter narsil_aragorn_dead = 0
            snap_strat_camera 246, 384 ;Imladris
            historic_event narsil_aragorn_dead factions { hungary, }
        end_if
        if I_EventCounter narsil_aragorn_dead = 1
            and I_WorldwideAncillaryExists narsil
            historic_event narsil_reclaimed factions { hungary, }
            console_command add_money 3400
            terminate_monitor
        end_if
        if I_TurnNumber >= 38
            and I_EventCounter dwarven_relic_requisition_start = 1
            if I_EventCounter dwarves_send_diplomat_narsil = 0
                and I_WorldwideAncillaryExists narsil
                snap_strat_camera 200, 361
                campaign_wait 1
                move_strat_camera 217, 361
                campaign_wait 1
                point_at_settlement Angle
                campaign_wait 1
                ui_flash_stop
                historic_event dwarves_send_diplomat_narsil factions { hungary, }
            end_if
            if I_EventCounter dwarves_send_diplomat_narsil = 1
                and I_CompareCounter narsil_claim_rejected = 0
                and I_SettlementOwner Angle = turks
                and I_WorldwideAncillaryExists narsil
                and I_CharacterTypeNearTile hungary diplomat, 4 218, 362
                snap_strat_camera 217, 361
                historic_event dwarves_demand_narsil_a factions { hungary, }
                set_counter narsil_claim_rejected 1
            end_if
            if I_EventCounter dwarves_send_diplomat_narsil = 1
                and I_CompareCounter narsil_claim_rejected = 0
                if not I_SettlementOwner Angle = turks
                    and I_WorldwideAncillaryExists narsil
                    and I_CharacterTypeNearTile hungary diplomat, 4 218, 362
                    snap_strat_camera 217, 361
                    historic_event dwarves_demand_narsil_b factions { hungary, }
                    set_counter narsil_claim_rejected 1
                end_if
                if not I_WorldwideAncillaryExists narsil
                    and I_CharacterTypeNearTile hungary diplomat, 4 218, 362
                    snap_strat_camera 217, 361
                    historic_event dwarves_demand_narsil_c factions { hungary, }
                    set_counter narsil_claim_rejected 1
                end_if
            end_if
        end_if
    end_monitor

    ;horn of the mark

    declare_counter eorls_horn_claim_rejected
    set_counter eorls_horn_claim_rejected 0

    monitor_event FactionTurnStart FactionType hungary
        log always ---------------------------dwarven relic eorl--------------------------------
        if I_IsFactionAIControlled hungary
            terminate_monitor
        end_if
        if I_EventCounter luin_ring_rejected = 1
            terminate_monitor
        end_if
        if I_EventCounter eorls_horn_reclaimed = 1
            terminate_monitor
        end_if
        if I_CompareCounter eorls_horn_claim_rejected = 1
            and not I_WorldwideAncillaryExists eorls_horn
            and I_EventCounter eorls_horn_theoden_dead = 0
            snap_strat_camera 249, 250 ;Edoras
            historic_event eorls_horn_theoden_dead factions { hungary, }
        end_if
        if I_EventCounter eorls_horn_theoden_dead = 1
            and I_WorldwideAncillaryExists eorls_horn
            console_command add_money 3400
            historic_event eorls_horn_reclaimed factions { hungary, }
            terminate_monitor
        end_if
        if I_TurnNumber >= 46
            and I_EventCounter dwarven_relic_requisition_start = 1
            if I_EventCounter dwarves_send_diplomat_eorls_horn = 0
                and I_WorldwideAncillaryExists eorls_horn
                snap_strat_camera 240, 250 ;Edoras
                campaign_wait 1
                move_strat_camera 249, 250
                campaign_wait 1
                point_at_settlement Kings_Land
                campaign_wait 1
                ui_flash_stop
                historic_event dwarves_send_diplomat_eorls_horn factions { hungary, }
            end_if
            if I_EventCounter dwarves_send_diplomat_eorls_horn = 1
                and I_CompareCounter eorls_horn_claim_rejected = 0
                and I_SettlementOwner Kings_Land = milan
                and I_WorldwideAncillaryExists eorls_horn
                and I_CharacterTypeNearTile hungary diplomat, 5 248, 251 ;Edoras
                snap_strat_camera 249, 250 ;Edoras
                historic_event dwarves_demand_eorls_horn_a factions { hungary, }
                set_counter eorls_horn_claim_rejected 1
            end_if
            if I_EventCounter dwarves_send_diplomat_eorls_horn = 1
                and I_CompareCounter eorls_horn_claim_rejected = 0
                if not I_SettlementOwner Kings_Land = milan
                    and I_WorldwideAncillaryExists eorls_horn
                    and I_CharacterTypeNearTile hungary diplomat, 5 248, 251 ;Edoras
                    snap_strat_camera 249, 250 ;Edoras
                    historic_event dwarves_demand_eorls_horn_b factions { hungary, }
                    set_counter eorls_horn_claim_rejected 1
                end_if
                if not I_WorldwideAncillaryExists eorls_horn
                    and I_CharacterTypeNearTile hungary diplomat, 5 248, 251 ;Edoras
                    snap_strat_camera 249, 250 ;Edoras
                    historic_event dwarves_demand_eorls_horn_c factions { hungary, }
                    set_counter eorls_horn_claim_rejected 1
                end_if
            end_if
        end_if
    end_monitor

    ;Gurthang and Dragon-helm of Dor-lomin

    monitor_event FactionTurnStart FactionType hungary
        log always ---------------------------dwarven relic Gurthang and Dragon-helm of Dor-lomin--------------------------------
        if I_IsFactionAIControlled hungary
            terminate_monitor
        end_if
        if I_EventCounter luin_ring_rejected = 1
            terminate_monitor
        end_if
        if I_TurnNumber >= 52
            and I_EventCounter luin_ring_accepted = 1
            and I_EventCounter dwarven_relic_requisition_start = 1
            and I_EventCounter tol_morwen_start = 0
            snap_strat_camera 8, 449 ;Tol Fuin until Tol Morwen added
            campaign_wait 1
            move_strat_camera 8, 438
            campaign_wait 1
            point_at_strat_position 8, 438 ;Tol Morwen
            campaign_wait 1
            ui_flash_stop
            historic_event tol_morwen_start factions { hungary, }
        end_if
        if I_EventCounter tol_morwen_start = 1
            and I_CharacterTypeNearTile hungary spy, 6 8, 438 ;Tol Morwen
            and I_EventCounter turins_grave_opened = 0
            historic_event turins_grave_opened factions { hungary, }
        end_if
        if I_EventCounter turins_grave_opened = 1
            and I_WorldwideAncillaryExists helm_dorlomin
            historic_event gurthang_reforged factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ;####### Script: Dwarven Grudges ##############################

    declare_counter dwarven_wmoria
    declare_counter dwarven_emoria
    declare_counter dwarven_gundabad
    declare_counter dwarven_dainshalls
    declare_counter dwarven_erebor


    monitor_event FactionTurnStart FactionType moors
        log always ---------------------------dwarven grudges start--------------------------------
        if I_IsFactionAIControlled moors
            terminate_monitor
        end_if
        if I_TurnNumber = 2
            if not I_HotseatEnabled
                disable_cursor
                hide_ui
                zoom_strat_camera 1
                campaign_wait 0.2
                snap_strat_camera 250, 342
                campaign_wait 1
                move_strat_camera 246, 342
                point_at_settlement East_Moria
                campaign_wait 0.5
                move_strat_camera 242, 342
                point_at_settlement West_Moria
                campaign_wait 0.5
                move_strat_camera 252, 439
                point_at_settlement Mt_Gundabad
                campaign_wait 0.5
                move_strat_camera 285, 439
                point_at_settlement Grey_Mountains
                campaign_wait 0.5
                move_strat_camera 339, 421
                point_at_settlement Erebor
                campaign_wait 1
                ui_flash_stop
                show_ui
                enable_cursor
                campaign_wait 0.2
            end_if
            historic_event dwarven_realms_start factions { moors, }
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType norway
        log always ---------------------------dwarven grudges west moria--------------------------------
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
        if I_TurnNumber >= 20
            and I_SettlementOwner West_Moria = norway
            historic_event dwarven_realms_start factions { norway, }
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionCultureType southern_european
        and not IsFactionAIControlled
        and not FactionType hungary
        log always ---------------------------dwarven grudges script--------------------------------
        if I_CompareCounter dwarven_wmoria = 0
            if I_SettlementOwner West_Moria = norway
                set_counter dwarven_wmoria 1
            end_if
            if I_SettlementOwner West_Moria = hungary
                set_counter dwarven_wmoria 1
            end_if
            if I_SettlementOwner West_Moria = moors
                set_counter dwarven_wmoria 1
            end_if
        end_if
        if I_CompareCounter dwarven_emoria = 0
            if I_SettlementOwner East_Moria = norway
                set_counter dwarven_emoria 1
            end_if
            if I_SettlementOwner East_Moria = hungary
                set_counter dwarven_emoria 1
            end_if
            if I_SettlementOwner East_Moria = moors
                set_counter dwarven_emoria 1
            end_if
        end_if
        if I_CompareCounter dwarven_gundabad = 0
            if I_SettlementOwner Mt_Gundabad = norway
                set_counter dwarven_gundabad 1
            end_if
            if I_SettlementOwner Mt_Gundabad = hungary
                set_counter dwarven_gundabad 1
            end_if
            if I_SettlementOwner Mt_Gundabad = moors
                set_counter dwarven_gundabad 1
            end_if
        end_if
        if I_CompareCounter dwarven_dainshalls = 0
            if I_SettlementOwner Grey_Mountains = norway
                set_counter dwarven_dainshalls 1
            end_if
            if I_SettlementOwner Grey_Mountains = hungary
                set_counter dwarven_dainshalls 1
            end_if
            if I_SettlementOwner Grey_Mountains = moors
                set_counter dwarven_dainshalls 1
            end_if
        end_if
        if I_CompareCounter dwarven_erebor = 0
            if I_SettlementOwner Erebor = norway
                set_counter dwarven_erebor 1
            end_if
            if I_SettlementOwner Erebor = hungary
                set_counter dwarven_erebor 1
            end_if
            if I_SettlementOwner Erebor = moors
                set_counter dwarven_erebor 1
            end_if
        end_if
        if I_CompareCounter dwarven_wmoria = 1
            and not I_SettlementOwner West_Moria = norway
            and not I_SettlementOwner West_Moria = hungary
            and not I_SettlementOwner West_Moria = moors
            set_counter dwarven_wmoria 0
        end_if
        if I_CompareCounter dwarven_emoria = 1
            and not I_SettlementOwner East_Moria = norway
            and not I_SettlementOwner East_Moria = hungary
            and not I_SettlementOwner East_Moria = moors
            set_counter dwarven_emoria 0
        end_if
        if I_CompareCounter dwarven_gundabad = 1
            and not I_SettlementOwner Mt_Gundabad = norway
            and not I_SettlementOwner Mt_Gundabad = hungary
            and not I_SettlementOwner Mt_Gundabad = moors
            set_counter dwarven_gundabad 0
        end_if
        if I_CompareCounter dwarven_dainshalls = 1
            and not I_SettlementOwner Grey_Mountains = norway
            and not I_SettlementOwner Grey_Mountains = hungary
            and not I_SettlementOwner Grey_Mountains = moors
            set_counter dwarven_dainshalls 0
        end_if
        if I_CompareCounter dwarven_erebor = 1
            and not I_SettlementOwner Erebor = norway
            and not I_SettlementOwner Erebor = hungary
            and not I_SettlementOwner Erebor = moors
            set_counter dwarven_erebor 0
        end_if
        if not I_CompareCounter dwarven_wmoria = 1
            and not I_CompareCounter dwarven_emoria = 1
            and not I_CompareCounter dwarven_gundabad = 1
            and not I_CompareCounter dwarven_dainshalls = 1
            and not I_CompareCounter dwarven_erebor = 1
            and I_EventCounter dwarven_realms_reclaimed = 1
            set_event_counter dwarven_realms_reclaimed 0
        end_if
        if I_CompareCounter dwarven_wmoria = 1
            and I_CompareCounter dwarven_emoria = 1
            and I_CompareCounter dwarven_gundabad = 1
            and I_CompareCounter dwarven_dainshalls = 1
            and I_CompareCounter dwarven_erebor = 1
            and I_EventCounter dwarven_realms_reclaimed = 0
            set_event_counter dwarven_realms_reclaimed 1
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionCultureType southern_european
        and not IsFactionAIControlled
        and not FactionType hungary
        log always ---------------------------dwarven grudges complete message--------------------------------
        if I_CompareCounter dwarven_wmoria = 1
            and I_CompareCounter dwarven_emoria = 1
            and I_CompareCounter dwarven_gundabad = 1
            and I_CompareCounter dwarven_dainshalls = 1
            and I_CompareCounter dwarven_erebor = 1
            historic_event dwarven_realms_reclaimed factions { norway, moors, }
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType moors
        and not I_IsFactionAIControlled moors
        and I_EventCounter dwarven_realms_reclaimed > 0
        log always ---------------------------dwarven grudges complete erebor--------------------------------
        console_command add_money 4800
        spawn_army
            faction moors
            character	Kazador, named character, age 27, x 257, y 438, family, direction S
            traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, GHStrat 1, CustomBG 1
            unit		Hammers of Gundabad			exp 3 armour 0 weapon_lvl 0
        end
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionType norway
        and not I_IsFactionAIControlled norway
        and I_EventCounter dwarven_realms_reclaimed > 0
        log always ---------------------------dwarven grudges complete KD--------------------------------
        console_command add_money 4800
        terminate_monitor
    end_monitor


    ;####### Script: Theoden ##############################

    monitor_event FactionTurnStart FactionType milan
    and I_TurnNumber >= 9
        log always ---------------------------theoden deceived remove--------------------------------
        console_command give_trait theoden_1 TheodenDeceived 2
        console_command character_reset theoden_1
        historic_event theoden_renewed factions { milan, }
        terminate_monitor
    end_monitor

    ;####### Script: Denethor ##############################

    monitor_event FactionTurnStart FactionType sicily
        log always ---------------------------denethor script--------------------------------
        if I_IsFactionAIControlled sicily
            terminate_monitor
        end_if
        if I_EventCounter ring_destroyed = 1
            terminate_monitor
        end_if
        if I_EventCounter denethor_mad = 1
            terminate_monitor
        end_if
        if I_TurnNumber >= 3
            and not I_WorldwideAncillaryExists anor_stone
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled sicily
            and I_WorldwideAncillaryExists anor_stone
            and not I_WorldwideAncillaryExists high_warden
            console_command give_trait denethor_1 BoromirDead 1
        end_if
        if not I_IsFactionAIControlled sicily
            and I_WorldwideAncillaryExists anor_stone
            and not I_WorldwideAncillaryExists warden
            console_command give_trait denethor_1 FaramirDead 1
        end_if
        if I_TurnNumber = 2
            console_command give_trait denethor_1 DenethorMad 1
            historic_event denethor_palantir_start factions { sicily, }
        end_if
        if I_EventCounter denethor_sauron_contact = 0
            if I_TurnNumber < 10
                and I_FactionLeaderTrait sicily DenethorMad = 2
                historic_event denethor_sauron_contact factions { sicily, }
            end_if
            if I_TurnNumber = 10
                and I_FactionLeaderTrait sicily DenethorMad = 1
                console_command give_trait denethor_1 DenethorMad 2
                historic_event denethor_sauron_contact factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_sauron_defiance = 0
            if I_TurnNumber < 19
                and I_FactionLeaderTrait sicily DenethorMad = 3
                historic_event denethor_sauron_defiance factions { sicily, }
            end_if
            if I_TurnNumber = 19
                and I_FactionLeaderTrait sicily DenethorMad = 2
                console_command give_trait denethor_1 DenethorMad 3
                historic_event denethor_sauron_defiance factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_sauron_plan = 0
            if I_TurnNumber < 29
                and I_FactionLeaderTrait sicily DenethorMad = 4
                historic_event denethor_sauron_plan factions { sicily, }
            end_if
            if I_TurnNumber = 29
                and I_FactionLeaderTrait sicily DenethorMad = 3
                console_command give_trait denethor_1 DenethorMad 4
                historic_event denethor_sauron_plan factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_sense_doom = 0
            if I_TurnNumber < 69
                and I_FactionLeaderTrait sicily DenethorMad = 6
                historic_event denethor_sense_doom factions { sicily, }
            end_if
            if I_TurnNumber = 69
                and I_FactionLeaderTrait sicily DenethorMad = 5
                console_command give_trait denethor_1 DenethorMad 6
                historic_event denethor_sense_doom factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_sauron_progress = 0
            if I_TurnNumber < 39
                and I_FactionLeaderTrait sicily DenethorMad = 5
                historic_event denethor_sauron_progress factions { sicily, }
            end_if
            if I_TurnNumber = 39
                and I_FactionLeaderTrait sicily DenethorMad = 4
                console_command give_trait denethor_1 DenethorMad 5
                historic_event denethor_sauron_progress factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_descending_madness = 0
            if I_TurnNumber < 89
                and I_FactionLeaderTrait sicily DenethorMad = 7
                historic_event denethor_descending_madness factions { sicily, }
            end_if
            if I_TurnNumber = 89
                and I_FactionLeaderTrait sicily DenethorMad = 6
                console_command give_trait denethor_1 DenethorMad 7
                historic_event denethor_descending_madness factions { sicily, }
            end_if
        end_if
        if I_EventCounter denethor_mad = 0
            if I_TurnNumber < 110
                and I_FactionLeaderTrait sicily DenethorMad = 8
                historic_event denethor_mad factions { sicily, }
            end_if
            if I_TurnNumber = 110
                and I_FactionLeaderTrait sicily DenethorMad = 7
                console_command give_trait denethor_1 DenethorMad 8
                historic_event denethor_mad factions { sicily, }
            end_if
        end_if
        if not I_IsFactionAIControlled sicily
            and I_FactionLeaderTrait sicily DenethorMad > 0
            and I_EventCounter ring_destroyed = 1
            and I_EventCounter denethor_redeemed = 0
            console_command give_trait denethor_1 DenethorMad 0
            console_command give_trait denethor_1 Sane 1
            console_command add_money 6000
            historic_event denethor_redeemed factions { sicily, }
            terminate_monitor
        end_if
        if I_NumberOfSettlements england < 1
            and I_FactionLeaderTrait sicily DenethorMad > 0
            and I_EventCounter denethor_redeemed = 0
            console_command give_trait denethor_1 DenethorMad 0
            console_command give_trait denethor_1 Sane 1
            console_command add_money 6000
            historic_event denethor_redeemed factions { sicily, }
            terminate_monitor
        end_if
    end_monitor

    declare_counter gondor_battle_lost

    monitor_event PostBattle FactionType sicily
        and not I_WonBattle sicily
        log always ---------------------------denethor gondor battle monitor--------------------------------
        if I_IsFactionAIControlled sicily
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled sicily
            and not I_WorldwideAncillaryExists anor_stone
            terminate_monitor
        end_if
        if I_EventCounter denethor_redeemed = 1
            terminate_monitor
        end_if
        if I_CompareCounter gondor_battle_lost = 0
            set_counter gondor_battle_lost 1
            if I_CompareCounter gondor_battle_lost = 1
                and I_FactionLeaderTrait sicily GondorLostBattle = 0
                console_command give_trait denethor_1 GondorLostBattle 1
            end_if
        end_if
        set_counter gondor_battle_lost 0
    end_monitor

    ;###################### Script: Dunland Isengard Influence #########################
	
	;;;;;;;;;Declare Counters
	declare_counter isengard_demand_counter
	declare_counter isengard_offer_counter
	declare_counter isengard_approval
	declare_counter dunland_change
	declare_counter pool_freeze_isendraich_counter
	
	;;;;;;;;;Initial Isengard Approval
	set_counter isengard_approval 0
	inc_counter isengard_approval 10
	
	
	;;;;;;;;; Monitors that will change Isengard's approval;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
    monitor_event GuildUpgraded BuildingName = isengard_outpost
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		log always --------------------------isengard_outpost built [new dunland script]---------------------------------
		inc_counter isengard_approval 8
		
    end_monitor
	
    monitor_event GuildUpgraded BuildingName = wizard_council
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		log always --------------------------wizard_council built [new dunland script]---------------------------------
		inc_counter isengard_approval 16
		
    end_monitor
	
    monitor_event GuildUpgraded BuildingName = dunhird_council
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		log always --------------------------dunhird_council built [new dunland script]---------------------------------
	
		inc_counter isengard_approval -10
		
    end_monitor
	
    monitor_event GuildUpgraded BuildingName = dunhird_grand_council
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		log always --------------------------dunhird_grand_council built [new dunland script]---------------------------------
	
		inc_counter isengard_approval -18
		
    end_monitor
	
	monitor_event CharacterTurnStart CharFactionType aztecs
	and HasAncType isendraich_councillor
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		log always --------------------------isendraich_councillor inc [new dunland script]---------------------------------
	
		inc_counter isengard_approval 1
		
	end_monitor
	
	 monitor_event BuildingDestroyed BuildingName = dunhird_council
     and FactionType aztecs
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval 5
		
	end_monitor
	
	 monitor_event BuildingDestroyed BuildingName = dunhird_grand_council
     and FactionType aztecs
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval 10
		
	end_monitor
	
	 monitor_event BuildingDestroyed BuildingName = isengard_outpost
     and FactionType aztecs
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval -20
		
	end_monitor
	
	 monitor_event BuildingDestroyed BuildingName = wizard_council
     and FactionType aztecs
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval -40
		
	end_monitor
	
	 monitor_event LeaderMissionSuccess PaybackID isengard_daen_approval
		log always --------------------------dun complete mission [new dunland script]---------------------------------
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval 8
		
	end_monitor
	
	 monitor_event UnitTrained UnitType Huntmasters
	 and FactionType aztecs
		log always --------------------------Huntmasters make [new dunland script]---------------------------------
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval -2
		
	end_monitor
	
	 monitor_event UnitTrained UnitType Dunhird Feudkeepers
	 and FactionType aztecs
		log always --------------------------Feudkeepers make [new dunland script]---------------------------------
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval -1
		
	end_monitor
	
	 monitor_event UnitTrained UnitType Isendraich Towersworn
	 and FactionType aztecs
		log always --------------------------Isendraich make [new dunland script]---------------------------------
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_counter isengard_approval 1
		
	end_monitor
	
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	set_event_counter isengard_influence_0 1
	
	;;;;;;;;; Isengard's offers and demands;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	monitor_event PreFactionTurnStart FactionType aztecs
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		;;;;;for edb isengard barracks construction by Dunland
		set_event_counter uruk_barracks_dunland 0
		
		if I_EventCounter ic_dunland_change > 0
			log always --------------------------isen barracks available [new dunland script]---------------------------------
			set_event_counter uruk_barracks_dunland 1
		end_if
		
		if I_CompareCounter pool_freeze_isendraich_counter > 0
			inc_counter pool_freeze_isendraich_counter -1
		end_if
		
		if I_EventCounter pool_freeze_isendraich > 0
		and I_CompareCounter pool_freeze_isendraich_counter = 0
			log always --------------------------end pool freeze [new dunland script]---------------------------------
			set_event_counter pool_freeze_isendraich 0
		end_if
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
		;;;;;extra approval changers based on faction size
		if I_NumberOfSettlements aztecs < 5
		and I_CompareCounter isengard_approval < 0
		
			inc_counter isengard_approval 1
			
		end_if
		
		if I_NumberOfSettlements aztecs < 8
		and I_CompareCounter isengard_approval < 0
			inc_counter isengard_approval 1
		end_if
		
		if I_NumberOfSettlements aztecs > 10
		and I_NumberOfSettlements france > 3
		and I_CompareCounter isengard_approval > 0
			inc_counter isengard_approval -1
		end_if
		
		if I_NumberOfSettlements aztecs > 20
		and I_NumberOfSettlements france > 8
		and I_CompareCounter isengard_approval > 0
			inc_counter isengard_approval -2
		end_if
		
		if I_NumberOfSettlements aztecs > 30
		and I_NumberOfSettlements france > 10
		and I_CompareCounter isengard_approval > 0
			inc_counter isengard_approval -5
		end_if
		;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		
		if I_TurnNumber > 30 
			;;;;;;;;;;;;;;;;;Isengard influence levels;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			set_event_counter isengard_influence_0 1
			set_event_counter isengard_influence_1 0
			set_event_counter isengard_influence_2 0
			set_event_counter isengard_influence_3 0
			set_event_counter isengard_influence_4 0
			
			if I_CompareCounter isengard_approval < 50
				set_counter dunland_change 0
			end_if
			
			if I_CompareCounter isengard_approval >= 30
				log always --------------------------isen influence level 1 [new dunland script]---------------------------------
				set_event_counter isengard_influence_0 0
				set_event_counter isengard_influence_1 1
				set_event_counter isengard_influence_2 0
				set_event_counter isengard_influence_3 0
				set_event_counter isengard_influence_4 0
			end_if
			
			if I_CompareCounter isengard_approval >= 60
			and I_TurnNumber > 40
				log always --------------------------isen influence level 2 [new dunland script]---------------------------------
				set_event_counter isengard_influence_0 0
				set_event_counter isengard_influence_1 0
				set_event_counter isengard_influence_2 1
				set_event_counter isengard_influence_3 0
				set_event_counter isengard_influence_4 0
			end_if
			
			if I_CompareCounter isengard_approval >= 90
			and I_TurnNumber > 50
				log always --------------------------isen influence level 3 [new dunland script]---------------------------------
				set_event_counter isengard_influence_0 0
				set_event_counter isengard_influence_1 0
				set_event_counter isengard_influence_2 0
				set_event_counter isengard_influence_3 1
				set_event_counter isengard_influence_4 0
			end_if
			
			if I_CompareCounter isengard_approval >= 120
			and I_TurnNumber > 60
				log always --------------------------isen influence level 4 [new dunland script]---------------------------------
				set_event_counter isengard_influence_0 0
				set_event_counter isengard_influence_1 0
				set_event_counter isengard_influence_2 0
				set_event_counter isengard_influence_3 0
				set_event_counter isengard_influence_4 1
				inc_counter dunland_change 1
			end_if
			
			if I_CompareCounter dunland_change = 10
				log always --------------------------dunland change [new dunland script]---------------------------------
				historic_event ic_dunland_change factions { aztecs, }
				change_population_religion aztecs whitehand 50 daen
				set_event_counter uruk_barracks_dunland 1
			end_if
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			
			;;;;;;;;;;;;;;;;;;Triggers for the Demands;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			;counts down for the demands
			if I_CompareCounter isengard_demand_counter > 0
				inc_counter isengard_demand_counter -1
			end_if
			
			;;;;;;;when to trigger next demand;;;;;;;;;;;;;
			;second demand
			if I_EventCounter isengard_demand_1 >= 3
				set_event_counter isengard_demand_2_active 1
			end_if
			
			;third demand
			if I_EventCounter isengard_demand_2 >= 3
				set_event_counter isengard_demand_3_active 1
			end_if
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			
			;;;;;;;;;;;;;;;;;;Demands firing;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			;first demand
			if I_CompareCounter isengard_approval < 0
			and I_EventCounter isengard_demand_1 < 4
			and I_EventCounter isengard_demand_2_active = 0
			and I_CompareCounter isengard_demand_counter = 0
			and RandomPercent < 75
				log always --------------------------isen demand 1 [new dunland script]---------------------------------
				historic_event isengard_demand_1 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_demand_1_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen demand 1 accept [new dunland script]---------------------------------
						set_event_counter isengard_demand_1_accepted 1
					end_if
					if I_EventCounter isengard_demand_1_accepted = 0
						log always --------------------------isen demand 1 decline [new dunland script]---------------------------------
						set_event_counter isengard_demand_1_declined 1
					end_if
				end_if
			end_if
			;second demand
			if I_CompareCounter isengard_approval < 0
			and I_EventCounter isengard_demand_2_active = 1
			and I_EventCounter isengard_demand_2 < 4
			and I_EventCounter isengard_demand_3_active = 0
			and I_CompareCounter isengard_demand_counter = 0
			and I_TurnNumber > 40
			and RandomPercent < 70
				log always --------------------------isen demand 2 [new dunland script]---------------------------------
				historic_event isengard_demand_2 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_demand_2_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen demand 2 accept [new dunland script]---------------------------------
						set_event_counter isengard_demand_2_accepted 1
					end_if
					if I_EventCounter isengard_demand_2_accepted = 0
						log always --------------------------isen demand 2 decline [new dunland script]---------------------------------
						set_event_counter isengard_demand_2_declined 1
					end_if
				end_if
			end_if
			;third demand
			if I_CompareCounter isengard_approval < 0
			and I_EventCounter isengard_demand_3_active = 1
			and I_EventCounter isengard_demand_3 < 4
			and I_CompareCounter isengard_demand_counter = 0
			and I_EventCounter dunland_isengard_war = 0
			and I_TurnNumber > 50
			and RandomPercent < 50
				log always --------------------------isen demand 3 [new dunland script]---------------------------------
				historic_event isengard_demand_3 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_demand_3_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen demand 3 accept [new dunland script]---------------------------------
						set_event_counter isengard_demand_3_accepted 1
					end_if
					if I_EventCounter isengard_demand_3_accepted = 0
						log always --------------------------isen demand 3 decline [new dunland script]---------------------------------
						set_event_counter isengard_demand_3_declined 1
					end_if
				end_if
			end_if
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			
			;offers
			;counts down for the offers
			if I_CompareCounter isengard_offer_counter > 0
				inc_counter isengard_offer_counter -1
			end_if
			
			;;;;;;;;;;;;;;;;;;offers firing;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			;first offer
			if I_CompareCounter isengard_approval > 20
			and I_EventCounter isengard_offer_1_accepted = 0
			and I_CompareCounter isengard_offer_counter = 0
			and RandomPercent < 85
				log always --------------------------isen offer 1 [new dunland script]---------------------------------
				historic_event isengard_offer_1 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_offer_1_accepted 0
					if RandomPercent <= 80
						log always --------------------------isen offer 1 accept [new dunland script]---------------------------------
						set_event_counter isengard_offer_1_accepted 1
					end_if
					if I_EventCounter isengard_offer_1_accepted = 0
						log always --------------------------isen offer 1 decline [new dunland script]---------------------------------
						set_event_counter isengard_offer_1_declined 1
					end_if
				end_if
			end_if
			;second offer
			if I_CompareCounter isengard_approval > 40
			and I_EventCounter isengard_offer_2_accepted  = 0
			and I_EventCounter isengard_offer_1 > 0
			and I_CompareCounter isengard_offer_counter = 0
			and RandomPercent < 80
				log always --------------------------isen offer 2 [new dunland script]---------------------------------
				historic_event isengard_offer_2 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_offer_2_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen offer 2 accept [new dunland script]---------------------------------
						set_event_counter isengard_offer_2_accepted 1
					end_if
					if I_EventCounter isengard_offer_2_accepted = 0
						log always --------------------------isen offer 2 decline [new dunland script]---------------------------------
						set_event_counter isengard_offer_2_declined 1
					end_if
				end_if
			end_if
			;third offer
			if I_CompareCounter isengard_approval > 60
			and I_EventCounter isengard_offer_3_accepted  = 0
			and I_EventCounter isengard_offer_2 > 0
			and I_CompareCounter isengard_offer_counter = 0
			and RandomPercent < 75
				log always --------------------------isen offer 3 [new dunland script]---------------------------------
				historic_event isengard_offer_3 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_offer_3_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen offer 3 accept [new dunland script]---------------------------------
						set_event_counter isengard_offer_3_accepted 1
					end_if
					if I_EventCounter isengard_offer_3_accepted = 0
						log always --------------------------isen offer 3 decline [new dunland script]---------------------------------
						set_event_counter isengard_offer_3_declined 1
					end_if
				end_if
			end_if
			;fourth offer
			if I_CompareCounter isengard_approval > 80
			and I_EventCounter isengard_offer_4_accepted = 0
			and I_EventCounter isengard_offer_3 > 0
			and I_CompareCounter isengard_offer_counter = 0
			and RandomPercent < 70
				log always --------------------------isen offer 4 [new dunland script]---------------------------------
				historic_event isengard_offer_4 true factions { aztecs, }
				if I_IsFactionAIControlled aztecs
					set_event_counter isengard_offer_4_accepted 0
					if RandomPercent <= 50
						log always --------------------------isen offer 4 accept [new dunland script]---------------------------------
						set_event_counter isengard_offer_4_accepted 1
					end_if
					if I_EventCounter isengard_offer_4_accepted = 0
						log always --------------------------isen offer 4 decline [new dunland script]---------------------------------
						set_event_counter isengard_offer_4_declined 1
					end_if
				end_if
			end_if
			;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
			
		end_if
		
	end_monitor
	
	;;;;;;;;;;;;;;;;;;;;;;;DEMAND EFFECTS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	;first demand
	 monitor_event EventCounter EventCounterType isengard_demand_1_accepted
     and I_EventCounter isengard_demand_1_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		add_money aztecs -3000
		add_money france 3000
		inc_counter isengard_approval 5
		inc_counter isengard_demand_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_demand_1_declined
     and I_EventCounter isengard_demand_1_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		inc_event_counter isengard_demand_1 1
		inc_counter isengard_approval -5
		inc_counter isengard_demand_counter 10
		inc_counter pool_freeze_isendraich_counter 5
		set_event_counter pool_freeze_isendraich 1
	 
	 end_monitor
	 
	 
	;second demand
	 monitor_event EventCounter EventCounterType isengard_demand_2_accepted
     and I_EventCounter isengard_demand_2_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		add_money aztecs -6000
		add_money france 6000
		inc_counter isengard_approval 8
		inc_counter isengard_demand_counter 10
		
	 end_monitor
	 
	 monitor_event EventCounter EventCounterType isengard_demand_2_declined
     and I_EventCounter isengard_demand_2_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		inc_event_counter isengard_demand_2 1
		inc_counter isengard_approval -8
		inc_counter isengard_demand_counter 10
		inc_counter pool_freeze_isendraich_counter 10
		set_event_counter pool_freeze_isendraich 1
	 
	 end_monitor
	 
	 
	;third demand
	 monitor_event EventCounter EventCounterType isengard_demand_3_accepted
     and I_EventCounter isengard_demand_3_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		add_money aztecs -12000
		add_money france 12000
		inc_counter isengard_approval 10
		inc_counter isengard_demand_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_demand_3_declined
     and I_EventCounter isengard_demand_3_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
			
			historic_event dunland_isengard_war factions { aztecs, }
			
	 end_monitor
	 
	 
	
	 monitor_event EventCounter EventCounterType dunland_isengard_war
     and I_EventCounter dunland_isengard_war = 1
			log always --------------------------dun-isen war! [new dunland script]---------------------------------
	 
			console_command diplomatic_stance france aztecs war
			destroy_buildings aztecs guild_isengard_outpost false
			if I_EventCounter dunland_keeps_ring = 0
				destroy_units aztecs Isendraich Towersworn
				destroy_units aztecs Orthanc Sentries
				destroy_units aztecs uruks
				if I_CharacterExists isengard_emmisary_1
					console_command create_unit isengard_emmisary_1 "Clan-folk Fighters" 1 0 0 0
					send_character_off_map isengard_emmisary_1
					spawn_army
						faction france
						character	Arwulfaz, named character, age 28, x 222, y 276, family, direction W, label isengard_emmisary_1
						unit		Isendraich Towersworn	exp 6 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
					end
				end_if
				if not I_CharacterExists isengard_emmisary_1
					spawn_army
						faction france
						character	Arwulfaz, named character, age 32, x 222, y 276, family, direction W, label isengard_emmisary_1
						traits		MiddleManRace 1, Dunlending 1, GoodCommander 1, LoyaltyStarter 1, PietyStarter 1, GovernorSkill 3, IsengardEmmisary_gov 1
						unit	Isendraich Towersworn	exp 6 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
					end
				end_if
				if I_CharacterExists isengard_emmisary_2
					console_command create_unit isengard_emmisary_2 "Clan-folk Fighters" 1 0 0 0
					send_character_off_map isengard_emmisary_2
					spawn_army
						faction france
						character	Duruz, named character, age 28, x 221, y 272, family, direction W, label isengard_emmisary_2
						unit		Berserkers					exp 6 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
					end
				end_if
				if not I_CharacterExists isengard_emmisary_2
					spawn_army
						faction france
						character	Duruz, named character, age 28, x 221, y 272, family, direction W, label isengard_emmisary_2
						traits		UrukHaiRace 1, GoodCommander 3, LoyaltyStarter 1, PietyStarter 1, IsengardEmmisary_battle 1
						unit		Berserkers					exp 6 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Dunnish Speutamen			exp 1 armour 0 weapon_lvl 0
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
					end
				end_if
				if I_CharacterExists isengard_emmisary_3
					console_command create_unit isengard_emmisary_3 "Clan-folk Fighters" 1 0 0 0
					send_character_off_map isengard_emmisary_3
					spawn_army
						faction france
						character	Greoulf, named character, age 28, x 221, y 269, family, direction W, label isengard_emmisary_3
						unit		Orthanc Guard				exp 6 armour 0 weapon_lvl 1
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
					end
				end_if
				if not I_CharacterExists isengard_emmisary_3
					spawn_army
						faction france
						character	Greoulf, named character, age 28, x 221, y 269, family, direction W, label isengard_emmisary_3
						traits		MiddleManRace 1, Dunlending 1, GoodCommander 3, LoyaltyStarter 1, PietyStarter 1, IsengardEmmisary_battle 1
						unit		Orthanc Guard				exp 6 armour 0 weapon_lvl 1
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Spearmen			exp 1 armour 0 weapon_lvl 0
						unit		Half Orc Baneguard		exp 1 armour 0 weapon_lvl 0
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
						unit		Isendraich Towersworn	exp 2 armour 0 weapon_lvl 1
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
						unit		Orthanc Sentries			exp 1 armour 0 weapon_lvl 0
					end
				end_if
			end_if
			terminate_monitor
			
	end_monitor
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	 
	 
	;;;;;;;;;;;;;;;;;;;;;;;OFFER EFFECTS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	;first offer
	 monitor_event EventCounter EventCounterType isengard_offer_1_accepted
     and I_EventCounter isengard_offer_1_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
		
		add_money aztecs 5000
		add_money france -5000
		inc_counter isengard_approval 5
		inc_counter isengard_offer_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_offer_1_declined
     and I_EventCounter isengard_offer_1_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		inc_counter isengard_approval -5
		if I_EventCounter isengard_offer_1_declined > 1
			inc_counter isengard_approval -2
		end_if
		if I_EventCounter isengard_offer_1_declined > 2
			inc_counter isengard_approval -4
		end_if
		if I_EventCounter isengard_offer_1_declined > 3
			inc_counter isengard_approval -6
		end_if
		if I_EventCounter isengard_offer_1_declined > 4
			inc_counter isengard_approval -8
		end_if
		if I_EventCounter isengard_offer_1_declined > 5
			inc_counter isengard_approval -10
		end_if
		inc_counter isengard_offer_counter 10
	 
	 end_monitor
	
	
	;second offer
	 monitor_event EventCounter EventCounterType isengard_offer_2_accepted
     and I_EventCounter isengard_offer_2_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		spawn_army
			faction aztecs
			character	Arwulfaz, named character, age 32, x 218, y 311, family, direction W, label isengard_emmisary_1
			traits		MiddleManRace 1, Dunlending 1, GoodCommander 1, LoyaltyStarter 1, PietyStarter 1, GovernorSkill 3, IsengardEmmisary_gov 1, DaenRaider 2, Isendraich 1
			unit	Isendraich Towersworn	exp 6 armour 0 weapon_lvl 1
		end
		inc_counter isengard_approval 5
		inc_counter isengard_offer_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_offer_2_declined
     and I_EventCounter isengard_offer_2_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		inc_counter isengard_approval -5
		if I_EventCounter isengard_offer_2_declined > 1
			inc_counter isengard_approval -2
		end_if
		if I_EventCounter isengard_offer_2_declined > 2
			inc_counter isengard_approval -4
		end_if
		if I_EventCounter isengard_offer_2_declined > 3
			inc_counter isengard_approval -6
		end_if
		if I_EventCounter isengard_offer_2_declined > 4
			inc_counter isengard_approval -8
		end_if
		if I_EventCounter isengard_offer_2_declined > 5
			inc_counter isengard_approval -10
		end_if
		inc_counter isengard_offer_counter 10
	 
	 end_monitor
	
	
	;third offer
	 monitor_event EventCounter EventCounterType isengard_offer_3_accepted
     and I_EventCounter isengard_offer_3_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		spawn_army
			faction aztecs
			character	Duruz, named character, age 30, x 218, y 311, family, direction W, label isengard_emmisary_2
			traits		UrukHaiRace 1, GoodCommander 3, LoyaltyStarter 1, PietyStarter 1, IsengardEmmisary_battle 1, DaenRaider 3
			unit		Berserkers  			exp 6 armour 0 weapon_lvl 1
			unit		Uruk-hai Raiders		exp 2 armour 0 weapon_lvl 1
			unit		Uruk-hai Raiders		exp 2 armour 0 weapon_lvl 1
			unit		Uruk-hai Archers		exp 1 armour 0 weapon_lvl 0
			unit		Uruk-hai Archers		 exp 1 armour 0 weapon_lvl 0
			
		end
		inc_counter isengard_approval 8
		inc_counter isengard_offer_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_offer_3_declined
     and I_EventCounter isengard_offer_3_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		inc_counter isengard_approval -8
		if I_EventCounter isengard_offer_3_declined > 1
			inc_counter isengard_approval -2
		end_if
		if I_EventCounter isengard_offer_3_declined > 2
			inc_counter isengard_approval -4
		end_if
		if I_EventCounter isengard_offer_3_declined > 3
			inc_counter isengard_approval -6
		end_if
		if I_EventCounter isengard_offer_3_declined > 4
			inc_counter isengard_approval -8
		end_if
		if I_EventCounter isengard_offer_3_declined > 5
			inc_counter isengard_approval -10
		end_if
		inc_counter isengard_offer_counter 10
	 
	 end_monitor
	 
	;fourth offer
	monitor_event EventCounter EventCounterType isengard_offer_4_accepted
     and I_EventCounter isengard_offer_4_accepted = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		spawn_army
			faction aztecs
			character	Greoulf, named character, age 28, x 218, y 311, family, direction W, label isengard_emmisary_3
			traits		MiddleManRace 1, Dunlending 1, GoodCommander 3, LoyaltyStarter 1, PietyStarter 1, IsengardEmmisary_battle 1, DaenRaider 5, Isendraich 1
			unit		Orthanc Guard			exp 6 armour 0 weapon_lvl 1
            unit		Half Orc Spearmen		exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Baneguard	exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Spearmen		exp 1 armour 0 weapon_lvl 0
            unit		Half Orc Baneguard	exp 1 armour 0 weapon_lvl 0
			unit		Uruk-hai Raiders		exp 2 armour 0 weapon_lvl 1
			unit		Uruk-hai Raiders		exp 2 armour 0 weapon_lvl 1
			unit		Uruk-hai Archers		exp 1 armour 0 weapon_lvl 0
			unit		Uruk-hai Archers		exp 1 armour 0 weapon_lvl 0
		end
		inc_counter isengard_approval 10
		inc_counter isengard_offer_counter 10
		
	 end_monitor
	
	 monitor_event EventCounter EventCounterType isengard_offer_4_declined
     and I_EventCounter isengard_offer_4_declined = 1
	
		if I_EventCounter dunland_isengard_war > 0
			terminate_monitor
		end_if
		
		if I_NumberOfSettlements france < 1
			terminate_monitor
		end_if
	 
		inc_counter isengard_approval -10
		if I_EventCounter isengard_offer_4_declined > 1
			inc_counter isengard_approval -2
		end_if
		if I_EventCounter isengard_offer_4_declined > 2
			inc_counter isengard_approval -4
		end_if
		if I_EventCounter isengard_offer_4_declined > 3
			inc_counter isengard_approval -6
		end_if
		if I_EventCounter isengard_offer_4_declined > 4
			inc_counter isengard_approval -8
		end_if
		if I_EventCounter isengard_offer_4_declined > 5
			inc_counter isengard_approval -10
		end_if
		inc_counter isengard_offer_counter 10
			
	 end_monitor
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	;;;;;;;;;;;;;;;;;;;;;;;DUNLAND REFORMS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	
	monitor_event SettlementTurnEnd FactionType aztecs
	and SettlementBuildingExists >= stone_wall
		
		inc_counter dunland_cities 1
		
	end_monitor
	
	monitor_event CharacterTurnStart FactionLeaderTrait DaenRaider > 5
	
		if I_EventCounter dunland_reformed > 0
			terminate_monitor
		end_if
		
		if I_SettlementOwner Kings_Land = aztecs
		and I_CompareCounter dunland_cities >= 2
			historic_event dunland_reformed factions { aztecs, }
			set_event_counter dunland_reforms 1
		end_if
		
	end_monitor
	
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    ;#################### Script: Dorwinion Choice #######################

    set_event_counter dorwinion_war 0

    declare_counter dorwinion_influence_awaiting_answer

    monitor_event FactionTurnStart FactionType byzantium
        and I_TurnNumber >= 9
        log always ---------------------------dorwinion choice script--------------------------------
        if not I_IsFactionAIControlled byzantium
        and I_EventCounter dorwinion_war = 0
            set_counter dorwinion_influence_awaiting_answer 1
            historic_event dorwinion_influence_choice true factions { byzantium, }
        end_if
        if I_IsFactionAIControlled byzantium
        and I_EventCounter dorwinion_war = 0
            generate_random_counter dorwinion_ai_choice 1 2
            if I_EventCounter dorwinion_ai_choice = 1
                log always ---------------------------dorwinion choice men AI--------------------------------
                set_event_counter dorwinion_men 1
                set_faction_standing venice byzantium 0.00
                set_faction_standing scotland byzantium 0.00
                spawn_army
                    faction byzantium
                    character	Edwodyn, named character, age 27, x 410, y 328, family, direction E, portrait Reginard, label edwodyn_1
                    traits		Edwodyn 1, CustomBG 1, GoodManRace 1, Dorwinrim 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, Paladins 1
                    unit		Grapevine-Lancers			exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit edwodyn_1 "Regent Bowguard" 1 1 0 1
                console_command create_unit edwodyn_1 "Regent Axeguard" 1 1 0 1
                console_command create_unit edwodyn_1 "Kugath Ford-Guard" 1 1 0 1
                console_command create_unit edwodyn_1 "Vintner-Court Nobles" 1 1 0 1
            end_if
            if I_EventCounter dorwinion_ai_choice = 2
                log always ---------------------------dorwinion choice elves AI--------------------------------
                set_event_counter dorwinion_elf 1
                increment_kings_purse byzantium -800
                increment_kings_purse scotland 800
                set_faction_standing venice byzantium -1.00
                set_faction_standing scotland byzantium 1.00
                console_command diplomatic_stance byzantium venice war
                spawn_army
                    faction byzantium
                    character	Avlyn, named character, age 27, x 438, y 339, family, direction E, portrait Dornornoston, battle_model avari_general, label avlyn_1
                    traits		Avlyn 1, CustomBG 1, ElvenRace 1, Avari 1, HouseAvlyn 1, WarCouncillor 1, Handsome 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                    unit		Avari Shadows			exp 5 armour 3 weapon_lvl 1
                end
                console_command create_unit avlyn_1 "Avari Spearmen" 1 1 0 1
                console_command create_unit avlyn_1 "Avari Warriors" 1 1 0 1
                console_command create_unit avlyn_1 "Avari Shadows" 1 1 0 1
                console_command create_unit avlyn_1 "Avarin Heruvi" 1 1 0 1
                spawn_army
                    faction slave
                    character	random_name, named character, age 48, x 418, y 330, direction E, label noble_rebel_1
                    traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, PaladinsRebel 1
                    unit		Grapevine-Lancers		exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit noble_rebel_1 "Vintner-Court Nobles" 1 1 0 1
                console_command create_unit noble_rebel_1 "Grapevine-Lancers" 1 1 0 1
                console_command create_unit noble_rebel_1 "Privateer Cavalry" 1 1 0 1
                console_command create_unit noble_rebel_1 "Privateer Axemen" 1 1 0 1
                spawn_army
                    faction slave
                    character	random_name, named character, age 55, x 432, y 342, direction W, label noble_rebel_2
                    traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, PaladinsRebel 1
                    unit		Vintner-Court Nobles		exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit noble_rebel_2 "Vintner-Court Nobles" 1 1 0 1
                console_command create_unit noble_rebel_2 "Grapevine-Lancers" 1 1 0 1
                console_command create_unit noble_rebel_2 "Privateer Cavalry" 1 1 0 1
                console_command create_unit noble_rebel_2 "Sellswords" 1 1 0 1
                if I_IsFactionAIControlled venice
                    spawn_army
                        faction venice
                        character	Batuban, named character, age 27, x 451, y 304, family, direction W
                        traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, BalcothStrat 1, CustomBG 1
                        unit		Udege Marines					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                        unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Balchoth Tribesmen					exp 1 armour 0 weapon_lvl 0
                        unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                        unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                        unit		Arulad Dragonguard		exp 2 armour 1 weapon_lvl 0
                    end
                end_if
            end_if
        end_if
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType dorwinion_influence_choice_accepted
        and EventCounter = 1
        log always ---------------------------dorwinion choice men--------------------------------
        set_counter dorwinion_influence_awaiting_answer 0
        set_event_counter dorwinion_men 1
        historic_event dorwinion_choose_men factions { byzantium, }
        set_faction_standing venice byzantium 0.00
        set_faction_standing scotland byzantium 0.00
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType dorwinion_influence_choice_declined
        and EventCounter = 1
        log always ---------------------------dorwinion choice elves--------------------------------
        set_counter dorwinion_influence_awaiting_answer 0
        set_event_counter dorwinion_elf 1
        spawn_army
            faction slave
            character	random_name, named character, age 48, x 418, y 330, direction E, label noble_rebel_3
            traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, PaladinsRebel 1
            unit		Grapevine-Lancers		exp 5 armour 0 weapon_lvl 0
        end
        console_command create_unit noble_rebel_3 "Vintner-Court Nobles" 1 1 0 1
        console_command create_unit noble_rebel_3 "Grapevine-Lancers" 1 1 0 1
        console_command create_unit noble_rebel_3 "Privateer Cavalry" 1 1 0 1
        console_command create_unit noble_rebel_3 "Privateer Axemen" 1 1 0 1
        spawn_army
            faction slave
            character	random_name, named character, age 55, x 432, y 342, direction W, label noble_rebel_4
            traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, PaladinsRebel 1
            unit		Vintner-Court Nobles		exp 5 armour 0 weapon_lvl 0
        end
        console_command create_unit noble_rebel_4 "Vintner-Court Nobles" 1 1 0 1
        console_command create_unit noble_rebel_4 "Grapevine-Lancers" 1 1 0 1
        console_command create_unit noble_rebel_4 "Privateer Cavalry" 1 1 0 1
        console_command create_unit noble_rebel_4 "Sellswords" 1 1 0 1
        if I_IsFactionAIControlled venice
            spawn_army
                faction venice
                character	Batuban, named character, age 27, x 451, y 304, family, direction W
                traits		BadManRace 1, BalchothClan 1, AIBoost 1, GoodAttacker 2, GoodCommander 2, Just 1, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1, BalcothStrat 1, CustomBG 1
                unit		Udege Marines				exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Balchoth Spearmen			exp 1 armour 1 weapon_lvl 0
                unit		Balchoth Tribesmen			exp 1 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen			exp 1 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Khandish Raiders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonriders			exp 2 armour 0 weapon_lvl 0
                unit		Arulad Dragonguard			exp 2 armour 1 weapon_lvl 0
                unit		Arulad Dragonguard			exp 2 armour 1 weapon_lvl 0
            end
        end_if
        historic_event dorwinion_choose_elves factions { byzantium, }
        increment_kings_purse byzantium -800
        increment_kings_purse scotland 800
        set_faction_standing venice byzantium -1.00
        set_faction_standing scotland byzantium 1.00
        console_command diplomatic_stance byzantium venice war
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType byzantium
        and I_EventCounter dorwinion_war == 0
        and DiplomaticStanceFromFaction scotland = AtWar
        and I_EventCounter dale_keeps_ring = 0
        log always ---------------------------dorwinion war dale--------------------------------
        if I_EventCounter dorwinion_elf = 1
            set_event_counter dorwinion_men 1
            increment_kings_purse byzantium 800
            increment_kings_purse scotland -800
            set_event_counter dorwinion_elf 0
        end_if
        set_event_counter dorwinion_war 1
        set_faction_standing venice byzantium 0.80
        set_faction_standing scotland byzantium -1.00
        destroy_units byzantium Avari Warriors
        destroy_units byzantium Avari Shadows
        destroy_units byzantium Avarin Heruvi
        destroy_units byzantium Avari Spearmen
        spawn_army
            faction slave
            character	Avlyn, named character, age 27, x 438, y 339, direction E, portrait Dornornoston, battle_model avari_general, label avlyn_2
            traits		Avlyn 1, ElvenRace 1, Avari 1, HouseAvlyn 1, WarCouncillor 1, Handsome 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
            unit		Avari Shadows			exp 5 armour 3 weapon_lvl 1
        end
        console_command create_unit avlyn_2 "Avari Spearmen" 1 1 0 1
        console_command create_unit avlyn_2 "Avari Warriors" 1 1 0 1
        console_command create_unit avlyn_2 "Avari Shadows" 1 1 0 1
        console_command create_unit avlyn_2 "Avarin Heruvi" 1 1 0 1
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionType byzantium
        and I_TurnNumber = 32
        log always ---------------------------custom general spawn dorwinion player--------------------------------
        if not I_IsFactionAIControlled byzantium
            if I_EventCounter dorwinion_elf = 1
                spawn_army
                    faction byzantium
                    character	Avlyn, named character, age 27, x 438, y 339, direction E, portrait Dornornoston, battle_model avari_general, label avlyn_3
                    traits		Avlyn 1, CustomBG 1, ElvenRace 1, Avari 1, HouseAvlyn 1, WarCouncillor 1, Handsome 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                    unit		Avari Shadows			exp 5 armour 3 weapon_lvl 1
                end
                console_command create_unit avlyn_3 "Avari Spearmen" 1 1 0 1
                console_command create_unit avlyn_3 "Avari Warriors" 1 1 0 1
                console_command create_unit avlyn_3 "Avari Shadows" 1 1 0 1
                console_command create_unit avlyn_3 "Avarin Heruvi" 1 1 0 1
                historic_event dorwinion_elven_support factions { byzantium, }
            end_if
            if I_EventCounter dorwinion_men = 1
                spawn_army
                    faction byzantium
                    character	Edwodyn, named character, age 27, x 410, y 328, direction E, portrait Reginard, battle_model merc_general, label edwodyn_2
                    traits		Edwodyn 1, CustomBG 1, GoodManRace 1, Dorwinrim 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, Paladins 1
                    unit		Grapevine-Lancers			exp 5 armour 0 weapon_lvl 0
                end
                console_command create_unit edwodyn_2 "Vintner-Court Nobles" 1 1 0 1
                console_command create_unit edwodyn_2 "Regent Bowguard" 1 1 0 1
                console_command create_unit edwodyn_2 "Regent Axeguard" 1 1 0 1
                console_command create_unit edwodyn_2 "Kugath Ford-Guard" 1 1 0 1
                historic_event dorwinion_human_support factions { byzantium, }
            end_if
        end_if
        terminate_monitor
    end_monitor

    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_byzantium == 1
            and I_CompareCounter dorwinion_influence_awaiting_answer = 1
            campaign_wait 0.1
            historic_event dorwinion_influence_choice true factions { byzantium, }
        end_if
        if I_IsFactionAIControlled byzantium
            terminate_monitor
        end_if
    end_monitor

    ;#################### Script: Bree Choice ############################

    declare_counter bree_influence_awaiting_answer
    declare_counter bree_refugees_awaiting_answer
    declare_counter bree_war

    set_event_counter bree_military 0
    set_event_counter bree_mercenary 0
    set_counter bree_war 0

    if not I_IsFactionAIControlled normans
        set_event_counter bree_isolated 0
        set_event_counter bree_allied 0
        set_event_counter bree_neutral 1
    end_if

    if I_IsFactionAIControlled normans
        set_event_counter bree_isolated 1
        set_event_counter bree_allied 1
        set_event_counter bree_neutral 1
    end_if

    monitor_event PreFactionTurnStart not FactionType normans
        log always ---------------------------bree choice counters to 1--------------------------------
        set_event_counter bree_isolated 1
        set_event_counter bree_allied 1
        set_event_counter bree_neutral 1
    end_monitor

    monitor_event PreFactionTurnStart FactionType normans
        log always ---------------------------bree choice counters to 0--------------------------------
        set_event_counter bree_isolated 0
        set_event_counter bree_allied 0
        set_event_counter bree_neutral 1
        if I_EventCounter bree_mercenary = 1
            set_event_counter bree_neutral 0
            set_event_counter bree_isolated 1
            set_event_counter bree_allied 0
        end_if
        if I_EventCounter bree_military = 1
            set_event_counter bree_neutral 0
            set_event_counter bree_isolated 0
            set_event_counter bree_allied 1
        end_if
    end_monitor


    monitor_event FactionTurnStart FactionType normans
        and I_TurnNumber >= 65
        log always ---------------------------bree choice warning--------------------------------
        if not I_IsFactionAIControlled normans
            and I_TurnNumber = 65
            historic_event bree_choice_warning factions { normans, }
        end_if
        terminate_monitor
    end_monitor

    monitor_event FactionTurnEnd FactionType normans
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction turks = AtWar

        log always ---------------------------bree choice war--------------------------------
        set_counter bree_war 1
        terminate_monitor

    end_monitor

    monitor_event FactionTurnStart FactionType normans
        and I_TurnNumber >= 66

        log always ---------------------------bree choice message--------------------------------
        if not I_IsFactionAIControlled normans
            if I_TurnNumber = 69
                and I_CompareCounter bree_war = 0
                and I_NumberOfSettlements turks > 0
                and I_EventCounter corrupt_shire = 0
                set_counter bree_influence_awaiting_answer 1
                historic_event bree_influence_choice true factions { normans, }
                terminate_monitor
            end_if

            if I_TurnNumber = 69
                and I_CompareCounter bree_war = 1

                set_event_counter bree_mercenary 1

                set_event_counter bree_neutral 0
                set_event_counter bree_isolated 1
                set_event_counter bree_allied 0

                kill_character brathor1
                destroy_units normans Dunedain Wardens
                destroy_units normans Dunedain Rangers
                destroy_buildings normans dunedain_camp false

                increment_kings_purse normans 2160
                historic_event bree_warmonger factions { normans, }
                terminate_monitor
            end_if

            if I_TurnNumber = 69
                and I_CompareCounter bree_war = 0
                and I_NumberOfSettlements turks = 0
                set_counter bree_refugees_awaiting_answer 1
                historic_event bree_refugees_choice true factions { normans, }
                terminate_monitor
            end_if

        end_if

        if I_IsFactionAIControlled normans
            set_event_counter bree_mercenary 1

            set_event_counter bree_neutral 0
            set_event_counter bree_isolated 1
            set_event_counter bree_allied 0

            terminate_monitor
        end_if
    end_monitor

    monitor_event EventCounter EventCounterType bree_refugees_choice_accepted
        and EventCounter = 1

        log always ---------------------------bree choice message accepted--------------------------------
        set_counter bree_refugees_awaiting_answer 0
        set_event_counter bree_military 1	;Bree Dunedain path counter

        set_event_counter bree_neutral 0
        set_event_counter bree_isolated 0
        set_event_counter bree_allied 1

        increment_kings_purse normans -320

        historic_event bree_refugees_accepted factions { normans, }
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType bree_refugees_choice_declined
        and EventCounter = 1

        log always ---------------------------bree choice message declined--------------------------------
        set_counter bree_refugees_awaiting_answer 0
        set_event_counter bree_mercenary 1	;Bree mercenary path counter

        set_event_counter bree_neutral 0
        set_event_counter bree_isolated 1
        set_event_counter bree_allied 0

        kill_character brathor1
        destroy_units normans Dunedain Wardens
        destroy_units normans Dunedain Rangers
        destroy_buildings normans dunedain_camp false

        increment_kings_purse normans 2160

        historic_event bree_refugees_declined factions { normans, }
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType bree_influence_choice_accepted
        and EventCounter = 1
        log always ---------------------------bree choice message accepted--------------------------------

        set_counter bree_influence_awaiting_answer 0
        set_event_counter bree_military 1	;Bree Dunedain path counter

        set_event_counter bree_neutral 0
        set_event_counter bree_isolated 0
        set_event_counter bree_allied 1

        set_faction_standing normans turks 1
        set_faction_standing turks normans 1

        increment_kings_purse normans -320

        historic_event bree_choice_accepted factions { normans, }
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType bree_influence_choice_declined
        and EventCounter = 1
        log always ---------------------------bree choice message declined--------------------------------

        set_counter bree_influence_awaiting_answer 0
        set_event_counter bree_mercenary 1	;Bree mercenary path counter

        set_event_counter bree_neutral 0
        set_event_counter bree_isolated 1
        set_event_counter bree_allied 0

        kill_character brathor1
        destroy_units normans Dunedain Wardens
        destroy_units normans Dunedain Rangers
        destroy_buildings normans dunedain_camp false

        console_command diplomatic_stance normans turks neutral
        set_faction_standing normans turks -0.2
        set_faction_standing turks normans -0.2

        increment_kings_purse normans 2160

        historic_event bree_choice_declined factions { normans, }
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart I_TurnNumber = 70
        log always ---------------------------bree custom general spawn--------------------------------
        if I_EventCounter bree_mercenary = 1
            spawn_army
                faction normans
                character	Reginard, named character, age 27, x 161, y 382, direction E, portrait Reginard, battle_model merc_general
                traits		Reginard 1, CustomBG 1, GoodManRace 1, Dorwinrim 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Sellswords			exp 5 armour 1 weapon_lvl 1
                unit		Sellswords			exp 5 armour 1 weapon_lvl 1
            end
            historic_event bree_mercenary_general factions { normans, }
            terminate_monitor
        end_if
        if I_EventCounter bree_military = 1
            spawn_army
                faction normans
                character	Aldaron, named character, age 27, x 119, y 377, direction E, portrait Aldaron, battle_model high_elves_general_dac
                traits		Aldaron 1, CustomBG 1, ElvenRace 1, Lindar 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Calaquendi Lords			exp 5 armour 1 weapon_lvl 1
            end
            historic_event bree_elven_general factions { normans, }
            terminate_monitor
        end_if
        terminate_monitor
    end_monitor

    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_normans == 1
            and I_CompareCounter bree_influence_awaiting_answer = 1
            campaign_wait 0.1
            historic_event bree_influence_choice true factions { normans, }
        end_if
        if I_IsFactionAIControlled normans
            terminate_monitor
        end_if
    end_monitor

    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_normans == 1
            and I_CompareCounter bree_refugees_awaiting_answer = 1
            campaign_wait 0.1
            historic_event bree_refugees_choice true factions { normans, }
        end_if
        if I_IsFactionAIControlled normans
            terminate_monitor
        end_if
    end_monitor

    ;################## Script: Ered Luin Ring Choice ###################

    ; Event Counter Setup
    declare_counter luin_ring_awaiting_answer

    ; Luin Ring Offer Prelude
    monitor_event FactionTurnStart FactionType hungary
        and I_TurnNumber >= 14
        log always ---------------------------Luin Ring Offer Prelude--------------------------------
        if not I_IsFactionAIControlled hungary
            and I_TurnNumber = 14
            historic_event luin_ring_01 factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Offer (Ered Luin, Mordor, Other Factions)
    monitor_event FactionTurnStart FactionType hungary
        and I_TurnNumber >= 27
        log always ---------------------------Luin Ring Offer (Ered Luin, Mordor, Other Factions)--------------------------------
        if not I_IsFactionAIControlled hungary
            and I_TurnNumber = 27
            historic_event luin_ring_02 factions { hungary, }
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled england
            and I_TurnNumber = 27
            historic_event luin_ring_mordor factions { england, }
            terminate_monitor
        end_if
        if I_IsFactionAIControlled hungary
            and I_IsFactionAIControlled england
            and I_TurnNumber = 27
            historic_event luin_ring_ai factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Offer Elven Warning
    monitor_event FactionTurnStart FactionType hungary
        and I_TurnNumber = 31
        log always ---------------------------Luin Ring Offer Elven Warning--------------------------------
        historic_event luin_ring_03 factions { hungary, }
        terminate_monitor
    end_monitor

    ; Luin Ring Choice
    monitor_event FactionTurnStart FactionType hungary
        and I_TurnNumber = 33
        log always ---------------------------Luin Ring Choice--------------------------------
        if not I_IsFactionAIControlled hungary
            set_counter luin_ring_awaiting_answer 1
            historic_event luin_ring_04 true factions { hungary, }
            terminate_monitor
        end_if
        if I_IsFactionAIControlled hungary
            generate_random_counter ered_luin_ai_choice 1 2
            if I_EventCounter ered_luin_ai_choice = 1
                log always ---------------------------AI Luin Ring Accepted--------------------------------
                set_event_counter luin_ring_accepted 1
                set_event_counter AI_luin_ring_accepted 1
                link_faction_ai hungary evil_luin
                historic_event luin_ring_15 factions { all, }
                console_command diplomatic_stance hungary gundabad Neutral
                console_command diplomatic_stance hungary portugal Neutral
                console_command diplomatic_stance hungary norway Neutral
                console_command diplomatic_stance hungary timurids Neutral
                console_command diplomatic_stance hungary venice Neutral
                console_command diplomatic_stance hungary khand Neutral
                console_command diplomatic_stance hungary sicily Neutral
                console_command diplomatic_stance hungary milan Neutral
                console_command diplomatic_stance hungary denmark Neutral
                console_command diplomatic_stance hungary scotland Neutral
                console_command diplomatic_stance hungary aztecs Neutral
                console_command diplomatic_stance hungary mongols Neutral
                console_command diplomatic_stance hungary turks Neutral
                console_command diplomatic_stance hungary france Neutral
                console_command diplomatic_stance hungary hre Neutral
                console_command diplomatic_stance hungary england Neutral
                console_command diplomatic_stance hungary teutonic_order Neutral
                console_command diplomatic_stance hungary ireland Neutral
                console_command diplomatic_stance hungary poland Neutral
                console_command diplomatic_stance hungary byzantium Neutral
                console_command diplomatic_stance hungary moors Neutral
                console_command diplomatic_stance hungary russia Neutral
                console_command diplomatic_stance hungary spain Neutral
                console_command diplomatic_stance hungary saxons Neutral
                console_command diplomatic_stance hungary normans Neutral
                set_faction_standing hungary england 1
                set_faction_standing england hungary 1
                set_faction_standing hungary poland 1
                set_faction_standing poland hungary 1
                set_faction_standing hungary papal_states 0.3
                set_faction_standing papal_states hungary 0.3
                set_faction_standing hungary moors -1
                set_faction_standing moors hungary -1
                set_faction_standing turks hungary -1
                set_faction_standing hungary turks -1
                set_faction_standing hungary norway -1
                set_faction_standing norway hungary -1
                set_faction_standing normans hungary -1
                set_faction_standing hungary normans -1
                set_faction_standing hungary saxons -1
                set_faction_standing saxons hungary -1
                set_faction_standing hungary portugal 0.5
                set_faction_standing portugal hungary 0.5
                spawn_army
                    faction hungary
                    character	Grindfarn, named character, age 27, x 76, y 437, direction E, portrait Grindfarn, label grindfarn_2
                    traits		Grindfarn 1, DwarvenRace 1, Grimborn 1, NaturalMilitarySkill 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, BattleChivalryGood 2, StrategyChivalryGood 1, Energetic 2, OneRingAvailable 1, CustomBG 1
                    unit		Grimborn Reavers			exp 5 armour 0 weapon_lvl 1
                    unit		Grimborn Reavers			exp 3 armour 0 weapon_lvl 1
                    unit		Grimborn Reavers			exp 3 armour 0 weapon_lvl 1
                end
                console_command give_ancillary grindfarn_2 dwarven_power_ring3
                console_command give_ancillary grindfarn_2 dwarven_power_ring2
                console_command give_ancillary grindfarn_2 dwarven_power_ring
            end_if
            if I_EventCounter ered_luin_ai_choice = 2
                log always ---------------------------AI Luin Ring Declined--------------------------------
                set_event_counter luin_ring_rejected 1
                set_event_counter AI_luin_ring_rejected 1
                historic_event luin_ring_16 factions { all, }
                set_faction_standing hungary england -1
                set_faction_standing england hungary -1
                set_faction_standing hungary saxons 1
                set_faction_standing saxons hungary 1
            end_if
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Accepted
    monitor_event EventCounter EventCounterType luin_ring_04_accepted
        and EventCounter = 1
        log always ---------------------------Player Luin Ring Accepted--------------------------------
        set_counter luin_ring_awaiting_answer 0
        set_event_counter luin_ring_accepted 1
        console_command diplomatic_stance hungary gundabad Neutral
        console_command diplomatic_stance hungary portugal Neutral
        console_command diplomatic_stance hungary norway Neutral
        console_command diplomatic_stance hungary timurids Neutral
        console_command diplomatic_stance hungary venice Neutral
        console_command diplomatic_stance hungary khand Neutral
        console_command diplomatic_stance hungary sicily Neutral
        console_command diplomatic_stance hungary milan Neutral
        console_command diplomatic_stance hungary denmark Neutral
        console_command diplomatic_stance hungary scotland Neutral
        console_command diplomatic_stance hungary aztecs Neutral
        console_command diplomatic_stance hungary mongols Neutral
        console_command diplomatic_stance hungary turks Neutral
        console_command diplomatic_stance hungary france Neutral
        console_command diplomatic_stance hungary hre Neutral
        console_command diplomatic_stance hungary england Neutral
        console_command diplomatic_stance hungary teutonic_order Neutral
        console_command diplomatic_stance hungary ireland Neutral
        console_command diplomatic_stance hungary poland Neutral
        console_command diplomatic_stance hungary byzantium Neutral
        console_command diplomatic_stance hungary moors Neutral
        console_command diplomatic_stance hungary russia Neutral
        console_command diplomatic_stance hungary spain Neutral
        console_command diplomatic_stance hungary saxons Neutral
        console_command diplomatic_stance hungary normans Neutral
        set_faction_standing hungary england 1
        set_faction_standing england hungary 1
        set_faction_standing hungary poland 1
        set_faction_standing poland hungary 1
        set_faction_standing hungary papal_states 0.3
        set_faction_standing papal_states hungary 0.3
        set_faction_standing hungary moors -1
        set_faction_standing moors hungary -1
        set_faction_standing turks hungary -1
        set_faction_standing hungary turks -1
        set_faction_standing hungary norway -1
        set_faction_standing norway hungary -1
        set_faction_standing normans hungary -1
        set_faction_standing hungary normans -1
        set_faction_standing hungary saxons -1
        set_faction_standing saxons hungary -1
        set_faction_standing hungary portugal 0.5
        set_faction_standing portugal hungary 0.5
        historic_event luin_ring_05 factions { hungary, }
        spawn_army
            faction hungary
            character	Grindfarn, named character, age 27, x 76, y 437, direction E, portrait Grindfarn, label grindfarn_2
            traits		Grindfarn 1, DwarvenRace 1, Grimborn 1, NaturalMilitarySkill 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, BattleChivalryGood 2, StrategyChivalryGood 1, Energetic 2, OneRingAvailable 1, CustomBG 1
            unit		Grimborn Reavers			exp 5 armour 0 weapon_lvl 1
            unit		Grimborn Reavers			exp 3 armour 0 weapon_lvl 1
            unit		Grimborn Reavers			exp 3 armour 0 weapon_lvl 1
        end
        if I_IsFactionAIControlled portugal
            increment_kings_purse portugal -2000
        end_if
        console_command give_ancillary grindfarn_2 dwarven_power_ring3
        console_command give_ancillary grindfarn_2 dwarven_power_ring2
        console_command give_ancillary grindfarn_2 dwarven_power_ring
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 01 - Ring Corruption 1
    monitor_event FactionTurnStart FactionType hungary
        and I_TurnNumber = 37
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 01 - Ring Corruption 1-------------------------------
        historic_event luin_ring_06 factions { hungary, }
    end_monitor

    ; Luin Ring Accepted Event 02 - Ring Corruption 2
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 41
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 02 - Ring Corruption 2------------------------------
        if not I_IsFactionAIControlled hungary
            historic_event luin_ring_07 factions { hungary, }
            set_faction_standing turks hungary -1
            set_faction_standing hungary turks -1
            set_faction_standing hungary norway -1
            set_faction_standing norway hungary -1
            set_faction_standing normans hungary -1
            set_faction_standing hungary normans -1
            set_faction_standing hungary saxons -1
            set_faction_standing saxons hungary -1
            set_faction_standing hungary portugal 1
            set_faction_standing portugal hungary 1
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Accepted Event 03 - Eriador Attack Warning
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 45
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 03 - Eriador Attack Warning------------------------------
        if not I_IsFactionAIControlled hungary
            historic_event luin_ring_08 factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Accepted Event 04 - Eriador Besieges
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 49
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 04 - Eriador Besieges------------------------------
        historic_event luin_ring_09 factions { hungary, }
        set_event_counter luin_ring_war 1
        if I_IsFactionAIControlled saxons
            and I_SettlementOwner Mithlond = saxons
            and I_SettlementOwner Forlindon = saxons
            set_event_counter luin_elves_attack 1
        end_if
        if I_EventCounter luin_elves_attack = 0
            and I_IsFactionAIControlled turks
            and I_NumberOfSettlements turks > 0
            set_event_counter luin_ND_attack 1
        end_if
        if I_EventCounter luin_elves_attack = 1
            console_command diplomatic_stance hungary saxons war
            if I_SettlementOwner Nan_i_Naugrim = hungary
                spawn_army
                    faction saxons
                    character	Arbellason, named character, age 27, x 67, y 433, family, direction W, label lindon_retribution_1
                    traits		ElvenRace 1, Noldor 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, NoldorStrat 1, CustomBG 1
                    unit		Calaquendi Lords			exp 5 armour 0 weapon_lvl 1
                    unit		Mithlond Nobles			exp 1 armour 0 weapon_lvl 1
                    unit		Mithlond Nobles			exp 1 armour 0 weapon_lvl 1
                    unit		Elderinwe Tirno			exp 0 armour 0 weapon_lvl 0
                    unit		Elderinwe Tirno			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Elven Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Elven Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Elven Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Elven Catapult			exp 0 armour 0 weapon_lvl 0
                end
                siege_settlement lindon_retribution_1, Nan_i_Naugrim, maintain
                console_command give_trait lindon_retribution_1 Locked 1
            end_if
            if not I_SettlementOwner Nan_i_Naugrim = hungary
                spawn_army
                    faction saxons
                    character	Arbellason, named character, age 27, x 77, y 434, family, direction W, label lindon_retribution_2
                    traits		ElvenRace 1, Noldor 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, NoldorStrat 1, CustomBG 1
                    unit		Calaquendi Lords			exp 5 armour 0 weapon_lvl 1
                    unit		Mithlond Nobles			exp 1 armour 0 weapon_lvl 1
                    unit		Mithlond Nobles			exp 1 armour 0 weapon_lvl 1
                    unit		Elderinwe Tirno			exp 0 armour 0 weapon_lvl 0
                    unit		Elderinwe Tirno			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Noldorin Archers			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Sindar Axemen			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Amanyar Rangers			exp 0 armour 0 weapon_lvl 0
                end
            end_if
        end_if
        if I_EventCounter luin_ND_attack = 1
            console_command diplomatic_stance hungary turks war
            if I_SettlementOwner Nan_i_Naugrim = hungary
                spawn_army
                    faction turks
                    character	Celephinndir, named character, age 27, x 67, y 433, family, direction W, label dunedain_retribution_1
                    traits		DunedainRace 1, DunedainRanger 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                    unit		Dunedain Bodyguard			exp 5 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 1 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 1 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Steelbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Sons of Numenor			exp 0 armour 0 weapon_lvl 0
                    unit		Sons of Numenor			exp 0 armour 0 weapon_lvl 0
                    unit		Westron Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Westron Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Westron Catapult			exp 0 armour 0 weapon_lvl 0
                    unit		Westron Catapult			exp 0 armour 0 weapon_lvl 0
                end
                siege_settlement dunedain_retribution_1, Nan_i_Naugrim, maintain
                console_command give_trait dunedain_retribution_1 Locked 1
            end_if
            if not I_SettlementOwner Nan_i_Naugrim = hungary
                spawn_army
                    faction turks
                    character	Celephinndir, named character, age 27, x 77, y 434, family, direction W, label dunedain_retribution_2
                    traits		DunedainRace 1, DunedainRanger 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                    unit		Dunedain Bodyguard			exp 5 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 1 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 1 armour 0 weapon_lvl 1
                    unit		Dunedain Steelbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Steelbowmen			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Dunedain Rangers			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Sworn Infantry			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Arthedain Knights			exp 0 armour 0 weapon_lvl 0
                    unit		Sons of Numenor			exp 0 armour 0 weapon_lvl 0
                    unit		Sons of Numenor			exp 0 armour 0 weapon_lvl 0
                    unit		Sons of Numenor			exp 0 armour 0 weapon_lvl 0
                end
            end_if
        end_if
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 04.5 - Eriador Attack
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 50
        log always ---------------------------Luin Ring Accepted Event 04.5 - Eriador Attack------------------------------
        siege_settlement lindon_retribution_1, Nan_i_Naugrim, attack
        siege_settlement bree_retribution_1, Nan_i_Naugrim, attack
        siege_settlement dunedain_retribution_1, Nan_i_Naugrim, attack
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 05 - Dwarven Warning
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 61
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 05 - Dwarven Warning------------------------------
        if not I_IsFactionAIControlled hungary
            and I_IsFactionAIControlled moors
            and I_IsFactionAIControlled norway
            and I_NumberOfSettlements moors > 0
            and I_NumberOfSettlements norway > 0
            historic_event luin_ring_10 factions { hungary, }
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled hungary
            and I_NumberOfSettlements moors > 0
            and I_IsFactionAIControlled moors
            and I_NumberOfSettlements norway = 0
            historic_event luin_ring_10 factions { hungary, }
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled hungary
            and I_IsFactionAIControlled norway
            and I_NumberOfSettlements norway > 0
            and I_NumberOfSettlements moors = 0
            historic_event luin_ring_10 factions { hungary, }
            terminate_monitor
        end_if
    end_monitor

    ; Luin Ring Accepted Event 06.1 - Dwarven Attack Warning (Erebor & KD)
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors > Allied
        and I_IsFactionAIControlled moors
        and DiplomaticStanceFromFaction norway > Allied
        and I_IsFactionAIControlled norway
        and I_TurnNumber = 65
        and I_EventCounter luin_ring_accepted = 1
        and I_NumberOfSettlements moors > 0
        and I_NumberOfSettlements norway > 0
        log always ---------------------------Luin Ring Accepted Event 06.1 - Dwarven Attack Warning (Erebor & KD)-----------------------------
        historic_event luin_ring_11 factions { hungary, }
        set_event_counter all_dwarves_attack 1
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 06.2 - Dwarven Attack Warning (Erebor only)
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors > Allied
        and I_IsFactionAIControlled moors
        and DiplomaticStanceFromFaction norway = Allied
        and I_TurnNumber = 65
        and I_EventCounter luin_ring_accepted = 1
        and I_NumberOfSettlements moors > 0
        log always ---------------------------Luin Ring Accepted Event 06.2 - Dwarven Attack Warning (Erebor only)-----------------------------
        historic_event luin_ring_12 factions { hungary, }
        set_event_counter erebor_dwarves_attack 1
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 06.3- Dwarven Attack Warning (KD only)
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors = Allied
        and I_IsFactionAIControlled norway
        and DiplomaticStanceFromFaction norway > Allied
        and I_TurnNumber = 65
        and I_EventCounter luin_ring_accepted = 1
        and I_NumberOfSettlements norway > 0
        log always ---------------------------Luin Ring Accepted Event 06.3- Dwarven Attack Warning (KD only)----------------------------
        historic_event luin_ring_13 factions { hungary, }
        set_event_counter kd_dwarves_attack 1
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 07 - No Dwarven Attack (QUEST ENDING 1)
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors = Allied
        and DiplomaticStanceFromFaction norway = Allied
        and I_TurnNumber = 65
        and I_EventCounter luin_ring_accepted = 1
        log always ---------------------------Luin Ring Accepted Event 07 - No Dwarven Attack (QUEST ENDING 1)----------------------------
        historic_event luin_ring_14 factions { hungary, }
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 08 - Dwarven Attacks
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 77
        and I_EventCounter luin_ring_accepted = 1
        and I_EventCounter all_dwarves_attack = 1
        log always ---------------------------Luin Ring Accepted Event 08 - Dwarven Attacks----------------------------
        if I_SettlementOwner Nan_i_Naugrim = hungary
            spawn_army
                faction moors
                character	Dori, named character, age 27, x 67, y 433, family, portrait Dori, direction W, label erebor_retribution_1
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                unit		Axeguard of Erebor			exp 5 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Iron Fist Hammers			exp 0 armour 3 weapon_lvl 0
                unit		Stiffbeard Archers			exp 0 armour 3 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 0 armour 3 weapon_lvl 0
                unit		Orocarni Warriors			exp 0 armour 3 weapon_lvl 0
                unit		Blacklock Engineers			exp 0 armour 3 weapon_lvl 0
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
            end
            siege_settlement erebor_retribution_1, Nan_i_Naugrim, maintain
            console_command give_trait erebor_retribution_1 Locked 1
        end_if
        if not I_SettlementOwner Nan_i_Naugrim = hungary
            spawn_army
                faction moors
                character	Dori, named character, age 27, x 77, y 434, family, portrait Dori, direction W, label erebor_retribution_2
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                unit		Axeguard of Erebor			exp 5 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Iron Fist Hammers			exp 0 armour 3 weapon_lvl 0
                unit		Stiffbeard Archers			exp 0 armour 3 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 0 armour 3 weapon_lvl 0
                unit		Orocarni Warriors			exp 0 armour 3 weapon_lvl 0
                unit		Blacklock Engineers			exp 0 armour 3 weapon_lvl 0
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
            end
        end_if
        if I_SettlementOwner Ered_Luin = hungary
            spawn_army
                faction norway
                character	Dwalin, named character, age 27, x 87, y 460, family, portrait Dwalin, direction N, label KD_retribution_1
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, KhazadReclaimers 1, CustomBG 1
                unit		Khazad-dum Reclaimers		exp 5 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
            end
            siege_settlement KD_retribution_1, Ered_Luin, maintain
            console_command give_trait KD_retribution_1 Locked 1
        end_if
        if not I_SettlementOwner Ered_Luin = hungary
            spawn_army
                faction norway
                character	Dwalin, named character, age 27, x 90, y 455, family, portrait Dwalin, direction W, label KD_retribution_2
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, KhazadReclaimers 1, CustomBG 1
                unit		Khazad-dum Reclaimers		exp 5 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
            end
        end_if
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 08.1 - Erebor Attacks
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 77
        and I_EventCounter luin_ring_accepted = 1
        and I_EventCounter erebor_dwarves_attack = 1
        log always ---------------------------Luin Ring Accepted Event 08.1 - Erebor Attacks----------------------------
        if I_SettlementOwner Nan_i_Naugrim = hungary
            spawn_army
                faction moors
                character	Dori, named character, age 27, x 67, y 433, family, portrait Dori, direction W, label erebor_retribution_3
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                unit		Axeguard of Erebor			exp 5 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Iron Fist Hammers			exp 0 armour 3 weapon_lvl 0
                unit		Stiffbeard Archers			exp 0 armour 3 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 0 armour 3 weapon_lvl 0
                unit		Orocarni Warriors			exp 0 armour 3 weapon_lvl 0
                unit		Blacklock Engineers			exp 0 armour 3 weapon_lvl 0
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
            end
            siege_settlement erebor_retribution_3, Nan_i_Naugrim, maintain
            console_command give_trait erebor_retribution_3 Locked 1
        end_if
        if not I_SettlementOwner Nan_i_Naugrim = hungary
            spawn_army
                faction moors
                character	Dori, named character, age 27, x 77, y 434, family, portrait Dori, direction W, label erebor_retribution_4
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1
                unit		Axeguard of Erebor			exp 5 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Dragonslayers			exp 1 armour 3 weapon_lvl 1
                unit		Iron Fist Hammers			exp 0 armour 3 weapon_lvl 0
                unit		Stiffbeard Archers			exp 0 armour 3 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 0 armour 3 weapon_lvl 0
                unit		Orocarni Warriors			exp 0 armour 3 weapon_lvl 0
                unit		Blacklock Engineers			exp 0 armour 3 weapon_lvl 0
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Axes			exp 1 armour 0 weapon_lvl 1
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
                unit		Kings Shields			exp 0 armour 3 weapon_lvl 0
            end
        end_if
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 08.2 - KD Attacks
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 77
        and I_EventCounter luin_ring_accepted = 1
        and I_EventCounter kd_dwarves_attack = 1
        log always ---------------------------Luin Ring Accepted Event 08.2 - KD Attacks----------------------------
        if I_SettlementOwner Ered_Luin = hungary
            spawn_army
                faction norway
                character	Dwalin, named character, age 27, x 87, y 460, family, portrait Dwalin, direction W, label KD_retribution_3
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, KhazadReclaimers 1, CustomBG 1
                unit		Khazad-dum Reclaimers			exp 5 armour 3 weapon_lvl 1
                unit		Khazad-dum Reclaimers		exp 5 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
                unit		Dwarven Catapult			exp 0 armour 3 weapon_lvl 0
            end
            siege_settlement KD_retribution_3, Ered_Luin, maintain
            console_command give_trait KD_retribution_3 Locked 1
            disable_cursor
            campaign_wait 0.5
            select_ui_element prebattle_fight_button
            simulate_mouse_click lclick_down
            simulate_mouse_click lclick_up
            enable_cursor
        end_if
        if not I_SettlementOwner Ered_Luin = hungary
            spawn_army
                faction norway
                character	Dwalin, named character, age 27, x 90, y 455, family, portrait Dwalin, direction W, label KD_retribution_4
                traits		DwarvenRace 1, Longbeard 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, OneRingAvailable 1, KhazadReclaimers 1, CustomBG 1
                unit		Khazad-dum Reclaimers		exp 5 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		First Legion			exp 1 armour 3 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Hammerguard		exp 1 armour 0 weapon_lvl 1
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Legion Deeping Guard			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
                unit		Hithaeglir Beast Hunters			exp 0 armour 3 weapon_lvl 0
            end
        end_if
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 08.3 - Dwarven Attacks
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 78
        log always ---------------------------Luin Ring Accepted Event 08.3 - Dwarven Attacks----------------------------
        siege_settlement erebor_retribution_1, Ered_Luin, attack
        siege_settlement erebor_retribution_3, Nan_i_Naugrim, attack
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 08.4 - Dwarven Attacks
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 79
        log always --------------------------- Luin Ring Accepted Event 08.4 - Dwarven Attacks----------------------------
        siege_settlement KD_retribution_1, Ered_Luin, attack
        siege_settlement KD_retribution_3, Ered_Luin, attack
        terminate_monitor
    end_monitor

    ; Luin Ring Accepted Event 09 - Dwarven Attack Aftermath (QUEST ENDING 2)
    monitor_event FactionTurnStart FactionType hungary
        and not IsFactionAIControlled
        and I_TurnNumber = 80
        and I_EventCounter luin_ring_accepted = 1
        log always --------------------------- Luin Ring Accepted Event 09 - Dwarven Attack Aftermath (QUEST ENDING 2)----------------------------
        historic_event luin_ring_18 factions { hungary, }
        terminate_monitor
    end_monitor

    ; Luin Ring Rejected (QUEST ENDING 3)
    monitor_event EventCounter EventCounterType luin_ring_04_declined
        and EventCounter = 1
        log always --------------------------- Luin Ring Rejected (QUEST ENDING 3)----------------------------
        set_counter luin_ring_awaiting_answer 0
        set_event_counter luin_ring_rejected 1
        set_faction_standing hungary england -1
        set_faction_standing england hungary -1
        set_faction_standing hungary saxons 1
        set_faction_standing saxons hungary 1
        if I_IsFactionAIControlled portugal
            increment_kings_purse portugal 500
        end_if
        if I_IsFactionAIControlled gundabad
            increment_kings_purse gundabad 500
        end_if
        historic_event luin_ring_19 factions { hungary, }
        terminate_monitor
    end_monitor

    ;;;;Monitor to prevent the player from disabling the choice event by exiting the game
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_hungary == 1
            and I_CompareCounter luin_ring_awaiting_answer = 1
            campaign_wait 0.1
            historic_event luin_ring_04 true factions { hungary, }
        end_if
        if I_IsFactionAIControlled hungary
            terminate_monitor
        end_if
    end_monitor


    ;################## Script: Unite the Clans - Rhun ###################

    declare_counter rhun_stage

    set_counter rhun_stage 0

    if I_IsFactionAIControlled venice
        set_event_counter khandish_clan_joins 1
        set_event_counter balchoth_clan_joins 1
        set_event_counter arulad_clan_joins 1
        set_event_counter naval_clan_joins 1
        set_event_counter rhun_united 1
    end_if

    monitor_event FactionTurnEnd FactionType slave
        log always --------------------------- Unite the Clans Rhun----------------------------
        if I_IsFactionAIControlled venice
            terminate_monitor
        end_if

        if I_SettlementOwner Morad = venice
            and I_SettlementOwner Southern_Rhun = venice
            and I_EventCounter khandish_clan_joins = 0
            log always --------------------------- khandish joins----------------------------
            historic_event khandish_clan_joins factions { venice, }
            inc_counter rhun_stage 1
            spawn_army
                faction venice
                character	random_name, named character, age 22, x 467, y 297, direction N
                traits		BadManRace 1, VariagTribe 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, KhandStrat 1, CustomBG 1
                unit		Variag Nobles						exp 5 armour 1 weapon_lvl 1
                unit		Khandish Raiders			exp 0 armour 0 weapon_lvl 0
                unit		Khandish Hunters					exp 0 armour 0 weapon_lvl 0
                unit		Khandish Hunters					exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_SettlementOwner North_Rhun = venice
            and I_SettlementOwner Kelepar = venice
            and I_EventCounter arulad_clan_joins = 0
            log always --------------------------- arulad joins----------------------------
            historic_event arulad_clan_joins factions { venice, }
            inc_counter rhun_stage 1
            spawn_army
                faction venice
                character	random_name, named character, age 22, x 469, y 300, direction W
                traits		BadManRace 1, AruladClanStrat 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, CustomBG 1, AruladClan 1
                unit		Arulad Dragonriders			exp 5 armour 1 weapon_lvl 1
                unit		Arulad Dragonguard		exp 0 armour 0 weapon_lvl 0
                unit		Arulad Dragonguard		exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_SettlementOwner Eastrhun = venice
            and I_EventCounter balchoth_clan_joins = 0
            log always --------------------------- balchoth joins----------------------------
            historic_event balchoth_clan_joins factions { venice, }
            inc_counter rhun_stage 1
            spawn_army
                faction venice
                character	random_name, named character, age 22, x 463, y 301, direction E
                traits		BadManRace 1, BalchothClan 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, BalcothStrat 1, CustomBG 1
                unit		Loke Rim Bodyguard			exp 2 armour 0 weapon_lvl 1
                unit		Balchoth Spearmen			exp 2 armour 2 weapon_lvl 1
                unit		Balchoth Tribesmen			exp 0 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen			exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_SettlementOwner Rhun = venice
            and I_EventCounter naval_clan_joins = 0
            log always --------------------------- naval joins----------------------------
            historic_event naval_clan_joins factions { venice, }
            inc_counter rhun_stage 1
            spawn_army
                faction venice
                character	random_name, admiral, age 25, x 449, y 310, direction E
                traits		BadManRace 1, UdegeClan 1, Sailor 4, CheckAdmiral 1
                unit		Human Boat			exp 2 armour 0 weapon_lvl 0
                unit		Human Boat			exp 2 armour 0 weapon_lvl 0
            end
        end_if

        if I_SettlementOwner Dorwinion = venice
            and I_SettlementOwner Uldonavan = venice
            and I_SettlementOwner South_Dorwinion = venice
            and I_CompareCounter rhun_stage = 4
            and I_EventCounter rhun_united = 0
            log always --------------------------- rhun united----------------------------
            historic_event rhun_united factions { venice, }
            spawn_army
                faction venice
                character	random_name, named character, age 22, x 463, y 300, direction E
                traits		BadManRace 1, DaritaiClan 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Loke Rim Bodyguard			exp 5 armour 1 weapon_lvl 1
                unit		Suriut Chariots			exp 0 armour 0 weapon_lvl 0
            end
            terminate_monitor
        end_if
    end_monitor

    ;################## Script: Unite the Clans - Harad ##################

    if I_IsFactionAIControlled spain
        set_event_counter muhad_join 1
        set_event_counter trollmen_join 1
        set_event_counter hasharii_join 1
        set_event_counter harad_united 1
    end_if

    monitor_event FactionTurnEnd FactionType slave
        log always --------------------------- unite the clans harad ----------------------------
        if I_IsFactionAIControlled spain
            terminate_monitor
        end_if

        if I_NumberOfSettlements spain >= 4
            and I_EventCounter muhad_join = 0
            log always --------------------------- muhad joins----------------------------
            historic_event muhad_join factions { spain, }
            spawn_army
                faction spain
                character	random_name, named character, age 28, x 321, y 117, portrait Beastmasterfar, direction S
                traits		BadManRace 1, Haradrim 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Muhad Tribesmen			exp 5 armour 1 weapon_lvl 0
                unit		Muhad Beastmasters		exp 0 armour 0 weapon_lvl 0
                unit		Muhad Beastmasters		exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements spain >= 8
            and I_EventCounter trollmen_join = 0
            log always --------------------------- trollmen joins----------------------------
            historic_event trollmen_join factions { spain, }
            spawn_army
                faction spain
                character	Ubaadah, named character, age 42, x 322, y 117, portrait Beastmaster, direction S
                traits		BadManRace 1, Haradrim 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, TrollmenStrat 1, CustomBG 1
                unit		Troll-men Warriors				exp 2 armour 1 weapon_lvl 1
                unit		Troll-men Hunters	exp 0 armour 0 weapon_lvl 0
                unit		Troll-men Hunters	exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements spain >= 12
            and I_EventCounter hasharii_join = 0
            log always --------------------------- hasharii joins----------------------------
            historic_event hasharii_join factions { spain, }
            spawn_army
                faction spain
                character	Khaldoon, named character, age 27, x 323, y 117, portrait Balchoth, direction S
                traits		BadManRace 1, Haradrim 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, HashariiStrat 1, CustomBG 1
                unit		Hasharii Shadows		exp 2 armour 1 weapon_lvl 0
                unit		Hasharii Blades				exp 0 armour 0 weapon_lvl 0
                unit		Hasharii Blades				exp 0 armour 0 weapon_lvl 0
            end
        end_if

        if I_NumberOfSettlements spain >= 15
            and I_EventCounter harad_united = 0
            log always --------------------------- harad united----------------------------
            historic_event harad_united factions { spain, }
            spawn_army
                faction spain
                character	Umaarah, named character, age 36, x 324, y 117, portrait Beastmastermumak, direction S
                traits		BadManRace 1, Haradrim 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, TrollmenStrat 1, CustomBG 1
                unit		Troll-men Champions				exp 2 armour 1 weapon_lvl 1
                unit		Mumakil				exp 0 armour 0 weapon_lvl 0
                unit		Troll-men Warriors				exp 2 armour 1 weapon_lvl 1
                unit		Troll-men Hunters	exp 0 armour 0 weapon_lvl 0
            end
            terminate_monitor
        end_if
    end_monitor

    ;################## Script: Blue Wizards #############################

    declare_counter blue_wizards_awaiting_answer
    declare_counter khand_timer
    declare_counter supply_timer

    set_counter khand_timer 1
    set_counter supply_timer -1

    if I_IsFactionAIControlled khand
        and I_IsFactionAIControlled england
        set_event_counter death_message 1
    end_if

    monitor_event FactionTurnStart FactionType khand
        and I_CompareCounter khand_timer = 38
        log always --------------------------- khand dice roll ----------------------------
        if not I_IsFactionAIControlled khand
            historic_event blue_wizards_warning factions { khand, }
        end_if
        if not I_IsFactionAIControlled england
            historic_event bw_warning_mordor factions { england, }
        end_if

        generate_random_counter khand_dice 1 11

        if I_EventCounter khand_dice = 1
            set_counter khand_timer 39
        end_if
        if I_EventCounter khand_dice = 2
            set_counter khand_timer 40
        end_if
        if I_EventCounter khand_dice = 3
            set_counter khand_timer 41
        end_if
        if I_EventCounter khand_dice = 4
            set_counter khand_timer 42
        end_if
        if I_EventCounter khand_dice = 5
            set_counter khand_timer 43
        end_if
        if I_EventCounter khand_dice = 6
            set_counter khand_timer 44
        end_if
        if I_EventCounter khand_dice = 7
            set_counter khand_timer 45
        end_if
        if I_EventCounter khand_dice = 8
            set_counter khand_timer 46
        end_if
        if I_EventCounter khand_dice = 9
            set_counter khand_timer 47
        end_if
        if I_EventCounter khand_dice = 10
            set_counter khand_timer 48
        end_if

        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart not FactionType khand
        log always --------------------------- not khand counters to 1 ----------------------------

        set_event_counter good_khand_one 1
        set_event_counter good_khand_two 1
        set_event_counter not_good_khand 1
        set_event_counter evil_khand 1

    end_monitor



;monitor_event PreFactionTurnStart FactionType sicily
;    if I_EventCounter siege_test_set = 1
;        siege_settlement test11, Anfalas, attack
;    end_if
;    log always --------------------spawn------------
;    if I_EventCounter siege_test_set = 0
;        spawn_army
;            faction england
;            character	random_name, named character, age 26, x 217, y 202, family, hero_ability WHIPING, label test11
;            traits		OrcRace 1, HeroAbilityOrcWhiping 1, BattleChivalryEvil 2, Bloodthirsty 1, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
;            unit		Uruk Bodyguard					exp 5 armour 0 weapon_lvl 0
;            unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
;            unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
;            unit		Southron Warband			exp 2 armour 0 weapon_lvl 0
;            unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
;            unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
;            unit		Loke-Gamp Rim			exp 2 armour 0 weapon_lvl 0
;            unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
;            unit		Loke-Innas Rim			exp 0 armour 0 weapon_lvl 0
;            unit		Great Beasts			exp 0 armour 0 weapon_lvl 0
;            unit		Great Beasts			exp 0 armour 0 weapon_lvl 0
;        end
;        campaign_wait 2
;        siege_settlement test11, Anfalas, maintain
;        console_command mp test11 1
;        console_command give_trait test11 Locked
;        set_event_counter siege_test_set 1
;        log always --------------------attack------------
;    end_if
;end_monitor
;
;monitor_event CharacterTurnStart Trait Locked > 0
;    console_command mp test11 0
;    siege_settlement test11, Anfalas, maintain
;end_monitor



    monitor_event PreFactionTurnStart FactionType khand
        log always --------------------------- khand counters to 0 ----------------------------

        set_event_counter good_khand_one 0
        set_event_counter good_khand_two 0
        set_event_counter not_good_khand 1
        set_event_counter evil_khand 0

        if I_EventCounter civil_war = 1
            set_event_counter good_khand_one 1
            set_event_counter not_good_khand 0
        end_if

        if I_EventCounter civil_war_end = 1
            set_event_counter good_khand_two 1
        end_if

        if I_EventCounter khand_loyal = 1
            set_event_counter evil_khand 1
        end_if

    end_monitor

    monitor_event FactionTurnEnd I_CompareCounter first_faction_after_slave == 1
        log always --------------------------- khand timer increase ----------------------------
        inc_counter khand_timer 1
        if I_EventCounter blue_wizards_end = 1
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnEnd FactionType khand
        and not IsFactionAIControlled
        and I_CompareCounter khand_timer > 50

        log always --------------------------- blue wizard supply ----------------------------
        if I_CompareCounter supply_timer > 0
            inc_counter supply_timer -1
        end_if
        if I_CompareCounter supply_timer = 0
            and I_EventCounter blue_wizards_arrive = 1
            and I_EventCounter blue_wizards_early = 0
            increment_kings_purse khand -7000
            historic_event bw_supply_end
            terminate_monitor
        end_if
        if I_CompareCounter supply_timer = 0
            and I_EventCounter blue_wizards_arrive = 1
            and I_EventCounter blue_wizards_early = 1
            increment_kings_purse khand -4000
            historic_event bw_supply_end factions { khand, }
            terminate_monitor
        end_if
        if I_CompareCounter supply_timer = 0
            and I_EventCounter blue_wizards_arrive = 0
            terminate_monitor
        end_if

    end_monitor

    monitor_event PreFactionTurnStart FactionType khand
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction england = AtWar
        and I_CompareCounter khand_timer < 51
        and I_EventCounter civil_war = 0
        and I_EventCounter khand_loyal = 0

        log always --------------------------- blue wizard early ----------------------------
        historic_event blue_wizards_early factions { khand, }
        set_counter khand_timer 50

        set_religion khand nomadic
        change_population_religion khand nomadic 40 orthodox

        destroy_buildings khand temple_wicked true

        console_command message_collation_set on
        console_command diplomatic_stance denmark khand neutral
        console_command diplomatic_stance sicily khand neutral
        console_command diplomatic_stance khand venice war
        console_command diplomatic_stance khand spain war
        console_command diplomatic_stance khand england war
        console_command diplomatic_stance khand poland war
        console_command diplomatic_stance khand portugal war
        console_command message_collation_set off

        console_command message_collation_set on
        set_faction_standing khand venice -0.8
        set_faction_standing venice khand -0.8
        set_faction_standing khand spain -0.8
        set_faction_standing spain khand -0.8
        set_faction_standing khand england -1
        set_faction_standing england khand -1
        set_faction_standing khand poland -1
        set_faction_standing poland khand -1
        set_faction_standing khand portugal -1
        set_faction_standing portugal khand -1
        console_command message_collation_set off

        if I_IsFactionAIControlled england
            increment_kings_purse england 900
        end_if
        if I_IsFactionAIControlled spain
            increment_kings_purse spain 1600
        end_if
        if I_IsFactionAIControlled venice
            increment_kings_purse venice 1600
        end_if
        historic_event civil_war
        set_event_counter good_khand_one 1
        set_event_counter not_good_khand 0

        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType khand
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction venice = AtWar
        and I_CompareCounter khand_timer < 51
        and I_EventCounter civil_war = 0
        and I_EventCounter khand_loyal = 0

        log always --------------------------- blue wizard early ----------------------------
        historic_event blue_wizards_early
        set_counter khand_timer 50

        set_religion khand nomadic
        change_population_religion khand nomadic 40 orthodox

        destroy_buildings khand temple_wicked true

        console_command message_collation_set on
        console_command diplomatic_stance denmark khand neutral
        console_command diplomatic_stance sicily khand neutral
        console_command diplomatic_stance khand venice war
        console_command diplomatic_stance khand spain war
        console_command diplomatic_stance khand england war
        console_command diplomatic_stance khand poland war
        console_command diplomatic_stance khand portugal war
        console_command message_collation_set off

        console_command message_collation_set on
        set_faction_standing khand venice -0.8
        set_faction_standing venice khand -0.8
        set_faction_standing khand spain -0.8
        set_faction_standing spain khand -0.8
        set_faction_standing khand england -1
        set_faction_standing england khand -1
        set_faction_standing khand poland -1
        set_faction_standing poland khand -1
        set_faction_standing khand portugal -1
        set_faction_standing portugal khand -1
        console_command message_collation_set off

        if I_IsFactionAIControlled england
            increment_kings_purse england 900
        end_if
        if I_IsFactionAIControlled spain
            increment_kings_purse spain 1600
        end_if
        if I_IsFactionAIControlled venice
            increment_kings_purse venice 1600
        end_if

        historic_event civil_war
        set_event_counter good_khand_one 1
        set_event_counter not_good_khand 0

        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType khand
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction spain = AtWar
        and I_CompareCounter khand_timer < 51
        and I_EventCounter civil_war = 0
        and I_EventCounter khand_loyal = 0

        log always --------------------------- blue wizard early ----------------------------
        historic_event blue_wizards_early
        set_counter khand_timer 50

        set_religion khand nomadic
        change_population_religion khand nomadic 40 orthodox

        destroy_buildings khand temple_wicked true

        console_command message_collation_set on
        console_command diplomatic_stance denmark khand neutral
        console_command diplomatic_stance sicily khand neutral
        console_command diplomatic_stance khand venice war
        console_command diplomatic_stance khand spain war
        console_command diplomatic_stance khand england war
        console_command diplomatic_stance khand poland war
        console_command diplomatic_stance khand portugal war
        console_command message_collation_set off

        console_command message_collation_set on
        set_faction_standing khand venice -0.8
        set_faction_standing venice khand -0.8
        set_faction_standing khand spain -0.8
        set_faction_standing spain khand -0.8
        set_faction_standing khand england -1
        set_faction_standing england khand -1
        set_faction_standing khand poland -1
        set_faction_standing poland khand -1
        set_faction_standing khand portugal -1
        set_faction_standing portugal khand -1
        console_command message_collation_set off

        if I_IsFactionAIControlled england
            increment_kings_purse england 900
        end_if
        if I_IsFactionAIControlled spain
            increment_kings_purse spain 1600
        end_if
        if I_IsFactionAIControlled venice
            increment_kings_purse venice 1600
        end_if

        historic_event civil_war
        set_event_counter good_khand_one 1
        set_event_counter not_good_khand 0

        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionType khand	;;;Monitor for the choice(yes/no event) between good or evil for Khand for the player
        and I_CompareCounter khand_timer = 50			;;;The Khand AI additionally gets all the coresponding effects in its 'if' block
        and I_EventCounter blue_wizards_early = 0

        log always --------------------------- khand choice monitor ----------------------------
        if not I_IsFactionAIControlled khand
            set_counter blue_wizards_awaiting_answer 1
            historic_event blue_wizards_choice true factions { khand, }
            terminate_monitor
        end_if

        if I_IsFactionAIControlled khand
            generate_random_counter khand_ai_choice 1 2
            if I_EventCounter khand_ai_choice = 1
                log always --------------------------- khand AI is good----------------------------
                set_religion khand nomadic
                change_population_religion khand nomadic 40 orthodox

                destroy_buildings khand temple_wicked true

                console_command message_collation_set on
                console_command diplomatic_stance khand venice neutral
                console_command diplomatic_stance khand spain neutral
                console_command diplomatic_stance khand england neutral
                console_command diplomatic_stance denmark khand neutral
                console_command diplomatic_stance sicily khand neutral
                console_command diplomatic_stance khand poland neutral
                console_command diplomatic_stance khand portugal neutral
                console_command diplomatic_stance khand venice war
                console_command diplomatic_stance khand spain war
                console_command diplomatic_stance khand england war
                console_command diplomatic_stance khand poland war
                console_command diplomatic_stance khand portugal war
                console_command diplomatic_stance denmark khand allied
                console_command diplomatic_stance sicily khand allied
                console_command diplomatic_stance turks khand allied
                console_command message_collation_set off

                console_command message_collation_set on
                set_faction_standing khand venice -0.8
                set_faction_standing venice khand -0.8
                set_faction_standing khand spain -0.8
                set_faction_standing spain khand -0.8
                set_faction_standing khand england -1
                set_faction_standing england khand -1
                set_faction_standing khand poland -1
                set_faction_standing poland khand -1
                set_faction_standing khand portugal -1
                set_faction_standing portugal khand -1
                console_command message_collation_set off

                increment_kings_purse khand 8000

                set_event_counter civil_war 1
                set_event_counter good_khand_one 1
                set_event_counter not_good_khand 0

                if not I_IsFactionAIControlled england
                    historic_event khand_treason
                    set_event_counter blue_wizards_succeed 1
                end_if
                if not I_IsFactionAIControlled venice
                    historic_event mordors_envoy
                    set_event_counter blue_wizards_succeed 1
                end_if
                if not I_IsFactionAIControlled spain
                    historic_event mordors_envoy
                    set_event_counter blue_wizards_succeed 1
                end_if
                if I_IsFactionAIControlled england
                    and I_IsFactionAIControlled venice
                    and I_IsFactionAIControlled spain
                    historic_event blue_wizards_succeed factions { all, }
                end_if
            end_if
            if I_EventCounter khand_ai_choice = 2
                log always --------------------------- khand AI is evil----------------------------
                set_faction_standing khand england 1
                set_faction_standing england khand 1

                set_event_counter evil_khand 1
                set_event_counter khand_loyal 1

                increment_kings_purse khand 800

                if not I_IsFactionAIControlled england
                    historic_event khand_loyal_mordor
                    set_event_counter blue_wizards_fail 1
                end_if
                if I_IsFactionAIControlled england
                    historic_event blue_wizards_fail factions { all, }
                end_if
            end_if
            terminate_monitor
        end_if
    end_monitor

    monitor_event EventCounter EventCounterType blue_wizards_choice_accepted
        and EventCounter = 1

        log always --------------------------- blue wizards accepted----------------------------
        set_counter blue_wizards_awaiting_answer 0

        set_religion khand nomadic
        change_population_religion khand nomadic 40 orthodox

        destroy_buildings khand temple_wicked true

        console_command message_collation_set on
        console_command diplomatic_stance khand venice neutral
        console_command diplomatic_stance khand spain neutral
        console_command diplomatic_stance khand england neutral
        console_command diplomatic_stance denmark khand neutral
        console_command diplomatic_stance sicily khand neutral
        console_command diplomatic_stance khand poland neutral
        console_command diplomatic_stance khand portugal neutral
        console_command diplomatic_stance khand venice war
        console_command diplomatic_stance khand spain war
        console_command diplomatic_stance khand england war
        console_command diplomatic_stance khand poland war
        console_command diplomatic_stance khand portugal war
        console_command diplomatic_stance denmark khand allied
        console_command diplomatic_stance sicily khand allied
        console_command diplomatic_stance turks khand allied
        console_command message_collation_set off

        console_command message_collation_set on
        set_faction_standing khand venice -0.8
        set_faction_standing venice khand -0.8
        set_faction_standing khand spain -0.8
        set_faction_standing spain khand -0.8
        set_faction_standing khand england -1
        set_faction_standing england khand -1
        set_faction_standing khand poland -1
        set_faction_standing poland khand -1
        set_faction_standing khand portugal -1
        set_faction_standing portugal khand -1
        console_command message_collation_set off

        if I_IsFactionAIControlled england
            increment_kings_purse england 900
        end_if
        if I_IsFactionAIControlled spain
            increment_kings_purse spain 1600
        end_if
        if I_IsFactionAIControlled venice
            increment_kings_purse venice 1600
        end_if

        historic_event civil_war factions { khand, }
        set_event_counter good_khand_one 1
        set_event_counter blue_wizards_succeed 1
        set_event_counter not_good_khand 0
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType blue_wizards_choice_declined
        and EventCounter = 1
        log always --------------------------- blue wizards declined----------------------------

        set_counter blue_wizards_awaiting_answer 0

        set_faction_standing khand england 1
        set_faction_standing england khand 1
        increment_kings_purse khand 600
        set_counter supply_timer 0
        historic_event khand_loyal factions { khand, }
        set_event_counter blue_wizards_fail 1
        terminate_monitor
    end_monitor

    ;######################### Khand chooses Good (Player) ######################################

    monitor_event PreFactionTurnStart FactionType khand					;;;Monitor for post-choice actions for player
        and not IsFactionAIControlled
        and I_CompareCounter khand_timer >= 51
        log always --------------------------- good khand rebellion monitor---------------------------

        if I_EventCounter civil_war = 0
            and I_CompareCounter khand_timer = 51

            terminate_monitor

        end_if

        if I_EventCounter civil_war = 1
            and I_CompareCounter khand_timer = 51

            console_command clear_messages
            disable_cursor
            hide_ui
            if I_SettlementOwner Near_Harad = khand
                zoom_strat_camera 1
                snap_strat_camera 388, 150
                move_strat_camera 388, 151

                add_events
                    event	fire
                    date	0
                    position	388, 151
                end_add_events

                campaign_wait 5
                console_command add_population, Near_Harad -559
                historic_event unrest_chelkar
            end_if
            if I_SettlementOwner West_Khand = khand
                zoom_strat_camera 1
                move_strat_camera 452, 170

                add_events
                    event	fire
                    date	0
                    position	452, 170
                end_add_events

                campaign_wait 4
                console_command add_population, West_Khand -774
                historic_event unrest_kyzilkum
            end_if
            show_ui
            enable_cursor
        end_if

        if I_EventCounter civil_war = 1
            and I_CompareCounter khand_timer = 52
            unfreeze_faction_ai slave
        end_if

        if I_EventCounter civil_war = 1
            and I_CompareCounter khand_timer = 53

            console_command clear_messages
            disable_cursor
            hide_ui

            if I_SettlementOwner Far_Khand = khand
                zoom_strat_camera 1
                snap_strat_camera 489, 197
                move_strat_camera 489, 198

                add_events
                    event	fire
                    date	0
                    position	489, 198
                end_add_events

                campaign_wait 5
                console_command add_population, Far_Khand -641
                historic_event unrest_oibamari
            end_if

            if I_SettlementOwner Khand = khand
                zoom_strat_camera 1
                move_strat_camera 491, 167

                add_events
                    event	fire
                    date	0
                    position	491, 167
                end_add_events

                campaign_wait 4
                console_command add_population, Khand -921
                historic_event unrest_ammu_khand
            end_if

            show_ui
            enable_cursor
        end_if

        if I_EventCounter civil_war = 1
            and I_CompareCounter khand_timer = 54
            unfreeze_faction_ai slave
        end_if

        if I_EventCounter civil_war = 1
            and I_CompareCounter khand_timer = 55

            console_command clear_messages
            disable_cursor
            hide_ui

            if I_SettlementOwner Harad = khand
                zoom_strat_camera 1
                snap_strat_camera 489, 139
                move_strat_camera 489, 140

                add_events
                    event	fire
                    date	0
                    position	489, 140
                end_add_events

                campaign_wait 4
                console_command add_population, Harad -1238
                historic_event unrest_sturlurtsa_khand
            end_if

            show_ui
            enable_cursor
            terminate_monitor
        end_if

    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 52
        log always --------------------------- good khand civil war monitor---------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1

            if I_SettlementOwner Near_Harad = khand
                spawn_army
                    faction slave
                    character	random_name, named character, age 48, x 387, y 151, portrait Bwrebel1, direction E, label khand_rebels_1
                    traits		BwRebel 1, BadManRace 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Variag Nobles							exp 5 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Nomad Horsemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Warriors					exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Warriors					exp 0 armour 1 weapon_lvl 0
                    unit		Hasharii Blades							exp 2 armour 0 weapon_lvl 0
                    unit		Haradrim Spearmen					exp 1 armour 2 weapon_lvl 0
                    unit		Haradrim Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Haradrim Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                end

                if not I_SettlementUnderSiege Near_Harad
                    siege_settlement khand_rebels_1, Near_Harad, maintain
                    set_event_counter rebel_siege_one 1
                end_if
            end_if

            if I_SettlementOwner West_Khand = khand
                spawn_army
                    faction slave
                    character	random_name, named character, age 48, x 451, y 170, portrait Bwrebel2, direction E, label khand_rebels_2
                    traits		BwRebel 1, BadManRace 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Variag Nobles							exp 5 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Nomad Horsemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Variag Swordsmen						exp 2 armour 0 weapon_lvl 0
                    unit		Steppe Tribesmen					exp 1 armour 2 weapon_lvl 0
                    unit		Steppe Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Steppe Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                end

                if not I_SettlementUnderSiege West_Khand
                    siege_settlement khand_rebels_2, West_Khand, maintain
                    set_event_counter rebel_siege_two 1
                end_if
            end_if
            freeze_faction_ai slave
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 53
        log always --------------------------- good khand civil war attack--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_SettlementUnderSiege Near_Harad
            and I_EventCounter rebel_siege_one = 1
            campaign_wait 0.1
            siege_settlement khand_rebels_1, Near_Harad, attack
            campaign_wait 1
        end_if

        terminate_monitor
    end_monitor

    monitor_event FactionTurnEnd FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 53
        log always --------------------------- good khand civil war attack--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_SettlementUnderSiege West_Khand
            and I_EventCounter rebel_siege_two = 1
            campaign_wait 0.1
            siege_settlement khand_rebels_2, West_Khand, attack
            campaign_wait 1
        end_if

        terminate_monitor
    end_monitor


    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 54
        log always --------------------------- good khand civil war armies--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1

            if I_SettlementOwner Far_Khand = khand
                spawn_army
                    faction slave
                    character	random_name, named character, age 48, x 488, y 198, portrait Bwrebel3, direction E, label khand_rebels_3
                    traits		BwRebel 1, BadManRace 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Variag Nobles							exp 5 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Arulad Dragonriders					exp 2 armour 1 weapon_lvl 0
                    unit		Variag Lancers						exp 2 armour 0 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Variag Swordsmen						exp 2 armour 0 weapon_lvl 0
                    unit		Steppe Tribesmen					exp 1 armour 2 weapon_lvl 0
                    unit		Variag Bowmen						exp 2 armour 0 weapon_lvl 0
                    unit		Steppe Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Black Uruks					exp 0 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Host					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                    unit		Orc Archers					exp 0 armour 0 weapon_lvl 0
                end

                if not I_SettlementUnderSiege Far_Khand
                    siege_settlement khand_rebels_3, Far_Khand, maintain
                    set_event_counter rebel_siege_three 1
                end_if
                campaign_wait 0.1
            end_if

            if I_SettlementOwner Khand = khand
                spawn_army
                    faction slave
                    character	random_name, named character, age 48, x 490, y 167, portrait Bwrebel4, direction E, label khand_rebels_4
                    traits		BwRebel 1, BadManRace 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Variag Nobles							exp 5 armour 0 weapon_lvl 0
                    unit		Warlords Kataphract Archers			exp 2 armour 0 weapon_lvl 0
                    unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
                    unit		Warlords Kataphracts						exp 2 armour 0 weapon_lvl 0
                    unit		Nomad Horsemen						exp 0 armour 1 weapon_lvl 0
                    unit		Warlords Guard						exp 2 armour 0 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Axemen						exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Warriors					exp 0 armour 1 weapon_lvl 0
                    unit		Nomad Warriors					exp 0 armour 1 weapon_lvl 0
                    unit		Variag Swordsmen						exp 2 armour 0 weapon_lvl 0
                    unit		Variag Swordsmen						exp 2 armour 0 weapon_lvl 0
                    unit		Steppe Tribesmen					exp 1 armour 2 weapon_lvl 0
                    unit		Steppe Tribesmen					exp 1 armour 2 weapon_lvl 0
                    unit		Steppe Archers					exp 1 armour 1 weapon_lvl 0
                    unit		Steppe Archers					exp 1 armour 1 weapon_lvl 0
                end

                if not I_SettlementUnderSiege Khand
                    siege_settlement khand_rebels_4, Khand, maintain
                    set_event_counter rebel_siege_four 1
                end_if
                campaign_wait 0.1
            end_if
            freeze_faction_ai slave
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 55
        log always --------------------------- good khand civil war attack--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_SettlementUnderSiege Far_Khand
            and I_EventCounter rebel_siege_three = 1
            campaign_wait 0.1
            siege_settlement khand_rebels_3, Far_Khand, attack
            campaign_wait 1
        end_if

        terminate_monitor
    end_monitor

    monitor_event FactionTurnEnd FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 55
        log always --------------------------- good khand civil war attack--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_SettlementUnderSiege Khand
            and I_EventCounter rebel_siege_four = 1
            campaign_wait 0.1
            siege_settlement khand_rebels_4, Khand, attack
            campaign_wait 1
        end_if

        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 56
        log always --------------------------- good khand civil war armies 2--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1

            if I_SettlementOwner Harad = khand
                spawn_army
                    faction england
                    character	Ancantar, named character, age 48, x 490, y 140, family, portrait Ancantar, battle_model ancantar, direction W, hero_ability ANCANTAR, label ancantar_3
                    traits		Ancantar 1, CustomBG 1, HeroAbilityAncantar 1, NumenoreanRace 1, Brave 1, BattleChivalryEvil 2, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                    unit		Temple Knights					exp 5 armour 0 weapon_lvl 1
                    unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
                    unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
                    unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
                    unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
                    unit		Great Beasts							exp 2 armour 0 weapon_lvl 0
                    unit		Saurons Will						exp 2 armour 0 weapon_lvl 1
                    unit		Saurons Will						exp 2 armour 0 weapon_lvl 1
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Mordor Catapult							exp 2 armour 0 weapon_lvl 0
                    unit		Mordor Catapult							exp 2 armour 0 weapon_lvl 0
                end

                console_command give_ancillary ancantar_3 ancantar_mace
                console_command give_ancillary ancantar_3 ancantar_dagger

                set_event_counter ancantar_attack 1
                set_event_counter death_message 1

                if I_EventCounter blue_wizards_early = 0
                    increment_kings_purse khand 9000
                    set_counter supply_timer 20
                end_if

                if not I_SettlementUnderSiege Harad
                    siege_settlement ancantar_3, Harad, maintain
                    set_event_counter rebel_siege_five 1
                end_if
                campaign_wait 0.1
            end_if
            terminate_monitor
        end_if

    end_monitor

    monitor_event PreFactionTurnStart FactionType khand					;;;Monitor for post-choice actions for player if script triggered normal
        and not IsFactionAIControlled
        and I_CompareCounter khand_timer = 56
        and I_EventCounter blue_wizards_early = 0
        log always --------------------------- blue wizards spawn--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1
            set_event_counter good_khand_two 1
            set_event_counter civil_war_end 1

            spawn_army
                faction khand
                character	Alatar, named character, age 33, x 490, y 144, portrait Alatar, battle_model alatar, direction W, hero_ability ALATAR, label alatar_1
                traits		Alatar 1, CustomBG 1, HeroAbilityAlatar 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                unit		Iron Fist Hammers			exp 5 armour 1 weapon_lvl 1
                unit		Blacklock Engineers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit alatar_1, Uushixia Stormriders,			num 1, exp 3, arm 0, wep 0
            create_unit alatar_1, Windriders of Khand,			num 1, exp 3, arm 0, wep 0

            console_command give_ancillary alatar_1 alatar_staff
            console_command give_ancillary alatar_1 alatar_sword

            spawn_army
                faction khand
                character	Pallando, named character, age 33, x 493, y 173, portrait Pallando, battle_model pellando, direction W, hero_ability PALLANDO, label pallando_1
                traits		Pallando 1, CustomBG 1, HeroAbilityPallando 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                unit		Blacklock Engineers			exp 5 armour 1 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit pallando_1, Uushixia Stormriders,			num 1, exp 3, arm 0, wep 0
            create_unit pallando_1, Windriders of Khand,		num 1, exp 3, arm 0, wep 0

            console_command give_ancillary pallando_1 pallando_staff
            console_command give_ancillary pallando_1 pallando_pouch

            add_money khand 5000
            historic_event blue_wizards_arrive factions { khand, }
            set_event_counter blue_wizards_end 1

            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        and IsFactionAIControlled
        and I_CompareCounter khand_timer = 57
        log always --------------------------- blue wizards supply player--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1

            if I_EventCounter blue_wizards_early = 1
                increment_kings_purse khand 6000
                set_counter supply_timer 20
            end_if

            if I_SettlementUnderSiege Harad
                and I_EventCounter rebel_siege_five = 1
                campaign_wait 0.1
                siege_settlement ancantar_3, Harad, attack
                campaign_wait 1
            end_if
            terminate_monitor
        end_if

    end_monitor

    monitor_event PreFactionTurnStart FactionType khand					;;;Monitor for post-choice actions for player if script triggered early
        and not IsFactionAIControlled
        and I_CompareCounter khand_timer = 57
        and I_EventCounter blue_wizards_early = 1
        log always --------------------------- blue wizards spawn early--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 0
            terminate_monitor
        end_if

        if I_EventCounter civil_war = 1
            set_event_counter good_khand_two 1
            set_event_counter civil_war_end 1

            spawn_army
                faction khand
                character	Alatar, named character, age 33, x 490, y 144, portrait Alatar, battle_model alatar, direction W, hero_ability ALATAR, label alatar_1
                traits		Alatar 1, CustomBG 1, HeroAbilityAlatar 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                unit		Iron Fist Hammers			exp 5 armour 1 weapon_lvl 1
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit alatar_1, Uushixia Stormriders,			num 1, exp 3, arm 0, wep 0
            create_unit alatar_1, Windriders of Khand,			num 1, exp 3, arm 0, wep 0

            console_command give_ancillary alatar_1 alatar_staff
            console_command give_ancillary alatar_1 alatar_sword

            spawn_army
                faction khand
                character	Pallando, named character, age 33, x 493, y 173, portrait Pallando, battle_model pellando, direction W, hero_ability PALLANDO, label pallando_1
                traits		Pallando 1, CustomBG 1, HeroAbilityPallando 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                unit		Blacklock Engineers		exp 5 armour 1 weapon_lvl 0
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit pallando_1, Uushixia Stormriders,			num 1, exp 3, arm 0, wep 0
            create_unit pallando_1, Windriders of Khand,		num 1, exp 3, arm 0, wep 0

            console_command give_ancillary pallando_1 pallando_staff
            console_command give_ancillary pallando_1 pallando_pouch

            add_money khand 5000
            historic_event blue_wizards_late factions { khand, }
            set_event_counter blue_wizards_arrive 1
            set_event_counter blue_wizards_end 1

            terminate_monitor
        end_if
    end_monitor

    ;######################### Khand chooses Evil (Player) ######################################
    monitor_event FactionTurnStart FactionType khand
        and not IsFactionAIControlled
        and I_CompareCounter khand_timer = 51
        and I_NumberOfSettlements england > 0

        log always --------------------------- ancantar spawn--------------------------
        if I_EventCounter khand_loyal = 0
            terminate_monitor
        end_if

        if I_EventCounter khand_loyal = 1

            spawn_army
                faction khand
                character	Ancantar, named character, age 48, x 485, y 145, portrait Ancantar, battle_model ancantar, direction E, hero_ability ANCANTAR, label ancantar_1
                traits		Ancantar 1, CustomBG 1, HeroAbilityAncantar 1, NumenoreanRace 1, Brave 1, BattleChivalryEvil 2, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                unit		Temple Knights				exp 5 armour 0 weapon_lvl 1
                unit		Temple Wards				exp 5 armour 0 weapon_lvl 0
                unit		Temple Wards				exp 5 armour 0 weapon_lvl 0
                unit		Temple Wards				exp 5 armour 0 weapon_lvl 0
                unit		Temple Marksmen		exp 5 armour 0 weapon_lvl 0
                unit		Temple Marksmen		exp 5 armour 0 weapon_lvl 0
                unit		Temple Marksmen		exp 5 armour 0 weapon_lvl 0
                unit		Great Beasts						exp 2 armour 0 weapon_lvl 0
            end

            console_command give_ancillary ancantar_1 ancantar_mace
            console_command give_ancillary ancantar_1 ancantar_dagger

            historic_event mordors_inquisitor
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType slave
        and I_CompareCounter khand_timer >= 52
        log always --------------------------- rebel blue wizard spawn--------------------------

        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_EventCounter khand_loyal = 0
            terminate_monitor
        end_if

        if I_EventCounter khand_loyal = 1
            and I_CompareCounter khand_timer = 52
            spawn_army
                faction scripts
                character	Alatar, named character, age 33, x 490, y 145, portrait AlatarAi, hero_ability ALATAR, label alatar_2
                traits		CustomBG 1, HeroAbilityAlatar 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Iron Fist Hammers		exp 0 armour 0 weapon_lvl 0
            end
            give_everything_to_faction scripts slave false
            console_command give_trait alatar_2 Alatar 1
            console_command give_ancillary alatar_2 alatar_staff
            console_command give_ancillary alatar_2 alatar_sword
            send_character_off_map alatar_2
            spawn_army
                faction slave
                character	Alatar, named character, x 490, y 140, direction W, battle_model alatar, label alatar_2
                unit		Iron Fist Hammers			exp 5 armour 1 weapon_lvl 0
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit alatar_2, Uushixia Stormriders,		num 1, exp 3, arm 0, wep 0
            create_unit alatar_2, Windriders of Khand,		num 2, exp 3, arm 0, wep 0
            create_unit alatar_2, Warlords Kataphracts,	num 2, exp 3, arm 0, wep 0
            create_unit alatar_2, Variag Horse Archers,	num 2, exp 3, arm 0, wep 0
            create_unit alatar_2, Warlords Guard,	num 1, exp 3, arm 0, wep 0

            if not I_SettlementUnderSiege Harad
                siege_settlement alatar_2, Harad, maintain
                set_event_counter bw_siege_one 1
            end_if
            campaign_wait 0.1

            spawn_army
                faction scripts
                character	Pallando, named character, age 33, x 492, y 145, portrait PallandoAi, hero_ability PALLANDO, label pallando_2
                traits		HeroAbilityPallando 1, CustomBG 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Blacklock Engineers	exp 0 armour 0 weapon_lvl 0
            end
            give_everything_to_faction scripts slave false
            console_command give_trait pallando_2 Pallando 1
            console_command give_ancillary pallando_2 pallando_staff
            console_command give_ancillary pallando_2 pallando_pouch
            send_character_off_map pallando_2
            spawn_army
                faction slave
                character	Pallando, named character, x 492, y 167, direction W, battle_model pellando, label pallando_2
                unit		Blacklock Engineers		exp 5 armour 1 weapon_lvl 0
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit pallando_2, Uushixia Stormriders,				num 1, exp 3, arm 0, wep 0
            create_unit pallando_2, Windriders of Khand,			num 2, exp 3, arm 0, wep 0
            create_unit pallando_2, Warlords Kataphract Archers,	num 2, exp 3, arm 0, wep 0
            create_unit pallando_2, Variag Bowmen,		num 2, exp 3, arm 0, wep 0
            create_unit pallando_2, Warlords Guard,			num 1, exp 3, arm 0, wep 0

            if not I_SettlementUnderSiege Khand
                siege_settlement pallando_2, Khand, maintain
                set_event_counter bw_siege_two 1
            end_if
            campaign_wait 0.1

            set_event_counter death_message 1
            historic_event blue_wizards_attack factions { khand, }
        end_if

        if I_EventCounter khand_loyal = 1
            and I_CompareCounter khand_timer = 53
            and I_SettlementUnderSiege Harad
            and I_EventCounter bw_siege_one = 1

            siege_settlement alatar_2, Harad, attack
            campaign_wait 1
        end_if

        if I_EventCounter khand_loyal = 1
            and I_CompareCounter khand_timer = 54
            and I_SettlementUnderSiege Khand
            and I_EventCounter bw_siege_two = 1

            siege_settlement pallando_2, Khand, attack
            campaign_wait 1
        end_if

        if I_EventCounter khand_loyal = 1
            and I_CompareCounter khand_timer = 55

            set_event_counter blue_wizards_end 1
            terminate_monitor
        end_if

    end_monitor

    ;######################### Khand chooses Good (AI) ######################################

    monitor_event PreFactionTurnStart FactionType england
        and I_CompareCounter khand_timer = 51
        and I_EventCounter blue_wizards_succeed = 1
        log always --------------------------- good khand ai ancantar spawn--------------------------

        if not I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_IsFactionAIControlled england
            and I_IsFactionAIControlled venice
            and I_IsFactionAIControlled spain
            and I_IsFactionAIControlled hre
            and I_IsFactionAIControlled aztecs
            and I_IsFactionAIControlled portugal
            and I_IsFactionAIControlled poland
            and I_IsFactionAIControlled gundabad
            and I_IsFactionAIControlled france
            if I_SettlementOwner Harad = khand
                spawn_army
                    faction england
                    character	Ancantar, named character, age 48, x 490, y 140, family, portrait Ancantar, battle_model ancantar, direction W, hero_ability ANCANTAR, label ancantar_2
                    traits		Ancantar 1, CustomBG 1, HeroAbilityAncantar 1, NumenoreanRace 1, Brave 1, BattleChivalryEvil 2, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
                    unit		Temple Knights					exp 5 armour 0 weapon_lvl 1
                    unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
                    unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
                    unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
                    unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
                    unit		Great Beasts							exp 2 armour 0 weapon_lvl 0
                    unit		Saurons Will						exp 2 armour 0 weapon_lvl 1
                    unit		Saurons Will						exp 2 armour 0 weapon_lvl 1
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruks					exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Black Uruk Halberds				exp 2 armour 0 weapon_lvl 0
                    unit		Mordor Catapult							exp 2 armour 0 weapon_lvl 0
                    unit		Mordor Catapult							exp 2 armour 0 weapon_lvl 0
                end

                console_command give_ancillary ancantar_2 ancantar_mace
                console_command give_ancillary ancantar_2 ancantar_dagger

                if not I_SettlementUnderSiege Harad
                    console_command auto_win attacker
                    siege_settlement ancantar_2, Harad, attack
                end_if
                campaign_wait 0.1
            end_if
        end_if

        if not I_IsFactionAIControlled england
            spawn_army
                faction england
                character	Ancantar, named character, age 48, x 418, y 230, portrait Ancantar, battle_model ancantar, direction W, hero_ability ANCANTAR, label ancantar_5
                traits		Ancantar 1, CustomBG 1, HeroAbilityAncantar 1, NumenoreanRace 1, Brave 1, BattleChivalryEvil 2, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Temple Knights					exp 0 armour 0 weapon_lvl 0
                unit		Temple Wards					exp 2 armour 0 weapon_lvl 0
                unit		Temple Marksmen			exp 2 armour 0 weapon_lvl 0
            end

            console_command give_ancillary ancantar_5 ancantar_mace
            console_command give_ancillary ancantar_5 ancantar_dagger

            historic_event ancantar_mordor factions { england, }
        end_if
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType khand
        and I_CompareCounter khand_timer = 51
        and I_EventCounter blue_wizards_succeed = 1
        log always --------------------------- good khand ai blue wizard spawn--------------------------

        if not I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        spawn_army
            faction khand
            character	Alatar, named character, age 33, x 491, y 174, family, portrait Alatar, battle_model alatar, direction W, hero_ability ALATAR, label alatar_3
            traits		Alatar 1, CustomBG 1, HeroAbilityAlatar 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
            unit		Iron Fist Hammers			exp 5 armour 1 weapon_lvl 0
            unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
            unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
            unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
            unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
            unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
            unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
        end

        create_unit alatar_3, Uushixia Stormriders,		num 1, exp 3, arm 0, wep 0
        create_unit alatar_3, Windriders of Khand,		num 2, exp 3, arm 0, wep 0
        create_unit alatar_3, Warlords Kataphracts,	num 2, exp 3, arm 0, wep 0
        create_unit alatar_3, Variag Horse Archers,	num 2, exp 3, arm 0, wep 0
        create_unit alatar_3, Warlords Guard,	num 1, exp 3, arm 0, wep 0

        console_command give_ancillary alatar_3 alatar_staff
        console_command give_ancillary alatar_3 alatar_sword

        campaign_wait 0.1

        spawn_army
            faction khand
            character	Pallando, named character, age 33, x 491, y 176, family, portrait Pallando, battle_model pellando, direction W, hero_ability PALLANDO, label pallando_3
            traits		Pallando 1, CustomBG 1, HeroAbilityPallando 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1, OneRingAvailable 1
            unit		Blacklock Engineers		exp 5 armour 1 weapon_lvl 0
            unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
            unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
            unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
            unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
            unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
            unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
            unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
        end

        create_unit pallando_3, Uushixia Stormriders,				num 1, exp 3, arm 0, wep 0
        create_unit pallando_3, Windriders of Khand,			num 2, exp 3, arm 0, wep 0
        create_unit pallando_3, Warlords Kataphract Archers,	num 2, exp 3, arm 0, wep 0
        create_unit pallando_3, Variag Bowmen,		num 2, exp 3, arm 0, wep 0
        create_unit pallando_3, Warlords Guard,			num 1, exp 3, arm 0, wep 0

        console_command give_ancillary pallando_3 pallando_staff
        console_command give_ancillary pallando_3 pallando_pouch
        add_money khand 50000
        increment_kings_purse khand 1000

        campaign_wait 0.1

        if I_IsFactionAIControlled england
            historic_event blue_wizards_ai
        end_if
        set_event_counter good_khand_two 1
        set_event_counter civil_war_end 1
        set_event_counter death_message 1
        set_event_counter blue_wizards_end 1

        terminate_monitor
    end_monitor

    ;######################### Khand chooses Evil (AI) ######################################

    monitor_event PreFactionTurnStart FactionType khand
        and I_CompareCounter khand_timer = 51
        and I_EventCounter blue_wizards_fail = 1
        and I_NumberOfSettlements england > 0
        log always --------------------------- evil khand ai ancantar spawn--------------------------

        if not I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        spawn_army
            faction khand
            character	Ancantar, named character, age 48, x 482, y 200, family, portrait Ancantar, battle_model ancantar, direction E, hero_ability ANCANTAR, label ancantar_4
            traits		Ancantar 1, CustomBG 1, HeroAbilityAncantar 1, NumenoreanRace 1, Brave 1, BattleChivalryEvil 2, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
            unit		Temple Knights					exp 5 armour 0 weapon_lvl 1
            unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
            unit		Temple Wards					exp 5 armour 0 weapon_lvl 0
            unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
            unit		Temple Marksmen			exp 5 armour 0 weapon_lvl 0
            unit		Great Beasts							exp 2 armour 0 weapon_lvl 0
            unit		Nomad Horsemen						exp 2 armour 1 weapon_lvl 0
            unit		Nomad Horsemen						exp 2 armour 1 weapon_lvl 0
            unit		Nomad Axemen						exp 2 armour 1 weapon_lvl 0
            unit		Nomad Axemen						exp 2 armour 1 weapon_lvl 0
            unit		Nomad Warriors					exp 2 armour 1 weapon_lvl 0
            unit		Nomad Warriors					exp 2 armour 1 weapon_lvl 0
            unit		Warlords Guard						exp 2 armour 0 weapon_lvl 0
            unit		Warlords Guard						exp 2 armour 0 weapon_lvl 0
            unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
            unit		Variag Horse Archers						exp 2 armour 0 weapon_lvl 0
            unit		Warlords Kataphract Archers				exp 2 armour 0 weapon_lvl 0
            unit		Warlords Kataphract Archers				exp 2 armour 0 weapon_lvl 0
            unit		Warlords Kataphracts						exp 2 armour 0 weapon_lvl 0
            unit		Warlords Kataphracts						exp 2 armour 0 weapon_lvl 0
        end

        console_command give_ancillary ancantar_4 ancantar_mace
        console_command give_ancillary ancantar_4 ancantar_dagger
        add_money khand 25000
        increment_kings_purse khand 1000

        campaign_wait 0.1
        terminate_monitor
    end_monitor

    monitor_event PreFactionTurnStart FactionType slave
        and I_CompareCounter khand_timer = 51
        and I_EventCounter blue_wizards_fail = 1
        log always --------------------------- evil khand ai rebel blue wizard spawn--------------------------

        if not I_IsFactionAIControlled khand
            terminate_monitor
        end_if

        if I_SettlementOwner Harad = khand
            spawn_army
                faction scripts
                character	Alatar, named character, age 33, x 490, y 145, portrait AlatarAi, hero_ability ALATAR, label alatar_4
                traits		CustomBG 1, HeroAbilityAlatar 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Iron Fist Hammers		exp 0 armour 0 weapon_lvl 0
            end
            give_everything_to_faction scripts slave false
            console_command give_trait alatar_4 Alatar 1
            console_command give_ancillary alatar_4 alatar_staff
            console_command give_ancillary alatar_4 alatar_sword
            send_character_off_map alatar_4
            spawn_army
                faction slave
                character	Alatar, named character, x 490, y 140, direction W, battle_model alatar, label alatar_4
                unit		Iron Fist Hammers			exp 5 armour 1 weapon_lvl 0
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit alatar_4, Uushixia Stormriders,		num 1, exp 3, arm 0, wep 0
            create_unit alatar_4, Windriders of Khand,		num 2, exp 3, arm 0, wep 0
            create_unit alatar_4, Warlords Kataphracts,	num 2, exp 3, arm 0, wep 0
            create_unit alatar_4, Variag Horse Archers,	num 2, exp 3, arm 0, wep 0
            create_unit alatar_4, Warlords Guard,	num 1, exp 3, arm 0, wep 0

            if not I_SettlementUnderSiege Harad
                console_command auto_win attacker
                siege_settlement alatar_4, Harad, attack
            end_if
            campaign_wait 0.1
            historic_event blue_wizards_attack_ai
        end_if


        if I_SettlementOwner Khand = khand
            spawn_army
                faction scripts
                character	Pallando, named character, age 33, x 492, y 145, portrait PallandoAi, hero_ability PALLANDO, label pallando_4
                traits		HeroAbilityPallando 1, CustomBG 1, MaiaRace 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Blacklock Engineers	exp 0 armour 0 weapon_lvl 0
            end
            give_everything_to_faction scripts slave false
            console_command give_trait pallando_4 Pallando 1
            console_command give_ancillary pallando_4 pallando_staff
            console_command give_ancillary pallando_4 pallando_pouch
            send_character_off_map pallando_4
            spawn_army
                faction slave
                character	Pallando, named character, x 492, y 167, direction W, battle_model pellando, label pallando_4
                unit		Blacklock Engineers		exp 5 armour 1 weapon_lvl 0
                unit		Blacklock Engineers		exp 2 armour 0 weapon_lvl 0
                unit		Iron Fist Hammers			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Stonefoot Spearmen			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Orocarni Warriors			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Stiffbeard Archers			exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
                unit		Dwarven Catapult					exp 2 armour 0 weapon_lvl 0
            end

            create_unit pallando_4, Uushixia Stormriders,				num 1, exp 3, arm 0, wep 0
            create_unit pallando_4, Windriders of Khand,			num 2, exp 3, arm 0, wep 0
            create_unit pallando_4, Warlords Kataphract Archers,	num 2, exp 3, arm 0, wep 0
            create_unit pallando_4, Variag Bowmen,		num 2, exp 3, arm 0, wep 0
            create_unit pallando_4, Warlords Guard,			num 1, exp 3, arm 0, wep 0

            if not I_SettlementUnderSiege Khand
                console_command auto_win attacker
                siege_settlement pallando_4, Khand, attack
            end_if
            campaign_wait 0.1
            if  I_EventCounter blue_wizards_attack_ai = 0
                historic_event blue_wizards_attack_ai
            end_if
        end_if

        set_event_counter death_message 1
        set_event_counter blue_wizards_end 1

        terminate_monitor
    end_monitor

    ;######################### Death messages of the enemy unique characters ################

    monitor_event FactionTurnStart FactionIsLocal
        and I_EventCounter death_message = 1
        log always --------------------------- khand character died messages--------------------------

        if I_IsFactionAIControlled khand
            and I_IsFactionAIControlled england
            terminate_monitor
        end_if

        ;###### Good Khand ######

        if I_EventCounter ancantar_attack = 1
            and not I_WorldwideAncillaryExists ancantar_mace
            historic_event ancantar_dead factions { khand, }
            terminate_monitor
        end_if

        ;###### Evil Khand ######

        if I_EventCounter blue_wizards_attack = 1
            and not I_WorldwideAncillaryExists pallando_staff
            and I_EventCounter pallando_dead = 0
            historic_event pallando_dead factions { khand, }
            if I_EventCounter alatar_dead = 1
                terminate_monitor
            end_if
        end_if
        if I_EventCounter blue_wizards_attack = 1
            and not I_WorldwideAncillaryExists alatar_staff
            and I_EventCounter alatar_dead = 0
            historic_event alatar_dead factions { khand, }
            if I_EventCounter pallando_dead = 1
                terminate_monitor
            end_if
        end_if

        ;###### Mordor ######

        if not I_IsFactionAIControlled england
            and not I_WorldwideAncillaryExists pallando_staff
            and I_EventCounter pallando_dead_mordor = 0
            historic_event pallando_dead_mordor factions { england, }
            if I_EventCounter alatar_dead_mordor = 1
                terminate_monitor
            end_if
        end_if
        if not I_IsFactionAIControlled england
            and not I_WorldwideAncillaryExists alatar_staff
            and I_EventCounter alatar_dead_mordor = 0
            historic_event alatar_dead_mordor factions { england, }
            if I_EventCounter pallando_dead_mordor = 1
                terminate_monitor
            end_if
        end_if
    end_monitor

    ;;;;Monitor to prevent the player from disabling the choice event by exiting the game
    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_khand == 1
            and I_CompareCounter blue_wizards_awaiting_answer = 1
            campaign_wait 0.1
            historic_event blue_wizards_choice true factions { khand, }
        end_if
        if I_IsFactionAIControlled khand
            terminate_monitor
        end_if
    end_monitor

    ;########################## Script: Ar-Adunaim KP Bonus #########################

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType russia
        log always --------------------------- set AA kings purse--------------------------
        set_kings_purse russia 3000
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType russia
        and I_TurnNumber >= 1
        log always --------------------------- aa kings purse decrease monitor--------------------------
        if I_NumberOfSettlements russia = 1
            set_kings_purse russia 7000
        end_if
        if I_NumberOfSettlements russia = 2
            set_kings_purse russia 5000
        end_if
        if I_NumberOfSettlements russia = 3
            set_kings_purse russia 4000
        end_if
        if I_NumberOfSettlements russia = 4
            set_kings_purse russia 2000
        end_if
        if I_NumberOfSettlements russia >= 5
            set_kings_purse russia 1500
        end_if
        if I_NumberOfSettlements russia >= 5
            terminate_monitor
        end_if
    end_monitor

    ;########################## Script: Ar-Adunaim Enhanced Conscription #########################
    ; by Wicked

	monitor_event BuildingCompleted SettlementName Carn_Dum
        and SettlementBuildingFinished = umbar_control_camp
        log always --------------------------- carn dum AA--------------------------
			spawn_army
				faction russia
				character	Herumor, named character,  age 25, x 205, y 453, hero_ability NUMENOR, label herumor_1
				traits		NumenoreanRace 1, HeroAbilityNumenor 1, GoodCommander 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, HaleAndHearty 1, NaturalMilitarySkill 1, ColdWarrior 1
				unit		Northern Sons		exp 2 armour 0 weapon_lvl 1
			end
            set_event_counter northern_sons 1
			console_command give_ancillary herumor_1 apothecary
			terminate_monitor
	end_monitor

    monitor_event BuildingCompleted SettlementName Gobel_Ancalimon
		and SettlementBuildingFinished = umbar_control_camp
        log always --------------------------- faenobel AA--------------------------
			spawn_army
				faction russia
				character	Naktir, named character,  age 24, x 322, y 118, hero_ability NUMENOR, label naktir_1
				traits		NumenoreanRace 1, HeroAbilityNumenor 1, GoodCommander 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, HaleAndHearty 1, NaturalMilitarySkill 1, AridWarrior 1
				unit		Troll-men Hunters		exp 3 armour 1 weapon_lvl 1
			end
			console_command give_ancillary naktir_1 apothecary
			terminate_monitor
	end_monitor

	monitor_event BuildingCompleted SettlementName Kings_Land
		and SettlementBuildingFinished = umbar_control_camp
        log always --------------------------- edoras AA--------------------------
			spawn_army
				faction russia
				character	Belzagar, named character,  age 24, x 252, y 252, hero_ability NUMENOR, label belzagar_1
				traits		NumenoreanRace 1, HeroAbilityNumenor 1, GoodCommander 1, LoyaltyStarter 1, PietyStarter 1, Energetic 1, HaleAndHearty 1, NaturalMilitarySkill 1
				unit		Riddermark Cavalry		exp 3 armour 3 weapon_lvl 1
			end
			console_command give_ancillary belzagar_1 apothecary
			terminate_monitor
	end_monitor



    ;###################### Script: Glittering Caves #####################

    declare_counter rohan_dwarves_allied_turns
    declare_counter rohan_dwarves_generic_counter
    declare_counter rohan_dwarves_hostility
    declare_counter rohan_dwarves_request_awaiting_answer
    declare_counter rohan_dwarves_request_status

    monitor_event GeneralCaptureSettlement SettlementName Helms_Deep
        and not FactionType milan
        log always --------------------------- helms deep conquered--------------------------
        if not I_IsFactionAIControlled milan
            if I_CompareCounter rohan_dwarves_request_status = 2
                historic_event rohan_dwarves_uturn_conquered factions { milan, }
                set_counter rohan_dwarves_request_status 5
                terminate_monitor
            end_if
            if I_CompareCounter rohan_dwarves_request_status = 3
                console_command add_population, Helms_Deep -40
                console_command add_population, Nan_i_Naugrim 40
                destroy_buildings milan hinterland_glittering_caves false
                console_command create_building Helms_Deep glittering_caves_abandoned
                historic_event rohan_dwarves_abandoned_conquered factions { milan, }
                set_counter rohan_dwarves_request_status 5
                terminate_monitor
            end_if
            if I_CompareCounter rohan_dwarves_request_status >= 4
                console_command add_population, Helms_Deep -80
                console_command add_population, Nan_i_Naugrim 80
                destroy_buildings milan hinterland_glittering_caves false
                console_command create_building Helms_Deep glittering_caves_abandoned
                historic_event rohan_dwarves_abandoned_conquered factions { milan, }
                set_counter rohan_dwarves_request_status 5
                terminate_monitor
            end_if
        end_if
        if I_IsFactionAIControlled milan
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction hungary = AtWar
        log always --------------------------- rohan war el--------------------------
        set_counter rohan_dwarves_allied_turns 0
        set_counter rohan_dwarves_hostility 1
        if I_CompareCounter rohan_dwarves_request_status = 5
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors = AtWar
        log always --------------------------- rohan war erebor--------------------------
        set_counter rohan_dwarves_allied_turns 0
        set_counter rohan_dwarves_hostility 1
        if I_CompareCounter rohan_dwarves_request_status = 5
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction norway = AtWar
        log always --------------------------- rohan war KD--------------------------
        set_counter rohan_dwarves_allied_turns 0
        set_counter rohan_dwarves_hostility 1
        if I_CompareCounter rohan_dwarves_request_status = 5
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction hungary = Allied
        and DiplomaticStanceFromFaction moors < AtWar
        and DiplomaticStanceFromFaction norway < AtWar
        log always --------------------------- rohan not at war with dwarves 1--------------------------

        if I_CompareCounter rohan_dwarves_request_status >= 1
            terminate_monitor
        end_if

        inc_counter rohan_dwarves_allied_turns 1

        if I_CompareCounter rohan_dwarves_allied_turns >= 20
            set_counter rohan_dwarves_request_status 1
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction moors = Allied
        and DiplomaticStanceFromFaction hungary < AtWar
        and DiplomaticStanceFromFaction norway < AtWar
        log always --------------------------- rohan not at war with dwarves 2--------------------------

        if I_CompareCounter rohan_dwarves_request_status >= 1
            terminate_monitor
        end_if

        inc_counter rohan_dwarves_allied_turns 1

        if I_CompareCounter rohan_dwarves_allied_turns >= 20
            set_counter rohan_dwarves_request_status 1
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionType milan
        log always --------------------------- glittering caves script--------------------------
        if not I_IsFactionAIControlled milan
            if I_CompareCounter rohan_dwarves_request_status = 5
                terminate_monitor
            end_if
            if I_CompareCounter rohan_dwarves_request_status = 4
                if I_CompareCounter rohan_dwarves_hostility = 0
                    if I_CompareCounter rohan_dwarves_generic_counter > 0
                        inc_counter rohan_dwarves_generic_counter -1
                    end_if
                    if I_CompareCounter rohan_dwarves_generic_counter = 0
                        destroy_buildings milan hinterland_glittering_caves false
                        console_command create_building Helms_Deep glittering_caves_upgraded
                        historic_event rohan_dwarves_caves_upgraded factions { milan, }
                        set_counter rohan_dwarves_request_status 5
                        terminate_monitor
                    end_if
                end_if
                if I_CompareCounter rohan_dwarves_hostility = 1
                    console_command add_population, Helms_Deep -150
                    console_command add_population, Nan_i_Naugrim 150
                    destroy_buildings milan hinterland_glittering_caves false
                    console_command create_building Helms_Deep glittering_caves_abandoned
                    historic_event rohan_dwarves_abandoned_hostility factions { milan, }
                    terminate_monitor
                end_if
            end_if
            if I_CompareCounter rohan_dwarves_request_status = 3
                if I_CompareCounter rohan_dwarves_hostility = 0
                    if I_CompareCounter rohan_dwarves_generic_counter > 0
                        inc_counter rohan_dwarves_generic_counter -1
                    end_if
                    if I_CompareCounter rohan_dwarves_generic_counter = 0
                        destroy_buildings milan hinterland_glittering_caves false
                        console_command create_building Helms_Deep glittering_caves_completed
                        historic_event rohan_dwarves_caves_completed factions { milan, }
                        set_counter rohan_dwarves_generic_counter 6
                        set_counter rohan_dwarves_request_status 4
                    end_if
                end_if
                if I_CompareCounter rohan_dwarves_hostility = 1
                    console_command add_population, Helms_Deep -150
                    console_command add_population, Nan_i_Naugrim 150
                    destroy_buildings milan hinterland_glittering_caves false
                    console_command create_building Helms_Deep glittering_caves_abandoned
                    historic_event rohan_dwarves_abandoned_hostility factions { milan, }
                    terminate_monitor
                end_if
            end_if
            if I_CompareCounter rohan_dwarves_request_status = 2
                if I_CompareCounter rohan_dwarves_hostility = 0
                    if I_CompareCounter rohan_dwarves_generic_counter > 0
                        inc_counter rohan_dwarves_generic_counter -1
                    end_if
                    if I_CompareCounter rohan_dwarves_generic_counter = 0
                        console_command add_population, Helms_Deep 150
                        console_command add_population, Nan_i_Naugrim -150
                        set_event_counter rohan_dwarves_turmoil 1
                        historic_event rohan_dwarves_arrived factions { milan, }
                        set_counter rohan_dwarves_generic_counter 12
                        set_counter rohan_dwarves_request_status 3
                    end_if
                end_if
                if I_CompareCounter rohan_dwarves_hostility = 1
                    historic_event rohan_dwarves_uturn_hostility factions { milan, }
                    terminate_monitor
                end_if
            end_if
            if I_CompareCounter rohan_dwarves_request_status = 1
                if I_CompareCounter rohan_dwarves_hostility = 0
                    and I_SettlementOwner Helms_Deep = milan
                    set_counter rohan_dwarves_request_awaiting_answer 1
                    historic_event rohan_dwarves_request true factions { milan, }
                end_if
                if I_CompareCounter rohan_dwarves_hostility = 1
                    terminate_monitor
                end_if
            end_if
        end_if
        if I_IsFactionAIControlled milan
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnEnd FactionType milan
        log always --------------------------- GC hostility reset--------------------------
        if not I_IsFactionAIControlled milan
            set_counter rohan_dwarves_hostility 0
        end_if
        if I_IsFactionAIControlled milan
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType milan
        and I_TurnNumber = 70
        and IsFactionAIControlled
        and DiplomaticStanceFromFaction moors < AtWar
        and DiplomaticStanceFromFaction hungary < AtWar
        and DiplomaticStanceFromFaction norway < AtWar
        log always --------------------------- upgraded caves--------------------------

        if I_SettlementOwner Helms_Deep = milan
            destroy_buildings milan hinterland_glittering_caves false
            console_command create_building Helms_Deep glittering_caves_upgraded
            console_command create_unit Helms_Deep "Guard of the Caves" 1 0 0 0
        end_if

        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType rohan_dwarves_request_accepted
        and EventCounter = 1
        log always --------------------------- GC accepted--------------------------
        set_counter rohan_dwarves_request_awaiting_answer 0
        console_command add_money -4000
        set_faction_standing hungary milan 1.0
        set_faction_standing milan hungary 1.0
        historic_event rohan_dwarves_request_success factions { milan, }
        set_counter rohan_dwarves_generic_counter 3
        set_counter rohan_dwarves_request_status 2
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType rohan_dwarves_request_declined
        and EventCounter = 1
        log always --------------------------- GC declined--------------------------
        set_counter rohan_dwarves_request_awaiting_answer 0
        set_faction_standing hungary milan 0.5
        set_faction_standing milan hungary 0.5
        historic_event rohan_dwarves_request_fail factions { milan, }
        set_counter rohan_dwarves_request_status 5
        terminate_monitor
    end_monitor

    monitor_event GameReloaded TrueCondition
        if I_CompareCounter faction_ID_milan == 1
            and I_CompareCounter rohan_dwarves_request_awaiting_answer = 1
            campaign_wait 0.1
            historic_event rohan_dwarves_request true factions { milan, }
        end_if
        if I_IsFactionAIControlled milan
            terminate_monitor
        end_if
    end_monitor

    ;####################### Script: Last Stand ##########################
    
	declare_counter ls_da
	declare_counter ls_gondor
	declare_counter ls_rohan
	declare_counter ls_nd
	declare_counter ls_bree
	declare_counter ls_av
	declare_counter ls_erebor
	declare_counter ls_el
	declare_counter ls_he
	declare_counter ls_lorien
	declare_counter ls_wr
	declare_counter ls_dale
	declare_counter ls_isengard
	declare_counter ls_gundabad
	declare_counter ls_ened
	declare_counter ls_angmar
	declare_counter ls_moria
	declare_counter ls_rhun
	declare_counter ls_harad
	declare_counter ls_khand
	declare_counter ls_dorwin
	declare_counter ls_dg
	declare_counter rohan_dwarves
	declare_counter av_allied_silvans
	declare_counter dg_allied_rhun
	
	;Rohan allied Dwarves for AI
	monitor_event PreFactionTurnStart FactionType milan
        and IsFactionAIControlled
        and DiplomaticStanceFromFaction hungary = Allied
		if not I_IsFactionAIControlled milan
			terminate_monitor
		end_if
		inc_counter rohan_dwarves 1
		terminate_monitor
    end_monitor
    
	monitor_event PreFactionTurnStart FactionType milan
        and IsFactionAIControlled
        and DiplomaticStanceFromFaction moors = Allied
		if not I_IsFactionAIControlled milan
			terminate_monitor
		end_if
		inc_counter rohan_dwarves 1
		terminate_monitor
    end_monitor
    
	monitor_event PreFactionTurnStart FactionType milan
        and IsFactionAIControlled
        and DiplomaticStanceFromFaction norway = Allied
		if not I_IsFactionAIControlled milan
			terminate_monitor
		end_if
		inc_counter rohan_dwarves 1
		terminate_monitor
    end_monitor
	
	;Anduin allied to Silvans 
	monitor_event PreFactionTurnStart FactionType timurids
        and DiplomaticStanceFromFaction ireland = Allied
		and DiplomaticStanceFromFaction mongols = Allied
        and I_CompareCounter av_allied_silvans == 0
		if not I_IsFactionAIControlled timurids
			terminate_monitor
		end_if
        set_counter av_allied_silvans 1
    end_monitor
    
    monitor_event PreFactionTurnStart FactionType timurids
        and not DiplomaticStanceFromFaction ireland = Allied
		and not DiplomaticStanceFromFaction mongols = Allied
        and I_CompareCounter av_allied_silvans == 1
		if not I_IsFactionAIControlled timurids
			terminate_monitor
		end_if
        set_counter av_allied_silvans 0
    end_monitor
	
	;DG allied rhun
	monitor_event PreFactionTurnStart FactionType poland
        and DiplomaticStanceFromFaction venice = Allied
        and I_CompareCounter dg_allied_rhun == 0
		if not I_IsFactionAIControlled timurids
			terminate_monitor
		end_if
        set_counter dg_allied_rhun 1
    end_monitor
    
	monitor_event PreFactionTurnStart FactionType poland
        and not DiplomaticStanceFromFaction venice = Allied
        and I_CompareCounter dg_allied_rhun == 1
		if not I_IsFactionAIControlled timurids
			terminate_monitor
		end_if
        set_counter dg_allied_rhun 0
    end_monitor
    

    monitor_event FactionTurnStart IsFactionAIControlled
        and I_TurnNumber > 1
        if I_CompareCounter faction_ID_aztecs == 1
            and I_NumberOfSettlements aztecs <= 3
            and I_EventCounter last_stand_dunland = 0
            log always --------------------------- last stand dunland-------------------------
            historic_event last_stand_dunland
            increment_kings_purse aztecs 3000
            spawn_army
                faction aztecs
                character	random_name, named character, age 24, x 222, y 320, family, direction SW, label dunland_ls
                traits		MiddleManRace 1, Dunlending 1, AIBoost 1, Berserker 1, Energetic 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, Wulfingir 1
                unit		Brehins Oathband				exp 5 armour 1 weapon_lvl 1
                unit		Wulfingir		                exp 4 armour 1 weapon_lvl 0	
                unit		Wulfingir		                exp 4 armour 1 weapon_lvl 0	
                unit		Wulfingir		                exp 4 armour 1 weapon_lvl 0		
				unit		Horse-fellers		exp 4 armour 1 weapon_lvl 0	
				unit		Horse-fellers		exp 4 armour 1 weapon_lvl 0
                unit		Dunnish Warspear-Throng		exp 4 armour 1 weapon_lvl 0		
				unit		Dunhird Feudkeepers		    exp 4 armour 1 weapon_lvl 0	
				unit		Dunnish Derfelmen		        exp 4 armour 1 weapon_lvl 0	
                unit		Dunnish Warspear-Throng		exp 4 armour 1 weapon_lvl 0		
				unit		Dunhird Feudkeepers		    exp 4 armour 1 weapon_lvl 0	
				unit		Dunnish Derfelmen		        exp 4 armour 1 weapon_lvl 0	
				unit		Brehins Sword-Wielders		exp 4 armour 1 weapon_lvl 0	
				unit		Brehins Sword-Wielders		exp 4 armour 1 weapon_lvl 0	
				unit		Frekkalingir		            exp 4 armour 1 weapon_lvl 0	
				unit		Frekkalingir		            exp 4 armour 1 weapon_lvl 0	
            end
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
            and I_NumberOfSettlements byzantium <= 3
            and I_EventCounter last_stand_dorwinion = 0
            log always --------------------------- last stand dorwinion-------------------------
            historic_event last_stand_dorwinion
            increment_kings_purse byzantium 3000
            spawn_army
                faction byzantium
                character	random_name, named character, age 38, x 422, y 344, family, direction SE, label dorwin_ls
                traits		GoodManRace 1, Dorwinrim 1, AIBoost 1, GoodAmbusher 1, GoodCommander 2, GoodDefender 2, HaleAndHearty 2, Loyal 3, LoyaltyStarter 1, PoliticsSkill 1, PietyStarter 1
                unit		Council Wardens				exp 5 armour 0 weapon_lvl 1
                unit		Kugath Ford-Guard			exp 3 armour 0 weapon_lvl 0
                unit		Regent Axeguard		exp 3 armour 0 weapon_lvl 0				
                unit		Regent Bowguard			exp 5 armour 0 weapon_lvl 1
                unit		Leofthiuda Retainers		exp 2 armour 0 weapon_lvl 0		
                unit		Athala Rangers		exp 2 armour 0 weapon_lvl 0		
                unit		Athala Rangers		exp 2 armour 0 weapon_lvl 0				
            end
            set_counter ls_dorwin 8
			if I_EventCounter dorwinion_elf = 1
			and I_CompareCounter ls_dorwin < 12
				console_command create_unit dorwin_ls "Avari Shadows" 2 3 1 1
				console_command create_unit dorwin_ls "Avarin Heruvi" 1 3 1 1
				console_command create_unit dorwin_ls "Avari Warriors" 2 3 1 1
				console_command create_unit dorwin_ls "Avari Spearmen" 2 3 1 1
				inc_counter ls_dorwin 9
			end_if
			if I_EventCounter dorwinion_elf = 0
			and I_CompareCounter ls_dorwin < 17
				console_command create_unit dorwin_ls "Avari Shadows" 1 3 1 1
				console_command create_unit dorwin_ls "Avari Warriors" 1 3 1 1
				console_command create_unit dorwin_ls "Avari Spearmen" 1 3 1 1
				inc_counter ls_dorwin 4
			end_if
			if I_SettlementOwner Dorwinion = byzantium
			and I_CompareCounter ls_dorwin < 14
				console_command create_unit dorwin_ls "Grapevine-Lancers" 2 3 1 1
				console_command create_unit dorwin_ls "Vintner-Court Nobles" 2 3 1 1
				console_command create_unit dorwin_ls "Kugath Ford-Guard" 1 3 1 1
				console_command create_unit dorwin_ls "Regent Axeguard" 1 3 1 1
				console_command create_unit dorwin_ls "Regent Bowguard" 1 3 1 1
				inc_counter ls_dorwin 7
			end_if
			if I_SettlementOwner South_Dorwinion = byzantium
			and I_CompareCounter ls_dorwin < 16
				console_command create_unit dorwin_ls "Leofthiuda Retainers" 1 3 1 1
				console_command create_unit dorwin_ls "Kugath Ford-Guard" 1 3 1 1
				console_command create_unit dorwin_ls "Rouadengi Shieldbearers" 1 3 1 1
				console_command create_unit dorwin_ls "Vinefleet Mariners" 1 3 1 1
				inc_counter ls_dorwin 5
			end_if
			if I_SettlementOwner Uldonavan = byzantium
			and I_CompareCounter ls_dorwin < 16
				console_command create_unit dorwin_ls "Regent Axeguard" 1 3 1 1
				console_command create_unit dorwin_ls "Regent Bowguard" 1 3 1 1
				console_command create_unit dorwin_ls "Leofthiuda Far-riders" 1 3 1 1
				console_command create_unit dorwin_ls "Rouadengi CitizenGuard" 1 3 1 1
				console_command create_unit dorwin_ls "Rouadengi Piercers" 1 3 1 1
				inc_counter ls_dorwin 5
			end_if
			if I_SettlementOwner Nurunk = byzantium
			and I_CompareCounter ls_dorwin < 17
				console_command create_unit dorwin_ls "Avari Warriors" 1 3 1 1
				console_command create_unit dorwin_ls "Avari Spearmen" 1 3 1 1
				console_command create_unit dorwin_ls "Avari Shadows" 1 3 1 1
				inc_counter ls_dorwin 4
			end_if
			if I_CompareCounter ls_dorwin < 13
				console_command create_unit dorwin_ls "Vinefleet Mariners" 1 3 1 1
				console_command create_unit dorwin_ls "Rouadengi Piercers" 1 3 1 1
				console_command create_unit dorwin_ls "Rouadengi Shieldbearers" 1 3 1 1
				console_command create_unit dorwin_ls "Kugath Runners" 1 3 1 1
				console_command create_unit dorwin_ls "Leofthiuda Retainers" 1 3 1 1
				console_command create_unit dorwin_ls "Leofthiuda Clanband" 1 3 1 1
				inc_counter ls_dorwin 6
			end_if
			if I_CompareCounter ls_dorwin < 17
				console_command create_unit dorwin_ls "Kugath Ford-Guard" 1 3 1 1
				console_command create_unit dorwin_ls "Leofthiuda Far-riders" 1 3 1 1
				console_command create_unit dorwin_ls "Leofthiuda Clanband" 1 3 1 1
				console_command create_unit dorwin_ls "Kugath Runners" 1 3 1 1
				inc_counter ls_dorwin 4
			end_if
			if I_CompareCounter ls_dorwin < 19
				console_command create_unit dorwin_ls "Leofthiuda Clanband" 1 3 1 1
				console_command create_unit dorwin_ls "Kugath Runners" 1 3 1 1
				inc_counter ls_dorwin 2
			end_if
			if I_CompareCounter ls_dorwin < 20
				console_command create_unit dorwin_ls "Leofthiuda Clanband" 1 3 1 1
				inc_counter ls_dorwin 1
			end_if
			if I_CompareCounter ls_dorwin < 20
				console_command create_unit dorwin_ls "Leofthiuda Clanband" 1 3 1 1
				inc_counter ls_dorwin 1
			end_if
        end_if
        if I_CompareCounter faction_ID_denmark == 1
            and I_NumberOfSettlements denmark <= 3
            and I_EventCounter last_stand_da = 0
            and I_EventCounter reunited_kingdom = 0
            log always --------------------------- last stand dol amroth-------------------------
            historic_event last_stand_da
            increment_kings_purse denmark 3000
			spawn_army
				faction denmark
                character	random_name, named character, age 26, x 245, y 181, family, direction NE, label da_ls
                traits		DunedainRace 1, Amrothian 1, AIBoost 1, GoodCommander 2, GoodDefender 2, KindRuler 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategyChivalryGood 1
				unit		Royal Swan-Guard				    exp 6 armour 3 weapon_lvl 1
				unit		Knights of the Silver Swan			exp 4 armour 2 weapon_lvl 1
				unit		Talon Knights				        exp 4 armour 2 weapon_lvl 0					
				unit		Sea-ward Spearmen					exp 3 armour 2 weapon_lvl 0
				unit		Sea-ward Footmen					exp 3 armour 2 weapon_lvl 0
				unit		Sea-ward Lancers					exp 3 armour 2 weapon_lvl 0
				unit		Amrothian Squires					exp 2 armour 1 weapon_lvl 0
				unit		Gondor Archer Militia 				exp 2 armour 1 weapon_lvl 0
				unit		Amrothian Pikemen					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_da 9
			if I_NumberOfSettlements sicily >= 8
			and I_CompareCounter ls_da < 15
				console_command create_unit da_ls "Citadel Guard" 1 3 1 1
				console_command create_unit da_ls "Gondor Infantry" 2 3 1 1
				console_command create_unit da_ls "Gondor Spearmen" 1 3 1 1
				console_command create_unit da_ls "Gondor Archers" 1 3 1 1
				inc_counter ls_da 5
			end_if
			if I_SettlementOwner Edhellond = denmark
			and I_CompareCounter ls_da < 19
				console_command create_unit da_ls "White Knights" 3 3 1 1
				inc_counter ls_da 3
			end_if
			if I_SettlementOwner Belfalas = denmark
			and I_CompareCounter ls_da < 17
				console_command create_unit da_ls "Tirith Aear Wardens" 2 3 1 1
				console_command create_unit da_ls "Tirith Aear Knights" 2 3 1 1
				inc_counter ls_da 4
			end_if
			if I_CompareCounter ls_da < 17
				console_command create_unit da_ls "Coastal Wardens" 1 3 1 1
				console_command create_unit da_ls "Haven Guard" 2 3 1 1
				console_command create_unit da_ls "Nimrodel Mariners" 1 3 1 1
				inc_counter ls_da 4
			end_if
			if I_CompareCounter ls_da < 19
				console_command create_unit da_ls "Coastal Wardens" 1 3 1 1
				console_command create_unit da_ls "Haven Guard" 1 3 1 1
				inc_counter ls_da 2
			end_if
			if I_CompareCounter ls_da < 20
				console_command create_unit da_ls "Nimrodel Mariners" 1 3 1 1
				inc_counter ls_da 1
			end_if
			if I_CompareCounter ls_da < 18
				console_command create_unit da_ls "Amrothian Pikemen" 1 3 1 1
				console_command create_unit da_ls "Amrothian Archers" 1 3 1 1
				console_command create_unit da_ls "Amrothian Guardsmen" 1 3 1 1
				inc_counter ls_da 3
			end_if
			if I_CompareCounter ls_da < 19
				console_command create_unit da_ls "Amrothian Pikemen" 1 3 1 1
				console_command create_unit da_ls "Amrothian Squires" 1 3 1 1
				inc_counter ls_da 2
			end_if
			if I_CompareCounter ls_da < 19
				console_command create_unit da_ls "Amrothian Archers" 1 3 1 1
				console_command create_unit da_ls "Amrothian Squires" 1 3 1 1
				inc_counter ls_da 2
			end_if
			if I_CompareCounter ls_da < 19
				console_command create_unit da_ls "Sea-ward Lancers" 1 3 1 1
				console_command create_unit da_ls "Amrothian Pikemen" 1 3 1 1
				inc_counter ls_da 2
			end_if
			if I_CompareCounter ls_da < 20
				console_command create_unit da_ls "Amrothian Squires" 1 3 1 1
				inc_counter ls_da 1
			end_if
			if I_CompareCounter ls_da < 20
				console_command create_unit da_ls "Amrothian Pikemen" 1 3 1 1
				inc_counter ls_da 1
			end_if
			if I_CompareCounter ls_da < 20
				console_command create_unit da_ls "Amrothian Archers" 1 3 1 1
				inc_counter ls_da 1
			end_if
        end_if
        if I_CompareCounter faction_ID_france == 1
            and I_NumberOfSettlements france = 1
            and I_EventCounter last_stand_isengard = 0
            log always --------------------------- last stand isengard-------------------------
            historic_event last_stand_isengard
            increment_kings_purse france 3000
            spawn_army
                faction france
                character	random_name, named character, age 28, x 222, y 277, family, direction SW, label isengard_ls
                traits		UrukHaiRace 1, AIBoost 1, Berserker 1, Bloodthirsty 1, GoodCommander 3, GoodDefender 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Uruk-hai Bodyguards				exp 5 armour 1 weapon_lvl 1
				unit		Warg Marauders			        exp 3 armour 2 weapon_lvl 0
				unit		Uruk Reavers					exp 2 armour 1 weapon_lvl 0
				unit		Uruk-hai Pikemen				exp 2 armour 1 weapon_lvl 0
				unit		Uruk-hai Pikemen				exp 2 armour 1 weapon_lvl 0
				unit		Uruk-hai Infantry				exp 2 armour 1 weapon_lvl 0
				unit		Uruk-hai Infantry				exp 2 armour 1 weapon_lvl 0
				unit		Berserkers					    exp 2 armour 1 weapon_lvl 0
				unit		Half Orc Spearmen				exp 2 armour 1 weapon_lvl 0
				unit		Half Orc Baneguard			    exp 2 armour 1 weapon_lvl 0
				unit		Uruk-hai Crossbow			    exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_isengard 11
			if I_EventCounter saruman_ring_event = 1
			and I_CompareCounter ls_isengard < 16
				console_command create_unit isengard_ls "Nazg Hai" 5 3 1 1
				inc_counter ls_isengard 5
			end_if
			if I_NumberOfSettlements aztecs > 0
			and I_CompareCounter ls_isengard < 16
				console_command create_unit isengard_ls "Dunnish Speutamen" 1 3 1 1
				console_command create_unit isengard_ls "Huntmasters" 1 3 1 1
				console_command create_unit isengard_ls "Dunforgoil Riders" 1 3 1 1
				console_command create_unit isengard_ls "Dunnish Warspear-Throng" 2 3 1 1
				inc_counter ls_isengard 5
			end_if
			if I_CompareCounter ls_isengard < 13
				console_command create_unit isengard_ls "Half Orc Spearmen" 1 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Raiders" 2 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Crossbow" 1 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Archers" 2 3 1 1
				console_command create_unit isengard_ls "Warg Marauders" 1 3 1 1
				console_command create_unit isengard_ls "Uruk Reavers" 1 3 1 1
				inc_counter ls_isengard 8
			end_if
			if I_CompareCounter ls_isengard < 17
				console_command create_unit isengard_ls "Uruk Reavers" 1 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Raiders" 1 3 1 1
				console_command create_unit isengard_ls "Half Orc Baneguard" 1 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Archers" 1 3 1 1
				inc_counter ls_isengard 4
			end_if
			if I_CompareCounter ls_isengard < 19
				console_command create_unit isengard_ls "Warg Marauders" 1 3 1 1
				console_command create_unit isengard_ls "Uruk-hai Raiders" 1 3 1 1
				inc_counter ls_isengard 2
			end_if
			if I_CompareCounter ls_isengard < 20
				console_command create_unit isengard_ls "Uruk Reavers" 1 3 1 1
				inc_counter ls_isengard 1
			end_if
        end_if
        if I_CompareCounter faction_ID_hre == 1
            and I_NumberOfSettlements hre <= 3
            and I_EventCounter last_stand_misty = 0
            log always --------------------------- last stand moria-------------------------
            historic_event last_stand_misty
            increment_kings_purse hre 3000
            spawn_army
                faction hre
                character	random_name, named character, age 25, x 227, y 341, family, direction SW, label moria_ls
                traits		OrcRace 1, AIBoost 1, GoodAmbusher 1, GoodCommander 1, GoodDefender 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Goblin Bodyguards			exp 5 armour 1 weapon_lvl 1
				unit		Misty Mangonel			exp 5 armour 1 weapon_lvl 1
				unit		Warg Pack			exp 5 armour 1 weapon_lvl 1
				unit		Uruk Overseers			exp 5 armour 1 weapon_lvl 1
				unit		Heavy Goblin Infantry			exp 5 armour 1 weapon_lvl 1
				unit		Heavy Goblin Halberd			exp 5 armour 1 weapon_lvl 1
				unit		Heavy Goblin Archers			exp 5 armour 1 weapon_lvl 1
				unit		Heavy Goblin Crossbows			exp 5 armour 1 weapon_lvl 1
				unit		Trolls			                exp 5 armour 1 weapon_lvl 1
            end
            set_counter ls_moria 9
			if I_SettlementOwner West_Moria == hre
			and I_CompareCounter ls_moria < 16
				console_command create_unit moria_ls "Mountain Uruks" 1 3 1 1
				console_command create_unit moria_ls "Trolls" 1 3 1 1
				console_command create_unit moria_ls "Azogs Defilers" 1 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Crossbows" 1 3 1 1
				console_command create_unit moria_ls "Mountain-Orc Hunters" 1 3 1 1
				inc_counter ls_moria 5
			end_if
			if I_SettlementOwner East_Moria == hre
			and I_CompareCounter ls_moria < 16
				console_command create_unit moria_ls "Mountain Uruks" 1 3 1 1
				console_command create_unit moria_ls "Trolls" 1 3 1 1
				console_command create_unit moria_ls "Azogs Defilers" 1 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Infantry" 1 3 1 1
				console_command create_unit moria_ls "Snaga Skirmishers" 1 3 1 1
				inc_counter ls_moria 5
			end_if
			if I_SettlementOwner High_Pass == hre
			and I_CompareCounter ls_moria < 14
				console_command create_unit moria_ls "Mountain Uruks" 1 3 1 1
				console_command create_unit moria_ls "Warg Riders" 1 3 1 1
				console_command create_unit moria_ls "Warg Scouts" 2 3 1 1
				console_command create_unit moria_ls "Goblin Archers" 1 3 1 1
				console_command create_unit moria_ls "Goblin Band" 2 3 1 1
				inc_counter ls_moria 7
			end_if
			if I_SettlementOwner Central_Mountains == hre
			and I_CompareCounter ls_moria < 16
				console_command create_unit moria_ls "Mountain Uruks" 1 3 1 1
				console_command create_unit moria_ls "Trolls" 1 3 1 1
				console_command create_unit moria_ls "Mountain-Orc Hunters" 2 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Archers" 1 3 1 1
				inc_counter ls_moria 5
			end_if
			if I_SettlementOwner Hollin == hre
			and I_CompareCounter ls_moria < 16
				console_command create_unit moria_ls "Warg Pack" 1 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Crossbows" 1 3 1 1
				console_command create_unit moria_ls "Warg Riders" 1 3 1 1
				console_command create_unit moria_ls "Warg Scouts" 1 3 1 1
				console_command create_unit moria_ls "Goblin Infantry" 1 3 1 1
				inc_counter ls_moria 5
			end_if
			if I_CompareCounter ls_moria < 13
				console_command create_unit moria_ls "Heavy Goblin Crossbows" 1 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Halberd" 2 3 1 1
				console_command create_unit moria_ls "Heavy Goblin Archers" 1 3 1 1
				console_command create_unit moria_ls "Snaga Stalkers" 2 3 1 1
				console_command create_unit moria_ls "Snaga Skirmishers" 1 3 1 1
				console_command create_unit moria_ls "Snaga Archers" 1 3 1 1
				inc_counter ls_moria 8
			end_if
			if I_CompareCounter ls_moria < 17
				console_command create_unit moria_ls "Heavy Goblin Infantry" 1 3 1 1
				console_command create_unit moria_ls "Goblin Infantry" 1 3 1 1
				console_command create_unit moria_ls "Warg Scouts" 1 3 1 1
				console_command create_unit moria_ls "Mountain-Orc Hunters" 1 3 1 1
				inc_counter ls_moria 4
			end_if
			if I_CompareCounter ls_moria < 19
				console_command create_unit moria_ls "Warg Riders" 1 3 1 1
				console_command create_unit moria_ls "Snaga Skirmishers" 1 3 1 1
				inc_counter ls_moria 2
			end_if
			if I_CompareCounter ls_moria < 20
				console_command create_unit moria_ls "Uruk Overseers" 1 3 1 1
				inc_counter ls_moria 1
			end_if
        end_if
        if I_CompareCounter faction_ID_hungary == 1
            and I_NumberOfSettlements hungary <= 2
            and I_EventCounter last_stand_eredluin = 0
            log always --------------------------- last stand EL-------------------------
            historic_event last_stand_eredluin
            increment_kings_purse hungary 3000
            spawn_army
                faction hungary
                character	random_name, named character, age 29, x 69, y 433, family, direction S
                traits		DwarvenRace 1, Firebeard 1, AIBoost 1, Energetic 1, GoodCommander 1, GoodDefender 1, SiegeDefender 1, HaleAndHearty 2, LoyaltyStarter 1, PietyStarter 1, Azaghal 1, CustomBG 1
                unit		Azaghals Tomb Protectors			exp 5 armour 1 weapon_lvl 1
                unit		Gabilgathol Guard					exp 5 armour 1 weapon_lvl 0				
  				unit		Longbeard Crossbows					exp 4 armour 2 weapon_lvl 1
				unit		Longbeard Phalanx				    exp 3 armour 2 weapon_lvl 0					
				unit		Longbeard Swordsmen					exp 3 armour 2 weapon_lvl 0
				unit		Ered Luin Scouts					exp 2 armour 1 weapon_lvl 0
				unit		Ered Luin Pikemen					exp 2 armour 1 weapon_lvl 0
				unit		Ered Luin Militia					exp 2 armour 1 weapon_lvl 0
			end
            set_counter ls_el 8
			if I_SettlementOwner Mt_Gundabad = hungary
			and I_CompareCounter ls_el < 20
				console_command create_unit el_ls "Hammers of Gundabad" 3 3 1 1
				inc_counter ls_el 3 
			end_if
			if I_EventCounter luin_ring_accepted = 1
			and I_CompareCounter ls_el < 19
				console_command create_unit el_ls "Grimborn Reavers" 4 3 1 1
				inc_counter ls_el 4
			end_if
			if I_EventCounter luin_ring_accepted = 0
			and I_CompareCounter ls_el < 19
				console_command create_unit el_ls "Azaghals Tomb Protectors" 4 3 1 1
				inc_counter ls_el 4 
			end_if
			if I_SettlementOwner Nan_i_Naugrim = hungary
			and I_CompareCounter ls_el < 19
				console_command create_unit el_ls "Broadbeam Marksmen" 1 3 1 1
				console_command create_unit el_ls "Longbeard Swordsmen" 1 3 1 1
				inc_counter ls_el 2
			end_if
			if I_SettlementOwner Ered_Luin = hungary
			and I_CompareCounter ls_el < 19
				console_command create_unit el_ls "Broadbeam Marksmen" 1 3 1 1
				console_command create_unit el_ls "Longbeard Swordsmen" 1 3 1 1
				inc_counter ls_el 2
			end_if
			if I_SettlementOwner South_Ered_Luin = hungary
			and I_CompareCounter ls_el < 18
				console_command create_unit el_ls "Firebeard Warriors" 2 3 1 1
				console_command create_unit el_ls "Longbeard Phalanx" 1 3 1 1
				console_command create_unit el_ls "Longbeard Crossbows" 1 3 1 1
				inc_counter ls_el 4
			end_if
			if I_CompareCounter ls_el < 13
				console_command create_unit el_ls "Ered Luin Militia" 2 3 1 1
				console_command create_unit el_ls "Ered Luin Pikemen" 2 3 1 1
				console_command create_unit el_ls "Longbeard Phalanx" 1 3 1 1
				console_command create_unit el_ls "Ered Luin Scouts" 1 3 1 1
				console_command create_unit el_ls "Dwarven Travellers" 1 3 1 1
				console_command create_unit el_ls "Dwarven Labourers" 1 3 1 1
				inc_counter ls_el 8
			end_if
			if I_CompareCounter ls_el < 17
				console_command create_unit el_ls "Longbeard Crossbows" 1 3 1 1
				console_command create_unit el_ls "Longbeard Swordsmen" 1 3 1 1
				console_command create_unit el_ls "Firebeard Warriors" 1 3 1 1
				console_command create_unit el_ls "Dwarven Labourers" 1 3 1 1
				inc_counter ls_el 4
			end_if
			if I_CompareCounter ls_el < 19
				console_command create_unit el_ls "Ered Luin Militia" 1 3 1 1
				console_command create_unit el_ls "Ered Luin Scouts" 1 3 1 1
				inc_counter ls_el 2
			end_if
			if I_CompareCounter ls_el < 20
				console_command create_unit el_ls "Dwarven Labourers" 1 3 1 1
				inc_counter ls_el 1
			end_if
        end_if
        if I_CompareCounter faction_ID_ireland == 1
            and I_NumberOfSettlements ireland < 3
            and I_EventCounter elven_union = 0
            and I_EventCounter last_stand_lorien = 0
            log always --------------------------- last stand lorien-------------------------
            historic_event last_stand_lorien
            increment_kings_purse ireland 3000
            spawn_army
                faction ireland
                character	random_name, named character, age 31, x 245, y 321, family, direction E, label lorien_ls
                traits		ElvenRace 1, Nandor 1, AIBoost 1, GoodAmbusher 1, GoodCommander 2, GoodDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Elbereths Sentinels			exp 5 armour 1 weapon_lvl 1
				unit		Galadhrim Archers			exp 5 armour 1 weapon_lvl 0				
  				unit		Galadhrim Guards			exp 4 armour 2 weapon_lvl 1
				unit		Galadhrim Swordsmen			exp 3 armour 2 weapon_lvl 0					
				unit		Lorien Lancers			    exp 3 armour 2 weapon_lvl 0
				unit		Gurveleg					exp 2 armour 1 weapon_lvl 0
				unit		Lorien Archers				exp 2 armour 1 weapon_lvl 0
				unit		Lorien Warders				exp 3 armour 2 weapon_lvl 0
				unit		Lorien Scouts				exp 2 armour 1 weapon_lvl 0
				unit		Gurdhinen				    exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_lorien 10
			if I_CompareCounter ls_lorien < 16
				console_command create_unit lorien_ls "Elvenkings Gateguard" 2 3 1 1
				console_command create_unit lorien_ls "Elder Council" 1 3 1 1
				console_command create_unit lorien_ls "Woodland Scouts" 1 3 1 1
				console_command create_unit lorien_ls "Woodland Horsearchers" 1 3 1 1
				inc_counter ls_lorien 5
			end_if
			if I_CharacterExists celeborn_1
			and I_CompareCounter ls_lorien < 19
				console_command create_unit lorien_ls "Berio I Ngelaidh" 2 3 1 1
				inc_counter ls_lorien 2
			end_if
			if I_SettlementOwner Celebrant = ireland
			and I_CompareCounter ls_lorien < 18
				console_command create_unit lorien_ls "Sentinels of Cerin Amroth" 2 3 1 1
				console_command create_unit lorien_ls "Yavannas Chosen" 1 3 1 1
				inc_counter ls_lorien 3
			end_if
			if I_SettlementOwner Lothlorien = ireland
			and I_CompareCounter ls_lorien < 20
				console_command create_unit lorien_ls "Yavannas Chosen" 1 3 1 1
				inc_counter ls_lorien 1
			end_if
			if I_CompareCounter ls_lorien < 19
				console_command create_unit lorien_ls "Lorien Sentries" 1 3 1 1
				console_command create_unit lorien_ls "Lorien Archers" 1 3 1 1
				inc_counter ls_lorien 2
			end_if
			if I_CompareCounter ls_lorien < 20
				console_command create_unit lorien_ls "Lorien Warders" 1 3 1 1
				inc_counter ls_lorien 1
			end_if
        end_if
        if I_CompareCounter faction_ID_khand == 1
            and I_NumberOfSettlements khand <= 3
            and I_EventCounter last_stand_khand = 0
            log always --------------------------- last stand khand-------------------------
            historic_event last_stand_khand
            increment_kings_purse khand 3000
            spawn_army
                faction khand
                character	random_name, named character, age 28, x 498, y 150, family, direction W, label khand_ls
                traits		BadManRace 1, WainriderTribe 1, AIBoost 1, Brave 1, GoodCommander 1, GoodDefender 3, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Variag Nobles				exp 5 armour 1 weapon_lvl 1
                unit		Warlords Guard			exp 5 armour 0 weapon_lvl 1
                unit		Warlords Kataphract Archers	exp 5 armour 0 weapon_lvl 0
                unit		Warlords Kataphracts			exp 4 armour 0 weapon_lvl 1
                unit		Variag Lancers			exp 3 armour 0 weapon_lvl 0
                unit		Variag Horse Archers			exp 3 armour 0 weapon_lvl 0					
            end
			set_counter ls_khand 6
			if I_EventCounter civil_war_end = 1
			and I_CompareCounter ls_khand < 19
				console_command create_unit khand_ls "Uushixia Stormriders" 2 3 1 1
				inc_counter ls_khand 2
			end_if
			if I_EventCounter good_khand_one = 1
			and I_CompareCounter ls_khand < 13
				console_command create_unit khand_ls "Stiffbeard Archers" 1 3 1 1
				console_command create_unit khand_ls "Stonefoot Spearmen" 1 3 1 1
				console_command create_unit khand_ls "Iron Fist Hammers" 2 3 1 1
				console_command create_unit khand_ls "Blacklock Engineers" 2 3 1 1
				console_command create_unit khand_ls "Orocarni Warriors" 2 3 1 1
				inc_counter ls_khand 8
			end_if
			if I_EventCounter evil_khand = 1
			and I_CompareCounter ls_khand < 15
				console_command create_unit khand_ls "Temple Wards" 2 3 1 1
				console_command create_unit khand_ls "Temple Marksmen" 2 3 1 1
				console_command create_unit khand_ls "Great Beasts" 2 3 1 1
				inc_counter ls_khand 6
			end_if
			if I_SettlementOwner Harad = khand
			and I_CompareCounter ls_khand < 15
				console_command create_unit khand_ls "Warlords Guard" 1 3 1 1
				console_command create_unit khand_ls "Warlords Kataphracts" 1 3 1 1
				console_command create_unit khand_ls "Warlords Kataphract Archers" 1 3 1 1
				console_command create_unit khand_ls "Variag Bowmen" 1 3 1 1
				console_command create_unit khand_ls "Nomad Warriors" 1 3 1 1
				console_command create_unit khand_ls "Windriders of Khand" 1 3 1 1
				inc_counter ls_khand 6
			end_if
			if I_SettlementOwner Khand = khand
			and I_CompareCounter ls_khand < 15
				console_command create_unit khand_ls "Variag Swordsmen" 1 3 1 1
				console_command create_unit khand_ls "Variag Lancers" 1 3 1 1
				console_command create_unit khand_ls "Variag Horse Archers" 1 3 1 1
				console_command create_unit khand_ls "Khandish Hunters" 1 3 1 1
				console_command create_unit khand_ls "Nomad Axemen" 1 3 1 1
				console_command create_unit khand_ls "Windriders of Khand" 1 3 1 1
				inc_counter ls_khand 6
			end_if
			if I_CompareCounter ls_khand < 13
				console_command create_unit khand_ls "Serpent Bladesmen" 1 3 1 1
				console_command create_unit khand_ls "Variag Lancers" 2 3 1 1
				console_command create_unit khand_ls "Khandish Hunters" 1 3 1 1
				console_command create_unit khand_ls "Nomad Warriors" 2 3 1 1
				console_command create_unit khand_ls "Variag Bowmen" 1 3 1 1
				console_command create_unit khand_ls "Khandish Raiders" 1 3 1 1
				inc_counter ls_khand 8
			end_if
			if I_CompareCounter ls_khand < 17
				console_command create_unit khand_ls "Variag Swordsmen" 1 3 1 1
				console_command create_unit khand_ls "Steppe Tribesmen" 1 3 1 1
				console_command create_unit khand_ls "Nomad Horsemen" 1 3 1 1
				console_command create_unit khand_ls "Marauders" 1 3 1 1
				inc_counter ls_khand 4
			end_if
			if I_CompareCounter ls_khand < 19
				console_command create_unit khand_ls "Steppe Tribesmen" 1 3 1 1
				console_command create_unit khand_ls "Steppe Archers" 1 3 1 1
				inc_counter ls_khand 2
			end_if
			if I_CompareCounter ls_khand < 20
				console_command create_unit khand_ls "Nomad Axemen" 1 3 1 1
				inc_counter ls_khand 1
			end_if
        end_if
        if I_CompareCounter faction_ID_milan == 1
            and I_NumberOfSettlements milan <= 3
            and I_EventCounter last_stand_rohan = 0
            log always --------------------------- last stand rohan-------------------------
            historic_event last_stand_rohan
            increment_kings_purse milan 3000
            spawn_army
                faction milan
                character	random_name, named character, age 28, x 291, y 293, family, direction SW, label rohan_ls
                traits		GoodManRace 1, Rohirrim 1, AIBoost 1, Energetic 1, GoodCommander 2, GoodDefender 1, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                unit		Rohan Bodyguard				exp 5 armour 1 weapon_lvl 1
				unit		Royal Guard					exp 4 armour 2 weapon_lvl 1
				unit		Eored Lancers				exp 4 armour 2 weapon_lvl 0					
				unit		Eored Footmen					exp 3 armour 2 weapon_lvl 0
				unit		Eored Swordsmen					exp 3 armour 2 weapon_lvl 0
				unit		Eored Skirmishers					exp 3 armour 2 weapon_lvl 0
				unit		Eorling Axemen					exp 2 armour 1 weapon_lvl 0
				unit		Eorling Archers					exp 2 armour 1 weapon_lvl 0
				unit		Eorling Spearmen					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_rohan 9
			if I_NumberOfSettlements sicily >= 8
			and I_CompareCounter ls_rohan < 15
				console_command create_unit rohan_ls "Citadel Guard" 1 3 1 1
				console_command create_unit rohan_ls "Gondor Infantry" 2 3 1 1
				console_command create_unit rohan_ls "Gondor Spearmen" 1 3 1 1
				console_command create_unit rohan_ls "Gondor Archers" 1 3 1 1
				inc_counter ls_rohan 5
			end_if
			if I_SettlementOwner Kings_Land = milan 
			and I_CompareCounter ls_rohan < 15 
				console_command create_unit rohan_ls "Meduseld Doorwards" 2 3 1 1
				console_command create_unit rohan_ls "Riddermark Axemen" 2 3 1 1
				console_command create_unit rohan_ls "Riddermark Cavalry" 2 3 1 1
				inc_counter ls_rohan 6
			end_if
			if I_SettlementOwner Helms_Deep = milan 
			and I_CompareCounter ls_rohan < 19 
				console_command create_unit rohan_ls "Helmingas" 2 3 1 1
				inc_counter ls_rohan 2
			end_if
			if I_SettlementOwner Helms_Deep = milan 
			and I_CompareCounter rohan_dwarves > 0
			and I_CompareCounter ls_rohan < 20 
				console_command create_unit rohan_ls "Guard of the Caves" 1 3 1 1
				inc_counter ls_rohan 1
				inc_counter rohan_dwarves -1
			end_if
			if I_SettlementOwner Helms_Deep = milan 
			and I_CompareCounter rohan_dwarves > 0
			and I_CompareCounter ls_rohan < 20 
				console_command create_unit rohan_ls "Guard of the Caves" 1 3 1 1
				inc_counter ls_rohan 1
				inc_counter rohan_dwarves -1
			end_if
			if I_SettlementOwner Helms_Deep = milan 
			and I_CompareCounter rohan_dwarves > 0
			and I_CompareCounter ls_rohan < 20 
				console_command create_unit rohan_ls "Guard of the Caves" 1 3 1 1
				inc_counter ls_rohan 1
				inc_counter rohan_dwarves -1
			end_if
			if I_SettlementOwner Westfold = milan
			and I_CompareCounter ls_rohan < 20 
				console_command create_unit rohan_ls "Riders of the Fold" 2 3 1 1
				inc_counter ls_rohan 2
			end_if
			if I_SettlementOwner Eastfold = milan
			and I_CompareCounter ls_rohan < 19 
				console_command create_unit rohan_ls "Riders of the Fold" 2 3 1 1
				inc_counter ls_rohan 2
			end_if			
			if I_CompareCounter ls_rohan < 18
				console_command create_unit rohan_ls "Rohirrim" 2 3 1 1
				console_command create_unit rohan_ls "Rohirrim Archers" 1 3 1 1
				inc_counter ls_rohan 3
			end_if
			if I_CompareCounter ls_rohan < 19
				console_command create_unit rohan_ls "Peasant Scouts" 1 3 1 1
				console_command create_unit rohan_ls "Peasant Militia" 1 3 1 1
				inc_counter ls_rohan 2
			end_if
			if I_CompareCounter ls_rohan < 19
				console_command create_unit rohan_ls "Rohirrim" 1 3 1 1
				console_command create_unit rohan_ls "Eorling Axemen" 1 3 1 1
				inc_counter ls_rohan 2
			end_if
			if I_CompareCounter ls_rohan < 19
				console_command create_unit rohan_ls "Eorling Spearmen" 1 3 1 1
				console_command create_unit rohan_ls "Rohirrim Archers" 1 3 1 1
				inc_counter ls_rohan 2
			end_if
			if I_CompareCounter ls_rohan < 20
				console_command create_unit rohan_ls "Eorling Archers" 1 3 1 1
				inc_counter ls_rohan 1
			end_if
			if I_CompareCounter ls_rohan < 20
				console_command create_unit rohan_ls "Eored Lancers" 1 3 1 1
				inc_counter ls_rohan 1
			end_if
			if I_CompareCounter ls_rohan < 20
				console_command create_unit rohan_ls "Peasant Militia" 1 3 1 1
				inc_counter ls_rohan 1
			end_if
        end_if
        if I_CompareCounter faction_ID_mongols == 1
            and I_NumberOfSettlements mongols < 3
            and I_EventCounter last_stand_woodland = 0
            log always --------------------------- last stand WR-------------------------
            historic_event last_stand_woodland
            increment_kings_purse mongols 3000
            spawn_army
                faction mongols
                character	random_name, named character, age 36, x 318, y 421, family, direction E, label wr_ls
                traits		ElvenRace 1, Nandor 1, AIBoost 1, GoodAmbusher 2, GoodCommander 1, GoodDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                unit		Tawar Areiniyr				exp 5 armour 1 weapon_lvl 1
				unit		Elvenkings Gateguard					exp 5 armour 1 weapon_lvl 0				
  				unit		Elvenkings Axeguard					exp 4 armour 2 weapon_lvl 1
				unit		Elvenkings Bowguard					exp 3 armour 2 weapon_lvl 0					
				unit		Maethyr i-Thewair 				exp 3 armour 2 weapon_lvl 0
				unit		Elder Council					exp 2 armour 1 weapon_lvl 0
				unit		Woodland Sentinels				exp 2 armour 1 weapon_lvl 0
				unit		Woodland Horsearchers				exp 3 armour 2 weapon_lvl 0
				unit		Woodland Spearmen					exp 2 armour 1 weapon_lvl 0
				unit		Woodland Scouts				exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_wr 7
			if I_NumberOfSettlements ireland > 1 
			and I_CompareCounter ls_wr < 16
				console_command create_unit wr_ls "Galadhrim Guards" 2 3 1 1
				console_command create_unit wr_ls "Sentinels of Cerin Amroth" 1 3 1 1
				console_command create_unit wr_ls "Lorien Scouts" 1 3 1 1
				console_command create_unit wr_ls "Gurdhinen" 1 3 1 1
				inc_counter ls_wr 5
			end_if
			if I_NumberOfSettlements scotland >= 3
			and I_CompareCounter ls_wr < 16
				console_command create_unit wr_ls "Northmen Archers" 1 3 1 1
				console_command create_unit wr_ls "Dale Cavalry" 2 3 1 1
				console_command create_unit wr_ls "Hearthguard" 2 3 1 1
				console_command create_unit wr_ls "Dalian Longbowmen" 1 3 1 1
				inc_counter ls_wr 5
			end_if
			if I_CharacterExists legolas_1
			and I_CompareCounter ls_wr < 19
				console_command create_unit wr_ls "Hin e-daur" 2 3 1 1
				inc_counter ls_wr 2
			end_if
			if I_CharacterExists thranduil_1
			and I_CompareCounter ls_wr < 19
				console_command create_unit wr_ls "Arthirochon" 1 3 1 1
				console_command create_unit wr_ls "Aredhirith" 1 3 1 1
				inc_counter ls_wr 2
			end_if
			if I_CompareCounter ls_wr < 19
				console_command create_unit wr_ls "Woodland Scouts" 1 3 1 1
				console_command create_unit wr_ls "Woodland Wardens" 1 3 1 1
				inc_counter ls_wr 2
			end_if
			if I_CompareCounter ls_wr < 19
				console_command create_unit wr_ls "Woodland Warriors" 1 3 1 1
				console_command create_unit wr_ls "Woodland Spearmen" 1 3 1 1
				inc_counter ls_wr 2
			end_if
			if I_CompareCounter ls_wr < 20
				console_command create_unit wr_ls "Woodland Horsearchers" 1 3 1 1
				inc_counter ls_wr 1
			end_if
        end_if
        if I_CompareCounter faction_ID_moors == 1
            and I_NumberOfSettlements moors < 3
            and I_EventCounter last_stand_erebor = 0
            log always --------------------------- last stand erebor-------------------------
            historic_event last_stand_erebor
            increment_kings_purse moors 3000
            spawn_army
                faction moors
                character	random_name, named character, age 29, x 348, y 432, family, direction S, label erebor_ls
                traits		DwarvenRace 1, Longbeard 1, AIBoost 1, Brave 1, GoodCommander 1, GoodDefender 1, SiegeDefender 2, HaleAndHearty 1, LoyaltyStarter 1, PietyStarter 1
                unit		Durins Guard			exp 5 armour 1 weapon_lvl 1
                unit		Iron Guard					exp 5 armour 1 weapon_lvl 0				
  				unit		Kings Shields					exp 4 armour 2 weapon_lvl 1
				unit		Kings Halberds				exp 3 armour 2 weapon_lvl 0					
				unit		Kings Axes					exp 3 armour 2 weapon_lvl 0
				unit		Kings Warriors					exp 3 armour 2 weapon_lvl 0
				unit		Erebor Infantry					exp 2 armour 1 weapon_lvl 0
				unit		Erebor Axethrowers					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_erebor 8
			if I_NumberOfSettlements scotland >= 3
			and I_CompareCounter ls_erebor < 17
				console_command create_unit erebor_ls "Northmen Archers" 1 3 1 1
				console_command create_unit erebor_ls "Dale Cavalry" 2 3 1 1
				console_command create_unit erebor_ls "Hearthguard" 1 3 1 1
				console_command create_unit erebor_ls "Dalian Longbowmen" 1 3 1 1
				inc_counter ls_erebor 4
			end_if
			if I_CharacterExists dain_1
			and I_CompareCounter ls_erebor < 19
				console_command create_unit erebor_ls "Sons of the Fallen" 2 3 1 1
				inc_counter ls_erebor 2
			end_if
			if I_SettlementOwner Erebor = moors
			and I_CompareCounter ls_erebor < 18
				console_command create_unit erebor_ls "Axeguard of Erebor" 1 3 1 1
				console_command create_unit erebor_ls "Erebor Infantry" 1 3 1 1
				console_command create_unit erebor_ls "Erebor Axethrowers" 1 3 1 1
				inc_counter ls_erebor 3
			end_if
			if I_SettlementOwner Iron_Hills = moors
			and I_CompareCounter ls_erebor < 19
				console_command create_unit erebor_ls "Iron Hills Mattocks" 1 3 1 1
				inc_counter ls_erebor 2
			end_if
			if I_SettlementOwner Withered = moors
			and I_CompareCounter ls_erebor < 20
				console_command create_unit erebor_ls "Dragonslayers" 1 3 1 1
				inc_counter ls_erebor 1
			end_if
			if I_SettlementOwner Grey_Mountains = moors
			and I_CompareCounter ls_erebor < 20
				console_command create_unit erebor_ls "Dragonslayers" 1 3 1 1
				inc_counter ls_erebor 1
			end_if
			if I_SettlementOwner Grey_Foothills = moors
			and I_CompareCounter ls_erebor < 20
				console_command create_unit erebor_ls "Dragonslayers" 1 3 1 1
				inc_counter ls_erebor 1
			end_if
			if I_SettlementOwner Logathavuld = moors
			and I_CompareCounter ls_erebor < 15
				console_command create_unit erebor_ls "Iron Fist Hammers" 1 3 1 1
				console_command create_unit erebor_ls "Blacklock Engineers" 1 3 1 1
				console_command create_unit erebor_ls "Stiffbeard Archers" 2 3 1 1
				console_command create_unit erebor_ls "Stonefoot Spearmen" 2 3 1 1
				inc_counter ls_erebor 6
			end_if
			if I_SettlementOwner Mt_Gundabad = moors
			and I_CompareCounter ls_erebor < 20
				console_command create_unit erebor_ls "Hammers of Gundabad" 1 3 1 1
				inc_counter ls_erebor 1
			end_if
			if I_CompareCounter ls_erebor < 13
				console_command create_unit erebor_ls "Erebor Infantry" 2 3 1 1
				console_command create_unit erebor_ls "Erebor Axethrowers" 2 3 1 1
				console_command create_unit erebor_ls "Kings Shields" 1 3 1 1
				console_command create_unit erebor_ls "Kings Halberds" 1 3 1 1
				console_command create_unit erebor_ls "Kings Axes" 1 3 1 1
				console_command create_unit erebor_ls "Kings Warriors" 1 3 1 1
				inc_counter ls_erebor 8
			end_if
			if I_CompareCounter ls_erebor < 17
				console_command create_unit erebor_ls "Erebor Infantry" 1 3 1 1
				console_command create_unit erebor_ls "Erebor Axethrowers" 1 3 1 1
				console_command create_unit erebor_ls "Stiffbeard Archers" 1 3 1 1
				console_command create_unit erebor_ls "Stonefoot Spearmen" 1 3 1 1
				inc_counter ls_erebor 4
			end_if
			if I_CompareCounter ls_erebor < 19
				console_command create_unit erebor_ls "Dwarven Travellers" 1 3 1 1
				console_command create_unit erebor_ls "Dwarven Labourers" 1 3 1 1
				inc_counter ls_erebor 2
			end_if
			if I_CompareCounter ls_erebor < 20
				console_command create_unit erebor_ls "Dwarven Labourers" 1 3 1 1
				inc_counter ls_erebor 1
			end_if
        end_if
        if I_CompareCounter faction_ID_normans == 1
            and I_NumberOfSettlements normans <= 3
            and I_EventCounter last_stand_bree = 0
            log always --------------------------- last stand bree-------------------------
            historic_event last_stand_bree
            increment_kings_purse normans 3000
            spawn_army
                faction normans
                character	random_name, named character, age 27, x 150, y 392, family, direction S, label bree_ls
                traits		MiddleManRace 1, Breelander 1, AIBoost 1, GoodCommander 1, GoodDefender 3, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Breeland Bodyguard		exp 5 armour 0 weapon_lvl 1
  				unit		Gate Keepers					exp 4 armour 2 weapon_lvl 1
				unit		Watchmen Swordguard				exp 3 armour 2 weapon_lvl 0					
				unit		Watchmen Axeguard					exp 3 armour 2 weapon_lvl 0
				unit		Watchmen Bowguard					exp 3 armour 2 weapon_lvl 0
				unit		Merchant Militia					exp 2 armour 1 weapon_lvl 0
				unit		Merchant Cavalry					exp 2 armour 1 weapon_lvl 0
				unit		Merchant Infantry					exp 4 armour 2 weapon_lvl 0
			end
			set_counter ls_bree 8
			if I_EventCounter corrupt_shire = 1
				console_command create_unit bree_ls "Half Orc Baneguard" 2 3 1 1
				console_command create_unit bree_ls "Half Orc Spearmen" 2 3 1 1
				console_command create_unit bree_ls "Clan-folk Fighters" 1 3 1 1
				console_command create_unit bree_ls "Clan-folk Slingers" 1 3 1 1
				console_command create_unit bree_ls "Brehins Sword-Wielders" 1 3 1 1
				console_command create_unit bree_ls "Hillsteed Riders" 1 3 1 1
				console_command create_unit bree_ls "Horse-fellers" 1 3 1 1
				console_command create_unit bree_ls "Dunforgoil Riders" 1 3 1 1
				console_command create_unit bree_ls "Bandits" 2 3 1 1
				inc_counter ls_bree 12
				log always --------------------------- last stand Bree - Evil -------------------------
			end_if
			if I_EventCounter corrupt_shire = 0
				if I_CompareCounter ls_bree < 19
				and I_NumberOfSettlements turks > 1
					console_command create_unit bree_ls "Dunedain Rangers" 1 3 1 1
					console_command create_unit bree_ls "Dunedain Scouts" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 19
				and I_SettlementOwner Arthedain = normans
					console_command create_unit bree_ls "Greenway Shieldmen" 1 3 1 1
					console_command create_unit bree_ls "Greenway Cavalry" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 15
				and I_SettlementOwner Bree = normans
					console_command create_unit bree_ls "Greenway Shieldmen" 1 3 1 1
					console_command create_unit bree_ls "Greenway Cavalry" 1 3 1 1
					console_command create_unit bree_ls "Dwarven Travellers" 1 3 1 1
					console_command create_unit bree_ls "Journeymen" 1 3 1 1
					console_command create_unit bree_ls "Woodland Hunters" 1 3 1 1
					console_command create_unit bree_ls "Lumbermen" 1 3 1 1
					inc_counter ls_bree 6
				end_if
				if I_CompareCounter ls_bree < 17
				and I_SettlementOwner Metraith = normans
					console_command create_unit bree_ls "Greenway Shieldmen" 1 3 1 1
					console_command create_unit bree_ls "Greenway Cavalry" 1 3 1 1
					console_command create_unit bree_ls "Woodland Hunters" 1 3 1 1
					console_command create_unit bree_ls "Lumbermen" 1 3 1 1
					inc_counter ls_bree 4
				end_if
				if I_CompareCounter ls_bree < 19
				and I_SettlementOwner Cardolan = normans
					console_command create_unit bree_ls "Greenway Shieldmen" 1 3 1 1
					console_command create_unit bree_ls "Greenway Cavalry" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 19
				and I_SettlementOwner Tharbad = normans
					console_command create_unit bree_ls "Greenway Shieldmen" 1 3 1 1
					console_command create_unit bree_ls "Greenway Cavalry" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 19
				and I_SettlementOwner Shire_North = normans
					console_command create_unit bree_ls "Bandobras Archers" 1 3 1 1
					console_command create_unit bree_ls "Watch Shirriffs" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 20
				and I_SettlementOwner Shire_South = normans
					console_command create_unit bree_ls "Watch Shirriffs" 1 3 1 1
					inc_counter ls_bree 1
				end_if
				if I_CompareCounter ls_bree < 20
				and I_SettlementOwner Shire_West = normans
					console_command create_unit bree_ls "Watch Shirriffs" 1 3 1 1
					inc_counter ls_bree 1
				end_if
				if I_CompareCounter ls_bree < 17
					console_command create_unit bree_ls "Breeland Militia" 2 3 1 1
					console_command create_unit bree_ls "Archer Militia" 2 3 1 1
					inc_counter ls_bree 4
				end_if
				if I_CompareCounter ls_bree < 19
					console_command create_unit bree_ls "Merchant Militia" 1 3 1 1
					console_command create_unit bree_ls "Merchant Cavalry" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 19
					console_command create_unit bree_ls "Journeymen" 1 3 1 1
					console_command create_unit bree_ls "Breeland Militia" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 19
					console_command create_unit bree_ls "Merchant Cavalry" 1 3 1 1
					console_command create_unit bree_ls "Archer Militia" 1 3 1 1
					inc_counter ls_bree 2
				end_if
				if I_CompareCounter ls_bree < 20
					console_command create_unit bree_ls "Merchant Militia" 1 3 1 1
					inc_counter ls_bree 1
				end_if
				if I_CompareCounter ls_bree < 20
					console_command create_unit bree_ls "Journeymen" 1 3 1 1
					inc_counter ls_bree 1
				end_if
				if I_CompareCounter ls_bree < 20
					console_command create_unit bree_ls "Breeland Militia" 1 3 1 1
					inc_counter ls_bree 1
				end_if
			end_if
        end_if
        if I_CompareCounter faction_ID_poland == 1
            and I_NumberOfSettlements poland <= 3
            and I_EventCounter last_stand_dolguldur = 0
            log always --------------------------- last stand DG-------------------------
            historic_event last_stand_dolguldur
            increment_kings_purse poland 3000
            spawn_army
                faction poland
                character	random_name, named character, age 32, x 315, y 335, family, direction SW, label dg_ls
                traits		OrcRace 1, AIBoost 1, GoodAmbusher 2, GoodCommander 1, GoodDefender 2, LogisticalSkill 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Shadowguard 1, CustomBG 1
                unit		Uruk Bodyguard					exp 5 armour 1 weapon_lvl 1		
                unit		Goblin Headhunters				exp 5 armour 0 weapon_lvl 1
                unit		Mirkwood Uruks			exp 4 armour 0 weapon_lvl 0				
                unit		Goblin Striders				exp 4 armour 0 weapon_lvl 1
                unit		Goblin Stalkers			exp 4 armour 0 weapon_lvl 0
                unit		Uruk Slayers			exp 3 armour 0 weapon_lvl 1							
            end
			set_counter ls_dg 6
            console_command create_unit dg_ls "Khamuls Shadowknights" 2 3 1 1
            console_command create_unit dg_ls "Khamuls Shadowguard" 2 3 1 1
            console_command create_unit dg_ls "Khamuls Shadow Rangers" 2 3 1 1
			if I_SettlementOwner Deep_Mirkwood = poland
			and I_CompareCounter ls_dg < 16
				console_command create_unit dg_ls "Castellans of Dol Guldur" 2 3 1 1
				console_command create_unit dg_ls "Dol Guldur Scouts" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Host" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Archers" 1 3 1 1
				inc_counter ls_dg 5
			end_if
			if I_SettlementOwner Wilderland = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Goblin Stalkers" 1 3 1 1
				console_command create_unit dg_ls "Goblin Striders" 1 3 1 1
				console_command create_unit dg_ls "Goblin Headhunters" 1 3 1 1
				console_command create_unit dg_ls "Uruk Slayers" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_SettlementOwner East_Deep_Mirkwood = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Mirkwood Uruks" 2 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_SettlementOwner New_Mirkwood = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Mirkwood Uruks" 2 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_SettlementOwner Middle_Mirkwood = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Mirkwood Uruks" 2 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_SettlementOwner East_Mirkwood = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Mirkwood Uruks" 2 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_SettlementOwner Woodsmen = poland
			and I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Mirkwood Uruks" 2 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_CompareCounter ls_dg < 13
				console_command create_unit dg_ls "Goblin Headhunters" 1 3 1 1
				console_command create_unit dg_ls "Goblin Stalkers" 2 3 1 1
				console_command create_unit dg_ls "Dol Guldur Archers" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 2 3 1 1
				console_command create_unit dg_ls "Dol Guldur Host" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Scouts" 1 3 1 1
				inc_counter ls_dg 8
			end_if
			if I_CompareCounter ls_dg < 17
				console_command create_unit dg_ls "Goblin Striders" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Host" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Scouts" 1 3 1 1
				console_command create_unit dg_ls "Dol Guldur Archers" 1 3 1 1
				inc_counter ls_dg 4
			end_if
			if I_CompareCounter ls_dg < 19
				console_command create_unit dg_ls "Uruk Slayers" 1 3 1 1
				console_command create_unit dg_ls "Mirkwood Hunters" 1 3 1 1
				inc_counter ls_dg 2
			end_if
			if I_CompareCounter ls_dg < 20
				console_command create_unit dg_ls "Mirkwood Goblins" 1 3 1 1
				inc_counter ls_dg 1
			end_if
        end_if
        if I_CompareCounter faction_ID_portugal == 1
            and I_NumberOfSettlements portugal <= 3
            and I_EventCounter last_stand_angmar = 0
            log always --------------------------- last stand angmar-------------------------
            historic_event last_stand_angmar
            increment_kings_purse portugal 3000
            spawn_army
                faction portugal
                character	random_name, named character, age 23, x 224, y 443, family, direction S, label angmar_ls
                traits		AngmarManRace 1, AIBoost 1, Bloodthirsty 1, GoodCommander 2, GoodDefender 1, SiegeDefender 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Northguard 1, CustomBG 1
                unit		Northguard				exp 5 armour 1 weapon_lvl 1
				unit		Northguard				exp 4 armour 1 weapon_lvl 1
				unit		Darkblades				exp 5 armour 1 weapon_lvl 1
				unit		Iron Crown Halberdiers				exp 5 armour 1 weapon_lvl 1
				unit		Iron Crown Warriors				exp 5 armour 1 weapon_lvl 1		
				unit		Iron Crown Longbowmen				exp 5 armour 1 weapon_lvl 1					
            end
			set_counter ls_angmar 6
			if I_SettlementOwner Carn_Dum == portugal
			and I_CompareCounter ls_angmar < 15
				console_command create_unit angmar_ls "Guardians of Carn Dum" 2 3 1 1
				console_command create_unit angmar_ls "Darkblades" 1 3 1 1
				console_command create_unit angmar_ls "Northguard" 1 3 1 1
				console_command create_unit angmar_ls "Rebel Barrow Wights" 1 3 1 1
				console_command create_unit angmar_ls "Iron Crown Warriors" 1 3 1 1
				inc_counter ls_angmar 6
			end_if
			if I_SettlementOwner Mt_Gram == portugal
			and I_CompareCounter ls_angmar < 16
				console_command create_unit angmar_ls "Mount Gram Raiders" 1 3 1 1
				console_command create_unit angmar_ls "Mount Gram Marauders" 2 3 1 1
				console_command create_unit angmar_ls "Warg Javelins" 1 3 1 1
				console_command create_unit angmar_ls "Warg Raiders" 1 3 1 1
				inc_counter ls_angmar 5
			end_if
			if I_SettlementOwner Litash == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Darkblades" 1 3 1 1
				console_command create_unit angmar_ls "Iron Crown Halberdiers" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Infantry" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Archers" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_SettlementOwner Angsul == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Angmarim Infantry" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Archers" 1 3 1 1
				console_command create_unit angmar_ls "Iron Crown Longbowmen" 1 3 1 1
				console_command create_unit angmar_ls "Northguard" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_SettlementOwner Mitheithel == portugal
			and I_CompareCounter ls_angmar < 15
				console_command create_unit angmar_ls "Rhudaur Warriors" 2 3 1 1
				console_command create_unit angmar_ls "Rhudaur Huscarles" 1 3 1 1
				console_command create_unit angmar_ls "Rhudaur Pikemen" 1 3 1 1
				console_command create_unit angmar_ls "Rhudaur Savages" 1 3 1 1
				console_command create_unit angmar_ls "Hillmen" 1 3 1 1
				inc_counter ls_angmar 6
			end_if
			if I_SettlementOwner Ettenmoors == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Rhudaur Huscarles" 1 3 1 1
				console_command create_unit angmar_ls "Rhudaur Savages" 1 3 1 1
				console_command create_unit angmar_ls "Hillmen" 2 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_SettlementOwner Rhaglaw == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Rhudaur Huscarles" 2 3 1 1
				console_command create_unit angmar_ls "Rhudaur Savages" 1 3 1 1
				console_command create_unit angmar_ls "Rhudaur Pikemen" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_SettlementOwner Athilin == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Rhudaur Pikemen" 1 3 1 1
				console_command create_unit angmar_ls "Rhudaur Savages" 2 3 1 1
				console_command create_unit angmar_ls "Hillmen" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_SettlementOwner Dordholl == portugal
			and I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Rhudaur Pikemen" 2 3 1 1
				console_command create_unit angmar_ls "Rhudaur Warriors" 1 3 1 1
				console_command create_unit angmar_ls "Hillmen" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_CompareCounter ls_angmar < 13
				console_command create_unit angmar_ls "Iron Crown Longbowmen" 1 3 1 1
				console_command create_unit angmar_ls "Iron Crown Warriors" 2 3 1 1
				console_command create_unit angmar_ls "Iron Crown Halberdiers" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Infantry" 2 3 1 1
				console_command create_unit angmar_ls "Angmarim Archers" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Levies" 1 3 1 1
				inc_counter ls_angmar 8
			end_if
			if I_CompareCounter ls_angmar < 17
				console_command create_unit angmar_ls "Hillmen" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Infantry" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Archers" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Levies" 1 3 1 1
				inc_counter ls_angmar 4
			end_if
			if I_CompareCounter ls_angmar < 19
				console_command create_unit angmar_ls "Angmarim Infantry" 1 3 1 1
				console_command create_unit angmar_ls "Angmarim Archers" 1 3 1 1
				inc_counter ls_angmar 2
			end_if
			if I_CompareCounter ls_angmar < 20
				console_command create_unit angmar_ls "Angmarim Levies" 1 3 1 1
				inc_counter ls_angmar 1
			end_if
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
            and I_NumberOfSettlements gundabad <= 3
            and I_EventCounter last_stand_gundabad = 0
            log always --------------------------- last stand gundabad-------------------------
            historic_event last_stand_gundabad
            increment_kings_purse gundabad 3000
            spawn_army
                faction gundabad
                character	random_name, named character, age 23, x 256, y 448, family, direction S, label gundabad_ls
                traits		SnowRace 1, AIBoost 1, Bloodthirsty 1, GoodCommander 2, GoodDefender 1, SiegeDefender 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, Avengers 1, CustomBG 1
                unit		Orc Avengers			exp 5 armour 1 weapon_lvl 1
                unit		Pale Uruks			exp 4 armour 1 weapon_lvl 1				
				unit		Blackshield Archers			exp 3 armour 2 weapon_lvl 0					
				unit		Blackshield Warriors			 exp 3 armour 2 weapon_lvl 0
				unit		Blackshield Warband			 exp 3 armour 2 weapon_lvl 0
				unit		Snow-Orc Scouts					exp 2 armour 1 weapon_lvl 0
				unit		Snow-Orc Raiders			exp 3 armour 2 weapon_lvl 0					
				unit		Snow-Orc Spearmen			 exp 3 armour 2 weapon_lvl 0
				unit		Warg Marauders			 exp 3 armour 2 weapon_lvl 0
			end
			set_counter ls_gundabad 9
			if I_SettlementOwner Mt_Gundabad = gundabad
			and I_CompareCounter ls_gundabad < 15
				console_command create_unit gundabad_ls "Bolgs Champions" 2 3 1 1
				console_command create_unit gundabad_ls "Orc Avengers" 1 3 1 1
				console_command create_unit gundabad_ls "Pale Uruks" 1 3 1 1
				console_command create_unit gundabad_ls "Half-Trolls" 1 3 1 1
				console_command create_unit gundabad_ls "Snow Trolls" 1 3 1 1
				inc_counter ls_gundabad 6
			end_if
			if I_SettlementOwner Grey_Mountains = gundabad
			and I_CompareCounter ls_gundabad < 17
				console_command create_unit gundabad_ls "Snow Trolls" 1 3 1 1
				console_command create_unit gundabad_ls "Orc Avengers" 2 3 1 1
				console_command create_unit gundabad_ls "Half-Trolls" 1 3 1 1
				inc_counter ls_gundabad 4
			end_if
			if I_SettlementOwner Withered = gundabad
			and I_CompareCounter ls_gundabad < 19
				console_command create_unit gundabad_ls "Snow Trolls" 1 3 1 1
				console_command create_unit gundabad_ls "Half-Trolls" 1 3 1 1
				inc_counter ls_gundabad 2
			end_if
			if I_SettlementOwner Erebor = gundabad
			and I_CompareCounter ls_gundabad < 19
				console_command create_unit gundabad_ls "Orc Avengers" 2 3 1 1
				inc_counter ls_gundabad 2
			end_if
			if I_SettlementOwner High_Pass = gundabad
			and I_CompareCounter ls_gundabad < 15
				console_command create_unit gundabad_ls "Mountain Uruks" 1 3 1 1
				console_command create_unit gundabad_ls "Heavy Goblin Crossbows" 2 3 1 1
				console_command create_unit gundabad_ls "Goblin Archers" 1 3 1 1
				console_command create_unit gundabad_ls "Snaga Skirmishers" 1 3 1 1
				console_command create_unit gundabad_ls "Snaga Stalkers" 1 3 1 1
				inc_counter ls_gundabad 6
			end_if
			if I_CompareCounter ls_gundabad < 13
				console_command create_unit gundabad_ls "Pale Uruks" 1 3 1 1
				console_command create_unit gundabad_ls "Snow-Orc Scouts" 2 3 1 1
				console_command create_unit gundabad_ls "Warg Marauders" 1 3 1 1
				console_command create_unit gundabad_ls "Mountain-Orc Hunters" 2 3 1 1
				console_command create_unit gundabad_ls "Blackshield Warriors" 1 3 1 1
				console_command create_unit gundabad_ls "Blackshield Archers" 1 3 1 1
				inc_counter ls_gundabad 8
			end_if
			if I_CompareCounter ls_gundabad < 17
				console_command create_unit gundabad_ls "Mountain-Orc Hunters" 1 3 1 1
				console_command create_unit gundabad_ls "Snow-Orc Scouts" 1 3 1 1
				console_command create_unit gundabad_ls "Blackshield Warband" 1 3 1 1
				console_command create_unit gundabad_ls "Snow-Orc Spearmen" 1 3 1 1
				inc_counter ls_gundabad 4
			end_if
			if I_CompareCounter ls_gundabad < 19
				console_command create_unit gundabad_ls "Warg Marauders" 1 3 1 1
				console_command create_unit gundabad_ls "Snow-Orc Raiders" 1 3 1 1
				inc_counter ls_gundabad 2
			end_if
			if I_CompareCounter ls_gundabad < 20
				console_command create_unit gundabad_ls "Mountain-Orc Hunters" 1 3 1 1
				inc_counter ls_gundabad 1
			end_if
        end_if
        if I_CompareCounter faction_ID_russia == 1
            and I_NumberOfSettlements russia < 3
            and I_EventCounter last_stand_umbar = 0
            log always --------------------------- last stand umbar-------------------------
            historic_event last_stand_umbar
            increment_kings_purse russia 3000
            spawn_army
                faction russia
                character	random_name, named character, age 25, x 257, y 68, family, direction N
                traits		NumenoreanRace 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1
                unit		Naru n'Aru Household Guard				exp 5 armour 1 weapon_lvl 1
                unit		Naru n'Aru Royal Knights				exp 5 armour 1 weapon_lvl 1
                unit		Ar-Pharazons Faithful			exp 4 armour 0 weapon_lvl 0
                unit		Adunaim Armsmen		exp 4 armour 0 weapon_lvl 0
                unit		Beruthiels Rangers			exp 4 armour 1 weapon_lvl 1
                unit		Abrazanim Nardutarik			exp 3 armour 0 weapon_lvl 0
                unit		Abrazanim Nardutarik			exp 3 armour 0 weapon_lvl 0
                unit		Abrazanim Narduzagar	exp 3 armour 0 weapon_lvl 1
                unit		Abrazanim Narduzagar	exp 3 armour 0 weapon_lvl 1
                unit		Abrazanim Nardubawib		exp 3 armour 0 weapon_lvl 0
                unit		Abrazanim Nardubawib		exp 3 armour 0 weapon_lvl 0
                unit		Rozadan Bowmen			exp 2 armour 0 weapon_lvl 0
                unit		Rozadan Bowmen			exp 2 armour 0 weapon_lvl 0
                unit		Rozadan Footmen				exp 2 armour 1 weapon_lvl 1
                unit		Rozadan Footmen				exp 2 armour 1 weapon_lvl 1
                unit		Azrazair Marines			exp 3 armour 1 weapon_lvl 1
                unit		Azrazair Raiders			exp 2 armour 2 weapon_lvl 1
                unit		Azrazair Raiders			exp 2 armour 2 weapon_lvl 1
                unit		Azrazair Archers		exp 2 armour 2 weapon_lvl 0
                unit		Azrazair Archers		exp 2 armour 2 weapon_lvl 0
            end
        end_if
        if I_CompareCounter faction_ID_saxons == 1
            and I_NumberOfSettlements saxons <= 3
            and I_EventCounter last_stand_mithlond = 0
            log always --------------------------- last stand HE-------------------------
            historic_event last_stand_mithlond
            increment_kings_purse saxons 3000
            spawn_army
                faction saxons
                character	random_name, named character, age 28, x 68, y 384, family, direction E, label he_ls
                traits		ElvenRace 1, Noldor 1, AIBoost 1, GoodCommander 2, GoodDefender 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, NoldorStrat 1, CustomBG 1
                unit		Calaquendi Lords		exp 5 armour 3 weapon_lvl 1
				unit		Amanyar Rangers					exp 5 armour 1 weapon_lvl 0				
  				unit		Amanyar Riders					exp 4 armour 2 weapon_lvl 1
				unit		Amanyar Swordmasters				exp 3 armour 2 weapon_lvl 0					
				unit		Lindar Bowmen				exp 3 armour 2 weapon_lvl 0
				unit		Lindar Guards					exp 2 armour 1 weapon_lvl 0
				unit		Lindar Mariners				exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_he 7
			if I_SettlementOwner Imladris = saxons
			and I_CompareCounter ls_he < 16
				console_command create_unit he_ls "Elderinwe Roquen" 1 5 3 1
				console_command create_unit he_ls "Elderinwe Tirno" 1 5 3 1
				console_command create_unit he_ls "Noldorin Archers" 1 5 3 1
				console_command create_unit he_ls "Noldorin Defenders" 1 5 3 1
				console_command create_unit he_ls "Noldorin Veterans" 1 5 3 1
				inc_counter ls_he 5
			end_if
			if I_SettlementOwner Eregion = saxons
			and I_CompareCounter ls_he < 17
				console_command create_unit he_ls "Eregion Smiths" 1 5 3 1
				console_command create_unit he_ls "Noldorin Archers" 1 5 3 1
				console_command create_unit he_ls "Noldorin Defenders" 1 5 3 1
				console_command create_unit he_ls "Noldorin Veterans" 1 5 3 1
				inc_counter ls_he 4
			end_if
			if I_SettlementOwner Mithlond = saxons
			and I_CompareCounter ls_he < 16
				console_command create_unit he_ls "Mithlond Nobles" 1 5 3 1
				console_command create_unit he_ls "Sindar Archers" 1 5 3 1
				console_command create_unit he_ls "Sindar Spearmen" 1 5 3 1
				console_command create_unit he_ls "Sindar Axemen" 1 5 3 1
				console_command create_unit he_ls "Lindon Longspears" 1 5 3 1
				inc_counter ls_he 5
			end_if
			if I_SettlementOwner Forlindon = saxons
			and I_CompareCounter ls_he < 17
				console_command create_unit he_ls "Sindar Archers" 1 5 3 1
				console_command create_unit he_ls "Sindar Spearmen" 1 5 3 1
				console_command create_unit he_ls "Sindar Axemen" 1 5 3 1
				console_command create_unit he_ls "Lindon Longspears" 1 5 3 1
				inc_counter ls_he 4
			end_if
			if I_SettlementOwner Harlindon = saxons
			and I_CompareCounter ls_he < 17
				console_command create_unit he_ls "Sindar Archers" 1 5 3 1
				console_command create_unit he_ls "Sindar Spearmen" 1 5 3 1
				console_command create_unit he_ls "Sindar Axemen" 1 5 3 1
				console_command create_unit he_ls "Lindon Longspears" 1 5 3 1
				inc_counter ls_he 4
			end_if
			if I_SettlementOwner Imladris = saxons
			and I_NumberOfSettlements turks > 2
			and I_CompareCounter ls_he < 19
				console_command create_unit he_ls "Dunedain Wardens" 1 5 3 1
				console_command create_unit he_ls "Dunedain Scouts" 1 5 3 1
				inc_counter ls_he 2
			end_if	
        end_if
        if I_CompareCounter faction_ID_scotland == 1
            and I_NumberOfSettlements scotland <= 3
            and I_EventCounter last_stand_dale = 0
            log always --------------------------- last stand Dale-------------------------
            historic_event last_stand_dale
            increment_kings_purse scotland 3000
            spawn_army
                faction scotland
                character	random_name, named character, age 34, x 331, y 413, family, direction E, label dale_ls
                traits		GoodManRace 1, Dalian 1, AIBoost 1, Brave 2, GoodCommander 1, GoodDefender 1, SiegeDefender 2, Loyal 1, LoyaltyStarter 1, PietyStarter 1, Barons 1, CustomBG 1
                unit		Royal Guardsmen				exp 5 armour 1 weapon_lvl 1
				unit		Barons					exp 5 armour 1 weapon_lvl 0				
  				unit		Earls					exp 4 armour 2 weapon_lvl 1
				unit		Barding Hird			exp 3 armour 2 weapon_lvl 0					
				unit		Northmen Archers			 exp 3 armour 2 weapon_lvl 0
				unit		Northmen Militia					exp 2 armour 1 weapon_lvl 0
				unit		Hearthguard			 exp 3 armour 2 weapon_lvl 0
				unit		Barding Marksmen					exp 2 armour 1 weapon_lvl 0
				unit		Aihwothiuda Horseguards					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_dale 9
			if I_NumberOfSettlements mongols > 1 
			and I_CompareCounter ls_dale < 17
				console_command create_unit dale_ls "Elvenkings Gateguard" 1 3 1 1
				console_command create_unit dale_ls "Elder Council" 1 3 1 1
				console_command create_unit dale_ls "Woodland Scouts" 1 3 1 1
				console_command create_unit dale_ls "Woodland Horsearchers" 1 3 1 1
				inc_counter ls_dale 4
			end_if
			if I_NumberOfSettlements moors > 1 
			and I_CompareCounter ls_dale < 17
				console_command create_unit dale_ls "Kings Warriors" 1 3 1 1
				console_command create_unit dale_ls "Kings Shields" 1 3 1 1
				console_command create_unit dale_ls "Erebor Infantry" 1 3 1 1
				console_command create_unit dale_ls "Iron Hills Mattocks" 1 3 1 1
				inc_counter ls_dale 4
			end_if
			if I_SettlementOwner Dale = scotland
			and I_CompareCounter ls_dale < 16
				console_command create_unit dale_ls "Dalian Swordsmen" 1 3 1 1
				console_command create_unit dale_ls "Dale Cavalry" 1 3 1 1
				console_command create_unit dale_ls "Dalian Longbowmen" 1 3 1 1
				console_command create_unit dale_ls "Dalian Billmen" 1 3 1 1
				console_command create_unit dale_ls "Dale Swordmasters" 1 3 1 1
				console_command create_unit dale_ls "Athala Rangers" 1 3 1 1
				inc_counter ls_dale 6
			end_if
			if I_SettlementOwner Esgaroth = scotland
			and I_CompareCounter ls_dale < 18
				console_command create_unit dale_ls "Lake-town Pikemen" 2 3 1 1
				console_command create_unit dale_ls "Athala Rangers" 1 3 1 1
				inc_counter ls_dale 3
			end_if
			if I_SettlementOwner celduin = scotland
			and I_CompareCounter ls_dale < 19
				console_command create_unit dale_ls "Rivermen" 2 3 1 1
				inc_counter ls_dale 3
			end_if
			if I_SettlementOwner Celduin_East = scotland
			and I_CompareCounter ls_dale < 19
				console_command create_unit dale_ls "Rivermen" 2 3 1 1
				inc_counter ls_dale 3
			end_if
			if I_CompareCounter ls_dale < 13
				console_command create_unit dale_ls "Northmen Militia" 2 3 1 1
				console_command create_unit dale_ls "Northmen Archers" 2 3 1 1
				console_command create_unit dale_ls "Rhovanion Gadrauhts" 2 3 1 1
				console_command create_unit dale_ls "Dale Cavalry" 2 3 1 1
				inc_counter ls_dale 8
			end_if
			if I_CompareCounter ls_dale < 17
				console_command create_unit dale_ls "Rivermen" 1 3 1 1
				console_command create_unit dale_ls "Dalian Swordsmen" 1 3 1 1
				console_command create_unit dale_ls "Northmen Archers" 1 3 1 1
				console_command create_unit dale_ls "Dalian Billmen" 1 3 1 1
				inc_counter ls_dale 4
			end_if
			if I_CompareCounter ls_dale < 19
				console_command create_unit dale_ls "Northmen Militia" 1 3 1 1
				console_command create_unit dale_ls "Northmen Archers" 1 3 1 1
				inc_counter ls_dale 2
			end_if
			if I_CompareCounter ls_dale < 20
				console_command create_unit dale_ls "Rhovanion Gadrauhts" 1 3 1 1
				inc_counter ls_dale 1
			end_if
        end_if
        if I_CompareCounter faction_ID_sicily == 1
            and I_NumberOfSettlements sicily <= 3
            and I_EventCounter last_stand_gondor = 0
            log always --------------------------- last stand gondor-------------------------
            historic_event last_stand_gondor
            increment_kings_purse sicily 3000
			spawn_army
				faction sicily
				character	random_name, named character, age 33, x 240, y 235, family, direction SE, label gondor_ls
				traits		DunedainRace 1, Gondorian 1, AIBoost 1, Energetic 1, GoodCommander 1, GoodDefender 2, SiegeDefender 2, HaleAndHearty 2, Loyal 1, LoyaltyStarter 1, PietyStarter 1
				unit		Gondor Bodyguard				exp 6 armour 3 weapon_lvl 1
				unit		Citadel Guard					exp 4 armour 2 weapon_lvl 1
				unit		Gondor Spearmen				exp 4 armour 2 weapon_lvl 0					
				unit		Gondor Infantry					exp 3 armour 2 weapon_lvl 0
				unit		Gondor Archers					exp 3 armour 2 weapon_lvl 0
				unit		Gondor Cavalry					exp 3 armour 2 weapon_lvl 0
				unit		Gondor Militia					exp 2 armour 1 weapon_lvl 0
				unit		Gondor Archer Militia					exp 2 armour 1 weapon_lvl 0
				unit		Gondor Cavalry Militia					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_gondor 9
			if I_NumberOfSettlements milan >= 3
			and I_CompareCounter ls_gondor < 15
				console_command create_unit gondor_ls "Eored Lancers" 2 3 1 1
				console_command create_unit gondor_ls "Riders of the Fold" 1 3 1 1
				console_command create_unit gondor_ls "Shieldmaidens of Rohan" 1 3 1 1
				console_command create_unit gondor_ls "Rohirrim" 1 3 1 1
				inc_counter ls_gondor 5
			end_if
			if I_NumberOfSettlements denmark >= 2
			and I_CompareCounter ls_gondor < 16
				console_command create_unit gondor_ls "Knights of the Silver Swan" 2 3 1 1
				console_command create_unit gondor_ls "Talon Knights" 1 3 1 1
				console_command create_unit gondor_ls "Sea-ward Lancers" 1 3 1 1
				inc_counter ls_gondor 4
			end_if
			if I_SettlementOwner Morgul_Vale = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Minas Ithil Guardians" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Andrast = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Anfalas Pikemen" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Anfalas = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Anfalas Pikemen" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Pinnath_Gelin = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Pinnath Gelin Cavalry" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Lamedon = sicily
			and I_CompareCounter ls_gondor < 17
				console_command create_unit gondor_ls "Lamedon Clansmen" 2 3 1 1
				console_command create_unit gondor_ls "Blackroot Vale Archers" 2 3 1 1
				inc_counter ls_gondor 4
			end_if
			if I_SettlementOwner Ethring = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Lamedon Clansmen" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Tarnost = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Lamedon Clansmen" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Brethil = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Lebennin Marines" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Fanuilond = sicily
			and I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Lebennin Marines" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Lebennin = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Lebennin Marines" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Lossarnach = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Lossarnach Axemen" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Anorien = sicily
			and I_CompareCounter ls_gondor < 17
				console_command create_unit gondor_ls "Fountain Guard" 2 3 1 1
				console_command create_unit gondor_ls "Wardens White Tower" 2 3 1 1
				inc_counter ls_gondor 4
			end_if
			if I_SettlementOwner West_Osgiliath = sicily
			and I_SettlementOwner East_Osgiliath = sicily
			and I_CompareCounter ls_gondor < 17
				console_command create_unit gondor_ls "Osgiliath Veterans" 2 3 1 1
				console_command create_unit gondor_ls "Guards of Osgiliath" 2 3 1 1
				inc_counter ls_gondor 4
			end_if
			if I_SettlementOwner Cair_Andros = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Ithilien Rangers" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner Ithilien = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Ithilien Rangers" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_SettlementOwner South_Ithilien = sicily
			and I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Ithilien Rangers" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Gondor Infantry" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Gondor Archer Militia" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_CompareCounter ls_gondor < 19
				console_command create_unit gondor_ls "Gondor Cavalry Militia" 2 3 1 1
				inc_counter ls_gondor 2
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Territorial Guardsmen" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Gondor Militia" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Gondor Archers" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Gondor Cavalry Militia" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Territorial Guardsmen" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
			if I_CompareCounter ls_gondor < 20
				console_command create_unit gondor_ls "Territorial Guardsmen" 1 3 1 1
				inc_counter ls_gondor 1
			end_if
        end_if
        if I_CompareCounter faction_ID_spain == 1
            and I_NumberOfSettlements spain <= 3
            and I_EventCounter last_stand_harad = 0
            log always --------------------------- last stand harad-------------------------
            historic_event last_stand_harad
            increment_kings_purse spain 3000
            spawn_army
                faction spain
                character	random_name, named character, age 29, x 291, y 110, family, direction N, label harad_ls
                traits		BadManRace 1, Haradrim 1, AIBoost 1, Brave 1, Energetic 1, GoodCommander 3, GoodDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                unit		Black Snake Guard					exp 5 armour 1 weapon_lvl 1
                unit		Serpent Bladesmen							exp 5 armour 0 weapon_lvl 0
                unit		Serpent Archers			exp 4 armour 1 weapon_lvl 1				
                unit		Serpent Guard			exp 4 armour 0 weapon_lvl 0
                unit		Camel Riders			exp 4 armour 0 weapon_lvl 0
				unit		Haradrim Archers			exp 4 armour 0 weapon_lvl 0
				unit		Haradrim Spearmen			exp 4 armour 0 weapon_lvl 0
            end
			set_counter ls_harad 7
			if I_SettlementOwner Gobel_Ancalimon = spain
			and I_CompareCounter ls_harad < 15
				console_command create_unit harad_ls "Serpent Bladesmen" 2 3 1 1
				console_command create_unit harad_ls "Serpent Archers" 2 3 1 1
				console_command create_unit harad_ls "Serpent Guard" 2 3 1 1
				inc_counter ls_harad 6 
			end_if
			if I_SettlementOwner Far_Harad = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Mumakil" 2 3 1 1
				console_command create_unit harad_ls "Troll-men Champions" 1 3 1 1
				console_command create_unit harad_ls "Troll-men Hunters" 1 3 1 1
				console_command create_unit harad_ls "Troll-men Warriors" 1 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner South_Umbar = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Troll-men Champions" 2 3 1 1
				console_command create_unit harad_ls "Troll-men Hunters" 2 3 1 1
				console_command create_unit harad_ls "Troll-men Warriors" 1 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner Shafra = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Muhad Beastmasters" 2 3 1 1
				console_command create_unit harad_ls "Muhad Tribesmen" 2 3 1 1
				console_command create_unit harad_ls "Camel Riders" 1 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner Amon_Eithel = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Muhad Beastmasters" 1 3 1 1
				console_command create_unit harad_ls "Muhad Tribesmen" 1 3 1 1
				console_command create_unit harad_ls "Serpent Bladesmen" 1 3 1 1
				console_command create_unit harad_ls "Southron Pikemen" 1 3 1 1
				console_command create_unit harad_ls "Southron Archers" 1 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner Harondor = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Harondor Mercenaries" 3 3 1 1
				console_command create_unit harad_ls "Hasharii Blades" 1 3 1 1
				console_command create_unit harad_ls "Hasharii Shadows" 1 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner South_Mithlond = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Southron Lancers" 1 3 1 1
				console_command create_unit harad_ls "Hasharii Blades" 2 3 1 1
				console_command create_unit harad_ls "Hasharii Shadows" 2 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner Amrun = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Southron Warband" 1 3 1 1
				console_command create_unit harad_ls "Hasharii Blades" 2 3 1 1
				console_command create_unit harad_ls "Hasharii Shadows" 2 3 1 1
				inc_counter ls_harad 5 
			end_if
			if I_SettlementOwner Near_Harad = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Variag Horse Archers" 1 3 1 1
				console_command create_unit harad_ls "Steppe Tribesmen" 1 3 1 1
				console_command create_unit harad_ls "Steppe Archers" 1 3 1 1
				console_command create_unit harad_ls "Variag Swordsmen" 1 3 1 1
				console_command create_unit harad_ls "Variag Lancers" 1 3 1 1
				inc_counter ls_harad 5
			end_if
			if I_SettlementOwner Haradwaith = spain
			and I_CompareCounter ls_harad < 16
				console_command create_unit harad_ls "Nomad Horsemen" 1 3 1 1
				console_command create_unit harad_ls "Khandish Raiders" 1 3 1 1
				console_command create_unit harad_ls "Nomad Warriors" 1 3 1 1
				console_command create_unit harad_ls "Nomad Axemen" 1 3 1 1
				console_command create_unit harad_ls "Khandish Hunters" 1 3 1 1
				inc_counter ls_harad 5
			end_if
			if I_CompareCounter ls_harad < 13
				console_command create_unit harad_ls "Serpent Bladesmen" 1 3 1 1
				console_command create_unit harad_ls "Southron Lancers" 2 3 1 1
				console_command create_unit harad_ls "Serpent Archers" 1 3 1 1
				console_command create_unit harad_ls "Southron Archers" 2 3 1 1
				console_command create_unit harad_ls "Southron Pikemen" 1 3 1 1
				console_command create_unit harad_ls "Southron Warband" 1 3 1 1
				inc_counter ls_harad 8
			end_if
			if I_CompareCounter ls_harad < 17
				console_command create_unit harad_ls "Serpent Guard" 1 3 1 1
				console_command create_unit harad_ls "Southron Pikemen" 1 3 1 1
				console_command create_unit harad_ls "Southron Warband" 1 3 1 1
				console_command create_unit harad_ls "Southron Archers" 1 3 1 1
				inc_counter ls_harad 4
			end_if
			if I_CompareCounter ls_harad < 19
				console_command create_unit harad_ls "Haradrim Archers" 1 3 1 1
				console_command create_unit harad_ls "Southron Lancers" 1 3 1 1
				inc_counter ls_harad 2
			end_if
			if I_CompareCounter ls_harad < 20
				console_command create_unit harad_ls "Haradrim Spearmen" 1 3 1 1
				inc_counter ls_harad 1
			end_if
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
            and I_NumberOfSettlements teutonic_order <= 3
            and I_EventCounter last_stand_ened = 0
            log always --------------------------- last stand Enedwaith-------------------------
            historic_event last_stand_ened
            increment_kings_purse teutonic_order 3000
            spawn_army
                faction teutonic_order
                character	random_name, named character, age 32, x 162, y 284, family, direction SW, label ened_ls
                traits		MiddleManRace 1, EnedwaithClansman 1, AIBoost 1, GoodAmbusher 1, GoodCommander 2, GoodDefender 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                unit		Elder Guildsmen			exp 5 armour 1 weapon_lvl 1
                unit		Guardians of Enedwaith			exp 4 armour 1 weapon_lvl 1				
				unit		Foresters of Haleth			exp 3 armour 2 weapon_lvl 0					
				unit		Warchanters			 exp 3 armour 2 weapon_lvl 0
				unit		Enedwaith Hunters			 exp 3 armour 2 weapon_lvl 0
				unit		Enedwaith Clansmen					exp 2 armour 1 weapon_lvl 0
				unit		Angren Raiders			exp 3 armour 2 weapon_lvl 0					
				unit		River Elders			 exp 3 armour 2 weapon_lvl 0
				unit		Greyflood Horsemen			 exp 3 armour 2 weapon_lvl 0
			end
			set_counter ls_ened 10
			if I_SettlementOwner Talsir = teutonic_order
			and I_CompareCounter ls_ened < 16
				console_command create_unit ened_ls "Moot Keepers" 2 3 1 1
				console_command create_unit ened_ls "War Wagons" 1 3 1 1
				console_command create_unit ened_ls "Greyflood Raiders" 1 3 1 1
				console_command create_unit ened_ls "Greyflood Horsemen" 1 3 1 1
				inc_counter ls_ened 5
			end_if
			if I_SettlementOwner Druwaith_Iaur = teutonic_order
			and I_CompareCounter ls_ened < 16
				console_command create_unit ened_ls "River Spearmen" 2 3 1 1
				console_command create_unit ened_ls "River Swordsmen" 1 3 1 1
				console_command create_unit ened_ls "River Elders" 1 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_SettlementOwner Lond_Angren = teutonic_order
			and I_CompareCounter ls_ened < 17
				console_command create_unit ened_ls "Greyflood Raiders" 2 3 1 1
				console_command create_unit ened_ls "Greyflood Axemen" 1 3 1 1
				console_command create_unit ened_ls "Greyflood Horsemen" 1 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_SettlementOwner North_Enedwaith = teutonic_order
			and I_CompareCounter ls_ened < 17
				console_command create_unit ened_ls "Greyflood Raiders" 1 3 1 1
				console_command create_unit ened_ls "Angren Raiders" 1 3 1 1
				console_command create_unit ened_ls "Greyflood Axemen" 1 3 1 1
				console_command create_unit ened_ls "River Archers" 1 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_SettlementOwner Suduri = teutonic_order
			and I_CompareCounter ls_ened < 16
				console_command create_unit ened_ls "Eryn Vorn Woodsmen" 2 3 1 1
				console_command create_unit ened_ls "Minhiriath Warriors" 2 3 1 1
				console_command create_unit ened_ls "River Scouts" 1 3 1 1
				inc_counter ls_ened 5
			end_if
			if I_SettlementOwner Central_Minhiriath = teutonic_order
			and I_CompareCounter ls_ened < 16
				console_command create_unit ened_ls "Eryn Vorn Woodsmen" 1 3 1 1
				console_command create_unit ened_ls "Minhiriath Warriors" 3 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_SettlementOwner Enedwaith = teutonic_order
			and I_CompareCounter ls_ened < 16
				console_command create_unit ened_ls "Eryn Vorn Woodsmen" 3 3 1 1
				console_command create_unit ened_ls "Minhiriath Warriors" 1 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_CompareCounter ls_ened < 13
				console_command create_unit ened_ls "Foresters of Haleth" 1 3 1 1
				console_command create_unit ened_ls "River Scouts" 2 3 1 1
				console_command create_unit ened_ls "Greyflood Raiders" 1 3 1 1
				console_command create_unit ened_ls "River Spearmen" 2 3 1 1
				console_command create_unit ened_ls "Enedwaith Clansmen" 1 3 1 1
				console_command create_unit ened_ls "Enedwaith Hunters" 1 3 1 1
				inc_counter ls_ened 8
			end_if
			if I_CompareCounter ls_ened < 17
				console_command create_unit ened_ls "Guardians of Enedwaith" 1 3 1 1
				console_command create_unit ened_ls "Enedwaith Hunters" 1 3 1 1
				console_command create_unit ened_ls "Enedwaith Clansmen" 1 3 1 1
				console_command create_unit ened_ls "Greyflood Horsemen" 1 3 1 1
				inc_counter ls_ened 4
			end_if
			if I_CompareCounter ls_ened < 19
				console_command create_unit ened_ls "Enedwaith Clansmen" 1 3 1 1
				console_command create_unit ened_ls "River Elders" 1 3 1 1
				inc_counter ls_ened 2
			end_if
			if I_CompareCounter ls_ened < 20
				console_command create_unit ened_ls "Enedwaith Hunters" 1 3 1 1
				inc_counter ls_ened 1
			end_if
        end_if
        if I_CompareCounter faction_ID_timurids == 1
            and I_NumberOfSettlements timurids <= 3
            and I_EventCounter last_stand_anduin = 0
            log always --------------------------- last stand Anduin-------------------------
            historic_event last_stand_anduin
            increment_kings_purse timurids 3000
            spawn_army
                faction timurids
                character	random_name, named character, age 21, x 306, y 370, family, direction SW, label av_ls
                traits		GoodManRace 1, Woodman 1, AIBoost 1, Energetic 1, GoodCommander 2, GoodDefender 2, HaleAndHearty 2, Loyal 2, LoyaltyStarter 1, PietyStarter 1
                unit		Skin-Changers			exp 5 armour 1 weapon_lvl 1
  				unit		Carrock Guard					exp 4 armour 2 weapon_lvl 1
				unit		Woodmen Wardens				exp 3 armour 2 weapon_lvl 0					
				unit		Vale Defenders					exp 3 armour 2 weapon_lvl 0
				unit		Woodmen Trackers					exp 3 armour 2 weapon_lvl 0
				unit		Woodmen Warriors					exp 2 armour 1 weapon_lvl 0
				unit		Valesmen					exp 2 armour 1 weapon_lvl 0
				unit		Beorning Warriors					exp 3 armour 2 weapon_lvl 0
				unit		Beorning Riders					exp 2 armour 1 weapon_lvl 0
				unit		Beorning Shieldbearers					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_av 10
			if I_CompareCounter av_allied_silvans = 1
			and I_CompareCounter ls_av < 19
				console_command create_unit av_ls "Silvan Marchwardens" 2 3 1 1
				inc_counter ls_av 2
			end_if
			if I_SettlementOwner Woodsmen = timurids
			and I_CompareCounter ls_av < 16
				console_command create_unit av_ls "Greenwood Foresters" 2 3 1 1
				console_command create_unit av_ls "Woodmen Wardens" 1 3 1 1
				console_command create_unit av_ls "Woodmen Trackers" 1 3 1 1
				console_command create_unit av_ls "Woodmen Warriors" 1 3 1 1
				inc_counter ls_av 5
			end_if
			if I_SettlementOwner Lower_Anduin_Vale = timurids
			and I_CompareCounter ls_av < 19
				console_command create_unit av_ls "Carrock Guard" 2 3 1 1
				inc_counter ls_av 1
			end_if
			if I_SettlementOwner Gladden_Fields = timurids
			and I_CompareCounter ls_av < 19
				console_command create_unit av_ls "Stoor Hunters" 1 3 1 1
				console_command create_unit av_ls "Stoor Shirriffs" 1 3 1 1
				inc_counter ls_av 2
			end_if
			if I_CompareCounter ls_av < 13
				console_command create_unit av_ls "Valesmen" 2 3 1 1
				console_command create_unit av_ls "Beorning Warriors" 2 3 1 1
				console_command create_unit av_ls "Beorning Riders" 1 3 1 1
				console_command create_unit av_ls "Beorning Shieldbearers" 1 3 1 1
				console_command create_unit av_ls "Vale Defenders" 2 3 1 1
				inc_counter ls_av 8
			end_if
			if I_CompareCounter ls_av < 17
				console_command create_unit av_ls "Woodmen Trackers" 1 3 1 1
				console_command create_unit av_ls "Woodmen Warriors" 1 3 1 1
				console_command create_unit av_ls "Valesmen" 1 3 1 1
				console_command create_unit av_ls "Vale Defenders" 1 3 1 1
				inc_counter ls_av 4
			end_if
			if I_CompareCounter ls_av < 19
				console_command create_unit av_ls "Beorning Warriors" 1 3 1 1
				console_command create_unit av_ls "Beorning Shieldbearers" 1 3 1 1
				inc_counter ls_av 2
			end_if
			if I_CompareCounter ls_av < 20
				console_command create_unit av_ls "Beorning Riders" 1 3 1 1
				inc_counter ls_av 1
			end_if
        end_if
        if I_CompareCounter faction_ID_turks == 1
            and I_NumberOfSettlements turks <= 3
            and I_EventCounter last_stand_nd = 0
            log always --------------------------- last stand ND-------------------------
            historic_event last_stand_nd
            increment_kings_purse turks 3000
            spawn_army
                faction turks
                character	random_name, named character, age 35, x 222, y 369, family, direction S, label nd_ls
                traits		DunedainRace 1, DunedainRanger 1, AIBoost 1, Brave 2, Energetic 1, GoodCommander 1, GoodDefender 1, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1
                unit		Dunedain Bodyguard		exp 5 armour 3 weapon_lvl 1
  				unit		Dunedain Steelbowmen					exp 4 armour 2 weapon_lvl 1
				unit		Dunedain Rangers				exp 4 armour 2 weapon_lvl 0					
				unit		Dunedain Rangers					exp 3 armour 2 weapon_lvl 0
				unit		Dunedain Blademasters					exp 3 armour 2 weapon_lvl 0
				unit		Dunedain Armsmen					exp 3 armour 2 weapon_lvl 0
				unit		Dunedain Cavalry					exp 3 armour 2 weapon_lvl 0
				unit		Dunedain Wardens					exp 2 armour 1 weapon_lvl 0
				unit		Dunedain Scouts					exp 2 armour 1 weapon_lvl 0
			end
			set_counter ls_nd 99
			if I_SettlementOwner Tharbad = turks
			and I_CompareCounter ls_nd < 20
				console_command create_unit nd_ls "Tharbad Royal Guard" 1 3 1 1
				inc_counter ls_nd 1
			end_if
			if I_SettlementOwner Arthedain = turks
			and I_CompareCounter arthedain_admin > 2
			and I_CompareCounter ls_nd < 17
				console_command create_unit nd_ls "Arthedain Knights" 1 3 1 1
				console_command create_unit nd_ls "Arthedain Royal Guard" 1 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_SettlementOwner Lake_Evendim = turks
			and I_CompareCounter arthedain_admin > 2
			and I_CompareCounter ls_nd < 19
				console_command create_unit nd_ls "Arthedain Knights" 1 3 1 1
				console_command create_unit nd_ls "Arthedain Royal Guard" 1 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_CompareCounter arthedain_admin > 1
			and I_CompareCounter ls_nd < 19
				console_command create_unit nd_ls "Arthedain Footmen" 2 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_CompareCounter cardolan_admin > 2
			and I_CompareCounter ls_nd < 17
				console_command create_unit nd_ls "Cardolan Sentinels" 2 3 1 1
				console_command create_unit nd_ls "Cardolan Riders" 2 3 1 1
				inc_counter ls_nd 4
			end_if
			if I_EventCounter arnor_restored = 1
			and I_CompareCounter ls_nd < 20 
				console_command create_unit nd_ls "Sons of Numenor" 1 3 1 1
				inc_counter ls_nd 1
			end_if
			if I_CompareCounter ls_nd < 17
				console_command create_unit nd_ls "Sworn Infantry" 2 3 1 1
				console_command create_unit nd_ls "Sworn Horsemen" 2 3 1 1
				inc_counter ls_nd 4
			end_if
			if I_CompareCounter ls_nd < 19
				console_command create_unit nd_ls "Local Militia" 1 3 1 1
				console_command create_unit nd_ls "Local Archers" 1 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_CompareCounter ls_nd < 19
				console_command create_unit nd_ls "Dunedain Rangers" 1 3 1 1
				console_command create_unit nd_ls "Dunedain Scouts" 1 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_CompareCounter ls_nd < 19
				console_command create_unit nd_ls "Sworn Infantry" 1 3 1 1
				console_command create_unit nd_ls "Local Militia" 1 3 1 1
				inc_counter ls_nd 2
			end_if
			if I_CompareCounter ls_nd < 20
				console_command create_unit nd_ls "Local Archers" 1 3 1 1
				inc_counter ls_nd 1
			end_if
			if I_CompareCounter ls_nd < 20
				console_command create_unit nd_ls "Sworn Horsemen" 1 3 1 1
				inc_counter ls_nd 1
			end_if
			if I_CompareCounter ls_nd < 20
				console_command create_unit nd_ls "Dunedain Wardens" 1 3 1 1
				inc_counter ls_nd 1
			end_if
        end_if
        if I_CompareCounter faction_ID_venice == 1
            and I_NumberOfSettlements venice <= 3
            and I_EventCounter last_stand_rhun = 0
            log always --------------------------- last stand Rhun-------------------------
            historic_event last_stand_rhun
            increment_kings_purse venice 3000
            spawn_army
                faction venice
                character	random_name, named character, age 22, x 502, y 273, family, direction W, label rhun_ls
                traits		BadManRace 1, DaritaiClan 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Loke Rim Bodyguard				exp 5 armour 1 weapon_lvl 1
                unit		Loke-Nar Rim		exp 5 armour 1 weapon_lvl 1
                unit		Loke-Flag Rim			exp 4 armour 0 weapon_lvl 0
                unit		Loke-Gamp Rim			exp 4 armour 0 weapon_lvl 0
                unit		Loke-Innas Rim	exp 3 armour 1 weapon_lvl 0	
				unit		Loke-Scion Rim	exp 3 armour 1 weapon_lvl 0					
            end
			set_counter ls_rhun 6
			if I_SettlementOwner Mistrand = venice
			and I_CompareCounter ls_rhun < 15
				console_command create_unit rhun_ls "Dragons Wrath Guildsmen" 2 3 1 1
				console_command create_unit rhun_ls "Daritai Crossbowmen" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Warriors" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Clansmen" 1 3 1 1
				inc_counter ls_rhun 6
			end_if
			if I_SettlementOwner Rhun = venice
			and I_CompareCounter ls_rhun < 15
				console_command create_unit rhun_ls "Udege Marines" 2 3 1 1
				console_command create_unit rhun_ls "Daritai Crossbowmen" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Warriors" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Clansmen" 1 3 1 1
				inc_counter ls_rhun 6
			end_if
			if I_SettlementOwner North_Rhun = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Arulad Dragonguard" 2 3 1 1
				console_command create_unit rhun_ls "Arulad Dragonriders" 3 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_SettlementOwner kelepar = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Arulad Dragonguard" 2 3 1 1
				console_command create_unit rhun_ls "Arulad Dragonriders" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Warriors" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_SettlementOwner Eastrhun = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Balchoth Tribesmen" 2 3 1 1
				console_command create_unit rhun_ls "Balchoth Spearmen" 2 3 1 1
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_SettlementOwner Farest_Rhun = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Balchoth Tribesmen" 2 3 1 1
				console_command create_unit rhun_ls "Balchoth Spearmen" 2 3 1 1
				console_command create_unit rhun_ls "Farrhun Mercanaries" 1 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_SettlementOwner South_Dorwinion = venice
			and I_CompareCounter ls_rhun < 17
				console_command create_unit rhun_ls "Suriut Chariots" 1 3 1 1
				console_command create_unit rhun_ls "Udege Marines" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Clansmen" 2 3 1 1
				inc_counter ls_rhun 4
			end_if
			if I_SettlementOwner Dorwinion = venice
			and I_CompareCounter ls_rhun < 17
				console_command create_unit rhun_ls "Suriut Chariots" 2 3 1 1
				console_command create_unit rhun_ls "Udege Marines" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Warriors" 1 3 1 1
				inc_counter ls_rhun 4
			end_if
			if I_SettlementOwner Dorwinion = venice
			and I_CompareCounter ls_rhun < 17
				console_command create_unit rhun_ls "Suriut Chariots" 1 3 1 1
				console_command create_unit rhun_ls "Udege Marines" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Crossbowmen" 2 3 1 1
				inc_counter ls_rhun 4
			end_if
			if I_SettlementOwner Southern_Rhun = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Variag Horse Archers" 1 3 1 1
				console_command create_unit rhun_ls "Steppe Tribesmen" 1 3 1 1
				console_command create_unit rhun_ls "Steppe Archers" 1 3 1 1
				console_command create_unit rhun_ls "Variag Swordsmen" 1 3 1 1
				console_command create_unit rhun_ls "Variag Lancers" 1 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_SettlementOwner Morad = venice
			and I_CompareCounter ls_rhun < 16
				console_command create_unit rhun_ls "Nomad Horsemen" 1 3 1 1
				console_command create_unit rhun_ls "Khandish Raiders" 1 3 1 1
				console_command create_unit rhun_ls "Nomad Warriors" 1 3 1 1
				console_command create_unit rhun_ls "Nomad Axemen" 1 3 1 1
				console_command create_unit rhun_ls "Khandish Hunters" 1 3 1 1
				inc_counter ls_rhun 5
			end_if
			if I_CompareCounter ls_rhun < 13
				console_command create_unit rhun_ls "Loke-Gamp Rim" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Crossbowmen" 2 3 1 1
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Clansmen" 2 3 1 1
				console_command create_unit rhun_ls "Balchoth Spearmen" 1 3 1 1
				console_command create_unit rhun_ls "Arulad Dragonriders" 1 3 1 1
				inc_counter ls_rhun 8
			end_if
			if I_CompareCounter ls_rhun < 17
				console_command create_unit rhun_ls "Arulad Dragonguard" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Warriors" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Clansmen" 1 3 1 1
				console_command create_unit rhun_ls "Balchoth Tribesmen" 1 3 1 1
				inc_counter ls_rhun 4
			end_if
			if I_CompareCounter ls_rhun < 19
				console_command create_unit rhun_ls "Daritai Clansmen" 1 3 1 1
				console_command create_unit rhun_ls "Daritai Crossbowmen" 1 3 1 1
				inc_counter ls_rhun 2
			end_if
			if I_CompareCounter ls_rhun < 20
				console_command create_unit rhun_ls "Daritai Hunters" 1 3 1 1
				inc_counter ls_rhun 1
			end_if
        end_if
    end_monitor

    ;#################### Script: DG Spiders ############################

    monitor_event PreFactionTurnStart

        if not I_CharacterExists spiders_1
        and not I_CharacterExists spiders_2
        and not I_CharacterExists spiders_3
        and not I_CharacterExists spiders_4
        and not I_CharacterExists spiders_5
        and not I_CharacterExists spiders_6
        and not I_CharacterExists spiders_7
        and not I_CharacterExists spiders_8
            set_event_counter unlock_spiders 1
            terminate_monitor
        end_if

    end_monitor

    ;########################## Script: Money ############################
    
    monitor_event FactionTurnStart IsFactionAIControlled
        and Treasury <= -1
        log always --------------------------- treasury script-------------------------
        if I_CompareCounter faction_ID_aztecs == 1
            add_money aztecs 2000
            log always --------------------------- dunland bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
            add_money byzantium 2000
            log always --------------------------- dorwinion bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_denmark == 1
            add_money denmark 2000
            log always --------------------------- dol amroth bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_england == 1
            add_money england 2000
            log always --------------------------- mordor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_france == 1
            add_money france 2000
            log always --------------------------- isengard bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
            add_money gundabad 2000
            log always --------------------------- gundabad bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_hre == 1
            add_money hre 2000
            log always --------------------------- moria bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_hungary == 1
            add_money hungary 2000
            log always --------------------------- EL bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_ireland == 1
            add_money ireland 2000
            log always --------------------------- Lorien bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_khand == 1
            add_money khand 2000
            log always --------------------------- khand bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_milan == 1
            add_money milan 2000
            log always --------------------------- rohan bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_mongols == 1
            add_money mongols 2000
            log always --------------------------- WR bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_moors == 1
            add_money moors 2000
            log always --------------------------- erebor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_normans == 1
            add_money normans 2000
            log always --------------------------- bree bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_norway == 1
            add_money norway 2000
            log always --------------------------- KD bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_poland == 1
            add_money poland 2000
            log always --------------------------- DG bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_portugal == 1
            add_money portugal 2000
            log always --------------------------- Angmar bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_russia == 1
            add_money russia 2000
            log always --------------------------- AA bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_saxons == 1
            add_money saxons 2000
            log always --------------------------- HE bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_scotland == 1
            add_money scotland 2000
            log always --------------------------- Dale bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_sicily == 1
            add_money sicily 2000
            log always --------------------------- Gondor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_spain == 1
            add_money spain 2000
            log always --------------------------- Harad bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
            add_money teutonic_order 2000
            log always --------------------------- enedwaith bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_timurids == 1
            add_money timurids 2000
            log always --------------------------- anduin bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_turks == 1
            add_money turks 2000
            log always --------------------------- ND bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_venice == 1
            add_money venice 2000
            log always --------------------------- Rhun bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_slave == 1
            add_money slave -2147483647
            add_money slave 2147483647
            add_money slave 5000
            log always --------------------------- slave bankrupt boost------------------------
        end_if
    end_monitor
    
    monitor_event FactionTurnStart IsFactionAIControlled
        and Treasury <= -10000
        log always --------------------------- treasury script-------------------------
        if I_CompareCounter faction_ID_aztecs == 1
            add_money aztecs 4000
            log always --------------------------- dunland bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
            add_money byzantium 4000
            log always --------------------------- dorwinion bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_denmark == 1
            add_money denmark 4000
            log always --------------------------- dol amroth bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_england == 1
            add_money england 4000
            log always --------------------------- mordor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_france == 1
            add_money france 4000
            log always --------------------------- isengard bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
            add_money gundabad 4000
            log always --------------------------- gundabad bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_hre == 1
            add_money hre 4000
            log always --------------------------- moria bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_hungary == 1
            add_money hungary 4000
            log always --------------------------- EL bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_ireland == 1
            add_money ireland 4000
            log always --------------------------- Lorien bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_khand == 1
            add_money khand 4000
            log always --------------------------- khand bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_milan == 1
            add_money milan 4000
            log always --------------------------- rohan bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_mongols == 1
            add_money mongols 4000
            log always --------------------------- WR bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_moors == 1
            add_money moors 4000
            log always --------------------------- erebor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_normans == 1
            add_money normans 4000
            log always --------------------------- bree bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_norway == 1
            add_money norway 4000
            log always --------------------------- KD bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_poland == 1
            add_money poland 4000
            log always --------------------------- DG bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_portugal == 1
            add_money portugal 4000
            log always --------------------------- Angmar bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_russia == 1
            add_money russia 4000
            log always --------------------------- AA bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_saxons == 1
            add_money saxons 4000
            log always --------------------------- HE bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_scotland == 1
            add_money scotland 4000
            log always --------------------------- Dale bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_sicily == 1
            add_money sicily 4000
            log always --------------------------- Gondor bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_spain == 1
            add_money spain 4000
            log always --------------------------- Harad bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
            add_money teutonic_order 4000
            log always --------------------------- enedwaith bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_timurids == 1
            add_money timurids 4000
            log always --------------------------- anduin bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_turks == 1
            add_money turks 4000
            log always --------------------------- ND bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_venice == 1
            add_money venice 4000
            log always --------------------------- Rhun bankrupt boost------------------------
        end_if
        if I_CompareCounter faction_ID_slave == 1
            add_money slave -2147483647
            add_money slave 2147483647
            add_money slave 5000
            log always --------------------------- slave bankrupt boost------------------------
        end_if
    end_monitor

    monitor_event FactionTurnStart IsFactionAIControlled
        and Treasury >= 60000
        log always --------------------------- AI snowball reduction-------------------------
        if I_CompareCounter faction_ID_aztecs == 1
            add_money aztecs -10000
            log always --------------------------- dunland too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
            add_money byzantium -10000
            log always --------------------------- dorwinion too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_denmark == 1
            add_money denmark -10000
            log always --------------------------- dol amroth too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_england == 1
            add_money england -10000
            log always --------------------------- mordor too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_france == 1
            add_money france -10000
            log always --------------------------- isengard too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
            add_money gundabad -10000
            log always --------------------------- gundabad too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_hre == 1
            add_money hre -10000
            log always --------------------------- moria too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_hungary == 1
            add_money hungary -10000
            log always --------------------------- EL too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_ireland == 1
            add_money ireland -10000
            log always --------------------------- Lorien too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_khand == 1
            add_money khand -10000
            log always --------------------------- khand too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_milan == 1
            add_money milan -10000
            log always --------------------------- rohan too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_mongols == 1
            add_money mongols -10000
            log always --------------------------- WR too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_moors == 1
            add_money moors -10000
            log always --------------------------- erebor too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_normans == 1
            add_money normans -10000
            log always --------------------------- bree too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_norway == 1
            add_money norway -10000
            log always --------------------------- KD too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_poland == 1
            add_money poland -10000
            log always --------------------------- DG too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_portugal == 1
            add_money portugal -10000
            log always --------------------------- Angmar too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_russia == 1
            add_money russia -10000
            log always --------------------------- AA too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_saxons == 1
            add_money saxons -10000
            log always --------------------------- HE too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_scotland == 1
            add_money scotland -10000
            log always --------------------------- Dale too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_sicily == 1
            add_money sicily -10000
            log always --------------------------- Gondor too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_spain == 1
            add_money spain -10000
            log always --------------------------- Harad too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
            add_money teutonic_order -10000
            log always --------------------------- enedwaith too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_timurids == 1
            add_money timurids -10000
            log always --------------------------- anduin too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_turks == 1
            add_money turks -10000
            log always --------------------------- ND too rich nerf------------------------
        end_if
        if I_CompareCounter faction_ID_venice == 1
            add_money venice -10000
            log always --------------------------- Rhun too rich nerf------------------------
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType england
        send_character_off_map sauron_1
        campaign_wait 1
        spawn_army
            faction england
            character	Sauron, named character, age 18, x 507, y 480, family, portrait sauron, battle_model elephant_crew3, hero_ability SAURON, label sauron_1
            traits		Sauron 1, CustomBG 1, Hero 1, MaiaRace 1, FactionLeaderCustom 1, HeroAbilitySauron 1, FearGeneral 1, BattleFear 6, DeceiverVirtue 3, GoodAttacker 4, GoodDefender 3, GoodCommander 4, HaleAndHearty 3, NightBattleCapable 1, InspiringSpeaker 3, Brave 4, SauronEpithet 1
            unit		Sauron			    soldiers 1	 exp 1 armour 0 weapon_lvl 0
        end
        console_command give_ancillary sauron_1 king_mordor
        console_command give_ancillary sauron_1 sauron_mace
        terminate_monitor
    end_monitor

    ;##################### Script: Moria Balrog Garrison ######################
    declare_counter balrog_garrison

    monitor_event GeneralAssaultsResidence IsTargetRegionOneOf West_Moria_Province
    and CharacterIsLocal
    and I_SettlementUnderSiege West_Moria
        log always --------------------------- Balrog garrison spawn------------------------
        if I_EventCounter balrog_spawned = 1
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled hre
            terminate_monitor
        end_if
        if not I_SettlementOwner West_Moria = hre
            terminate_monitor
        end_if
        if I_SettlementOwner West_Moria = hre
        and I_EventCounter balrog_spawned = 0
            console_command create_unit West_Moria "Balrog" 1 3 0 0
            set_counter balrog_garrison 1
        end_if
    end_monitor

    monitor_event PostBattle I_CompareCounter balrog_garrison = 1
    and not WasAttacker
    and WonBattle
        log always --------------------------- Balrog garrison destroy------------------------
        destroy_units hre Balrog
        set_counter balrog_garrison 0
        if not I_IsFactionAIControlled hre
            terminate_monitor
        end_if
        if I_EventCounter balrog_spawned = 1
            terminate_monitor
        end_if
        if not I_SettlementOwner West_Moria = hre
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreBattleWithdrawal I_CompareCounter balrog_garrison = 1
        log always --------------------------- Balrog garrison destroy 2------------------------
        destroy_units hre Balrog
        set_counter balrog_garrison 0
        if not I_IsFactionAIControlled hre
            terminate_monitor
        end_if
        if I_EventCounter balrog_spawned = 1
            terminate_monitor
        end_if
        if not I_SettlementOwner West_Moria = hre
            terminate_monitor
        end_if
    end_monitor


    ;##################### Script: Moria Reclaiming ######################
    ;######################## Part 1: Settlement #########################

    monitor_event ScrollOpened ScrollOpened loot_settlement_scroll
        if I_IsFactionAIControlled hre
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled hre
            and I_CompareCounter faction_ID_hre == 1
            disable_cursor
            campaign_wait 1
            select_ui_element loot_settlement_exterminate_button
            simulate_mouse_click lclick_down
            simulate_mouse_click lclick_up
            enable_cursor
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionIsLocal
        if I_CompareCounter give_moria_to_hre = 0											;If Faction played is not KD or Misty
            add_money norway 5000
            increment_kings_purse norway 500
            console_command create_unit balin_1 "Dragonslayers" 1 3 1 1
            console_command create_unit balin_1 "Khazad Sentries" 2 1 1 0
            console_command create_unit balin_1 "Erebor Infantry" 2 1 1 0
            console_command create_unit balin_1 "Khazad Volunteers" 3 0 0 0
            console_command create_unit balin_1 "Dwarven Labourers" 3 0 0 0
            console_command create_unit balin_1 "Dwarven Travellers" 3 0 0 0
            reposition_character balin_1, 246, 341
            move balin_1, 245, 341
            spawn_army
                faction hre
                character	Orcobal, named character, age 22, x 237, y 345, portrait Orcobal, direction W, label guardian_moria_1
                traits		OrcRace 1, AIBoost 1, BattleChivalryEvil 2, GoodAttacker 2, GoodCommander 2, GoodDefender 1, HarshRuler 1, Intelligent 1, LoyaltyStarter 1, OneRingAvailable 1
                unit		Goblin Bodyguards				exp 5 armour 0 weapon_lvl 0
                unit		Warg Riders					exp 2 armour 0 weapon_lvl 0
                unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
                unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
            end
            campaign_wait 0.1
            console_command give_ancillary guardian_moria_1 oomm_moria
        end_if
        if I_CompareCounter give_moria_to_hre = 1										;If Faction played is KD
            if not I_HotseatEnabled
                console_command create_building Grey_Foothills mines
                snap_strat_camera 340, 419
                restrict_strat_camera 335, 417, 345, 427
                restrict_clickable_area Dale_Province Erebor_Province
                freeze_faction_ai norway
                campaign_wait 1
                console_command surrender_regions norway
                campaign_wait 1
                unfreeze_faction_ai norway
                if not I_IsFactionAIControlled norway
                    spawn_army
                        faction hre
                        character	random_name, named character, age 24, x 241, y 342, label hre_placeholder_1
                        traits		OrcRace 1, AIBoost 1, Locked 1, GoodCommander 2, GoodDefender 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                        unit		Goblin Bodyguards		exp 8 armour 0 weapon_lvl 0
                    end
                    campaign_wait 0.1
                    console_command auto_win attacker
                    siege_settlement hre_placeholder_1, East_Moria, attack
                    campaign_wait 5
                    destroy_units norway Dwarven Catapult
                    destroy_units norway Dwarven Labourers
                    destroy_units norway Khazad Volunteers
                    destroy_units norway Khazad Sentries
                    destroy_units norway Dwarven Travellers
                    destroy_units norway Legion Deeping Guard
                    destroy_units norway Hithaeglir Beast Hunters
                    point_at_strat_position 338, 416
                end_if
                destroy_buildings hre temple_muslim false
                console_command create_building East_Moria small_church
                restrict_strat_camera
            end_if
            if I_HotseatEnabled
                add_money norway 1000
                increment_kings_purse norway 300
                console_command create_unit balin_1 "Dragonslayers" 1 3 1 1
                console_command create_unit balin_1 "Khazad Sentries" 2 1 1 0
                console_command create_unit balin_1 "Erebor Infantry" 2 1 1 0
                console_command create_unit balin_1 "Khazad Volunteers" 3 0 0 0
                console_command create_unit balin_1 "Dwarven Labourers" 3 0 0 0
                console_command create_unit balin_1 "Dwarven Travellers" 3 0 0 0
                reposition_character balin_1, 246, 341
                campaign_wait 0.1
                move balin_1, 245, 341
                spawn_army
                    faction hre
                    character	Orcobal, named character, age 22, x 237, y 345, portrait Orcobal, direction W, label guardian_moria_1
                    traits		OrcRace 1, AIBoost 1, BattleChivalryEvil 2, GoodAttacker 2, GoodCommander 2, GoodDefender 1, HarshRuler 1, Intelligent 1, LoyaltyStarter 1, OneRingAvailable 1
                    unit		Goblin Bodyguards				exp 5 armour 0 weapon_lvl 0
                    unit		Warg Riders					exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                    unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                    unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
                    unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
                end
                campaign_wait 0.1
                console_command give_ancillary guardian_moria_1 oomm_moria
            end_if
        end_if
        if I_CompareCounter give_moria_to_hre = 2									;If Faction played is Misty
            freeze_faction_ai norway
            console_command surrender_regions norway
            campaign_wait 5
            spawn_army
                faction hre
                character	Orcobal, named character, age 22, x 244, y 341, portrait Orcobal, direction E, label guardian_moria_2
                traits		OrcRace 1, BattleChivalryEvil 2, GoodAttacker 2, GoodCommander 2, GoodDefender 1, HarshRuler 1, Intelligent 1, LoyaltyStarter 1, OneRingAvailable 1
                unit		Goblin Bodyguards				exp 5 armour 0 weapon_lvl 0
                unit		Warg Riders					exp 2 armour 0 weapon_lvl 0
                unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                unit		Goblin Infantry				exp 1 armour 0 weapon_lvl 0
                unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
                unit		Snaga Skirmishers				exp 1 armour 0 weapon_lvl 1
            end
            campaign_wait 2
            console_command auto_win attacker
            siege_settlement guardian_moria_2, East_Moria, attack
            increment_kings_purse timurids 1000
            console_command give_ancillary guardian_moria_2 oomm_moria
            destroy_units norway Dwarven Catapult
            destroy_units norway Dwarven Labourers
            destroy_units norway Khazad Volunteers
            destroy_units norway Khazad Sentries
            destroy_units norway Dwarven Travellers
            destroy_units norway Legion Deeping Guard
            destroy_units norway Hithaeglir Beast Hunters
            reposition_character balin_1, 340, 419
        end_if
        set_counter norway_messages_unlocked 1
        terminate_monitor
    end_monitor

    ;######################### Moria Reclaiming ##########################
    ;########################## Part 2: OotMM ############################

    declare_counter moria_ootmm_can_invade
    declare_counter moria_ootmm_counter
    declare_counter moria_ootmm_invading_ootmm
    declare_counter moria_ootmm_status

    monitor_event PreFactionTurnStart FactionType norway ;changed from FactionIsLocal
        if I_IsFactionAIControlled hre
            terminate_monitor
        end_if
        if not I_IsFactionAIControlled hre
            if I_CompareCounter moria_ootmm_status = 2
                if I_SettlementOwner East_Moria = norway
                    console_command add_money norway 16000
                    increment_kings_purse norway 4000
                    historic_event moria_reclaiming_ootmm_fail
                end_if
                if not I_SettlementOwner East_Moria = norway
                    historic_event moria_reclaiming_ootmm_win
                    console_command kill_faction norway
                end_if
                terminate_monitor
            end_if
            if I_CompareCounter moria_ootmm_status = 1
                if I_CompareCounter moria_ootmm_counter > 0
                    inc_counter moria_ootmm_counter -1
                end_if
                if I_CompareCounter moria_ootmm_counter = 0
                    if I_SettlementOwner East_Moria = aztecs
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria  = england
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = france
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = hre
                        set_counter moria_ootmm_can_invade 1
                        set_counter moria_ootmm_invading_ootmm 1
                    end_if
                    if I_SettlementOwner East_Moria = khand
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = poland
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = portugal
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = russia
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = spain
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_SettlementOwner East_Moria = venice
                        set_counter moria_ootmm_can_invade 1
                    end_if
                    if I_CompareCounter moria_ootmm_can_invade = 0
                        terminate_monitor
                    end_if
                    if I_CompareCounter moria_ootmm_can_invade = 1
                        unfreeze_faction_ai norway
                        campaign_wait 0.1
                        console_command move_character balin_1 246,341 ;reposition_character balin_1, 246, 342
                        console_command remove_trait balin_1 Locked
                        console_command create_unit balin_1 "Dragonslayers" 1 1 1 1
                        console_command create_unit balin_1 "Kings Shields" 1 1 1 0
                        console_command create_unit balin_1 "Kings Halberds" 1 1 1 0
                        console_command create_unit balin_1 "Kings Axes" 1 1 1 0
                        console_command create_unit balin_1 "Erebor Infantry" 2 1 1 0
                        console_command create_unit balin_1 "Hithaeglir Beast Hunters" 2 0 0 0
                        console_command create_unit balin_1 "Khazad Sentries" 2 1 1 0
                        console_command create_unit balin_1 "Khazad Volunteers" 3 1 0 1
                        console_command create_unit balin_1 "Dwarven Travellers" 2 1 0 0
                        console_command create_unit balin_1 "Dwarven Labourers" 2 0 0 0
                        console_command create_unit balin_1 "Dwarven Catapult" 2 0 0 0
                        if I_CompareCounter moria_ootmm_invading_ootmm = 0
                            console_command auto_win attacker
                        end_if
                        campaign_wait 0.1
                        siege_settlement balin_1, East_Moria, maintain
                        siege_settlement balin_1, East_Moria, attack
                        if I_CompareCounter moria_ootmm_invading_ootmm = 0
                            terminate_monitor
                        end_if
                        if I_CompareCounter moria_ootmm_invading_ootmm = 1
                            set_counter moria_ootmm_status 2
                        end_if
                    end_if
                end_if
            end_if
            if I_CompareCounter moria_ootmm_status = 0
                and I_TurnNumber >= 16
                and I_SettlementOwner East_Moria = hre
                historic_event moria_reclaiming_ootmm_2
                set_counter moria_ootmm_counter 9
                set_counter moria_ootmm_status 1
            end_if
        end_if
    end_monitor

    ;######################### Moria Reclaiming ##########################
    ;######################### Part 3: Dwarves ###########################

    declare_counter moria_reclaiming_dwarves_dalemeeting_awaiting_answer
    declare_counter moria_reclaiming_dwarves_defeat
    declare_counter moria_reclaiming_dwarves_good_diplomacy
    declare_counter moria_reclaiming_dwarves_help_beornings_awaiting_answer
    declare_counter moria_reclaiming_dwarves_help_elves_yes
    declare_counter moria_reclaiming_dwarves_help_miners_awaiting_answer
    declare_counter moria_reclaiming_dwarves_orcs_know
    declare_counter moria_reclaiming_dwarves_siege_timeout
    declare_counter moria_reclaiming_dwarves_status
    declare_counter moria_reclaiming_dwarves_terminate
    declare_counter moria_reclaimed
    declare_counter moria_percent

    monitor_event PreBattlePanelOpen TrueCondition
        and not I_HotseatEnabled
        and I_CompareCounter faction_ID_norway == 1
        if not I_IsFactionAIControlled norway
            if I_CompareCounter moria_reclaiming_dwarves_status < 6
                disable_cursor
                campaign_wait 0.5
                select_ui_element prebattle_fight_button
                simulate_mouse_click lclick_down
                simulate_mouse_click lclick_up
                enable_cursor
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_status = 6
                terminate_monitor
            end_if
        end_if
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
        if I_HotseatEnabled
            terminate_monitor
        end_if
    end_monitor

    monitor_event PostBattle TrueCondition
        and not I_HotseatEnabled																;***Red Pointers***
        if not I_IsFactionAIControlled norway
            ui_flash_stop
            if I_CompareCounter moria_reclaiming_dwarves_status = 0
                point_at_strat_position 338, 416
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_status >= 1
                if I_EventCounter moria_reclaiming_dwarves_dalemeeting_accepted = 1							;***Anduin Northern Route***
                    if I_CompareCounter moria_reclaiming_dwarves_status = 1
                        point_at_strat_position 304, 430
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 2
                        point_at_strat_position 289, 393
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 3
                        point_at_strat_position 279, 372
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 4
                        point_at_strat_position 263, 349
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 5
                        point_at_strat_position 249, 338
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 6
                        point_at_settlement East_Moria
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 7
                        terminate_monitor
                    end_if
                end_if
                if I_EventCounter moria_reclaiming_dwarves_dalemeeting_declined = 1							;***Mirkwood Southern Route***
                    if I_CompareCounter moria_reclaiming_dwarves_status = 1
                        point_at_strat_position 338, 399
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 2
                        point_at_strat_position 327, 392
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 3
                        point_at_strat_position 316, 392
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 4
                        point_at_strat_position 305, 391
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 5
                        point_at_strat_position 291, 389
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 6
                        point_at_strat_position 270, 364
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 7
                        point_at_strat_position 249, 337
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 8
                        point_at_settlement East_Moria
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 9
                        terminate_monitor
                    end_if
                end_if
            end_if
        end_if
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
    end_monitor

    monitor_event PreFactionTurnStart FactionType norway								;***Anduin/Mirkwood Option Scripts***
        if not I_IsFactionAIControlled norway
            if I_CompareCounter moria_reclaiming_dwarves_status >= 1
                if I_EventCounter moria_reclaiming_dwarves_dalemeeting_accepted = 1							;***Anduin Northern Route***
                    if I_CompareCounter moria_reclaiming_dwarves_status = 7
                        terminate_monitor
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 6
                        if I_SettlementOwner East_Moria = norway
                            ui_flash_stop
                            restrict_clickable_area
                            set_counter moria_reclaiming_dwarves_status 7
                            add_money norway 4000
                            increment_kings_purse norway 1760
                            console_command remove_ancillary balin_1 ori
                            console_command remove_ancillary balin_1 oin
                            console_command give_ancillary balin_1 highlord_khazaddum
                            console_command give_ancillary balin_1 mithril_coat
                            spawn_character norway, Ori, diplomat, age 21, x 246, y 340
                            console_command give_trait Ori Ori 1
                            console_command give_trait Ori GoodDiplomat 2
                            console_command give_trait Ori NaturalDiplomatSkill 2
                            console_command give_trait Ori Multilingual 3
                            console_command give_trait Ori AgentPiety 1
                            console_command give_ancillary Ori ori_mazarbul_book
                            console_command give_ancillary Ori erebor_raven
                            console_command give_ancillary Ori dwarven_pony
                            destroy_units norway Khazad Volunteers
                            destroy_units norway Dwarven Labourers
                            destroy_units norway Dwarven Travellers
                            spawn_army
                                faction norway
                                character	Oin, named character, age 30, x 246, y 341, direction E, portrait Oin, label oin_1, hero_ability DWARVES, family
                                traits		Oin 1, Hero 1, DwarvenRace 1, HeroAbilityDwarf 1, GoodAttacker 1, GoodCommander 3, Brave 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1
                                unit		Zenith Guard		exp 1 armour 0 weapon_lvl 0
                            end
                            console_command create_unit East_Moria "Khazad-dum Reclaimers" 1 0 0 0
                            console_command create_unit East_Moria "Dwarven Travellers" 3 0 0 0
                            console_command create_unit East_Moria "Khazad Volunteers" 4 1 1 0
                            console_command create_building East_Moria garrison_hall
                            set_recruit_pool East_Moria_Province 3 Dwarven Travellers
                            set_recruit_pool East_Moria_Province 3 Khazad Volunteers
                            set_recruit_pool East_Moria_Province 2 Khazad Sentries
                            set_counter moria_reclaimed 1
                            campaign_wait 1
                        end_if
                        if not I_SettlementOwner East_Moria = norway
                            point_at_settlement East_Moria
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 5
                        if I_CharacterTypeNearTile norway named_character, 3 249, 338
                            ui_flash_stop
                            restrict_clickable_area East_Moria_Province
                            point_at_settlement East_Moria
                            historic_event moria_reclaiming_dwarves_east_halls
                            set_counter moria_reclaiming_dwarves_status 6
                            console_command create_unit East_Moria "Mountain Uruks" 1 5 1 0
                            console_command create_unit East_Moria "Heavy Goblin Halberd" 1 2 1 0
                            console_command create_unit East_Moria "Heavy Goblin Infantry" 2 3 1 0
                            console_command create_unit East_Moria "Goblin Archers" 2 3 1 0
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 3 249, 338
                            point_at_strat_position 249, 338
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 4
                        if I_CharacterTypeNearTile norway named_character, 3 263, 349
                            ui_flash_stop
                            restrict_clickable_area Gladden_Fields_Province Celebrant_Province East_Moria_Province Pezarsan_Province
                            point_at_strat_position 249, 337
                            set_counter moria_reclaiming_dwarves_status 5
                            if I_CompareCounter moria_reclaiming_dwarves_orcs_know = 1
                                if RandomPercent > 50
                                    spawn_army
                                        faction hre
                                        character	random_name, named character, age 33, x 262, y 349, label moria_reclaiming_snaga_2
                                        traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 2, GoodAttacker 2, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                        unit		Goblin Bodyguards		exp 2 armour 0 weapon_lvl 0
                                        unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                                        unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                                        unit		Goblin Infantry		exp 1 armour 0 weapon_lvl 0
                                        unit		Goblin Infantry		exp 1 armour 0 weapon_lvl 0
                                        unit		Snaga Archers		exp 1 armour 0 weapon_lvl 1
                                    end
                                    campaign_wait 0.1
                                    set_counter moria_percent 1
                                    engage_armies moria_reclaiming_snaga_2, balin_1
                                end_if
                                if I_CompareCounter moria_percent = 0
                                    spawn_army
                                        faction hre
                                        character	random_name, named character, age 33, x 262, y 349, label moria_reclaiming_snaga_2
                                        traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 2, GoodAttacker 2, GoodCommander 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                        unit		Azogs Defilers		exp 2 armour 1 weapon_lvl 0
                                        unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                                        unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                                        unit		Warg Scouts		exp 2 armour 0 weapon_lvl 0
                                        unit		Warg Scouts		exp 2 armour 0 weapon_lvl 0
                                    end
                                    engage_armies moria_reclaiming_snaga_2, balin_1
                                end_if
                                set_counter moria_percent 0
                            end_if
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 3 263, 349
                            point_at_strat_position 263, 349
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 3
                        if I_CharacterTypeNearTile norway named_character, 3 279, 372
                            ui_flash_stop
                            restrict_clickable_area Gladden_Fields_Province Central_Vale_Province Pezarsan_Province
                            point_at_strat_position 263, 349
                            set_counter moria_reclaiming_dwarves_status 4
                            if I_EventCounter moria_reclaiming_dwarves_help_beornings_accepted = 1
                                and I_EventCounter moria_reclaiming_dwarves_help_miners_accepted = 1
                                set_counter moria_reclaiming_dwarves_orcs_know 1														;***Setting orcs to knowing you are coming if you accept helping both miners and beornings***
                            end_if
                            if I_CompareCounter moria_reclaiming_dwarves_orcs_know = 0
                                and I_EventCounter moria_reclaiming_dwarves_help_beornings_accepted = 1
                                and RandomPercent <= 66
                                set_counter moria_reclaiming_dwarves_orcs_know 1														;***Setting orcs to know you are coming with 66% chance if you help the beornings only***
                            end_if
                            if I_CompareCounter moria_reclaiming_dwarves_orcs_know = 0
                                and I_EventCounter moria_reclaiming_dwarves_help_miners_accepted = 1
                                and RandomPercent <= 33
                                set_counter moria_reclaiming_dwarves_orcs_know 1														;***Settings orcs to know you are coming with 33% chance if you help the miners only***
                            end_if
                            if I_CompareCounter moria_reclaiming_dwarves_orcs_know = 1
                                historic_event moria_reclaiming_dwarves_orcs_know														;***Creating historical event with setting***
                            end_if
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 3 279, 372
                            point_at_strat_position 279, 372
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 2
                        if I_CharacterTypeNearTile norway named_character, 3 289, 393
                            ui_flash_stop
                            restrict_clickable_area West_Anduin_Province Wrakyaburg_Province Lower_Anduin_Vale_Province Anduin_Vale_Province
                            point_at_strat_position 279, 372
                            set_counter moria_reclaiming_dwarves_status 3
                            if I_SettlementOwner Lower_Anduin_Vale = timurids
                                spawn_army
                                    faction poland
                                    character	random_name, named character, age 33, x 288, y 388, direction SE, label moria_reclaiming_sieger_1
                                    traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 1, Brave 2, GoodAttacker 1, GoodCommander 1, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                    unit		Uruk Bodyguard		exp 2 armour 1 weapon_lvl 1
                                    unit		Mirkwood Goblins		exp 1 armour 0 weapon_lvl 0
                                    unit		Mirkwood Goblins		exp 1 armour 0 weapon_lvl 0
                                    unit		Mirkwood Goblins		exp 1 armour 0 weapon_lvl 0
                                    unit		Mirkwood Goblins		exp 1 armour 0 weapon_lvl 0
                                    unit		Dol Guldur Scouts		exp 0 armour 0 weapon_lvl 1
                                    unit		Dol Guldur Scouts		exp 0 armour 0 weapon_lvl 1
                                    unit		Dol Guldur Scouts		exp 0 armour 0 weapon_lvl 1
                                    unit		Mirkwood Hunters		exp 1 armour 0 weapon_lvl 1
                                end
                                campaign_wait 0.1
                                siege_settlement moria_reclaiming_sieger_1, Lower_Anduin_Vale, maintain
                                campaign_wait 0.1
                                reveal_tile 288, 386
                                reveal_tile 288, 387
                                reveal_tile 288, 388
                                reveal_tile 289, 386
                                reveal_tile 289, 387
                                reveal_tile 289, 388
                                reveal_tile 290, 386
                                reveal_tile 290, 387
                                reveal_tile 290, 388
                                zoom_strat_camera 0.5
                                snap_strat_camera 289, 387
                                campaign_wait 2
                                set_counter moria_reclaiming_dwarves_help_beornings_awaiting_answer 1
                                historic_event moria_reclaiming_dwarves_help_beornings true
                            end_if
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 3 289, 393
                            point_at_strat_position 289, 393
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 1
                        if I_CharacterTypeNearTile norway named_character, 3 304, 430
                            ui_flash_stop
                            restrict_clickable_area Grey_Foothills_Province Wrakyaburg_Province Erebor_Province Dale_Province Lower_Anduin_Vale_Province South_Elven_Mirkwood_Province
                            point_at_strat_position 283, 404
                            set_counter moria_reclaiming_dwarves_status 2
                            set_counter moria_reclaiming_dwarves_help_miners_awaiting_answer 1
                            historic_event moria_reclaiming_dwarves_help_miners true
                            console_command diplomatic_stance norway timurids allied
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 3 304, 430
                            point_at_strat_position 304, 430
                        end_if
                    end_if
                end_if
                if I_EventCounter moria_reclaiming_dwarves_dalemeeting_declined = 1																		;***Mirkwood Southern Route***
                    if I_CompareCounter moria_reclaiming_dwarves_status = 9
                        terminate_monitor
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 8
                        if I_SettlementOwner East_Moria = norway
                            ui_flash_stop
                            restrict_clickable_area
                            set_counter moria_reclaiming_dwarves_status 9
                            add_money norway 3200
                            increment_kings_purse norway 1472
                            console_command remove_ancillary balin_1 ori
                            console_command remove_ancillary balin_1 oin
                            console_command give_ancillary balin_1 highlord_khazaddum
                            console_command give_ancillary balin_1 mithril_coat
                            spawn_character norway, Ori, diplomat, age 21, x 246, y 340
                            console_command give_trait Ori GoodDiplomat 2
                            console_command give_trait Ori NaturalDiplomatSkill 2
                            console_command give_trait Ori Multilingual 3
                            console_command give_trait Ori Ori 1
                            console_command give_trait Ori AgentPiety 1
                            console_command give_ancillary Ori ori_mazarbul_book
                            console_command give_ancillary Ori erebor_raven
                            console_command give_ancillary Ori dwarven_pony
                            destroy_units norway Khazad Volunteers
                            destroy_units norway Dwarven Labourers
                            destroy_units norway Dwarven Travellers
                            spawn_army
                                faction norway
                                character	Oin, named character, age 30, x 246, y 341, direction E, portrait Oin, label oin_1, hero_ability DWARVES, family
                                traits		Oin 1, Hero 1, DwarvenRace 1, Longbeard 1, HeroAbilityDwarf 1, GoodAttacker 1, GoodCommander 3, Brave 2, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, KhazadLongbeard 1, CustomBG 1
                                unit		Zenith Guard		exp 1 armour 0 weapon_lvl 0
                            end
                            console_command create_unit East_Moria "Khazad-dum Reclaimers" 1 0 0 0
                            console_command create_unit East_Moria "Dwarven Travellers" 3 0 0 0
                            console_command create_unit East_Moria "Khazad Volunteers" 4 1 1 0
                            console_command create_building East_Moria garrison_hall
                            set_recruit_pool East_Moria_Province 3 Dwarven Travellers
                            set_recruit_pool East_Moria_Province 3 Khazad Volunteers
                            set_recruit_pool East_Moria_Province 2 Khazad Sentries
                            set_counter moria_reclaimed 1
                            campaign_wait 1
                        end_if
                        if not I_SettlementOwner East_Moria = norway
                            point_at_settlement East_Moria
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 7
                        if I_CharacterTypeNearTile norway named_character, 6 249, 337
                            ui_flash_stop
                            restrict_clickable_area East_Moria_Province
                            point_at_settlement East_Moria
                            set_counter moria_reclaiming_dwarves_status 8
                            if I_SettlementOwner East_Moria = hre
                                spawn_army
                                    faction hre
                                    character	random_name, named character, age 33, x 241, y 342, label moria_goblin_army_2
                                    traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 2, GoodAttacker 2, GoodCommander 3, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                    unit		Goblin Bodyguards		exp 7 armour 1 weapon_lvl 1
                                    unit		Mountain Uruks	exp 5 armour 1 weapon_lvl 0
                                    unit		Heavy Goblin Halberd	exp 2 armour 0 weapon_lvl 0
                                    unit		Goblin Infantry	exp 3 armour 0 weapon_lvl 0
                                    unit		Goblin Infantry	exp 3 armour 0 weapon_lvl 0
                                    unit		Snaga Archers		exp 1 armour 0 weapon_lvl 1
                                    unit		Goblin Archers	exp 1 armour 0 weapon_lvl 1
                                    unit		Snaga Skirmishers	exp 2 armour 0 weapon_lvl 1
                                end
                                campaign_wait 0.5
                                move moria_goblin_army_2, 245, 341
                            end_if
                            if not I_SettlementOwner East_Moria = hre
                                spawn_army
                                    faction slave, sub_faction hre
                                    character	random_name, named character, age 30, x 241, y 342, direction E, label moria_reclaiming_cleaners_1
                                    traits		OrcRace 1, AIBoost 1, Locked 1, GoodAttacker 1, GoodCommander 1, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                    unit		Raider Warband		exp 1 armour 0 weapon_lvl 0
                                end
                                campaign_wait 0.5
                                console_command auto_win attacker
                                siege_settlement moria_reclaiming_cleaners_1, East_Moria, attack
                                campaign_wait 2
                            end_if
                            if I_SettlementOwner East_Moria = slave
                                spawn_army
                                    faction hre
                                    character	random_name, named character, age 33, x 241, y 342, label moria_goblin_army_2
                                    traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 2, GoodAttacker 2, GoodCommander 3, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                    unit		Goblin Bodyguards		exp 7 armour 1 weapon_lvl 1
                                    unit		Mountain Uruks	exp 5 armour 1 weapon_lvl 0
                                    unit		Heavy Goblin Halberd	exp 2 armour 0 weapon_lvl 0
                                    unit		Goblin Infantry	exp 3 armour 0 weapon_lvl 0
                                    unit		Goblin Infantry	exp 3 armour 0 weapon_lvl 0
                                    unit		Snaga Archers		exp 1 armour 0 weapon_lvl 1
                                    unit		Goblin Archers	exp 1 armour 0 weapon_lvl 1
                                    unit		Snaga Skirmishers	exp 2 armour 0 weapon_lvl 1
                                end
                                campaign_wait 0.2
                                siege_settlement moria_goblin_army_2, East_Moria, attack
                                campaign_wait 0.1
                                historic_event moria_reclaiming_dwarves_east_halls
                            end_if
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 249, 337
                            point_at_strat_position 249, 337
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 6
                        if I_CharacterTypeNearTile norway named_character, 6 270, 364
                            ui_flash_stop
                            restrict_clickable_area Gladden_Fields_Province Celebrant_Province East_Moria_Province Pezarsan_Province
                            point_at_strat_position 249, 337
                            set_counter moria_reclaiming_dwarves_status 7
                            spawn_army
                                faction hre
                                character	random_name, named character, age 33, x 270, y 363, label moria_reclaiming_snaga_3
                                traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, Berserker 1, Brave 2, GoodCommander 3, Loyal 2, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
                                unit		Mountain-Orc Hunters 		exp 2 armour 0 weapon_lvl 0
                                unit		Mountain-Orc Hunters 		exp 2 armour 0 weapon_lvl 0
                                unit		Mountain-Orc Hunters 		exp 1 armour 0 weapon_lvl 0
                            end
                            campaign_wait 0.1
                            engage_armies moria_reclaiming_snaga_3, balin_1
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 270, 364
                            point_at_strat_position 270, 364
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 5
                        if I_CharacterTypeNearTile norway named_character, 6 291, 389
                            ui_flash_stop
                            restrict_clickable_area Central_Vale_Province Lower_Anduin_Vale_Province Gladden_Fields_Province Middle_Mirkwood_Province Woodsmen_Province Pezarsan_Province
                            point_at_strat_position 270, 364
                            set_counter moria_reclaiming_dwarves_status 6
                            if RandomPercent <= 10
                                spawn_army
                                    faction poland
                                    character	random_name, named character, age 25, x 292, y 388, label moria_reclaiming_spiders_4
                                    traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 1, BattleScarred 1, Brave 1, GoodAttacker 1, GoodCommander 1, Loyal 1, LoyaltyStarter 1, NightBattleCapable 1, Shadowguard 1, CustomBG 1
                                    unit		Khamuls Shadow Rangers				exp 5 armour 1 weapon_lvl 1
                                    unit		Khamuls Shadow Rangers				exp 5 armour 1 weapon_lvl 1
                                end
                                campaign_wait 0.1
                                engage_armies moria_reclaiming_spiders_4, balin_1
                            end_if
                            campaign_wait 0.2
                            if I_CompareCounter moria_reclaiming_dwarves_help_elves_yes = 1
                                destroy_units norway Woodland Sentinels
                                historic_event moria_reclaiming_dwarves_elves_leaving
                            end_if
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 291, 389
                            point_at_strat_position 291, 389
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 4
                        if I_CharacterTypeNearTile norway named_character, 6 305, 391
                            ui_flash_stop
                            restrict_clickable_area Central_Mirkwood_Province Lower_Anduin_Vale_Province Middle_Mirkwood_Province
                            point_at_strat_position 291, 389
                            set_counter moria_reclaiming_dwarves_status 5
                            spawn_army
                                faction poland
                                character	random_name, named character, age 35, x 305, y 390, label moria_reclaiming_spiders_3
                                traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 3, BattleScarred 3, Brave 3, GoodAttacker 2, GoodCommander 1, LoyaltyStarter 1, Berserker 1
                                unit		Forest Spiders			exp 3 armour 0 weapon_lvl 0
                                unit		Black Spiders			exp 3 armour 0 weapon_lvl 0
                            end
                            campaign_wait 0.1
                            engage_armies moria_reclaiming_spiders_3, balin_1
                            campaign_wait 0.1
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 305, 391
                            point_at_strat_position 305, 391
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 3
                        if I_CharacterTypeNearTile norway named_character, 6 316, 392
                            ui_flash_stop
                            restrict_clickable_area Middle_Mirkwood_Province Central_Mirkwood_Province Central_Vale_Province Woodsmen_Province Deep_Mirkwood_Province
                            point_at_strat_position 291, 389
                            set_counter moria_reclaiming_dwarves_status 4
                            spawn_army
                                faction poland
                                character	random_name, named character, age 27, x 318, y 391, direction NW, label moria_reclaiming_sieger_2
                                traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 1, BattleScarred 1, Brave 3, GoodAttacker 3, GoodCommander 3, Loyal 1, LoyaltyStarter 1, NightBattleCapable 1, Berserker 1
                                unit		Castellans of Dol Guldur			exp 2 armour 1 weapon_lvl 0
                                unit		Mirkwood Uruks	exp 2 armour 0 weapon_lvl 0
                                unit		Mirkwood Uruks	exp 2 armour 0 weapon_lvl 0
                                unit		Dol Guldur Host			exp 1 armour 1 weapon_lvl 0
                                unit		Dol Guldur Host			exp 1 armour 1 weapon_lvl 0
                                unit		Dol Guldur Host			exp 1 armour 1 weapon_lvl 0
                                unit		Uruk Slayers		exp 1 armour 0 weapon_lvl 0
                                unit		Uruk Slayers		exp 1 armour 0 weapon_lvl 0
                                unit		Dol Guldur Archers		exp 1 armour 0 weapon_lvl 2
                                unit		Dol Guldur Archers		exp 1 armour 0 weapon_lvl 1
                                unit		Snaga Catapult         		exp 1 armour 0 weapon_lvl 1
                                unit		Snaga Catapult         		exp 1 armour 0 weapon_lvl 1
                            end
                            campaign_wait 0.1
                            siege_settlement moria_reclaiming_sieger_2, Central_Mirkwood, maintain
                            campaign_wait 0.1
                            zoom_strat_camera 0.5
                            snap_strat_camera 317, 392
                            campaign_wait 2
                            historic_event moria_reclaiming_dwarves_help_elves true
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 316, 392
                            point_at_strat_position 316, 392
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 2
                        if I_CharacterTypeNearTile norway named_character, 6 327, 392
                            ui_flash_stop
                            restrict_clickable_area Central_Mirkwood_Province Middle_Mirkwood_Province Deep_Mirkwood_Province
                            point_at_strat_position 316, 392
                            set_counter moria_reclaiming_dwarves_status 3
                            console_command create_unit balin_1 "Woodland Sentinels" 2 1 0 1
                            console_command diplomatic_stance norway mongols allied
                            historic_event moria_reclaiming_dwarves_elven_support
                            campaign_wait 6
                            spawn_army
                                faction poland
                                character	random_name, named character, age 30, x 326, y 392, label moria_reclaiming_spiders_2
                                traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 1, BattleScarred 1, Berserker 1, GoodAttacker 1, GoodCommander 1, Loyal 1, LoyaltyStarter 1, NightBattleCapable 1
                                unit		Uruk Bodyguard				exp 5 armour 1 weapon_lvl 1
                                unit		Mirkwood Goblins		exp 4 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 3 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 2 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 1 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Goblins		exp 0 armour 0 weapon_lvl 0
                                unit		Snaga Catapult         		exp 1 armour 0 weapon_lvl 1
                            end
                            campaign_wait 0.1
                            engage_armies moria_reclaiming_spiders_2, balin_1
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 327, 392
                            point_at_strat_position 327, 392
                        end_if
                    end_if
                    if I_CompareCounter moria_reclaiming_dwarves_status = 1
                        if I_CharacterTypeNearTile norway named_character, 6 338, 399
                            ui_flash_stop
                            restrict_clickable_area Central_Mirkwood_Province Elven_Mirkwood_Province Esgaroth_Province
                            point_at_strat_position 327, 392
                            set_counter moria_reclaiming_dwarves_status 2
                            campaign_wait 0.1
                            spawn_army
                                faction poland
                                character	random_name, named character, age 22, x 338, y 398, label moria_reclaiming_spiders_1
                                traits		OrcRace 1, AIBoost 1, Locked 1, Berserker 1, Brave 2, GoodAttacker 1
                                unit		Dol Guldur Archers			exp 3 armour 1 weapon_lvl 1
                                unit		Dol Guldur Archers			exp 2 armour 1 weapon_lvl 0
                                unit		Mirkwood Hunters			exp 1 armour 0 weapon_lvl 0
                                unit		Mirkwood Hunters			exp 0 armour 0 weapon_lvl 0
                                unit		Mirkwood Hunters			exp 0 armour 0 weapon_lvl 0
                            end
                            campaign_wait 0.1
                            engage_armies moria_reclaiming_spiders_1, balin_1
                        end_if
                        if not I_CharacterTypeNearTile norway named_character, 6 338, 399
                            point_at_strat_position 338, 399
                        end_if
                    end_if
                end_if
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_status = 0
                if I_CharacterTypeNearTile norway named_character, 3 338, 416
                    ui_flash_stop
                    set_counter moria_reclaiming_dwarves_status 1
                    set_counter moria_reclaiming_dwarves_dalemeeting_awaiting_answer 1
                    historic_event moria_reclaiming_dwarves_dalemeeting true
                end_if
                if not I_CharacterTypeNearTile norway named_character, 3 338, 416
                    point_at_strat_position 338, 416
                end_if
            end_if
            set_counter moria_reclaiming_dwarves_good_diplomacy 0
        end_if
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnEnd FactionType norway
        and not IsFactionAIControlled
        and DiplomaticStanceFromFaction ireland < AtWar
        and DiplomaticStanceFromFaction mongols < AtWar
        and DiplomaticStanceFromFaction moors < AtWar
        and DiplomaticStanceFromFaction scotland < AtWar
        and DiplomaticStanceFromFaction timurids < AtWar
        set_counter moria_reclaiming_dwarves_good_diplomacy 1
    end_monitor

    monitor_event FactionTurnEnd FactionIsLocal
        and not I_HotseatEnabled
        if not I_IsFactionAIControlled norway
            if I_EventCounter moria_reclaiming_dwarves_dalemeeting_accepted = 1
                and I_CompareCounter moria_reclaiming_dwarves_status = 8
                set_counter moria_reclaiming_dwarves_terminate 1
            end_if
            if I_EventCounter moria_reclaiming_dwarves_dalemeeting_declined = 1
                and I_CompareCounter moria_reclaiming_dwarves_status = 7
                set_counter moria_reclaiming_dwarves_terminate 1
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_terminate = 0
                if not I_CharacterExists balin_1
                    and I_TurnNumber > 35
                    and not I_SettlementOwner East_Moria = norway
                    set_counter moria_reclaiming_dwarves_defeat 1
                end_if
                if I_CompareCounter moria_reclaiming_dwarves_good_diplomacy = 0
                    and I_TurnNumber > 35
                    and not I_SettlementOwner East_Moria = norway
                    set_counter moria_reclaiming_dwarves_defeat 1
                end_if
                if I_NumberOfSettlements norway > 1
                    and I_TurnNumber > 35
                    and not I_SettlementOwner East_Moria = norway
                    set_counter moria_reclaiming_dwarves_defeat 1
                end_if
                if I_TurnNumber = 35
                    and not I_SettlementOwner East_Moria = norway
                    set_counter moria_reclaiming_dwarves_defeat 1
                end_if
                if I_CompareCounter moria_reclaiming_dwarves_defeat = 0
                    if I_NumberOfSettlements norway = 1
                        and not I_SettlementOwner East_Moria = norway
                        and I_EventCounter moria_reclaiming_dwarves_tmsw = 0
                        historic_event moria_reclaiming_dwarves_tmsw
                        set_event_counter moria_reclaiming_dwarves_tmsw 1
                    end_if
                    if I_TurnNumber = 20
                        and not I_SettlementOwner East_Moria = norway
                        historic_event moria_reclaiming_dwarves_trow
                    end_if
                    if I_EventCounter moria_reclaiming_dwarves_dalemeeting_accepted = 1						;***Anduin Route Accepted***
                        and I_EventCounter moria_reclaiming_dwarves_help_beornings_accepted = 1					;***Beorning accepted help***
                        and I_CompareCounter moria_reclaiming_dwarves_siege_timeout <= 3
                        if I_SettlementUnderSiege Lower_Anduin_Vale
                            if I_CompareCounter moria_reclaiming_dwarves_siege_timeout = 3					;***Fail to break seige within 3 turns conditions***
                                unfreeze_faction_ai poland
                                unfreeze_faction_ai timurids
                                if I_CharacterExists moria_reclaiming_sieger_1
                                    campaign_wait 0.1
                                    console_command auto_win attacker
                                    siege_settlement moria_reclaiming_sieger_1, Lower_Anduin_Vale, attack
                                    campaign_wait 0.1
                                    set_faction_standing norway timurids -0.4
                                    set_faction_standing timurids norway -0.4
                                end_if
                                set_counter moria_reclaiming_dwarves_siege_timeout 4
                            end_if
                            if I_CompareCounter moria_reclaiming_dwarves_siege_timeout < 3					;***Aduin Seige Counter Incri***
                                inc_counter moria_reclaiming_dwarves_siege_timeout 1
                            end_if
                        end_if
                        if not I_SettlementUnderSiege Lower_Anduin_Vale										;***Anduin Seige Broken Conditions***
                            unfreeze_faction_ai poland
                            unfreeze_faction_ai timurids
                            console_command create_unit balin_1 "Beorning Warriors" 1 2 0 0
                            historic_event moria_reclaiming_dwarves_helped_beornings
                            set_counter moria_reclaiming_dwarves_siege_timeout 4
                        end_if
                    end_if
                end_if
                if I_CompareCounter moria_reclaiming_dwarves_defeat = 1
                    give_everything_to_faction norway slave true
                end_if
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_terminate = 1
                terminate_monitor
            end_if
        end_if
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_dalemeeting_accepted
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_dalemeeting_awaiting_answer 0
        restrict_clickable_area Dale_Province Grey_Foothills_Province Erebor_Province
        campaign_wait 1
        console_command create_unit balin_1 "Dragonslayers" 1 3 1 1
        console_command create_unit balin_1 "Erebor Infantry" 2 1 1 0
        console_command create_unit balin_1 "Khazad Volunteers" 3 0 0 0
        console_command create_unit balin_1 "Dwarven Labourers" 2 0 0 0
        console_command create_unit balin_1 "Dwarven Travellers" 2 0 0 0
        disable_cursor
        hide_ui
        zoom_strat_camera 1
        campaign_wait 0.5
        move_strat_camera 304, 430
        point_at_strat_position 304, 430
        campaign_wait 0.5
        move_strat_camera 289, 393
        point_at_strat_position 289, 393
        campaign_wait 0.5
        move_strat_camera 279, 372
        point_at_strat_position 279, 372
        campaign_wait 0.5
        move_strat_camera 263, 349
        point_at_strat_position 263, 349
        campaign_wait 0.5
        move_strat_camera 249, 337
        point_at_strat_position 249, 337
        campaign_wait 1
        ui_flash_stop
        move_strat_camera 245, 341
        point_at_settlement East_Moria
        campaign_wait 2
        snap_strat_camera 340, 419
        ui_flash_stop
        point_at_strat_position 304, 430
        campaign_wait 0.2
        show_ui
        enable_cursor
        campaign_wait 0.2
        console_command add_money norway, 32000
        increment_kings_purse norway -1200
        historic_event moria_reclaiming_dwarves_anduinroute
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_dalemeeting_declined
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_dalemeeting_awaiting_answer 0
        restrict_clickable_area Dale_Province Esgaroth_Province Elven_Mirkwood_Province
        campaign_wait 1
        console_command create_unit balin_1 "Dragonslayers" 1 3 1 1
        console_command create_unit balin_1 "Erebor Infantry" 2 1 1 0
        console_command create_unit balin_1 "Khazad Volunteers" 3 0 0 0
        console_command create_unit balin_1 "Dwarven Labourers" 2 0 0 0
        console_command create_unit balin_1 "Dwarven Travellers" 2 0 0 0
        disable_cursor
        hide_ui
        zoom_strat_camera 1
        campaign_wait 0.5
        move_strat_camera 338, 399
        point_at_strat_position 338, 399
        campaign_wait 0.5
        move_strat_camera 327, 392
        point_at_strat_position 327, 392
        campaign_wait 0.5
        move_strat_camera 316, 392
        point_at_strat_position 316, 392
        campaign_wait 0.5
        move_strat_camera 305, 391
        point_at_strat_position 305, 391
        campaign_wait 0.5
        move_strat_camera 291, 389
        point_at_strat_position 291, 389
        campaign_wait 0.5
        move_strat_camera 270, 364
        point_at_strat_position 270, 364
        campaign_wait 0.5
        move_strat_camera 249, 337
        point_at_strat_position 249, 337
        campaign_wait 1
        ui_flash_stop
        move_strat_camera 245, 341
        point_at_settlement East_Moria
        campaign_wait 2
        snap_strat_camera 340, 419
        ui_flash_stop
        point_at_strat_position 338, 399
        campaign_wait 0.2
        show_ui
        enable_cursor
        campaign_wait 0.2
        console_command add_money norway, 32000
        increment_kings_purse norway -1500
        historic_event moria_reclaiming_dwarves_mirkwoodroute
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_beornings_accepted
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_help_beornings_awaiting_answer 0
        restrict_clickable_area Lower_Anduin_Vale_Province Central_Vale_Province Gladden_Fields_Province
        freeze_faction_ai poland
        freeze_faction_ai timurids
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_beornings_declined
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_help_beornings_awaiting_answer 0
        restrict_clickable_area Lower_Anduin_Vale_Province Central_Vale_Province Gladden_Fields_Province
        campaign_wait 0.1
        console_command auto_win attacker
        siege_settlement moria_reclaiming_sieger_1, Lower_Anduin_Vale, attack
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_miners_accepted
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_help_miners_awaiting_answer 0
        console_command create_unit balin_1 "Dwarven Labourers" 2 1 0 0
        spawn_army
            faction gundabad
            character	random_name, named character, age 33, x 304, y 431, label moria_reclaiming_snaga_1
            traits		OrcRace 1, AIBoost 1, Locked 1, BattleChivalryEvil 2, BattleScarred 1, GoodAttacker 2, GoodCommander 3, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1
            unit		Mountain Guard		exp 4 armour 0 weapon_lvl 0
            unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
            unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
            unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
            unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
            unit		Snaga Archers			exp 2 armour 0 weapon_lvl 1
            unit		Snaga Archers			exp 2 armour 0 weapon_lvl 1
        end
        campaign_wait 0.1
        engage_armies moria_reclaiming_snaga_1, balin_1
        campaign_wait 0.1
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_miners_declined
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_help_miners_awaiting_answer 0
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_elves_accepted
        and EventCounter = 1
        set_counter moria_reclaiming_dwarves_help_elves_yes 1
        console_command move_character Balin 316,392
        campaign_wait 0.1
        siege_settlement moria_reclaiming_sieger_2, Central_Mirkwood, attack
        unfreeze_faction_ai mongols
        unfreeze_faction_ai poland
        campaign_wait 30
        if I_SettlementOwner Central_Mirkwood = poland
            destroy_units norway Woodland Sentinels
        end_if
        if I_SettlementOwner Central_Mirkwood = mongols
            console_command add_money norway, 3000
            replenish_units balin_1
            set_faction_standing mongols norway 0.5
            set_faction_standing norway mongols 0.5
            historic_event moria_reclaiming_dwarves_helped_elves
        end_if
    end_monitor

    monitor_event EventCounter EventCounterType moria_reclaiming_dwarves_help_elves_declined
        and EventCounter = 1
        campaign_wait 0.1
        destroy_units norway Woodland Sentinels
        console_command move_character Balin 315,392
        campaign_wait 0.1
        console_command auto_win attacker
        siege_settlement moria_reclaiming_sieger_2, Central_Mirkwood, attack
        campaign_wait 0.1
        set_faction_standing mongols norway -0.8
        set_faction_standing norway mongols -0.8
        historic_event moria_reclaiming_dwarves_elves_leaving_nohelp
        terminate_monitor
    end_monitor

    monitor_event GameReloaded TrueCondition
        and not I_HotseatEnabled
        if I_CompareCounter faction_ID_norway == 1
            if I_CompareCounter moria_reclaiming_dwarves_dalemeeting_awaiting_answer = 1
                campaign_wait 0.1
                historic_event moria_reclaiming_dwarves_dalemeeting true
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_help_beornings_awaiting_answer = 1
                campaign_wait 0.1
                historic_event moria_reclaiming_dwarves_help_beornings true
            end_if
            if I_CompareCounter moria_reclaiming_dwarves_help_miners_awaiting_answer = 1
                and I_CharacterTypeNearTile norway named_character, 5 304, 430
                campaign_wait 0.1
                historic_event moria_reclaiming_dwarves_help_miners true
            end_if
        end_if
        if I_IsFactionAIControlled norway
            terminate_monitor
        end_if
    end_monitor

    ;	###################### Cleansing Moria #######################
    declare_counter khazad_western_cleared

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_SettlementOwner West_Moria = norway
        set_counter khazad_western_cleared 1
        historic_event moria_silvertine factions { norway, }
        terminate_monitor
    end_monitor

    ;	###################### Khazad Balrog, Mirrormere, and Gandalf########################

    declare_counter khazad_Balrog_threat
    declare_counter khazad_Find_Gandalf
    declare_counter khazad_balin_crown
    declare_counter khazad_mirror

    ;		### Gandalf's Aid ###
    monitor_event FactionTurnStart FactionIsLocal					;***Flashing Gandalf Note Area***
        and FactionType norway
        and I_IsFactionAIControlled hre
        and I_CompareCounter khazad_western_cleared = 1

        point_at_strat_position 166, 380
        campaign_wait 1

        historic_event Moria_Reclaimed_Success

        increment_kings_purse hre 800								;Extra money for neighbouring factions
        increment_kings_purse aztecs 800

        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal					;***Send Diplomat to Bree to find Gandalf**
        and FactionType norway
        and I_IsFactionAIControlled hre
        and I_CompareCounter khazad_western_cleared = 1
        and I_TurnNumber < 55

        point_at_strat_position 166, 380



        if I_CharacterTypeNearTile norway diplomat, 3 166, 380
            historic_event Note_to_Gandalf factions { norway, }
            set_counter khazad_Find_Gandalf 1
            set_faction_standing normans norway 0.8
            set_faction_standing norway normans 0.8
            ui_flash_stop
            terminate_monitor
        end_if
    end_monitor
    ;				###############Mirrormere###############
    monitor_event FactionTurnStart FactionIsLocal					;***Mirrormere Intro***
        and FactionType norway
        and I_TurnNumber = 54

        point_at_strat_position 247, 340
        campaign_wait 1

        historic_event Moria_Crowning factions { norway, }
        set_counter khazad_mirror 1
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal					;***Send Balin***
        and FactionType norway
        and I_CompareCounter khazad_mirror = 1
        and I_TurnNumber < 58

        point_at_strat_position 247, 340

        if I_CharacterTypeNearTile norway named_character, 2 247, 340
            campaign_wait 0.1
            ui_flash_stop
            set_counter khazad_balin_crown 1
            console_command give_ancillary balin_1 durin_crown
            terminate_monitor
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_CompareCounter khazad_balin_crown = 1
        if I_IsFactionAIControlled hre
            if I_CompareCounter khazad_Find_Gandalf = 0
                historic_event moria_reclaiming_dwarves_confront_balrog factions { norway, }
            end_if
            if I_CompareCounter khazad_Find_Gandalf = 1
                set_counter khazad_Balrog_threat 2
            end_if
        end_if
        if not I_IsFactionAIControlled hre
            set_counter khazad_Balrog_threat 2
        end_if
        terminate_monitor
    end_monitor

    ;		### Balrog Army Spawn Attack ###
    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_IsFactionAIControlled hre
        and I_CompareCounter moria_reclaimed = 1
        and I_TurnNumber = 59
        if I_CompareCounter khazad_Find_Gandalf = 0
        and I_NumberOfSettlements hre > 0
            set_event_counter balrog_spawned 1
            spawn_army
                faction hre
                character	Balrog, named character, age 16, x 247, y 340, direction W, portrait Balrog, battle_model balrog_general, hero_ability BALROG, label balrog_1
                traits		Balrog 1, AIBoost 1, Hero 1, Locked 1, MaiaRace 1, FearGeneral 1, HeroAbilityBalrog 1, BattleFear 6, LoyaltyStarter 1, NightBattleCapable 1, PietyStarter 1, GoodCommander 3
                unit		Balrog			exp 9 armour 2 weapon_lvl 2
                unit		Mountain Uruks	exp 5 armour 1 weapon_lvl 0
                unit		Mountain Uruks	exp 4 armour 1 weapon_lvl 0
                unit		Mountain-Orc Hunters	exp 4 armour 1 weapon_lvl 0
                unit		Heavy Goblin Infantry		exp 3 armour 0 weapon_lvl 0
                unit		Heavy Goblin Infantry		exp 3 armour 0 weapon_lvl 0
                unit		Goblin Infantry	exp 2 armour 0 weapon_lvl 0
                unit		Goblin Infantry	exp 2 armour 0 weapon_lvl 0
                unit		Snaga Archers		exp 1 armour 0 weapon_lvl 1
                unit		Snaga Archers		exp 1 armour 0 weapon_lvl 1
                unit		Goblin Archers	exp 1 armour 0 weapon_lvl 1
                unit		Goblin Archers	exp 1 armour 0 weapon_lvl 1
                unit		Trolls			exp 1 armour 0 weapon_lvl 1
                unit		Snaga Skirmishers	exp 2 armour 0 weapon_lvl 1
                unit		Snaga Skirmishers	exp 2 armour 0 weapon_lvl 1
            end
            campaign_wait 0.1
            siege_settlement balrog_1, East_Moria, maintain
            campaign_wait 0.1
        end_if
        terminate_monitor
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_IsFactionAIControlled hre
        and I_CompareCounter moria_reclaimed = 1
        and I_TurnNumber = 60

        if I_CompareCounter khazad_Find_Gandalf = 0
            siege_settlement balrog_1, East_Moria, attack
            campaign_wait 0.1

            if I_SettlementOwner East_Moria = norway
                set_counter khazad_Balrog_threat 2
                campaign_wait 10.0
                console_command add_money hre, 8000
                increment_kings_purse hre 1600
                historic_event moria_reclaiming_dwarves_win factions { norway, }
            end_if
            terminate_monitor
        end_if

        if I_CompareCounter khazad_Find_Gandalf = 1
            set_counter khazad_Balrog_threat 2
            campaign_wait 10.0
            console_command add_money hre, 8000
            increment_kings_purse hre 1600
            historic_event moria_reclaiming_gandalf_win factions { norway, }
            terminate_monitor
        end_if

    end_monitor

    ;	;------------------Khazad word spreading.------------------
    declare_counter khazad_BlueMountains_wordspreaded
    declare_counter khazad_IronHills_wordspreaded
    declare_counter khazad_Erebor_wordspreaded

    declare_counter khazad_Turns_WordSpreading

    declare_counter khazad_BM_Reinforcements_Arrived
    declare_counter khazad_IH_Reinforcements_Arrived
    declare_counter khazad_E_Reinforcements_Arrived

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_SettlementOwner West_Moria = norway
        and I_CompareCounter khazad_Balrog_threat = 2

        if I_CompareCounter khazad_Turns_WordSpreading = 50
            terminate_monitor
        end_if

        if I_CompareCounter khazad_Turns_WordSpreading < 50

            set_counter khazad_BM_Reinforcements_Arrived 0
            set_counter khazad_IH_Reinforcements_Arrived 0
            set_counter khazad_E_Reinforcements_Arrived 0

            if I_CompareCounter khazad_BlueMountains_wordspreaded = 1							;***Blue Mountains 1 settlement percent of sending reinforcements***
                if I_NumberOfSettlements norway = 1
                    and RandomPercent <= 5
                    set_counter khazad_BM_Reinforcements_Arrived 1
                    set_counter khazad_BlueMountains_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway = 2
                    and RandomPercent >= 85
                    set_counter khazad_BM_Reinforcements_Arrived 1
                    set_counter khazad_BlueMountains_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway = 3
                    and RandomPercent >= 75
                    set_counter khazad_BM_Reinforcements_Arrived 1
                    set_counter khazad_BlueMountains_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway > 3
                    and RandomPercent <= 60
                    set_counter khazad_BM_Reinforcements_Arrived 1
                    set_counter khazad_BlueMountains_wordspreaded 2
                end_if
            end_if

            if I_CompareCounter khazad_Erebor_wordspreaded = 1									;***Erebor 1 settlement percent of sending reinforcements***
                if I_NumberOfSettlements norway = 1
                    and RandomPercent >= 90
                    set_counter khazad_E_Reinforcements_Arrived 1
                    set_counter khazad_Erebor_wordspreaded 2									;***Kills wordspreaded counter
                end_if
                if I_NumberOfSettlements norway = 2
                    and RandomPercent >= 80
                    set_counter khazad_E_Reinforcements_Arrived 1
                    set_counter khazad_Erebor_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway = 3
                    and RandomPercent >= 60
                    set_counter khazad_E_Reinforcements_Arrived 1
                    set_counter khazad_Erebor_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway > 3
                    and RandomPercent >= 50
                    set_counter khazad_E_Reinforcements_Arrived 1
                    set_counter khazad_Erebor_wordspreaded 2
                end_if
            end_if

            if I_CompareCounter khazad_IronHills_wordspreaded = 1								;***Iron Hills 1 settlement percent of sending reinforcements***
                if I_NumberOfSettlements norway = 1
                    and RandomPercent <= 5
                    set_counter khazad_IH_Reinforcements_Arrived 1
                    set_counter khazad_IronHills_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway = 2
                    and RandomPercent <= 10
                    set_counter khazad_IH_Reinforcements_Arrived 1
                    set_counter khazad_IronHills_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway = 3
                    and RandomPercent <= 20
                    set_counter khazad_IH_Reinforcements_Arrived 1
                    set_counter khazad_IronHills_wordspreaded 2
                end_if
                if I_NumberOfSettlements norway > 3
                    and RandomPercent <= 30
                    set_counter khazad_IH_Reinforcements_Arrived 1
                    set_counter khazad_IronHills_wordspreaded 2
                end_if
            end_if

            if I_CompareCounter khazad_BM_Reinforcements_Arrived = 1
                console_command create_unit West_Moria "Ered Luin Pikemen"
                console_command add_population West_Moria, 1000
                historic_event khazad_BMRA

            end_if
            if I_CompareCounter khazad_IH_Reinforcements_Arrived = 1
                console_command create_unit East_Moria "Erebor Infantry"
                console_command add_population East_Moria, 1000
                console_command create_unit East_Moria "Erebor Infantry"
                historic_event khazad_IHRA
            end_if
            if I_CompareCounter khazad_E_Reinforcements_Arrived = 1
                console_command create_unit East_Moria "Axeguard of Erebor"
                console_command add_population East_Moria, 1000
                console_command create_unit East_Moria "Erebor Infantry"
                historic_event khazad_ERA
                set_counter khazad_E_Reinforcements_Arrived 2									;***Kills arrived counter***
            end_if

            inc_counter khazad_Turns_WordSpreading 1
        end_if

    end_monitor

    ;	;###################### Spreading word of the glorious adventure	######################
    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_CompareCounter khazad_Turns_WordSpreading > 0

        if I_CompareCounter khazad_BlueMountains_wordspreaded = 0				;Red Pointers
            point_at_strat_position 66, 433
        end_if

        if I_CompareCounter khazad_IronHills_wordspreaded = 0
            point_at_strat_position 400, 420
        end_if

        if I_CompareCounter khazad_Erebor_wordspreaded = 0
            point_at_strat_position 339, 421
        end_if
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        and FactionType norway
        and I_CompareCounter khazad_Turns_WordSpreading > 0

        if I_CharacterTypeNearTile norway diplomat, 15 66, 433
            and I_CompareCounter khazad_BlueMountains_wordspreaded = 0
            historic_event khazad_BM_WS
            ui_flash_stop
            set_counter khazad_BlueMountains_wordspreaded 1
        end_if

        if I_CharacterTypeNearTile norway diplomat, 15 400, 420
            and I_CompareCounter khazad_IronHills_wordspreaded = 0
            historic_event khazad_IH_WS
            ui_flash_stop
            set_counter khazad_IronHills_wordspreaded 1
        end_if

        if I_CharacterTypeNearTile norway diplomat, 15 339, 421
            and I_CompareCounter khazad_Erebor_wordspreaded = 0
            historic_event khazad_E_WS
            ui_flash_stop
            set_counter khazad_Erebor_wordspreaded 1
        end_if

        if I_CompareCounter khazad_Erebor_wordspreaded = 1
            and I_CompareCounter khazad_IronHills_wordspreaded = 1
            and I_CompareCounter khazad_BlueMountains_wordspreaded = 1
            terminate_monitor
        end_if
        if I_CompareCounter khazad_Turns_WordSpreading = 50
            terminate_monitor
        end_if
    end_monitor

    ;####################### Script: UI & Videos #########################

    ;##### UI

    declare_counter ui_showing

    monitor_event ShortcutTriggered ShortcutTriggered object_manager hide_gui
        wait 0.1
        if I_CompareCounter ui_showing = 0
            hide_ui
            disable_movie_view
            set_counter ui_showing 2
        end_if
        if I_CompareCounter ui_showing = 1
            show_ui
            set_counter ui_showing 0
        end_if
        if I_CompareCounter ui_showing = 2
            set_counter ui_showing 1
        end_if
    end_monitor

    ;##### Videos

    declare_counter videos_reached_amon_hen

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType saxons
        and IsPositionInRect 80 383 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_greyhavens
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType normans
        and IsPositionInRect 115 357 34 38
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_shire
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType normans
        and not FactionType turks
        and IsPositionInRect 165 379 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_bree
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType turks
        and IsPositionInRect 190 381 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_weathertop
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType saxons
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 332 249 10 10
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_last
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType aztecs
        and not FactionType france
        and not FactionType milan
        and IsPositionInRect 223 278 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_isengard
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType aztecs
        and not FactionType france
        and not FactionType milan
        and IsPositionInRect 229 259 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_hornburg
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType hre
        and not FactionType france
        and IsPositionInRect 226 290 21 38
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_misty
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType hre
        and IsPositionInRect 241 338 6 6
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_moria
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType saxons
        and IsPositionInRect 245 383 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_rivendell
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType france
        and not FactionType milan
        and IsPositionInRect 246 281 14 24
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_fangorn
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType aztecs
        and not FactionType france
        and not FactionType milan
        and IsPositionInRect 248 248 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_edoras
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType milan
        and not FactionType sicily
        and IsPositionInRect 249 245 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_dunharrow
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType ireland
        and IsPositionInRect 267 326 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_lorien
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType milan
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 299 257 5 5
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_rauros
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType milan
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 300 250 3 3
        and I_CompareCounter tileseen_blocked = 0
        if I_CompareCounter videos_reached_amon_hen = 0
            historic_event reached_amon
            set_counter videos_reached_amon_hen 1
        end_if
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType milan
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 306 253 3 3
        and I_CompareCounter tileseen_blocked = 0
        if I_CompareCounter videos_reached_amon_hen = 0
            historic_event reached_amon
            set_counter videos_reached_amon_hen 1
        end_if
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 322 252 7 7
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_marshes
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType denmark
        and not FactionType england
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 323 216 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_tirith
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType denmark
        and not FactionType england
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 327 218 5 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_osgiliath
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and not FactionType sicily
        and IsPositionInRect 338 220 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_morgul
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 341 221 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_cirithungol
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 345 249 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_black_gate
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 359 229 5 5
        and I_CompareCounter tileseen_blocked = 0
        and I_EventCounter ring_destroyed = 0
        historic_event reached_mountdoom
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 371 231 3 3
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_barad_dur
        terminate_monitor
    end_monitor

    monitor_event TileSeen FactionIsLocal
        and not I_HotseatEnabled
        and not FactionType england
        and not FactionType poland
        and IsPositionInRect 173 346 5 5
        and I_CompareCounter tileseen_blocked = 0
        historic_event reached_metraith
        terminate_monitor
    end_monitor

    ;#################### Script: Weakened Factions ######################

    declare_counter weakened_faction_reinf
    declare_counter weakened_mordor
    declare_counter weakened_isengard
    declare_counter weakened_ootmm
    declare_counter weakened_galadhrim
    declare_counter weakened_rohan
    declare_counter weakened_thranduil
    declare_counter weakened_gondor
    declare_counter wrc						;weakened Rhun counter
    declare_counter wmc						;weakened Mordor counter
    declare_counter rhun_script

    if not I_IsFactionAIControlled england
        set_counter weakened_mordor -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled france
        set_counter weakened_isengard -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled hre
        set_counter weakened_ootmm -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled ireland
        set_counter weakened_galadhrim -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled milan
        set_counter weakened_rohan -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled mongols
        set_counter weakened_thranduil -1
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled sicily
        set_counter weakened_gondor 2
        set_counter weakened_faction_reinf 1
    end_if
    if not I_IsFactionAIControlled byzantium
        set_counter rhun_script 1
    end_if
    if not I_IsFactionAIControlled moors
        set_counter rhun_script 1
    end_if
    if not I_IsFactionAIControlled scotland
        set_counter rhun_script 1
    end_if

    ;#################### Weakened Rhun ######################
    monitor_event FactionTurnEnd FactionType venice
        if not I_IsFactionAIControlled venice
            terminate_monitor
        end_if

        if I_CompareCounter rhun_script = 0
            terminate_monitor
        end_if
        if I_TurnNumber = 26
            and I_CompareCounter wrc = 0
            terminate_monitor
        end_if
        if I_TurnNumber = 28
            terminate_monitor
        end_if
        if not I_SettlementOwner Mistrand = venice
            and I_CompareCounter wrc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements venice > 0
            historic_event rhun_gathers
            set_counter wrc 1
        end_if

        if not I_SettlementOwner Mistrand = venice
            and I_CompareCounter wrc = 1
            and I_TurnNumber = 27
            set_counter wrc 2
        end_if

        if not I_SettlementOwner Rhun = venice
            and I_CompareCounter wrc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements venice > 0
            historic_event rhun_gathers
            set_counter wrc 1
        end_if

        if not I_SettlementOwner Rhun = venice
            and I_CompareCounter wrc = 1
            and I_TurnNumber = 27
            set_counter wrc 2
        end_if

        if not I_SettlementOwner Southern_Rhun = venice
            and I_CompareCounter wrc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements venice > 0
            historic_event rhun_gathers
            set_counter wrc 1
        end_if

        if not I_SettlementOwner Southern_Rhun = venice
            and I_CompareCounter wrc = 1
            and I_TurnNumber = 27
            set_counter wrc 2
        end_if

        if not I_SettlementOwner Kelepar = venice
            and I_CompareCounter wrc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements venice > 0
            historic_event rhun_gathers
            set_counter wrc 1
        end_if

        if not I_SettlementOwner Kelepar = venice
            and I_CompareCounter wrc = 1
            and I_TurnNumber = 27
            set_counter wrc 2
        end_if

        if not I_SettlementOwner Morad = venice
            and I_CompareCounter wrc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements venice > 0
            historic_event rhun_gathers
            set_counter wrc 1
        end_if

        if not I_SettlementOwner Morad = venice
            and I_CompareCounter wrc = 1
            and I_TurnNumber = 27
            set_counter wrc 2
        end_if

        if I_CompareCounter wrc = 2
            and I_NumberOfSettlements venice > 0
            historic_event rhun_horde factions { sicily, denmark, milan, normans, turks, scotland, timurids, byzantium, moors, hungary, norway, saxons, mongols, ireland, teutonic_order, aztecs, france, england, poland, hre, portugal, gundabad, spain, khand, russia, }
            spawn_army
                faction venice
                character	Ja_Sur, named character, age 35, x 468, y 296, family, direction W
                traits		BadManRace 1, DaritaiClan 1, AIBoost 1, Brave 1, GoodCommander 2, GoodDefender 2, SiegeDefender 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1
                unit		Loke Rim Bodyguard				exp 5 armour 1 weapon_lvl 1
                unit		Loke-Innas Rim			exp 2 armour 2 weapon_lvl 1
                unit		Loke-Innas Rim			exp 2 armour 2 weapon_lvl 1
                unit		Loke-Innas Rim			exp 2 armour 2 weapon_lvl 1
                unit		Arulad Dragonguard		exp 4 armour 0 weapon_lvl 1
                unit		Arulad Dragonguard		exp 4 armour 0 weapon_lvl 1
                unit		Daritai Warriors			exp 2 armour 2 weapon_lvl 1
                unit		Daritai Warriors			exp 2 armour 2 weapon_lvl 1
                unit		Daritai Warriors			exp 2 armour 2 weapon_lvl 1
                unit		Daritai Warriors			exp 2 armour 2 weapon_lvl 1
                unit		Loke-Flag Rim			exp 5 armour 0 weapon_lvl 0
                unit		Loke-Flag Rim			exp 0 armour 0 weapon_lvl 0
                unit		Loke-Flag Rim			exp 0 armour 0 weapon_lvl 0
                unit		Loke-Nar Rim			exp 5 armour 1 weapon_lvl 0
                unit		Loke-Nar Rim			exp 1 armour 1 weapon_lvl 0
                unit		Loke-Nar Rim			exp 1 armour 1 weapon_lvl 0
                unit		Balchoth Tribesmen				exp 0 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen				exp 0 armour 0 weapon_lvl 0
                unit		Balchoth Tribesmen				exp 0 armour 0 weapon_lvl 0
            end
            terminate_monitor
            set_counter wrc 3
        end_if
    end_monitor
    ;###########################################################


    ;#################### Weakened Mordor ######################
    monitor_event FactionTurnEnd FactionType england
        log always --------------------------- weakened mordor script------------------------
        if not I_IsFactionAIControlled england
            terminate_monitor
        end_if

        if I_TurnNumber = 26
            and I_CompareCounter wmc = 0
            terminate_monitor
        end_if

        if I_TurnNumber = 28
            terminate_monitor
        end_if

        if not I_SettlementOwner Gorgoroth = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Gorgoroth = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Carnen = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Carnen = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Cirith = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Cirith = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner East_Gorgoroth = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner East_Gorgoroth = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Gorgoroth_South = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Gorgoroth_South = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Morgai = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Morgai = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Morgul_Vale = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Morgul_Vale = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Orc = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Orc = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if not I_SettlementOwner Udun = england
            and I_CompareCounter wmc = 0
            and I_TurnNumber < 26
            and I_TurnNumber > 0
            and I_NumberOfSettlements england > 0
            historic_event mordor_gathers
            set_counter wmc 1
        end_if

        if not I_SettlementOwner Udun = england
            and I_CompareCounter wmc = 1
            and I_TurnNumber = 27
            set_counter wmc 2
        end_if

        if I_CompareCounter wmc = 2
            and I_NumberOfSettlements england > 0
            historic_event mordor_horde
            spawn_army
                faction england
                character	Gazluk, named character, age 27, x 378, y 230, direction W
                traits		OrcRace 1, AIBoost 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, NightBattleCapable 1, Temple 1, CustomBG 1
                unit		Temple Wards		exp 6 armour 0 weapon_lvl 1
                unit		Olog-hai		exp 2 armour 1 weapon_lvl 0
                unit		Orc Maulers		exp 3 armour 0 weapon_lvl 1
                unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                unit		Black Uruks		exp 4 armour 0 weapon_lvl 0
                unit		Black Uruks		exp 4 armour 0 weapon_lvl 0
                unit		Orc Band		exp 4 armour 0 weapon_lvl 0
                unit		Orc Band		exp 4 armour 0 weapon_lvl 0
                unit		Morannon Guard	exp 2 armour 1 weapon_lvl 1
            end
            terminate_monitor
            set_counter wmc 3
        end_if
    end_monitor
    ;###################################################

    monitor_event FactionTurnEnd FactionType slave
        log always --------------------------- weakened factions script------------------------
        if I_CompareCounter weakened_mordor = 0
            set_counter weakened_mordor 1
            if I_NumberOfSettlements england > 5
                and I_SettlementOwner Morgul_Vale = england
                and I_SettlementOwner Udun = england
                and I_IsFactionAIControlled england
                set_counter weakened_mordor 0
            end_if
            if I_EventCounter mordor_destroyed = 1
                set_counter weakened_mordor -1
                inc_counter weakened_faction_reinf 1
            end_if
            if I_CompareCounter weakened_mordor = 1
                increment_kings_purse england 1000
                if I_SettlementOwner Morgul_Vale = england
                    historic_event black_gate_revenge
                end_if
                if I_SettlementOwner Udun = england
                    historic_event minas_morgul_revenge
                end_if
                spawn_army
                    faction scripts
                    character	Radzag, named character, age 27, x 386, y 233, direction W
                    traits		OrcRace 1, AIBoost 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, NightBattleCapable 1
                    unit		Uruk Bodyguard		exp 6 armour 1 weapon_lvl 1
                    unit		Olog-hai		exp 2 armour 1 weapon_lvl 0
                    unit		Orc Maulers		exp 3 armour 0 weapon_lvl 1
                    unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Raiders	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Host	exp 2 armour 0 weapon_lvl 0
                    unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                    unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                    unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                    unit		Orc Archers		exp 1 armour 1 weapon_lvl 1
                    unit		Black Uruks		exp 4 armour 0 weapon_lvl 0
                    unit		Black Uruks		exp 4 armour 0 weapon_lvl 0
                    unit		Orc Band		exp 4 armour 0 weapon_lvl 0
                    unit		Orc Band		exp 4 armour 0 weapon_lvl 0
                    unit		Morannon Guard	exp 2 armour 1 weapon_lvl 1
                end
                give_everything_to_faction scripts england false
                inc_counter weakened_faction_reinf 1
            end_if
        end_if
        if I_CompareCounter weakened_isengard = 0
            and not I_SettlementOwner Nan_Curunir = france
            and I_IsFactionAIControlled france
            set_counter weakened_isengard 1
            inc_counter weakened_faction_reinf 1
            increment_kings_purse france 2000
            historic_event isengard_revenge
            spawn_army
                faction france
                character	random_name, named character, age 27, x 216, y 274, family, direction E
                traits		UrukHaiRace 1, AIBoost 1, Berserker 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, NightBattleCapable 1
                unit		Uruk-hai Bodyguards		exp 4 armour 1 weapon_lvl 1
                unit		Warg Marauders			exp 2 armour 0 weapon_lvl 1
                unit		Warg Marauders			exp 2 armour 0 weapon_lvl 1
                unit		Uruk-hai Pikemen	exp 3 armour 0 weapon_lvl 1
                unit		Uruk-hai Infantry	exp 2 armour 2 weapon_lvl 0
                unit		Uruk-hai Infantry	exp 2 armour 2 weapon_lvl 0
                unit		Uruk-hai Crossbow	exp 2 armour 0 weapon_lvl 0
                unit		Uruk-hai Raiders	exp 1 armour 1 weapon_lvl 0
                unit		Uruk-hai Raiders	exp 1 armour 1 weapon_lvl 0
                unit		Uruk-hai Raiders	exp 1 armour 1 weapon_lvl 0
                unit		Uruk-hai Archers	exp 2 armour 0 weapon_lvl 1
                unit		Uruk-hai Archers	exp 2 armour 0 weapon_lvl 1
                unit		Dunforgoil Riders		exp 4 armour 1 weapon_lvl 0
                unit		Trolls	exp 2 armour 0 weapon_lvl 0
                unit		Uruk-hai Raiders	exp 2 armour 0 weapon_lvl 0
                unit		Uruk-hai Raiders	exp 2 armour 0 weapon_lvl 0
            end
        end_if
        if I_CompareCounter weakened_ootmm = 0
            if not I_SettlementOwner West_Moria = hre
                and I_IsFactionAIControlled norway
                and I_IsFactionAIControlled hre
                set_counter weakened_ootmm 1
                if I_NumberOfSettlements hre = 0
                    set_counter weakened_ootmm -1
                    inc_counter weakened_faction_reinf 1
                end_if
            end_if
            if I_CompareCounter weakened_ootmm = 1
                increment_kings_purse hre 1000
                historic_event goblintown_revenge
                spawn_army
                    faction hre
                    character	random_name, named character, age 34, x 232, y 342, family, direction E
                    traits		OrcRace 1, AIBoost 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, GoodAttacker 2, GoodCommander 2, LogisticalSkill 1, NightBattleCapable 1
                    unit		Goblin Bodyguards		exp 4 armour 1 weapon_lvl 1
                    unit		Trolls			exp 1 armour 0 weapon_lvl 0
                    unit		Trolls			exp 1 armour 0 weapon_lvl 0
                    unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                    unit		Warg Riders			exp 2 armour 0 weapon_lvl 0
                    unit		Heavy Goblin Infantry		exp 1 armour 1 weapon_lvl 0
                    unit		Heavy Goblin Infantry		exp 1 armour 1 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Infantry		exp 2 armour 0 weapon_lvl 0
                    unit		Goblin Archers		exp 1 armour 0 weapon_lvl 1
                    unit		Goblin Archers		exp 1 armour 0 weapon_lvl 1
                    unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
                    unit		Snaga Skirmishers		exp 2 armour 0 weapon_lvl 1
                end
                inc_counter weakened_faction_reinf 1
            end_if
        end_if
        if I_CompareCounter weakened_galadhrim = 0
            and not I_SettlementOwner Celebrant = ireland
            and I_IsFactionAIControlled ireland
            set_counter weakened_galadhrim 1
            inc_counter weakened_faction_reinf 1
            if I_NumberOfSettlements ireland > 0
                increment_kings_purse ireland 1000
                historic_event caras_galadhon_revenge
                spawn_army
                    faction ireland
                    character	random_name, named character, age 25, x 264, y 323, family, direction W
                    traits		ElvenRace 1, Nandor 1, AIBoost 1, GoodAttacker 1, GoodCommander 2, KindRuler 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 2
                    unit		Elbereths Sentinels		exp 5 armour 1 weapon_lvl 1
                    unit		Lorien Scouts		exp 2 armour 1 weapon_lvl 0
                    unit		Lorien Scouts		exp 2 armour 1 weapon_lvl 0
                    unit		Galadhrim Guards	exp 2 armour 0 weapon_lvl 0
                    unit		Galadhrim Swordsmen	exp 3 armour 0 weapon_lvl 1
                    unit		Sentinels of Cerin Amroth		exp 4 armour 1 weapon_lvl 0
                    unit		Sentinels of Cerin Amroth		exp 4 armour 1 weapon_lvl 0
                    unit		Lorien Warders		exp 3 armour 0 weapon_lvl 1
                    unit		Lorien Warders		exp 3 armour 0 weapon_lvl 1
                    unit		Lorien Sentries	exp 2 armour 0 weapon_lvl 0
                    unit		Lorien Sentries	exp 2 armour 0 weapon_lvl 0
                    unit		Lorien Sentries	exp 2 armour 0 weapon_lvl 0
                    unit		Lothlorien Marchwardens			exp 2 armour 0 weapon_lvl 1
                    unit		Lothlorien Marchwardens			exp 2 armour 0 weapon_lvl 1
                    unit		Lothlorien Marchwardens			exp 2 armour 0 weapon_lvl 1
                    unit		Lothlorien Marchwardens			exp 2 armour 0 weapon_lvl 1
                end
            end_if
        end_if
        if I_CompareCounter weakened_rohan = 0
            and not I_SettlementOwner Kings_Land = milan
            and I_IsFactionAIControlled milan
            set_counter weakened_rohan 1
            inc_counter weakened_faction_reinf 1
            if I_NumberOfSettlements milan > 0
                increment_kings_purse milan 1000
                historic_event kings_land_revenge
                spawn_army
                    faction milan
                    character	random_name, named character, age 30, x 246, y 254, direction NE
                    traits		GoodManRace 1, Rohirrim 1, AIBoost 1, Brave 1, GoodAttacker 1, GoodCavalryGeneral 2, GoodCommander 2, Loyal 1, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Rohan Bodyguard			exp 4 armour 1 weapon_lvl 1
                    unit		Eored Lancers		exp 3 armour 1 weapon_lvl 0
                    unit		Eored Lancers		exp 3 armour 1 weapon_lvl 0
                    unit		Rohirrim			exp 2 armour 0 weapon_lvl 0
                    unit		Rohirrim			exp 2 armour 0 weapon_lvl 0
                    unit		Rohirrim			exp 2 armour 0 weapon_lvl 0
                    unit		Rohirrim			exp 2 armour 0 weapon_lvl 0
                    unit		Eored Skirmishers		exp 1 armour 0 weapon_lvl 1
                    unit		Meduseld Doorwards		exp 5 armour 0 weapon_lvl 0
                    unit		Eored Swordsmen		exp 2 armour 0 weapon_lvl 1
                    unit		Eored Swordsmen		exp 2 armour 0 weapon_lvl 1
                    unit		Eored Swordsmen		exp 2 armour 0 weapon_lvl 1
                    unit		Eorling Axemen		exp 2 armour 0 weapon_lvl 0
                    unit		Eorling Axemen		exp 2 armour 0 weapon_lvl 0
                    unit		Eorling Axemen		exp 2 armour 0 weapon_lvl 0
                    unit		Peasant Militia		exp 2 armour 1 weapon_lvl 0
                    unit		Peasant Militia		exp 2 armour 1 weapon_lvl 0
                    unit		Peasant Militia		exp 2 armour 1 weapon_lvl 0
                end
            end_if
        end_if
        if I_CompareCounter weakened_thranduil = 0
            and not I_SettlementOwner Elven_Mirkwood = mongols
            and I_IsFactionAIControlled mongols
            set_counter weakened_thranduil 1
            inc_counter weakened_faction_reinf 1
            if I_NumberOfSettlements mongols > 0
                increment_kings_purse mongols 1000
                historic_event thranduils_halls_revenge
                spawn_army
                    faction mongols
                    character	random_name, named character, age 39, x 316, y 413, family, direction E
                    traits		ElvenRace 1, Nandor 1, AIBoost 1, GoodAttacker 2, GoodCommander 1, Loyal 1, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                    unit		Tawar Areiniyr		exp 6 armour 1 weapon_lvl 1
                    unit		Woodland Horsearchers		exp 3 armour 0 weapon_lvl 1
                    unit		Woodland Horsearchers		exp 3 armour 0 weapon_lvl 1
                    unit		Elvenkings Axeguard	exp 3 armour 0 weapon_lvl 0
                    unit		Elvenkings Gateguard	exp 3 armour 0 weapon_lvl 1
                    unit		Elvenkings Bowguard	exp 3 armour 0 weapon_lvl 0
                    unit		Elvenkings Bowguard	exp 3 armour 0 weapon_lvl 0
                    unit		Elvenkings Bowguard	exp 3 armour 0 weapon_lvl 0
                    unit		Woodland Warriors		exp 3 armour 1 weapon_lvl 0
                    unit		Woodland Warriors		exp 3 armour 1 weapon_lvl 0
                    unit		Woodland Warriors		exp 3 armour 1 weapon_lvl 0
                    unit		Woodland Warriors		exp 3 armour 1 weapon_lvl 0
                    unit		Woodland Sentinels		exp 2 armour 1 weapon_lvl 1
                    unit		Woodland Sentinels		exp 2 armour 1 weapon_lvl 1
                    unit		Woodland Sentinels		exp 2 armour 1 weapon_lvl 1
                    unit		Woodland Spearmen	exp 1 armour 1 weapon_lvl 0
                end
            end_if
        end_if
        if I_NumberOfSettlements sicily = 0
            and I_CompareCounter weakened_gondor < 2
            set_counter weakened_gondor 2
            inc_counter weakened_faction_reinf 1
        end_if
        if I_CompareCounter weakened_gondor = 1
        and I_IsFactionAIControlled sicily
            set_counter weakened_gondor 2
            if I_NumberOfSettlements sicily > 4
                and I_SettlementOwner Ethring = sicily
                set_counter weakened_gondor 1
            end_if
            if I_CompareCounter weakened_gondor = 2
                increment_kings_purse sicily 1000
                if I_SettlementOwner Ethring = sicily
                    and I_NumberOfSettlements sicily < 5
                    historic_event gondor_revenge
                end_if
                if not I_SettlementOwner Ethring = sicily
                    and I_NumberOfSettlements sicily > 4
                    and I_EventCounter gondor_revenge = 0
                    historic_event ethring_revenge
                end_if
                spawn_army
                    faction sicily
                    character	random_name, named character, age 31, x 262, y 233, family, direction NE
                    traits		DunedainRace 1, Gondorian 1, AIBoost 1, GoodAttacker 1, GoodCommander 3, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 1
                    unit		Gondor Bodyguard		exp 5 armour 1 weapon_lvl 1
                    unit		Citadel Guard		exp 3 armour 1 weapon_lvl 1
                    unit		Gondor Spearmen	exp 4 armour 2 weapon_lvl 0
                    unit		Gondor Spearmen	exp 4 armour 2 weapon_lvl 0
                    unit		Gondor Infantry	exp 3 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 3 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 3 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 3 armour 1 weapon_lvl 0
                    unit		Gondor Archers		exp 3 armour 2 weapon_lvl 1
                    unit		Gondor Archers		exp 3 armour 2 weapon_lvl 1
                    unit		Gondor Militia	exp 3 armour 1 weapon_lvl 0
                    unit		Gondor Militia	exp 3 armour 1 weapon_lvl 0
                    unit		Blackroot Vale Archers	exp 2 armour 0 weapon_lvl 0
                    unit		Blackroot Vale Archers	exp 2 armour 0 weapon_lvl 0
                    unit		Ithilien Rangers		exp 3 armour 0 weapon_lvl 1
                    unit		Ithilien Rangers		exp 3 armour 0 weapon_lvl 1
                    unit		Lebennin Marines	exp 1 armour 1 weapon_lvl 1
                    unit		Lebennin Marines	exp 1 armour 1 weapon_lvl 1
                end
                inc_counter weakened_faction_reinf 1
            end_if
        end_if
        if I_CompareCounter weakened_gondor = 0
        and I_IsFactionAIControlled sicily
            set_counter weakened_gondor 1
            if I_NumberOfSettlements sicily > 6
                and I_SettlementOwner Anorien = sicily
                set_counter weakened_gondor 0
            end_if
            if I_CompareCounter weakened_gondor = 1
                increment_kings_purse sicily 1000
                historic_event minas_tirith_revenge
                spawn_army
                    faction sicily
                    character	random_name, named character, age 44, x 320, y 215, family, direction N
                    traits		DunedainRace 1, Gondorian 1, AIBoost 1, GoodAdministrator 1, GoodCommander 2, GoodDefender 2, LogisticalSkill 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, StrategicSkill 2
                    unit		Gondor Bodyguard		exp 4 armour 1 weapon_lvl 0
                    unit		Citadel Guard		exp 3 armour 1 weapon_lvl 1
                    unit		Citadel Guard		exp 3 armour 1 weapon_lvl 1
                    unit		Gondor Spearmen	exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Spearmen	exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Spearmen	exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Spearmen	exp 2 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 1 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 1 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 1 armour 1 weapon_lvl 0
                    unit		Gondor Infantry	exp 1 armour 1 weapon_lvl 0
                    unit		Gondor Archers		exp 2 armour 1 weapon_lvl 1
                    unit		Gondor Archers		exp 2 armour 1 weapon_lvl 1
                    unit		Lossarnach Axemen	exp 4 armour 0 weapon_lvl 1
                    unit		Lossarnach Axemen	exp 4 armour 0 weapon_lvl 1
                    unit		Ithilien Rangers		exp 2 armour 0 weapon_lvl 1
                    unit		Ithilien Rangers		exp 2 armour 0 weapon_lvl 1
                    unit		Ithilien Rangers		exp 2 armour 0 weapon_lvl 1
                end
            end_if
        end_if
        if I_CompareCounter weakened_faction_reinf = 7
            terminate_monitor
        end_if
    end_monitor
    
    monitor_event PreFactionTurnStart IsFactionAIControlled
    
        if I_NumberOfHeirs normans < 1
        and I_NumberOfSettlements normans < 1
        and I_EventCounter normans_killed = 0
            set_event_counter normans_killed 1
            console_command kill_faction normans
        end_if
        
        if I_NumberOfHeirs teutonic_order < 1
        and I_NumberOfSettlements teutonic_order < 1
        and I_EventCounter teutonic_order_killed = 0
            set_event_counter teutonic_order_killed 1
            console_command kill_faction teutonic_order
        end_if
        
        if I_NumberOfHeirs poland < 1
        and I_NumberOfSettlements poland < 1
        and I_EventCounter poland_killed = 0
            set_event_counter poland_killed 1
            console_command kill_faction poland
        end_if
        
        if I_NumberOfHeirs france < 1
        and I_NumberOfSettlements france < 1
        and I_EventCounter france_killed = 0
            set_event_counter france_killed 1
            console_command kill_faction france
        end_if
        
        if I_NumberOfHeirs hre < 1
        and I_NumberOfSettlements hre < 1
        and I_EventCounter hre_killed = 0
            set_event_counter hre_killed 1
            console_command kill_faction hre
        end_if
        
        if I_NumberOfHeirs portugal < 1
        and I_NumberOfSettlements portugal < 1
        and I_EventCounter portugal_killed = 0
            set_event_counter portugal_killed 1
            console_command kill_faction portugal
        end_if
        
    end_monitor
    ;###################### Script: Selection Voices ####################
    monitor_event CharacterSelected Trait Eowyn > 0
        play_sound_event EOWYN_SELECTED
    end_monitor
    
    monitor_event CharacterSelected Trait Theoden > 0
        play_sound_event THEODEN_SELECTED
    end_monitor
    
    monitor_event CharacterSelected Trait Eomer > 0
        play_sound_event EOMER_SELECTED
    end_monitor

    monitor_event CharacterSelected FactionType milan
      and AgentType = named_character
      and not Trait Eowyn > 0
      and not Trait Eomer > 0
      and not Trait Theoden > 0
      play_sound_event ROHAN_GENERAL_SELECTED
    end_monitor
	
    ;###################### Script: One Ring Fynn ####################

    set_event_counter ring_end 0

    ;Ring resets after a faction loses the ring

   monitor_event PreFactionTurnStart
        log always --------------------------- faction does not have ring---------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
        if I_EventCounter sicily_loses_ring_lua = 1
            set_event_counter sicily_loses_ring_lua 0
            increment_kings_purse sicily -2000
            historic_event gondor_loses_ring
        end_if
        if I_EventCounter denmark_loses_ring_lua = 1
			set_event_counter denmark_loses_ring_lua 0
			increment_kings_purse denmark -2000
			historic_event da_loses_ring
        end_if
        if I_EventCounter milan_loses_ring_lua = 1
			set_event_counter milan_loses_ring_lua 0
			increment_kings_purse milan -2000
			historic_event rohan_loses_ring
        end_if
        if I_EventCounter normans_loses_ring_lua = 1
			set_event_counter normans_loses_ring_lua 0
			increment_kings_purse normans -2000
			historic_event bree_loses_ring
        end_if
        if I_EventCounter scotland_loses_ring_lua = 1
			set_event_counter scotland_loses_ring_lua 0
			increment_kings_purse scotland -2000
			historic_event dale_loses_ring
        end_if
        if I_EventCounter timurids_loses_ring_lua = 1
			set_event_counter timurids_loses_ring_lua 0
			increment_kings_purse timurids -2000
			historic_event anduin_loses_ring
        end_if
        if I_EventCounter byzantium_loses_ring_lua = 1
			set_event_counter byzantium_loses_ring_lua 0
			increment_kings_purse byzantium -2000
			historic_event dorwinion_loses_ring
        end_if
        if I_EventCounter moors_loses_ring_lua = 1
			set_event_counter moors_loses_ring_lua 0
			increment_kings_purse moors -2000
			historic_event erebor_loses_ring
        end_if
        if I_EventCounter hungary_loses_ring_lua = 1
			set_event_counter hungary_loses_ring_lua 0
			increment_kings_purse hungary -2000
			historic_event el_loses_ring
        end_if
        if I_EventCounter norway_loses_ring_lua = 1
			set_event_counter norway_loses_ring_lua 0
			increment_kings_purse norway -2000
			historic_event kd_loses_ring
        end_if
        if I_EventCounter teutonic_order_loses_ring_lua = 1
			set_event_counter teutonic_order_loses_ring_lua 0
			increment_kings_purse teutonic_order -2000
			historic_event enedwaith_loses_ring
        end_if
        if I_EventCounter aztecs_loses_ring_lua = 1
			set_event_counter aztecs_loses_ring_lua 0
			increment_kings_purse aztecs -2000
			historic_event dunland_loses_ring
        end_if
        if I_EventCounter saruman_loses_ring_lua = 1
			set_event_counter saruman_loses_ring_lua 0
			increment_kings_purse france -3500
			historic_event saruman_manycolours_dies factions { all, }
			set_event_counter saruman_ring_event 0
			set_event_counter nazgul_leave_sauron 0
			set_event_counter saruman_manycolours_spawn 0
			historic_event nazgul_leave_isengard factions { france, }
		end_if
        if I_EventCounter sauron_loses_ring_lua = 1
			set_event_counter sauron_loses_ring_lua 0
			increment_kings_purse england -5000
			historic_event sauron_dies factions { all, }
			set_event_counter sauron_ai 0
			set_event_counter sauron_spawn 0
			increment_kings_purse poland -1000
			increment_kings_purse hre -1000
			increment_kings_purse portugal -1000
			increment_kings_purse venice -500
			increment_kings_purse spain -500
			if I_EventCounter blue_wizards_fail = 1
				increment_kings_purse khand -500
			end_if
		end_if
        if I_EventCounter poland_loses_ring_lua = 1
			set_event_counter poland_loses_ring_lua 0
			increment_kings_purse poland -2000
			historic_event dg_loses_ring
        end_if
        if I_EventCounter hre_loses_ring_lua = 1
			set_event_counter hre_loses_ring_lua 0
			increment_kings_purse hre -2000
			historic_event moria_loses_ring
        end_if
        if I_EventCounter portugal_loses_ring_lua = 1
			set_event_counter portugal_loses_ring_lua 0
			increment_kings_purse portugal -2000
			historic_event angmar_loses_ring
        end_if
        if I_EventCounter venice_loses_ring_lua = 1
			set_event_counter venice_loses_ring_lua 0
			increment_kings_purse venice -2000
			historic_event rhun_loses_ring
        end_if
        if I_EventCounter gundabad_loses_ring_lua = 1
			set_event_counter gundabad_loses_ring_lua 0
			increment_kings_purse gundabad -2000
			historic_event gundabad_loses_ring
        end_if
        if I_EventCounter spain_loses_ring_lua = 1
			set_event_counter spain_loses_ring_lua 0
			increment_kings_purse spain -2000
			historic_event harad_loses_ring
        end_if
        if I_EventCounter khand_loses_ring_lua = 1
			set_event_counter khand_loses_ring_lua 0
			increment_kings_purse khand -2000
			historic_event khand_loses_ring
        end_if
        if I_EventCounter russia_loses_ring_lua = 1
			set_event_counter russia_loses_ring_lua 0
			increment_kings_purse russia -2000
			historic_event aa_loses_ring
        end_if
    end_monitor
	
	set_event_counter sicily_loses_ring_lua 0	
	set_event_counter denmark_loses_ring_lua 0
	set_event_counter milan_loses_ring_lua 0
	set_event_counter normans_loses_ring_lua 0
	set_event_counter scotland_loses_ring_lua 0
	set_event_counter timurids_loses_ring_lua 0
	set_event_counter byzantium_loses_ring_lua 0
	set_event_counter moors_loses_ring_lua 0
	set_event_counter hungary_loses_ring_lua 0
	set_event_counter norway_loses_ring_lua 0
	set_event_counter teutonic_order_loses_ring_lua 0
	set_event_counter aztecs_loses_ring_lua 0
	set_event_counter saruman_loses_ring_lua 0
	set_event_counter sauron_loses_ring_lua 0
	set_event_counter poland_loses_ring_lua 0
	set_event_counter hre_loses_ring_lua 0
	set_event_counter portugal_loses_ring_lua 0
	set_event_counter venice_loses_ring_lua 0
	set_event_counter gundabad_loses_ring_lua 0
	set_event_counter spain_loses_ring_lua 0
	set_event_counter khand_loses_ring_lua 0
	set_event_counter russia_loses_ring_lua 0
	set_event_counter sauron_ai 0
	
    ;Monitors for conquering the ring in combat

    ;monitor_event PostBattle I_CompareCounter ring_exists_counter == 1
    ;    if I_EventCounter ring_end == 1
    ;        terminate_monitor
    ;    end_if
    ;    log always --------------------------- post battle ring counter ------------------------
    ;    campaign_wait 0.1
    ;    set_counter ring_exists_counter 0
    ;    campaign_wait 4
    ;    if not I_WorldwideAncillaryExists one_ring
    ;    and I_EventCounter ring_transfer = 0
    ;        set_event_counter ring_exists 0
    ;        log always -----------------------------------AI Ring Transfer-------------------------------
    ;    end_if
    ;end_monitor
	;
    ;monitor_event PostBattle IsGeneral ;ring conquering for player, for AI it is done in the EDA
    ;and WonBattle
    ;and CharacterIsLocal
    ;and I_CompareCounter ring_exists_counter = 1
    ;    if I_EventCounter ring_end == 1
    ;        terminate_monitor
    ;    end_if
    ;    log always --------------------------- post battle ring counter player ------------------------
    ;    campaign_wait 0.1
    ;    set_counter ring_exists_counter 0
    ;    set_event_counter ring_exists 0
    ;    campaign_wait 4
    ;    if not I_WorldwideAncillaryExists one_ring
    ;    and I_EventCounter ring_end == 0
    ;    and I_EventCounter ring_destroyed = 0
    ;    and I_EventCounter ring_transfer = 0
    ;        e_select_character
    ;        console_command give_ancillary this one_ring
    ;        log always -----------------------------------Ring Transferred-------------------------------
    ;    end_if
    ;end_monitor

    ;this monitor is responsible for counting how long a AI faction has got the ring and implementing the various consequences
	set_event_counter ring_end 0

    monitor_event CharacterTurnStart HasAncType relic_ring
        and not CharacterIsLocal
        log always --------------------------- ai has ring consequences ------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
        if I_EventCounter sicily_keeps_ring_lua = 1
			set_event_counter sicily_keeps_ring_lua 0
			historic_event gondor_keeps_ring factions { all, }
			increment_kings_purse sicily 2000
			set_faction_standing sicily england -1
			set_faction_standing sicily france -1
			set_faction_standing sicily spain -1
			set_faction_standing sicily venice -1
			set_faction_standing sicily hre -1
			set_faction_standing sicily portugal -1
			set_faction_standing sicily aztecs -1
			set_faction_standing sicily poland -1
			set_faction_standing sicily saxons -1
			set_faction_standing sicily mongols -1
			set_faction_standing sicily ireland -1
			set_faction_standing sicily turks -1
			set_faction_standing england sicily -1
			set_faction_standing france sicily -1
			set_faction_standing spain sicily -1
			set_faction_standing venice sicily -1
			set_faction_standing hre sicily -1
			set_faction_standing portugal sicily -1
			set_faction_standing aztecs sicily -1
			set_faction_standing poland sicily -1
			set_faction_standing saxons sicily -1
			set_faction_standing mongols sicily -1
			set_faction_standing ireland sicily -1
			set_faction_standing turks sicily -1
        end_if
        if I_EventCounter denmark_keeps_ring_lua = 1
			set_event_counter denmark_keeps_ring_lua 0
			historic_event da_keeps_ring factions { all, }
			increment_kings_purse denmark 2000
			set_faction_standing denmark england -1
			set_faction_standing denmark france -1
			set_faction_standing denmark spain -1
			set_faction_standing denmark venice -1
			set_faction_standing denmark hre -1
			set_faction_standing denmark portugal -1
			set_faction_standing denmark aztecs -1
			set_faction_standing denmark poland -1
			set_faction_standing denmark saxons -1
			set_faction_standing denmark mongols -1
			set_faction_standing denmark ireland -1
			set_faction_standing denmark turks -1
			set_faction_standing england denmark -1
			set_faction_standing france denmark -1
			set_faction_standing spain denmark -1
			set_faction_standing venice denmark -1
			set_faction_standing hre denmark -1
			set_faction_standing portugal denmark -1
			set_faction_standing aztecs denmark -1
			set_faction_standing poland denmark -1
			set_faction_standing saxons denmark -1
			set_faction_standing mongols denmark -1
			set_faction_standing ireland denmark -1
			set_faction_standing turks denmark -1
        end_if
        if I_EventCounter milan_keeps_ring_lua = 1
			set_event_counter milan_keeps_ring_lua 0
			historic_event rohan_keeps_ring factions { all, }
			increment_kings_purse milan 2000
			set_faction_standing milan england -1
			set_faction_standing milan france -1
			set_faction_standing milan spain -1
			set_faction_standing milan venice -1
			set_faction_standing milan hre -1
			set_faction_standing milan portugal -1
			set_faction_standing milan aztecs -1
			set_faction_standing milan poland -1
			set_faction_standing milan saxons -1
			set_faction_standing milan mongols -1
			set_faction_standing milan ireland -1
			set_faction_standing milan turks -1
			set_faction_standing england milan -1
			set_faction_standing france milan -1
			set_faction_standing spain milan -1
			set_faction_standing venice milan -1
			set_faction_standing hre milan -1
			set_faction_standing portugal milan -1
			set_faction_standing aztecs milan -1
			set_faction_standing poland milan -1
			set_faction_standing saxons milan -1
			set_faction_standing mongols milan -1
			set_faction_standing ireland milan -1
			set_faction_standing turks milan -1
        end_if
        if I_EventCounter normans_keeps_ring_lua = 1
			set_event_counter normans_keeps_ring_lua 0
			historic_event bree_keeps_ring factions { all, }
			increment_kings_purse normans 2000
			set_faction_standing normans england -1
			set_faction_standing normans france -1
			set_faction_standing normans spain -1
			set_faction_standing normans venice -1
			set_faction_standing normans hre -1
			set_faction_standing normans portugal -1
			set_faction_standing normans aztecs -1
			set_faction_standing normans poland -1
			set_faction_standing normans saxons -1
			set_faction_standing normans mongols -1
			set_faction_standing normans ireland -1
			set_faction_standing normans turks -1
			set_faction_standing england normans -1
			set_faction_standing france normans -1
			set_faction_standing spain normans -1
			set_faction_standing venice normans -1
			set_faction_standing hre normans -1
			set_faction_standing portugal normans -1
			set_faction_standing aztecs normans -1
			set_faction_standing poland normans -1
			set_faction_standing saxons normans -1
			set_faction_standing mongols normans -1
			set_faction_standing ireland normans -1
			set_faction_standing turks normans -1
        end_if
        if I_EventCounter scotland_keeps_ring_lua = 1
			set_event_counter scotland_keeps_ring_lua 0
			historic_event dale_keeps_ring factions { all, }
			increment_kings_purse scotland 2000
			set_faction_standing scotland england -1
			set_faction_standing scotland france -1
			set_faction_standing scotland spain -1
			set_faction_standing scotland venice -1
			set_faction_standing scotland hre -1
			set_faction_standing scotland portugal -1
			set_faction_standing scotland aztecs -1
			set_faction_standing scotland poland -1
			set_faction_standing scotland saxons -1
			set_faction_standing scotland mongols -1
			set_faction_standing scotland ireland -1
			set_faction_standing scotland turks -1
			set_faction_standing england scotland -1
			set_faction_standing france scotland -1
			set_faction_standing spain scotland -1
			set_faction_standing venice scotland -1
			set_faction_standing hre scotland -1
			set_faction_standing portugal scotland -1
			set_faction_standing aztecs scotland -1
			set_faction_standing poland scotland -1
			set_faction_standing saxons scotland -1
			set_faction_standing mongols scotland -1
			set_faction_standing ireland scotland -1
			set_faction_standing turks scotland -1
        end_if
        if I_EventCounter timurids_keeps_ring_lua = 1
			set_event_counter timurids_keeps_ring_lua 0
			historic_event anduin_keeps_ring factions { all, }
			increment_kings_purse timurids 2000
			set_faction_standing timurids england -1
			set_faction_standing timurids france -1
			set_faction_standing timurids spain -1
			set_faction_standing timurids venice -1
			set_faction_standing timurids hre -1
			set_faction_standing timurids portugal -1
			set_faction_standing timurids aztecs -1
			set_faction_standing timurids poland -1
			set_faction_standing timurids saxons -1
			set_faction_standing timurids mongols -1
			set_faction_standing timurids ireland -1
			set_faction_standing timurids turks -1
			set_faction_standing england timurids -1
			set_faction_standing france timurids -1
			set_faction_standing spain timurids -1
			set_faction_standing venice timurids -1
			set_faction_standing hre timurids -1
			set_faction_standing portugal timurids -1
			set_faction_standing aztecs timurids -1
			set_faction_standing poland timurids -1
			set_faction_standing saxons timurids -1
			set_faction_standing mongols timurids -1
			set_faction_standing ireland timurids -1
			set_faction_standing turks timurids -1
        end_if
        if I_EventCounter byzantium_keeps_ring_lua = 1
			set_event_counter byzantium_keeps_ring_lua 0
			historic_event dorwinion_keeps_ring factions { all, }
			increment_kings_purse byzantium 2000
			set_faction_standing byzantium england -1
			set_faction_standing byzantium france -1
			set_faction_standing byzantium spain -1
			set_faction_standing byzantium venice -1
			set_faction_standing byzantium hre -1
			set_faction_standing byzantium portugal -1
			set_faction_standing byzantium aztecs -1
			set_faction_standing byzantium poland -1
			set_faction_standing byzantium saxons -1
			set_faction_standing byzantium mongols -1
			set_faction_standing byzantium ireland -1
			set_faction_standing byzantium turks -1
			set_faction_standing england byzantium -1
			set_faction_standing france byzantium -1
			set_faction_standing spain byzantium -1
			set_faction_standing venice byzantium -1
			set_faction_standing hre byzantium -1
			set_faction_standing portugal byzantium -1
			set_faction_standing aztecs byzantium -1
			set_faction_standing poland byzantium -1
			set_faction_standing saxons byzantium -1
			set_faction_standing mongols byzantium -1
			set_faction_standing ireland byzantium -1
			set_faction_standing turks byzantium -1
        end_if
        if I_EventCounter moors_keeps_ring_lua = 1
			set_event_counter moors_keeps_ring_lua 0
			historic_event erebor_keeps_ring factions { all, }
			increment_kings_purse moors 2000
			set_faction_standing moors england -1
			set_faction_standing moors france -1
			set_faction_standing moors spain -1
			set_faction_standing moors venice -1
			set_faction_standing moors hre -1
			set_faction_standing moors portugal -1
			set_faction_standing moors aztecs -1
			set_faction_standing moors poland -1
			set_faction_standing moors saxons -1
			set_faction_standing moors mongols -1
			set_faction_standing moors ireland -1
			set_faction_standing moors turks -1
			set_faction_standing england moors -1
			set_faction_standing france moors -1
			set_faction_standing spain moors -1
			set_faction_standing venice moors -1
			set_faction_standing hre moors -1
			set_faction_standing portugal moors -1
			set_faction_standing aztecs moors -1
			set_faction_standing poland moors -1
			set_faction_standing saxons moors -1
			set_faction_standing mongols moors -1
			set_faction_standing ireland moors -1
			set_faction_standing turks moors -1
        end_if
        if I_EventCounter hungary_keeps_ring_lua = 1
			set_event_counter hungary_keeps_ring_lua 0
			historic_event el_keeps_ring factions { all, }
			increment_kings_purse hungary 2000
			set_faction_standing hungary england -1
			set_faction_standing hungary france -1
			set_faction_standing hungary spain -1
			set_faction_standing hungary venice -1
			set_faction_standing hungary hre -1
			set_faction_standing hungary portugal -1
			set_faction_standing hungary aztecs -1
			set_faction_standing hungary poland -1
			set_faction_standing hungary saxons -1
			set_faction_standing hungary mongols -1
			set_faction_standing hungary ireland -1
			set_faction_standing hungary turks -1
			set_faction_standing england hungary -1
			set_faction_standing france hungary -1
			set_faction_standing spain hungary -1
			set_faction_standing venice hungary -1
			set_faction_standing hre hungary -1
			set_faction_standing portugal hungary -1
			set_faction_standing aztecs hungary -1
			set_faction_standing poland hungary -1
			set_faction_standing saxons hungary -1
			set_faction_standing mongols hungary -1
			set_faction_standing ireland hungary -1
			set_faction_standing turks hungary -1
        end_if
        if I_EventCounter norway_keeps_ring_lua = 1
			set_event_counter norway_keeps_ring_lua 0
			historic_event kd_keeps_ring factions { all, }
			increment_kings_purse norway 2000
			set_faction_standing norway england -1
			set_faction_standing norway france -1
			set_faction_standing norway spain -1
			set_faction_standing norway venice -1
			set_faction_standing norway hre -1
			set_faction_standing norway portugal -1
			set_faction_standing norway aztecs -1
			set_faction_standing norway poland -1
			set_faction_standing norway saxons -1
			set_faction_standing norway mongols -1
			set_faction_standing norway ireland -1
			set_faction_standing norway turks -1
			set_faction_standing england norway -1
			set_faction_standing france norway -1
			set_faction_standing spain norway -1
			set_faction_standing venice norway -1
			set_faction_standing hre norway -1
			set_faction_standing portugal norway -1
			set_faction_standing aztecs norway -1
			set_faction_standing poland norway -1
			set_faction_standing saxons norway -1
			set_faction_standing mongols norway -1
			set_faction_standing ireland norway -1
			set_faction_standing turks norway -1
        end_if
        if I_EventCounter teutonic_order_keeps_ring_lua = 1
			set_event_counter teutonic_order_keeps_ring_lua 0
			historic_event enedwaith_keeps_ring factions { all, }
			increment_kings_purse teutonic_order 2000
			set_faction_standing teutonic_order england -1
			set_faction_standing teutonic_order france -1
			set_faction_standing teutonic_order spain -1
			set_faction_standing teutonic_order venice -1
			set_faction_standing teutonic_order hre -1
			set_faction_standing teutonic_order portugal -1
			set_faction_standing teutonic_order aztecs -1
			set_faction_standing teutonic_order poland -1
			set_faction_standing teutonic_order saxons -1
			set_faction_standing teutonic_order mongols -1
			set_faction_standing teutonic_order ireland -1
			set_faction_standing teutonic_order turks -1
			set_faction_standing england teutonic_order -1
			set_faction_standing france teutonic_order -1
			set_faction_standing spain teutonic_order -1
			set_faction_standing venice teutonic_order -1
			set_faction_standing hre teutonic_order -1
			set_faction_standing portugal teutonic_order -1
			set_faction_standing aztecs teutonic_order -1
			set_faction_standing poland teutonic_order -1
			set_faction_standing saxons teutonic_order -1
			set_faction_standing mongols teutonic_order -1
			set_faction_standing ireland teutonic_order -1
            set_faction_standing turks teutonic_order -1
        end_if
        if I_EventCounter aztecs_keeps_ring_lua = 1
			set_event_counter aztecs_keeps_ring_lua 0
			historic_event dunland_keeps_ring factions { all, }
			increment_kings_purse aztecs 2000
			set_faction_standing aztecs england -1
			set_faction_standing aztecs france -1
			set_faction_standing aztecs spain -1
			set_faction_standing aztecs venice -1
			set_faction_standing aztecs hre -1
			set_faction_standing aztecs portugal -1
			set_faction_standing aztecs poland -1
			set_faction_standing aztecs saxons -1
			set_faction_standing aztecs mongols -1
			set_faction_standing aztecs ireland -1
			set_faction_standing aztecs turks -1
			set_faction_standing england aztecs -1
			set_faction_standing france aztecs -1
			set_faction_standing spain aztecs -1
			set_faction_standing venice aztecs -1
			set_faction_standing hre aztecs -1
			set_faction_standing portugal aztecs -1
			set_faction_standing poland aztecs -1
			set_faction_standing saxons aztecs -1
			set_faction_standing mongols aztecs -1
			set_faction_standing ireland aztecs -1
			set_faction_standing turks aztecs -1
        end_if
        if I_EventCounter france_keeps_ring_lua = 1
			set_event_counter france_keeps_ring_lua 0
			historic_event isengard_keeps_ring factions { all, }
			increment_kings_purse france 2000
			set_faction_standing france england -1
			set_faction_standing france spain -1
			set_faction_standing france venice -1
			set_faction_standing france hre -1
			set_faction_standing france portugal -1
			set_faction_standing france poland -1
			set_faction_standing france saxons -1
			set_faction_standing france mongols -1
			set_faction_standing france ireland -1
			set_faction_standing france turks -1
			set_faction_standing england france -1
			set_faction_standing spain france -1
			set_faction_standing venice france -1
			set_faction_standing hre france -1
			set_faction_standing portugal france -1
			set_faction_standing poland france -1
			set_faction_standing saxons france -1
			set_faction_standing mongols france -1
			set_faction_standing ireland france -1
			set_faction_standing turks france -1
        end_if
        if I_EventCounter venice_keeps_ring_lua = 1
			set_event_counter venice_keeps_ring_lua 0
			historic_event rhun_keeps_ring factions { all, }
			increment_kings_purse venice 2000
			set_faction_standing venice england -1
			set_faction_standing venice france -1
			set_faction_standing venice spain -1
			set_faction_standing venice hre -1
			set_faction_standing venice portugal -1
			set_faction_standing venice aztecs -1
			set_faction_standing venice poland -1
			set_faction_standing venice saxons -1
			set_faction_standing venice mongols -1
			set_faction_standing venice ireland -1
			set_faction_standing venice turks -1
			set_faction_standing england venice -1
			set_faction_standing france venice -1
			set_faction_standing spain venice -1
			set_faction_standing hre venice -1
			set_faction_standing portugal venice -1
			set_faction_standing aztecs venice -1
			set_faction_standing poland venice -1
			set_faction_standing saxons venice -1
			set_faction_standing mongols venice -1
			set_faction_standing ireland venice -1
			set_faction_standing turks venice -1
        end_if
        if I_EventCounter gundabad_keeps_ring_lua = 1
			set_event_counter gundabad_keeps_ring_lua 0
			historic_event gundabad_keeps_ring factions { all, }
			increment_kings_purse gundabad 2000
			set_faction_standing gundabad england -1
			set_faction_standing gundabad france -1
			set_faction_standing gundabad spain -1
			set_faction_standing gundabad venice -1
			set_faction_standing gundabad hre -1
			set_faction_standing gundabad portugal -1
			set_faction_standing gundabad aztecs -1
			set_faction_standing gundabad poland -1
			set_faction_standing gundabad saxons -1
			set_faction_standing gundabad mongols -1
			set_faction_standing gundabad ireland -1
			set_faction_standing gundabad turks -1
			set_faction_standing england gundabad -1
			set_faction_standing france gundabad -1
			set_faction_standing spain gundabad -1
			set_faction_standing venice gundabad -1
			set_faction_standing hre gundabad -1
			set_faction_standing portugal gundabad -1
			set_faction_standing aztecs gundabad -1
			set_faction_standing poland gundabad -1
			set_faction_standing saxons gundabad -1
			set_faction_standing mongols gundabad -1
			set_faction_standing ireland gundabad -1
			set_faction_standing turks gundabad -1
        end_if
        if I_EventCounter spain_keeps_ring_lua = 1
			set_event_counter spain_keeps_ring_lua 0
			historic_event harad_keeps_ring factions { all, }
			increment_kings_purse spain 2000
			set_faction_standing spain england -1
			set_faction_standing spain france -1
			set_faction_standing spain venice -1
			set_faction_standing spain hre -1
			set_faction_standing spain portugal -1
			set_faction_standing spain aztecs -1
			set_faction_standing spain poland -1
			set_faction_standing spain saxons -1
			set_faction_standing spain mongols -1
			set_faction_standing spain ireland -1
			set_faction_standing spain turks -1
			set_faction_standing england spain -1
			set_faction_standing france spain -1
			set_faction_standing venice spain -1
			set_faction_standing hre spain -1
			set_faction_standing portugal spain -1
			set_faction_standing aztecs spain -1
			set_faction_standing poland spain -1
			set_faction_standing saxons spain -1
			set_faction_standing mongols spain -1
			set_faction_standing ireland spain -1
			set_faction_standing turks spain -1
        end_if
        if I_EventCounter khand_keeps_ring_lua = 1
			set_event_counter khand_keeps_ring_lua 0
			historic_event khand_keeps_ring factions { all, }
			increment_kings_purse khand 2000
			set_faction_standing khand england -1
			set_faction_standing khand france -1
			set_faction_standing khand spain -1
			set_faction_standing khand venice -1
			set_faction_standing khand hre -1
			set_faction_standing khand portugal -1
			set_faction_standing khand aztecs -1
			set_faction_standing khand poland -1
			set_faction_standing khand saxons -1
			set_faction_standing khand mongols -1
			set_faction_standing khand ireland -1
			set_faction_standing khand turks -1
			set_faction_standing england khand -1
			set_faction_standing france khand -1
			set_faction_standing spain khand -1
			set_faction_standing venice khand -1
			set_faction_standing hre khand -1
			set_faction_standing portugal khand -1
			set_faction_standing aztecs khand -1
			set_faction_standing poland khand -1
			set_faction_standing saxons khand -1
			set_faction_standing mongols khand -1
			set_faction_standing ireland khand -1
			set_faction_standing turks khand -1
        end_if
        if I_EventCounter russia_keeps_ring_lua = 1
			set_event_counter russia_keeps_ring_lua 0
			historic_event aa_keeps_ring factions { all, }
			increment_kings_purse russia 2000
			set_faction_standing russia england -1
			set_faction_standing russia france -1
			set_faction_standing russia spain -1
			set_faction_standing russia venice -1
			set_faction_standing russia hre -1
			set_faction_standing russia portugal -1
			set_faction_standing russia aztecs -1
			set_faction_standing russia poland -1
			set_faction_standing russia saxons -1
			set_faction_standing russia mongols -1
			set_faction_standing russia ireland -1
			set_faction_standing russia turks -1
			set_faction_standing england russia -1
			set_faction_standing france russia -1
			set_faction_standing spain russia -1
			set_faction_standing venice russia -1
			set_faction_standing hre russia -1
			set_faction_standing portugal russia -1
			set_faction_standing aztecs russia -1
			set_faction_standing poland russia -1
			set_faction_standing saxons russia -1
			set_faction_standing mongols russia -1
			set_faction_standing ireland russia -1
			set_faction_standing turks russia -1
		end_if
    end_monitor

	set_event_counter sicily_keeps_ring_lua 0
	set_event_counter denmark_keeps_ring_lua 0
	set_event_counter milan_keeps_ring_lua 0
	set_event_counter normans_keeps_ring_lua 0
	set_event_counter scotland_keeps_ring_lua 0
	set_event_counter timurids_keeps_ring_lua 0
	set_event_counter byzantium_keeps_ring_lua 0
	set_event_counter moors_keeps_ring_lua 0
	set_event_counter hungary_keeps_ring_lua 0
	set_event_counter norway_keeps_ring_lua 0
	set_event_counter aztecs_keeps_ring_lua 0
	set_event_counter teutonic_order_keeps_ring_lua 0
	set_event_counter france_keeps_ring_lua 0
	set_event_counter venice_keeps_ring_lua 0
	set_event_counter gundabad_keeps_ring_lua 0
	set_event_counter spain_keeps_ring_lua 0
	set_event_counter khand_keeps_ring_lua 0
	set_event_counter russia_keeps_ring_lua 0

    ;Saruman gets the ring (AI)
	set_event_counter saruman_ring_ai 0
    monitor_event PreFactionTurnStart FactionType france
    and I_EventCounter saruman_ring_ai > 0
        historic_event saruman_ring_event factions { all, }
		set_event_counter saruman_ring_ai 0
		historic_event nazgul_leave_sauron factions { poland, england, france, aztecs, teutonic_order, venice, spain, khand, portugal, hre, turks, mongols, saxons, ireland, }
		add_money france 18000
		increment_kings_purse france 3500
		console_command give_trait saruman_1 Saruman 2
		console_command give_trait saruman_1 SarumanEpithet 2
		set_faction_standing france saxons -1
		set_faction_standing france ireland -1
		set_faction_standing france turks -1
		set_faction_standing france milan -1
		set_faction_standing france sicily -1
		set_faction_standing france england -1
		set_faction_standing france portugal -1
		set_faction_standing france mongols -1
		set_faction_standing france denmark -1
		set_faction_standing france poland -1
		set_faction_standing france papal_states -1
		set_faction_standing mongols france -1
		set_faction_standing saxons france -1
		set_faction_standing turks france -1
		set_faction_standing milan france -1
		set_faction_standing sicily france -1
		set_faction_standing england france -1
		set_faction_standing portugal france -1
		set_faction_standing denmark france -1
		set_faction_standing poland france -1
		set_faction_standing papal_states france -1
		historic_event ring_failed_good_saruman factions { turks, saxons, ireland, mongols, milan, denmark, teutonic_order, sicily, }
    end_monitor

    ;Sauron gets the ring (AI)

    set_event_counter mordor_ring_ai 0
    monitor_event EventCounter EventCounterType mordor_ring_ai
        and I_EventCounter mordor_ring_ai > 0
        log always --------------------------- ai ring mordor script------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
		campaign_wait 1
        historic_event sauron_ai event/sauron.bik
        set_event_counter mordor_ring_ai 0
        add_money england 10000
        increment_kings_purse england 5000
        increment_kings_purse poland 1000
        increment_kings_purse hre 1000
        increment_kings_purse portugal 1000
        increment_kings_purse venice 500
        increment_kings_purse spain 500
        if I_EventCounter blue_wizards_fail = 1
            increment_kings_purse khand 500
        end_if
        historic_event ring_failed_good
        if I_IsFactionAIControlled poland
            give_everything_to_faction poland england false
            if I_CharacterExists ulairon_1
                kill_character ulairon_1
                spawn_army
                    faction england
                    character	Ulairon, named character, age 16, x 338, y 345, portrait Ulairon, battle_model ulairon, hero_ability VENOM, label ulairon_2
                    traits		UlaironMordor 1, CustomBG 1, Hero 1, BadManRace 1, HeroAbilityVenom 1, GoodCommander 2, GoodAttacker 1, NightBattleCapable 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Scout 2, GoodAttacker 2
                    unit		Khamuls Shadow Rangers				exp 3 armour 0 weapon_lvl 0
                end
                console_command give_ancillary ularion_2 orc_paste
            end_if
        end_if
    end_monitor
	
	set_event_counter transfer_dg 0
    monitor_event PreFactionTurnStart FactionIsLocal
	and I_EventCounter transfer_dg = 1

        if I_IsFactionAIControlled poland
            terminate_monitor
        end_if
		
		if I_IsFactionAIControlled england
			console_command control england
			set_event_counter control_england 1
			give_everything_to_faction poland england false
			set_faction_banner
				faction poland
				banner england
			end_set_faction_banner
			if I_CharacterExists ulairon_1
				kill_character ulairon_1
				spawn_army
					faction england
					character	Ulairon, named character, age 16, x 338, y 345, portrait Ulairon, battle_model ulairon, hero_ability VENOM, label ulairon_2
					traits		UlaironMordor 1, CustomBG 1, Hero 1, BadManRace 1, HeroAbilityVenom 1, GoodCommander 2, GoodAttacker 1, NightBattleCapable 1, StrategyChivalryEvil 1, LoyaltyStarter 1, PietyStarter 1, Scout 2, GoodAttacker 2
					unit		Khamuls Shadow Rangers				exp 3 armour 0 weapon_lvl 0
				end
				console_command give_ancillary ularion_2 orc_paste
			end_if
		end_if
		terminate_monitor

    end_monitor

    ; Ring gets destroyed

    monitor_event PreFactionTurnStart FactionIsLocal
    and I_EventCounter ring_destroyed > 0
        log always --------------------------- ring destroyed camera stuff-----------------------
        set_event_counter ring_end 1
        campaign_wait 0.1
        console_command clear_messages
        disable_cursor
        disable_shortcuts true

        hide_ui
        reveal_tile 361, 231
        move_strat_camera 361, 236
        campaign_wait 0.3
        zoom_strat_camera 0.6
        campaign_wait 3.3
        show_ui
        historic_event mount_doom event/ring_destroyed.bik
        campaign_wait 0.1
        hide_ui
        campaign_wait 25
        console_command clear_messages
        campaign_wait 0.1
        show_ui
        campaign_wait 0.1
        hide_ui
        add_events
            event volcano ring_eruption
            date 0
            position 361, 231
        end_add_events
        campaign_wait 5
        console_command clear_messages
        show_ui

        historic_event ring_destroyed event/evil_loose.bik
        campaign_wait 0.1
        hide_ui
        campaign_wait 75
        console_command clear_messages
        historic_event mordor_destroyed
        campaign_wait 1
        disable_movie_view
        campaign_wait 0.1
        show_ui
        enable_cursor
        disable_shortcuts false
        increment_kings_purse hre -2000
        increment_kings_purse portugal -2000
        increment_kings_purse france -4000
        increment_kings_purse spain -2000
        increment_kings_purse venice -2000
        if I_EventCounter blue_wizards_fail = 1
            increment_kings_purse khand -2000
        end_if
        terminate_monitor
    end_monitor

    monitor_event EventCounter EventCounterType mordor_destroyed
        log always --------------------------- mordor is destroyed ---------------------------
		if I_EventCounter mordor_destroyed = 1
			destroy_units england Sauron
			console_command kill_faction england
			console_command kill_faction poland
			;console_command kill_faction papal_states
            terminate_monitor
		end_if
	end_monitor

    ;Spy networks telling player if conditions are met which faction has the ring

    ;Player has the one ring consequences

    set_event_counter ring_deliver_good 0

    monitor_event FactionTurnStart FactionIsLocal
	and I_EventCounter ring_deliver_good = 1
        log always --------------------------- player has the ring good---------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
        if I_EventCounter imladris_safe_check = 1
            point_at_settlement Imladris
        end_if
        if I_EventCounter lorien_safe_check = 1
            point_at_settlement Celebrant
		end_if
        if I_EventCounter mithlond_safe_check = 1
            point_at_settlement Mithlond
        end_if
    end_monitor
	
	set_event_counter council_start_lua 0
    monitor_event FactionTurnStart FactionIsLocal
    and I_EventCounter council_start_lua = 1
        log always --------------------------- ring to imladris---------------------------
        ui_flash_stop
        historic_event council_start
        set_event_counter QuestToDestroyRing 1
		set_event_counter council_start_lua 0
        disable_cursor
        disable_shortcuts true
        select_ui_element faction_button
        simulate_mouse_click lclick_up
        hide_ui
        snap_strat_camera 361, 233 ; Mount Doom's coordinates.
        point_at_strat_position 361, 233
        campaign_wait 0.1
        show_ui
        enable_cursor
        disable_shortcuts false
    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
        log always --------------------------- evil player has ring monitor---------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
        if I_EventCounter deliver_ring_mordor = 1
            point_at_settlement Gorgoroth
        end_if
        if I_EventCounter deliver_evil_player = 1
            point_at_settlement Udun
        end_if
    end_monitor
	
	set_event_counter saruman_manycolours_spawn 0

    set_event_counter ring_deliver_saruman 0
    set_event_counter ring_deliver_isengard 0

    monitor_event FactionTurnStart FactionIsLocal
        log always --------------------------- saruman player has ring monitor---------------------------
        if I_EventCounter ring_end == 1
            terminate_monitor
        end_if
        if I_EventCounter ring_deliver_saruman = 1
            point_at_settlement Nan_Curunir
        end_if
        if I_EventCounter ring_deliver_isengard = 1
            point_at_settlement Nan_Curunir
        end_if
    end_monitor
	
	monitor_event EventCounter EventCounterType saruman_manycolours_spawn
	and I_EventCounter saruman_manycolours_spawn > 0

		campaign_wait 1
		add_money france 18000
		increment_kings_purse france 3500
		console_command give_trait saruman_1 Saruman 2
		console_command give_trait saruman_1 SarumanEpithet 2
		set_faction_standing france saxons -1
		set_faction_standing france ireland -1
		set_faction_standing france turks -1
		set_faction_standing france milan -1
		set_faction_standing france sicily -1
		set_faction_standing france england -1
		set_faction_standing france portugal -1
		set_faction_standing france denmark -1
		set_faction_standing france mongols -1
		set_faction_standing france poland -1
		set_faction_standing france papal_states -1
		set_faction_standing mongols france -1
		set_faction_standing saxons france -1
		set_faction_standing turks france -1
		set_faction_standing milan france -1
		set_faction_standing sicily france -1
		set_faction_standing england france -1
		set_faction_standing portugal france -1
		set_faction_standing denmark france -1
		set_faction_standing poland france -1
		set_faction_standing papal_states france -1
		set_event_counter saruman_manycolours_spawn 0
		
	end_monitor
	
    ;################## Faction Info Button ########################################################

    monitor_event ButtonPressed ButtonPressed mission_button
        if I_EventCounter one_ring_gondor = 1
        and I_EventCounter spy_network_gondor = 1
            historic_event ring_found_gondor
        end_if
        if I_EventCounter one_ring_da = 1
        and I_EventCounter spy_network_da = 1
            historic_event ring_found_da
        end_if
        if I_EventCounter one_ring_rohan = 1
        and I_EventCounter spy_network_rohan = 1
            historic_event ring_found_rohan
        end_if
        if I_EventCounter one_ring_bree = 1
        and I_EventCounter spy_network_bree = 1
            historic_event ring_found_bree
        end_if
        if I_EventCounter one_ring_nd = 1
        and I_EventCounter spy_network_nd = 1
            historic_event ring_found_nd
        end_if
        if I_EventCounter one_ring_dale = 1
        and I_EventCounter spy_network_dale = 1
            historic_event ring_found_dale
        end_if
        if I_EventCounter one_ring_anduin = 1
        and I_EventCounter spy_network_anduin = 1
            historic_event ring_found_anduin
        end_if
        if I_EventCounter one_ring_dorwinion = 1
        and I_EventCounter spy_network_dorwinion = 1
            historic_event ring_found_dorwinion
        end_if
        if I_EventCounter one_ring_erebor = 1
        and I_EventCounter spy_network_erebor = 1
            historic_event ring_found_erebor
        end_if
        if I_EventCounter one_ring_el = 1
        and I_EventCounter spy_network_el = 1
            historic_event ring_found_el
        end_if
        if I_EventCounter one_ring_kd = 1
        and I_EventCounter spy_network_kd = 1
            historic_event ring_found_kd
        end_if
        if I_EventCounter one_ring_he = 1
        and I_EventCounter spy_network_he = 1
            historic_event ring_found_he
        end_if
        if I_EventCounter one_ring_lorien = 1
        and I_EventCounter spy_network_lorien = 1
            historic_event ring_found_lorien
        end_if
        if I_EventCounter one_ring_wr = 1
        and I_EventCounter spy_network_wr = 1
            historic_event ring_found_wr
        end_if
        if I_EventCounter one_ring_enedwaith = 1
        and I_EventCounter spy_network_enedwaith = 1
            historic_event ring_found_enedwaith
        end_if
        if I_EventCounter one_ring_dunland = 1
        and I_EventCounter spy_network_dunland = 1
            historic_event ring_found_dunland
        end_if
        if I_EventCounter one_ring_isengard = 1
        and I_EventCounter spy_network_isengard = 1
            historic_event ring_found_isengard
        end_if
        if I_EventCounter one_ring_mordor = 1
        and I_EventCounter spy_network_mordor = 1
            historic_event ring_found_mordor
        end_if
        if I_EventCounter one_ring_dg = 1
        and I_EventCounter spy_network_dg = 1
            historic_event ring_found_dg
        end_if
        if I_EventCounter one_ring_moria = 1
        and I_EventCounter spy_network_moria = 1
            historic_event ring_found_moria
        end_if
        if I_EventCounter one_ring_angmar = 1
        and I_EventCounter spy_network_angmar = 1
            historic_event ring_found_angmar
        end_if
        if I_EventCounter one_ring_rhun = 1
        and I_EventCounter spy_network_rhun = 1
            historic_event ring_found_rhun
        end_if
        if I_EventCounter one_ring_gundabad = 1
        and I_EventCounter spy_network_gundabad = 1
            historic_event ring_found_gundabad
        end_if
        if I_EventCounter one_ring_harad = 1
        and I_EventCounter spy_network_harad = 1
            historic_event ring_found_harad
        end_if
        if I_EventCounter one_ring_khand = 1
        and I_EventCounter spy_network_khand = 1
            historic_event ring_found_khand
        end_if
        if I_EventCounter one_ring_aa = 1
        and I_EventCounter spy_network_aa = 1
            historic_event ring_found_aa
        end_if
        if I_CompareCounter faction_ID_sicily == 1
            historic_event faction_info_gondor
        end_if
        if I_CompareCounter faction_ID_denmark == 1
            historic_event faction_info_da
        end_if
        if I_CompareCounter faction_ID_milan == 1
            historic_event faction_info_rohan
        end_if
        if I_CompareCounter faction_ID_normans == 1
            historic_event faction_info_bree
        end_if
        if I_CompareCounter faction_ID_turks == 1
            historic_event faction_info_nd
            if I_EventCounter aragorn_rpg_start > 0
                historic_event aragorn_rpg_start
            end_if
            if I_EventCounter aragorn_rpg_letter > 0
                historic_event aragorn_rpg_letter
            end_if
            if I_EventCounter aragorn_rpg_gollum > 0
                historic_event aragorn_rpg_gollum
            end_if
            if I_EventCounter aragorn_rpg_back > 0
                historic_event aragorn_rpg_back
            end_if
            if I_EventCounter aragorn_rpg_anduril > 0
                historic_event aragorn_rpg_anduril
            end_if
            if I_EventCounter aragorn_army_dead_initial > 0
                historic_event aragorn_army_dead_initial
            end_if
            if I_EventCounter army_dead_last > 0
                historic_event aragorn_army_dead_middle
            end_if
        end_if
        if I_CompareCounter faction_ID_scotland == 1
            historic_event faction_info_dale
        end_if
        if I_CompareCounter faction_ID_timurids == 1
            historic_event faction_info_anduin
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
            historic_event faction_info_dorwinion
        end_if
        if I_CompareCounter faction_ID_moors == 1
            historic_event faction_info_erebor
        end_if
        if I_CompareCounter faction_ID_hungary == 1
            historic_event faction_info_el
        end_if
        if I_CompareCounter faction_ID_norway == 1
            historic_event faction_info_kd
        end_if
        if I_CompareCounter faction_ID_saxons == 1
            historic_event faction_info_he
        end_if
        if I_CompareCounter faction_ID_ireland == 1
            historic_event faction_info_lorien
            if I_EventCounter elven_union = 0
                if I_CharacterExists spiders_1
                    point_at_character spiders_1
                end_if
                if I_CharacterExists spiders_2
                    point_at_character spiders_2
                end_if
                if I_CharacterExists spiders_3
                    point_at_character spiders_3
                end_if
                if I_CharacterExists spiders_4
                    point_at_character spiders_4
                end_if
                if I_CharacterExists spiders_5
                    point_at_character spiders_5
                end_if
                if I_CharacterExists spiders_6
                    point_at_character spiders_6
                end_if
                if I_CharacterExists spiders_7
                    point_at_character spiders_7
                end_if
                if I_CharacterExists spiders_8
                    point_at_character spiders_8
                end_if
            end_if
        end_if
        if I_CompareCounter faction_ID_mongols == 1
            historic_event faction_info_wr
            if I_EventCounter elven_union = 0
                if I_CharacterExists spiders_1
                    point_at_character spiders_1
                end_if
                if I_CharacterExists spiders_2
                    point_at_character spiders_2
                end_if
                if I_CharacterExists spiders_3
                    point_at_character spiders_3
                end_if
                if I_CharacterExists spiders_4
                    point_at_character spiders_4
                end_if
                if I_CharacterExists spiders_5
                    point_at_character spiders_5
                end_if
                if I_CharacterExists spiders_6
                    point_at_character spiders_6
                end_if
                if I_CharacterExists spiders_7
                    point_at_character spiders_7
                end_if
                if I_CharacterExists spiders_8
                    point_at_character spiders_8
                end_if
            end_if
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
            historic_event faction_info_enedwaith
        end_if
        if I_CompareCounter faction_ID_aztecs == 1
            historic_event faction_info_dunland
        end_if
        if I_CompareCounter faction_ID_france == 1
            historic_event faction_info_isengard
        end_if
        if I_CompareCounter faction_ID_england == 1
            historic_event faction_info_mordor
        end_if
        if I_CompareCounter faction_ID_poland == 1
            historic_event faction_info_dg
            if I_CharacterExists spiders_1
                point_at_character spiders_1
            end_if
            if I_CharacterExists spiders_2
                point_at_character spiders_2
            end_if
            if I_CharacterExists spiders_3
                point_at_character spiders_3
            end_if
            if I_CharacterExists spiders_4
                point_at_character spiders_4
            end_if
            if I_CharacterExists spiders_5
                point_at_character spiders_5
            end_if
            if I_CharacterExists spiders_6
                point_at_character spiders_6
            end_if
            if I_CharacterExists spiders_7
                point_at_character spiders_7
            end_if
            if I_CharacterExists spiders_8
                point_at_character spiders_8
            end_if
        end_if
        if I_CompareCounter faction_ID_hre == 1
            historic_event faction_info_moria
        end_if
        if I_CompareCounter faction_ID_portugal == 1
            historic_event faction_info_angmar
        end_if
        if I_CompareCounter faction_ID_venice == 1
            historic_event faction_info_rhun
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
            historic_event faction_info_gundabad
        end_if
        if I_CompareCounter faction_ID_spain == 1
            historic_event faction_info_harad
        end_if
        if I_CompareCounter faction_ID_khand == 1
            historic_event faction_info_khand
        end_if
        if I_CompareCounter faction_ID_russia == 1
            historic_event faction_info_aa
        end_if
    end_monitor

    declare_counter palantiri

    monitor_event SettlementTurnStart SettlementBuildingExists = elostirion_palantir
    and SettlementIsLocal

        inc_counter palantiri 1

    end_monitor

    monitor_event SettlementTurnStart SettlementBuildingExists = orthanc_palantir
    and SettlementIsLocal

        inc_counter palantiri 1

    end_monitor

    monitor_event SettlementTurnStart SettlementBuildingExists = anor_palantir
    and SettlementIsLocal

        inc_counter palantiri 1

    end_monitor

    monitor_event SettlementTurnStart SettlementBuildingExists = ithil_palantir
    and SettlementIsLocal

        inc_counter palantiri 1

    end_monitor

    monitor_event SettlementTurnStart SettlementBuildingExists = mirror_of_galadriel
    and SettlementIsLocal
    and FactionCultureType greek

        inc_counter palantiri 1

    end_monitor

    monitor_event FactionTurnEnd I_HotseatEnabled
    and FactionIsLocal

        if I_CompareCounter palantiri > 0
            campaign_wait 3
            console_command toggle_fow
            campaign_wait 5
            if I_CompareCounter palantiri > 1
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 2
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 3
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 4
                campaign_wait 5
            end_if
            console_command toggle_fow
        end_if
        set_counter palantiri 0

    end_monitor

    monitor_event FactionTurnStart FactionIsLocal
    and not I_HotseatEnabled

        if I_CompareCounter palantiri > 0
            campaign_wait 3
            console_command toggle_fow
            campaign_wait 5
            if I_CompareCounter palantiri > 1
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 2
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 3
                campaign_wait 5
            end_if
            if I_CompareCounter palantiri > 4
                campaign_wait 5
            end_if
            console_command toggle_fow
        end_if
        set_counter palantiri 0

    end_monitor

    ;########################### re-emerging factions ###########################################

    monitor_event PreFactionTurnStart FactionIsLocal

        if I_NumberOfSettlements milan = 0
        and I_SettlementOwner Kings_Land = turks
        and not I_IsFactionAIControlled turks
        and I_CompareCounter faction_ID_turks == 1
            historic_event rohan_res_choice true factions { turks, }
        end_if

        if I_NumberOfSettlements milan = 0
        and I_SettlementOwner Kings_Land = saxons
        and not I_IsFactionAIControlled saxons
        and I_CompareCounter faction_ID_saxons == 1
            historic_event rohan_res_choice true factions { saxons, }
        end_if

        if I_NumberOfSettlements milan = 0
        and I_SettlementOwner Kings_Land = sicily
        and not I_IsFactionAIControlled sicily
        and I_CompareCounter faction_ID_sicily == 1
            historic_event rohan_res_choice true factions { sicily, }
        end_if

        if I_EventCounter rohan_res_choice_declined = 1
            terminate_monitor
        end_if

    end_monitor

    monitor_event UngarrisonedSettlement IsRegionOneOf Kings_Land_Province

        if not I_IsFactionAIControlled milan
            terminate_monitor
        end_if

        if I_EventCounter rohan_res_choice_accepted == 1
        and not I_SettlementUnderSiege Kings_Land
            campaign_wait 5
            spawn_army
                faction milan
                character	random_name, named character, age 28, x 291, y 293, family, direction W, label rohan_new
                traits		GoodManRace 1, Rohirrim 1, AIBoost 1, Energetic 1, GoodCommander 2, GoodDefender 1, SiegeDefender 1, Loyal 2, LoyaltyStarter 1, PietyStarter 1, TacticalSkill 1
                unit		Rohan Bodyguard				exp 5 armour 1 weapon_lvl 1
                unit		Meduseld Doorwards		exp 5 armour 0 weapon_lvl 1
                unit		Eored Lancers			exp 5 armour 0 weapon_lvl 0
                unit		Shieldmaidens of Rohan		exp 4 armour 1 weapon_lvl 1
                unit		Riddermark Cavalry			exp 4 armour 1 weapon_lvl 0
                unit		Riders of the Fold	exp 3 armour 0 weapon_lvl 0
                unit		Riders of the Fold	exp 3 armour 0 weapon_lvl 0
                unit		Eored Lancers			exp 3 armour 0 weapon_lvl 0
                unit		Eored Lancers			exp 3 armour 0 weapon_lvl 0
                unit		Eored Swordsmen		exp 3 armour 1 weapon_lvl 1
                unit		Eored Swordsmen		exp 3 armour 1 weapon_lvl 1
                unit		Rohirrim				exp 2 armour 0 weapon_lvl 0
                unit		Rohirrim				exp 2 armour 0 weapon_lvl 0
                unit		Eorling Axemen			exp 2 armour 1 weapon_lvl 1
                unit		Eorling Axemen			exp 2 armour 1 weapon_lvl 1
                unit		Helmingas		exp 3 armour 1 weapon_lvl 1
                unit		Peasant Scouts				exp 2 armour 2 weapon_lvl 1
                unit		Peasant Scouts				exp 2 armour 2 weapon_lvl 1
                unit		Peasant Militia		exp 2 armour 2 weapon_lvl 1
                unit		Peasant Militia		exp 2 armour 2 weapon_lvl 1
            end
            campaign_wait 0.2
            siege_settlement rohan_new, Kings_Land, attack
            set_event_counter rohan_res_choice_accepted 0
            console_command diplomatic_stance turks milan allied
            historic_event rohan_res
        end_if

    end_monitor

 ;########################### Settlement name change ###########################################

    monitor_event GeneralCaptureSettlement SettlementName Deep_Mirkwood
        and FactionReligion elven

        change_settlement_name Deep_Mirkwood Amon-Lanc
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Amon-Lanc
        and FactionReligion catholic

        change_settlement_name Amon-Lanc Deep-Mirkwood
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Deep-Mirkwood
        and FactionReligion elven

        change_settlement_name Deep-Mirkwood Amon-Lanc
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Morgul_Vale
        and FactionReligion islam

        change_settlement_name Morgul_Vale Minas-Ithil
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Morgul-Vale
        and FactionReligion islam

        change_settlement_name Morgul-Vale Minas-Ithil
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Minas-Ithil
        and FactionReligion catholic

        change_settlement_name Minas-Ithil Morgul-Vale
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName High_Pass
        and not FactionReligion catholic

        change_settlement_name High_Pass High-Pass
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName High-Pass
        and FactionReligion catholic

        change_settlement_name High-Pass Goblin-town
    end_monitor

    monitor_event GeneralCaptureSettlement SettlementName Goblin-town
        and not FactionReligion catholic

        change_settlement_name Goblin-town High-Pass
    end_monitor


;## Hotseat anti cheat rule ##

; disables the console in hotseat campaigns
; Credits to Serious Potato for this console section!!

;## Hotseat enable debug console ##

; enables the console in hotseat for the current turn only
; intended for host/admin fixing possible issues
; all other players will get notified of this, no sneaky stabbin' round 'ere!

; hotkey default: Shift + F8
    monitor_event ShortcutTriggered ShortcutTriggered strat_ui ago_custom_1
        if not I_HotseatEnabled
            terminate_monitor
        end_if
        log always --custom key pressed--
        if I_CompareCounter console_active < 1
            disable_shortcuts object_manager show_console false
            set_counter console_active 1
        end_if
    end_monitor

   ;monitor_event ShortcutTriggered ShortcutTriggered strat_ui ago_custom_1
   ;    if not I_HotseatEnabled
   ;        terminate_monitor
   ;    end_if
   ;    log always --custom key pressed--
   ;    console_command control sicily
   ;    console_command control denmark
   ;    console_command control milan
   ;    console_command control normans
   ;    console_command control scotland
   ;    console_command control timurids
   ;    console_command control byzantium
   ;    console_command control moors
   ;    console_command control hungary
   ;    console_command control norway
   ;    console_command control saxons
   ;    console_command control ireland
   ;    console_command control mongols
   ;    console_command control teutonic_order
   ;    console_command control aztecs
   ;    console_command control france
   ;    console_command control england
   ;    console_command control poland
   ;    console_command control hre
   ;    console_command control portugal
   ;    console_command control venice
   ;    console_command control gundabad
   ;    console_command control spain
   ;    console_command control khand
   ;    console_command control russia
   ;end_monitor

; reset the event on the turn of the faction that triggered it

    monitor_event FactionTurnStart
        if not I_HotseatEnabled
            terminate_monitor
        end_if

        if I_CompareCounter faction_ID_sicily == 1
        and I_EventCounter ENABLED_CONSOLE_SICILY > 0
            set_event_counter ENABLED_CONSOLE_SICILY 0
        end_if
        if I_CompareCounter faction_ID_denmark == 1
        and I_EventCounter ENABLED_CONSOLE_DENMARK > 0
            set_event_counter ENABLED_CONSOLE_DENMARK 0
        end_if
        if I_CompareCounter faction_ID_milan == 1
        and I_EventCounter ENABLED_CONSOLE_MILAN > 0
            set_event_counter ENABLED_CONSOLE_MILAN 0
        end_if
        if I_CompareCounter faction_ID_normans == 1
        and I_EventCounter ENABLED_CONSOLE_NORMANS > 0
            set_event_counter ENABLED_CONSOLE_NORMANS 0
        end_if
        if I_CompareCounter faction_ID_turks == 1
        and I_EventCounter ENABLED_CONSOLE_TURKS > 0
            set_event_counter ENABLED_CONSOLE_TURKS 0
        end_if
        if I_CompareCounter faction_ID_scotland == 1
        and I_EventCounter ENABLED_CONSOLE_SCOTLAND > 0
            set_event_counter ENABLED_CONSOLE_SCOTLAND 0
        end_if
        if I_CompareCounter faction_ID_timurids == 1
        and I_EventCounter ENABLED_CONSOLE_TIMURIDS > 0
            set_event_counter ENABLED_CONSOLE_TIMURIDS 0
        end_if
        if I_CompareCounter faction_ID_byzantium == 1
        and I_EventCounter ENABLED_CONSOLE_BYZANTIUM > 0
            set_event_counter ENABLED_CONSOLE_BYZANTIUM 0
        end_if
        if I_CompareCounter faction_ID_moors == 1
        and I_EventCounter ENABLED_CONSOLE_MOORS > 0
            set_event_counter ENABLED_CONSOLE_MOORS 0
        end_if
        if I_CompareCounter faction_ID_hungary == 1
        and I_EventCounter ENABLED_CONSOLE_HUNGARY > 0
            set_event_counter ENABLED_CONSOLE_HUNGARY 0
        end_if
        if I_CompareCounter faction_ID_norway == 1
        and I_EventCounter ENABLED_CONSOLE_NORWAY > 0
            set_event_counter ENABLED_CONSOLE_NORWAY 0
        end_if
        if I_CompareCounter faction_ID_saxons == 1
        and I_EventCounter ENABLED_CONSOLE_SAXONS > 0
            set_event_counter ENABLED_CONSOLE_SAXONS 0
        end_if
        if I_CompareCounter faction_ID_ireland == 1
        and I_EventCounter ENABLED_CONSOLE_IRELAND > 0
            set_event_counter ENABLED_CONSOLE_IRELAND 0
        end_if
        if I_CompareCounter faction_ID_mongols == 1
        and I_EventCounter ENABLED_CONSOLE_MONGOLS > 0
            set_event_counter ENABLED_CONSOLE_MONGOLS 0
        end_if
        if I_CompareCounter faction_ID_teutonic_order == 1
        and I_EventCounter ENABLED_CONSOLE_TEUTONIC_ORDER > 0
            set_event_counter ENABLED_CONSOLE_TEUTONIC_ORDER 0
        end_if
        if I_CompareCounter faction_ID_aztecs == 1
        and I_EventCounter ENABLED_CONSOLE_AZTECS > 0
            set_event_counter ENABLED_CONSOLE_AZTECS 0
        end_if
        if I_CompareCounter faction_ID_france == 1
        and I_EventCounter ENABLED_CONSOLE_FRANCE > 0
            set_event_counter ENABLED_CONSOLE_FRANCE 0
        end_if
        if I_CompareCounter faction_ID_england == 1
        and I_EventCounter ENABLED_CONSOLE_ENGLAND > 0
            set_event_counter ENABLED_CONSOLE_ENGLAND 0
        end_if
        if I_CompareCounter faction_ID_poland == 1
        and I_EventCounter ENABLED_CONSOLE_POLAND > 0
            set_event_counter ENABLED_CONSOLE_POLAND 0
        end_if
        if I_CompareCounter faction_ID_hre == 1
        and I_EventCounter ENABLED_CONSOLE_HRE > 0
            set_event_counter ENABLED_CONSOLE_HRE 0
        end_if
        if I_CompareCounter faction_ID_portugal == 1
        and I_EventCounter ENABLED_CONSOLE_PORTUGAL > 0
            set_event_counter ENABLED_CONSOLE_PORTUGAL 0
        end_if
        if I_CompareCounter faction_ID_venice == 1
        and I_EventCounter ENABLED_CONSOLE_VENICE > 0
            set_event_counter ENABLED_CONSOLE_VENICE 0
        end_if
        if I_CompareCounter faction_ID_gundabad == 1
        and I_EventCounter ENABLED_CONSOLE_GUNDABAD > 0
            set_event_counter ENABLED_CONSOLE_GUNDABAD 0
        end_if
        if I_CompareCounter faction_ID_spain == 1
        and I_EventCounter ENABLED_CONSOLE_SPAIN > 0
            set_event_counter ENABLED_CONSOLE_SPAIN 0
        end_if
        if I_CompareCounter faction_ID_khand == 1
        and I_EventCounter ENABLED_CONSOLE_KHAND > 0
            set_event_counter ENABLED_CONSOLE_KHAND 0
        end_if
        if I_CompareCounter faction_ID_russia == 1
        and I_EventCounter ENABLED_CONSOLE_RUSSIA > 0
            set_event_counter ENABLED_CONSOLE_RUSSIA 0
        end_if
    end_monitor

    monitor_event ShortcutTriggered ShortcutTriggered object_manager show_console
        if not I_HotseatEnabled
            terminate_monitor
        end_if
        if I_EventCounter disable_console = 1
            if I_LocalFaction sicily
            and I_EventCounter ENABLED_CONSOLE_SICILY < 1
                historic_event ENABLED_CONSOLE_SICILY
            end_if
            if I_LocalFaction denmark
            and I_EventCounter ENABLED_CONSOLE_DENMARK < 1
                historic_event ENABLED_CONSOLE_DENMARK
            end_if
            if I_LocalFaction milan
            and I_EventCounter ENABLED_CONSOLE_MILAN < 1
                historic_event ENABLED_CONSOLE_MILAN
            end_if
            if I_LocalFaction normans
            and I_EventCounter ENABLED_CONSOLE_NORMANS < 1
                historic_event ENABLED_CONSOLE_NORMANS
            end_if
            if I_LocalFaction turks
            and I_EventCounter ENABLED_CONSOLE_TURKS < 1
                historic_event ENABLED_CONSOLE_TURKS
            end_if
            if I_LocalFaction scotland
            and I_EventCounter ENABLED_CONSOLE_SCOTLAND < 1
                historic_event ENABLED_CONSOLE_SCOTLAND
            end_if
            if I_LocalFaction timurids
            and I_EventCounter ENABLED_CONSOLE_TIMURIDS < 1
                historic_event ENABLED_CONSOLE_TIMURIDS
            end_if
            if I_LocalFaction byzantium
            and I_EventCounter ENABLED_CONSOLE_BYZANTIUM < 1
                historic_event ENABLED_CONSOLE_BYZANTIUM
            end_if
            if I_LocalFaction moors
            and I_EventCounter ENABLED_CONSOLE_MOORS < 1
                historic_event ENABLED_CONSOLE_MOORS
            end_if
            if I_LocalFaction hungary
            and I_EventCounter ENABLED_CONSOLE_HUNGARY < 1
                historic_event ENABLED_CONSOLE_HUNGARY
            end_if
            if I_LocalFaction norway
            and I_EventCounter ENABLED_CONSOLE_NORWAY < 1
                historic_event ENABLED_CONSOLE_NORWAY
            end_if
            if I_LocalFaction saxons
            and I_EventCounter ENABLED_CONSOLE_SAXONS < 1
                historic_event ENABLED_CONSOLE_SAXONS
            end_if
            if I_LocalFaction ireland
            and I_EventCounter ENABLED_CONSOLE_IRELAND < 1
                historic_event ENABLED_CONSOLE_IRELAND
            end_if
            if I_LocalFaction mongols
            and I_EventCounter ENABLED_CONSOLE_MONGOLS < 1
                historic_event ENABLED_CONSOLE_MONGOLS
            end_if
            if I_LocalFaction teutonic_order
            and I_EventCounter ENABLED_CONSOLE_TEUTONIC_ORDER < 1
                historic_event ENABLED_CONSOLE_TEUTONIC_ORDER
            end_if
            if I_LocalFaction aztecs
            and I_EventCounter ENABLED_CONSOLE_AZTECS < 1
                historic_event ENABLED_CONSOLE_AZTECS
            end_if
            if I_LocalFaction france
            and I_EventCounter ENABLED_CONSOLE_FRANCE < 1
                historic_event ENABLED_CONSOLE_FRANCE
            end_if
            if I_LocalFaction england
            and I_EventCounter ENABLED_CONSOLE_ENGLAND < 1
                historic_event ENABLED_CONSOLE_ENGLAND
            end_if
            if I_LocalFaction poland
            and I_EventCounter ENABLED_CONSOLE_POLAND < 1
                historic_event ENABLED_CONSOLE_POLAND
            end_if
            if I_LocalFaction hre
            and I_EventCounter ENABLED_CONSOLE_HRE < 1
                historic_event ENABLED_CONSOLE_HRE
            end_if
            if I_LocalFaction portugal
            and I_EventCounter ENABLED_CONSOLE_PORTUGAL < 1
                historic_event ENABLED_CONSOLE_PORTUGAL
            end_if
            if I_LocalFaction venice
            and I_EventCounter ENABLED_CONSOLE_VENICE < 1
                historic_event ENABLED_CONSOLE_VENICE
            end_if
            if I_LocalFaction gundabad
            and I_EventCounter ENABLED_CONSOLE_GUNDABAD < 1
                historic_event ENABLED_CONSOLE_GUNDABAD
            end_if
            if I_LocalFaction spain
            and I_EventCounter ENABLED_CONSOLE_SPAIN < 1
                historic_event ENABLED_CONSOLE_SPAIN
            end_if
            if I_LocalFaction khand
            and I_EventCounter ENABLED_CONSOLE_KHAND < 1
                historic_event ENABLED_CONSOLE_KHAND
            end_if
            if I_LocalFaction russia
            and I_EventCounter ENABLED_CONSOLE_RUSSIA < 1
                historic_event ENABLED_CONSOLE_RUSSIA
            end_if
        end_if
    end_monitor

    ; preserves the notification after game reloads

    monitor_event GameReloaded
        if not I_HotseatEnabled
            terminate_monitor
        end_if

        campaign_wait 0.1

        if I_EventCounter ENABLED_CONSOLE_SICILY > 0
            historic_event ENABLED_CONSOLE_SICILY
        end_if
        if I_EventCounter ENABLED_CONSOLE_DENMARK > 0
            historic_event ENABLED_CONSOLE_DENMARK
        end_if
        if I_EventCounter ENABLED_CONSOLE_MILAN > 0
            historic_event ENABLED_CONSOLE_MILAN
        end_if
        if I_EventCounter ENABLED_CONSOLE_NORMANS > 0
            historic_event ENABLED_CONSOLE_NORMANS
        end_if
        if I_EventCounter ENABLED_CONSOLE_TURKS > 0
            historic_event ENABLED_CONSOLE_TURKS
        end_if
        if I_EventCounter ENABLED_CONSOLE_SCOTLAND > 0
            historic_event ENABLED_CONSOLE_SCOTLAND
        end_if
        if I_EventCounter ENABLED_CONSOLE_TIMURIDS > 0
            historic_event ENABLED_CONSOLE_TIMURIDS
        end_if
        if I_EventCounter ENABLED_CONSOLE_BYZANTIUM > 0
            historic_event ENABLED_CONSOLE_BYZANTIUM
        end_if
        if I_EventCounter ENABLED_CONSOLE_MOORS > 0
            historic_event ENABLED_CONSOLE_MOORS
        end_if
        if I_EventCounter ENABLED_CONSOLE_HUNGARY > 0
            historic_event ENABLED_CONSOLE_HUNGARY
        end_if
        if I_EventCounter ENABLED_CONSOLE_NORWAY > 0
            historic_event ENABLED_CONSOLE_NORWAY
        end_if
        if I_EventCounter ENABLED_CONSOLE_SAXONS > 0
            historic_event ENABLED_CONSOLE_SAXONS
        end_if
        if I_EventCounter ENABLED_CONSOLE_IRELAND > 0
            historic_event ENABLED_CONSOLE_IRELAND
        end_if
        if I_EventCounter ENABLED_CONSOLE_MONGOLS > 0
            historic_event ENABLED_CONSOLE_MONGOLS
        end_if
        if I_EventCounter ENABLED_CONSOLE_TEUTONIC_ORDER > 0
            historic_event ENABLED_CONSOLE_TEUTONIC_ORDER
        end_if
        if I_EventCounter ENABLED_CONSOLE_AZTECS > 0
            historic_event ENABLED_CONSOLE_AZTECS
        end_if
        if I_EventCounter ENABLED_CONSOLE_FRANCE > 0
            historic_event ENABLED_CONSOLE_FRANCE
        end_if
        if I_EventCounter ENABLED_CONSOLE_ENGLAND > 0
            historic_event ENABLED_CONSOLE_ENGLAND
        end_if
        if I_EventCounter ENABLED_CONSOLE_POLAND > 0
            historic_event ENABLED_CONSOLE_POLAND
        end_if
        if I_EventCounter ENABLED_CONSOLE_VENICE > 0
            historic_event ENABLED_CONSOLE_VENICE
        end_if
        if I_EventCounter ENABLED_CONSOLE_GUNDABAD > 0
            historic_event ENABLED_CONSOLE_GUNDABAD
        end_if
        if I_EventCounter ENABLED_CONSOLE_SPAIN > 0
            historic_event ENABLED_CONSOLE_SPAIN
        end_if
        if I_EventCounter ENABLED_CONSOLE_KHAND > 0
            historic_event ENABLED_CONSOLE_KHAND
        end_if
        if I_EventCounter ENABLED_CONSOLE_RUSSIA > 0
            historic_event ENABLED_CONSOLE_RUSSIA
        end_if
    end_monitor

    monitor_event ShortcutTriggered ShortcutTriggered object_manager screen_grab
        if I_CompareCounter admin_faction == 1
            console_command toggle_fow
            campaign_wait 0.1
            call_object_shortcut - screen_grab
            campaign_wait 0.1
            console_command toggle_fow
        end_if
    end_monitor

;========================================spoils of war==============================================================

    declare_counter very_small_army
    declare_counter small_army
    declare_counter medium_army
    declare_counter large_army
    declare_counter very_small_tross
    declare_counter small_tross
    declare_counter medium_tross
    declare_counter large_tross
    declare_counter battle_no
    set_counter very_small_army 0
    set_counter small_army 0
    set_counter medium_army 0
    set_counter large_army 0
    set_counter very_small_tross 0
    set_counter small_tross 0
    set_counter medium_tross 0
    set_counter large_tross 0
    set_counter battle_no 0

    monitor_event PostBattle FactionIsLocal
        and WonBattle
        and WasAttacker
        and FactionType russia
        and I_ConflictType Naval
        log always --------------------------- +300 naval spoils------------------------
        console_command add_money 300
        historic_event spoils_of_war_naval
    end_monitor

    monitor_event PostBattle FactionIsLocal
        and WonBattle
        and WasAttacker
        and FactionType teutonic_order
        and I_ConflictType Naval
        log always --------------------------- +300 naval spoils------------------------
        console_command add_money 300
        historic_event spoils_of_war_naval
    end_monitor

    monitor_event BattleConflictPhaseCommenced not IsFactionAIControlled

        set_counter very_small_army 0
        set_counter small_army 0
        set_counter medium_army 0
        set_counter large_army 0
        set_counter very_small_tross 0
        set_counter small_tross 0
        set_counter medium_tross 0
        set_counter large_tross 0
        set_counter battle_no 0
        log always --------------------------- checking army sizes for spoils------------------------

        if I_BattleEnemyArmyNumberOfUnits > 1
            and I_BattleEnemyArmyNumberOfUnits <= 5
            set_counter very_small_army 1
        end_if

        if I_BattleEnemyArmyNumberOfUnits > 5
            and I_BattleEnemyArmyNumberOfUnits <= 10
            set_counter small_army 1
        end_if

        if I_BattleEnemyArmyNumberOfUnits > 10
            and I_BattleEnemyArmyNumberOfUnits <= 15
            set_counter medium_army 1
        end_if

        if I_BattleEnemyArmyNumberOfUnits > 15
            set_counter large_army 1
        end_if

        if I_BattlePlayerArmyNumberOfUnits > 0
            and I_BattlePlayerArmyNumberOfUnits <= 5
            set_counter very_small_tross 1
        end_if

        if I_BattlePlayerArmyNumberOfUnits > 5
            and I_BattlePlayerArmyNumberOfUnits <= 10
            set_counter small_tross 1
        end_if

        if I_BattlePlayerArmyNumberOfUnits > 10
            and I_BattlePlayerArmyNumberOfUnits <= 15
            set_counter medium_tross 1
        end_if

        if I_BattlePlayerArmyNumberOfUnits > 15
            set_counter large_tross 1
        end_if

        set_counter battle_no 1
    end_monitor

    monitor_event PostBattle not IsFactionAIControlled
        and WonBattle
        and not I_ConflictType Naval
        and I_CompareCounter battle_no = 1
        log always --------------------------- give money check spoils ------------------------

        if I_CompareCounter very_small_army = 1
            console_command add_money 100

            if RandomPercent < 25
                console_command add_money 50
            end_if
            if RandomPercent < 25
                console_command add_money 25
            end_if
        end_if

        if I_CompareCounter small_army = 1
            console_command add_money 200

            if RandomPercent < 25
                console_command add_money 100
            end_if
            if RandomPercent < 25
                console_command add_money 50
            end_if
        end_if

        if I_CompareCounter medium_army = 1
            console_command add_money 400
            historic_event spoils_of_war_ai

            if RandomPercent < 25
                console_command add_money 200
            end_if
            if RandomPercent < 25
                console_command add_money 100
            end_if
        end_if

        if I_CompareCounter large_army = 1
            console_command add_money 600
            historic_event spoils_of_war_ai

            if RandomPercent < 25
                console_command add_money 300
            end_if
            if RandomPercent < 25
                console_command add_money 150
            end_if
        end_if

        set_counter battle_no 0
    end_monitor

    monitor_event PostBattle not IsFactionAIControlled
        and not WonBattle
        and not I_ConflictType Naval
        and I_CompareCounter battle_no = 1

        if I_CompareCounter very_small_tross = 1
            console_command add_money -100

            if RandomPercent < 25
                console_command add_money -50
            end_if
            if RandomPercent < 25
                console_command add_money -25
            end_if
        end_if

        if I_CompareCounter small_tross = 1
            console_command add_money -200

            if RandomPercent < 25
                console_command add_money -100
            end_if
            if RandomPercent < 25
                console_command add_money -50
            end_if
        end_if

        if I_CompareCounter medium_tross = 1
            console_command add_money -400
            historic_event spoils_of_war_player

            if RandomPercent < 25
                console_command add_money -200
            end_if
            if RandomPercent < 25
                console_command add_money -100
            end_if
        end_if

        if I_CompareCounter large_tross = 1
            console_command add_money -600
            historic_event spoils_of_war_player

            if RandomPercent < 25
                console_command add_money -300
            end_if
            if RandomPercent < 25
                console_command add_money -150
            end_if
        end_if

        set_counter battle_no 0
    end_monitor

;############################# Battle AI #############################
;credits to Germanicus ReallyBadAI for parts of the script
;edited by Fynn in 2021

declare_counter pu1_missile
declare_counter pu2_missile
declare_counter pu3_missile
declare_counter pu4_missile
declare_counter pu5_missile
declare_counter pu6_missile
declare_counter pu7_missile
declare_counter pu8_missile
declare_counter pu9_missile
declare_counter pu10_missile
declare_counter pu11_missile
declare_counter pu12_missile
declare_counter pu13_missile
declare_counter pu14_missile
declare_counter pu15_missile
declare_counter pu16_missile
declare_counter pu17_missile
declare_counter pu18_missile
declare_counter pu19_missile
declare_counter pu20_missile
declare_counter labels_set
declare_counter player_unit_count
declare_counter enemy_unit_count
declare_counter attacker_missile
declare_counter defender_missile
declare_counter protect_siege
declare_counter open_battle
declare_counter elephant_fix
declare_counter elephant_gate
declare_counter script_delay
declare_counter general_wait
declare_counter ob_under_fire
declare_counter ob_engaged
declare_counter control_union
declare_counter ai_reinforcements
declare_counter gates_destroyed
declare_counter player_breached
declare_counter ai_breached
declare_counter g5_special
declare_counter g5_special_2
declare_counter g5_special_3
declare_counter battle_start
declare_counter ha_fix
declare_counter panel_check
declare_counter rally_walls
declare_counter del_objective
declare_counter elephant_fix_check
declare_counter elephant_gate_tier2
declare_counter second_ring
declare_counter elephant_gate_tier3
declare_counter third_ring
declare_counter engage_enemy
declare_counter obj_set1
declare_counter obj_set0

monitor_conditions I_InBattle
	inc_counter battle_looper 1
	if I_CompareCounter battle_looper = 100
		set_counter battle_looper 0
	end_if
end_monitor

monitor_event GeneralAssaultsGeneral CharacterIsLocal
and FactionType turks
and I_EventCounter control_turks = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsGeneral TrueCondition
and not CharacterIsLocal
and TargetFactionType turks
and not I_IsFactionAIControlled turks
and I_EventCounter control_turks = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsResidence CharacterIsLocal
and FactionType turks
and I_EventCounter control_turks = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsResidence TrueCondition
and not CharacterIsLocal
and TargetFactionType turks
and not I_IsFactionAIControlled turks
and I_EventCounter control_turks = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsGeneral CharacterIsLocal
and FactionType england
and I_EventCounter control_england = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsGeneral TrueCondition
and not CharacterIsLocal
and TargetFactionType england
and not I_IsFactionAIControlled england
and I_EventCounter control_england = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsResidence CharacterIsLocal
and FactionType england
and I_EventCounter control_england = 1

    set_counter control_union 1

end_monitor

monitor_event GeneralAssaultsResidence TrueCondition
and not CharacterIsLocal
and TargetFactionType england
and not I_IsFactionAIControlled england
and I_EventCounter control_england = 1

    set_counter control_union 1

end_monitor



monitor_event ButtonPressed ButtonPressed prebattle_fight_button

    ;;;;;;;
    set_counter labels_set 0
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter engage_enemy 0
    set_counter ai_reinforcements 0
    set_counter player_breached 0
    set_counter ai_breached 0
    set_counter gates_destroyed 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    set_counter script_delay 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    ;;;;;;;Protect General
    set_counter general_wait 0
    ;;;;;;;Open Battles
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    ;;;;;;;Special Ability
    set_counter g5_special 0
    set_counter g5_special_2 0
    set_counter g5_special_3 0
    set_counter ha_fix 0
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    set_counter elephant_gate_tier2 0
    set_counter elephant_gate_tier3 0
    set_counter elephant_fix_check 0
    set_counter rally_walls 0
    set_counter second_ring 0
    set_counter third_ring 0
    set_counter del_objective 0
    set_counter obj_set1 0
    set_counter obj_set0 0
    prepare_for_battle

end_monitor

monitor_conditions I_BattleStarted
and I_CompareCounter labels_set = 0

    battle_wait 0.1

    set_counter battle_start 1

if I_BattlePlayerArmyIsAttacker
    log always ------------------------set labels-------------------------------------
    ;;;Army 1
    set_counter player_unit_count 0

    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    ;;;Army 2
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_BattlePlayerArmyIsAttacker

    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if

if not I_BattlePlayerArmyIsAttacker
    ;;;Army 1
    log always ------------------------set labels-------------------------------------
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ;;;Army 2
    set_counter player_unit_count 0
    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if

	set_counter attacker_missile 0
	set_counter defender_missile 0

if I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a1u1 > 0
		set_counter pu1_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u1 = horde
		set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a1u2 > 0
		set_counter pu2_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u2 = horde
		set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a1u3 > 0
		set_counter pu3_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u3 = horde
		set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a1u4 > 0
		set_counter pu4_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u4 = horde
		set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a1u5 > 0
		set_counter pu5_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u5 = horde
		set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a1u6 > 0
		set_counter pu6_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u6 = horde
		set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a1u7 > 0
		set_counter pu7_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u7 = horde
		set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a1u8 > 0
		set_counter pu8_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u8 = horde
		set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a1u9 > 0
		set_counter pu9_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u9 = horde
		set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a1u10 > 0
		set_counter pu10_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u10 = horde
		set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a1u11 > 0
		set_counter pu11_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u11 = horde
		set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a1u12 > 0
		set_counter pu12_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u12 = horde
		set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a1u13 > 0
		set_counter pu13_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u13 = horde
		set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a1u14 > 0
		set_counter pu14_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u14 = horde
		set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a1u15 > 0
		set_counter pu15_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u15 = horde
		set_counter pu15_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a1u16 > 0
		set_counter pu16_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u16 = horde
		set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a1u17 > 0
		set_counter pu17_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u17 = horde
		set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a1u18 > 0
		set_counter pu18_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u18 = horde
		set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a1u19 > 0
		set_counter pu19_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u19 = horde
		set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a1u20 > 0
		set_counter pu20_missile 1
		inc_counter attacker_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u20 = horde
		set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if not I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a2u1 > 0
		set_counter pu1_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u1 = horde
		set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a2u2 > 0
		set_counter pu2_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u2 = horde
		set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a2u3 > 0
		set_counter pu3_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u3 = horde
		set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a2u4 > 0
		set_counter pu4_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u4 = horde
		set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a2u5 > 0
		set_counter pu5_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u5 = horde
		set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a2u6 > 0
		set_counter pu6_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u6 = horde
		set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a2u7 > 0
		set_counter pu7_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u7 = horde
		set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a2u8 > 0
		set_counter pu8_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u8 = horde
		set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a2u9 > 0
		set_counter pu9_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u9 = horde
		set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a2u10 > 0
		set_counter pu10_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u10 = horde
		set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a2u11 > 0
		set_counter pu11_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u11 = horde
		set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a2u12 > 0
		set_counter pu12_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u12 = horde
		set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a2u13 > 0
		set_counter pu13_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u13 = horde
		set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a2u14 > 0
		set_counter pu14_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u14 = horde
		set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a2u15 > 0
		set_counter pu15_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u15 = horde
		set_counter pu15_missile 2
	end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a2u16 > 0
		set_counter pu16_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u16 = horde
		set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a2u17 > 0
		set_counter pu17_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u17 = horde
		set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a2u18 > 0
		set_counter pu18_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u18 = horde
		set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a2u19 > 0
		set_counter pu19_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u19 = horde
		set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a2u20 > 0
		set_counter pu20_missile 1
		inc_counter defender_missile 1
		inc_counter attacker_missile -1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u20 = horde
		set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

    if not I_BattleIsSiegeBattle
    and not I_BattleIsSallyOutBattle
		set_counter open_battle 1
        set_counter ha_fix 1
        log always ------------------------open battle set-------------------------------------
    end_if

    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_BattleIsSiegeBattle
		set_counter elephant_fix 1
        log always ------------------------elephant fix enabled-------------------------------------
    end_if
	
	ai_active_set on
	release_unit a1u1
	release_unit a1u2
	release_unit a1u3
	release_unit a1u4
	release_unit a1u5
	release_unit a1u6
	release_unit a1u7
	release_unit a1u8
	release_unit a1u9
	release_unit a1u10
	release_unit a1u11
	release_unit a1u12
	release_unit a1u13
	release_unit a1u14
	release_unit a1u15
	release_unit a1u16
	release_unit a1u17
	release_unit a1u18
	release_unit a1u19
	release_unit a1u20
	release_unit a2u1
	release_unit a2u2
	release_unit a2u3
	release_unit a2u4
	release_unit a2u5
	release_unit a2u6
	release_unit a2u7
	release_unit a2u8
	release_unit a2u9
	release_unit a2u10
	release_unit a2u11
	release_unit a2u12
	release_unit a2u13
	release_unit a2u14
	release_unit a2u15
	release_unit a2u16
	release_unit a2u17
	release_unit a2u18
	release_unit a2u19
	release_unit a2u20
	ai_active_set on
	set_counter labels_set 1
end_monitor

monitor_event BattleConflictPhaseCommenced FactionIsLocal

    battle_wait 5

    if not I_BattlePlayerArmyIsAttacker
        ;if I_BattleIsSiegeBattle
        ;    ai_gta_plan_set 0 ATTACK_SETTLEMENT
        ;    log always ------------------------ai_gta_plan_set 1 ATTACK_SETTLEMENT (start)-------------------------------------
        ;    ai_active_set on
        ;end_if
        if I_BattleIsSallyOutBattle
            ai_gta_plan_set 0 SALLY_OUT
            log always ------------------------ai_gta_plan_set 1 SALLY_OUT (start)-------------------------------------
            ai_active_set on
        end_if
        if I_CompareCounter open_battle = 1
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ai_gta_plan_set ATTACK_ENEMY_BATTLEGROUP (enemy missile > 10)-------------------------------------
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ai_gta_plan_set ATTACK_ALL (start)-------------------------------------
            ai_active_set on
        end_if
    end_if

    ;if I_BattlePlayerArmyIsAttacker
    ;    if I_CompareCounter open_battle = 1
    ;        if I_CompareCounter attacker_missile < 5
    ;            ai_gta_add_objective 1 DEFEND_LINE 999
    ;            set_counter obj_set1 1
    ;            log always ------------------------ai_gta_add_objective DEFEND_LINE (enemy missile < 10)-------------------------------------
    ;            ai_gta_plan_set 1 DEFEND_FEATURE
    ;            log always ------------------------ai_gta_plan_set DEFEND_FEATURE (enemy missile < 10)-------------------------------------
    ;            battle_wait 1
    ;            ai_active_set on
    ;        end_if
    ;        if I_CompareCounter attacker_missile >= 5
    ;            ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
    ;            set_counter obj_set1 1
    ;            log always ------------------------ai_gta_plan_set ATTACK_ENEMY_BATTLEGROUP (enemy missile > 10)-------------------------------------
    ;            ai_gta_plan_set 1 ATTACK_ALL
    ;            log always ------------------------ai_gta_plan_set ATTACK_ALL (enemy missile > 10)-------------------------------------
    ;            battle_wait 1
    ;            ai_active_set on
    ;        end_if
    ;    end_if
    ;    if I_BattleIsSiegeBattle
    ;        ai_gta_add_objective 1 DEFEND_LINE 999
    ;        log always ------------------------ai_gta_add_objective 1 DEFEND_LINE (start)-------------------------------------
    ;        set_counter obj_set1 1
    ;        ai_gta_plan_set 1 DEFEND_SETTLEMENT
    ;        log always ------------------------ai_gta_plan_set 1 DEFEND_SETTLEMENT (start)-------------------------------------
    ;        ai_active_set on
    ;    end_if
    ;    if I_BattleIsSallyOutBattle
    ;        ai_gta_add_objective 1 DEFEND_LINE 999
    ;        log always ------------------------ai_gta_plan_set 1 DEFEND_LINE (start)-------------------------------------
    ;        set_counter obj_set1 1
    ;        ai_gta_plan_set 1 DEFEND_FEATURE
    ;        log always ------------------------ai_gta_plan_set DEFEND_FEATURE (DEFEND_FEATURE start)-------------------------------------
    ;        ai_active_set on
    ;    end_if
    ;end_if

end_monitor

;monitor_event BattleReinforcementsArrive not ArmyIsLocal
;and not I_BattleIsSiegeBattle
;and not I_BattleIsSallyOutBattle
;
;
;    set_counter ai_reinforcements 1
;    log always ------------------------ai reinforcement arrive waite-------------------------------------
;    battle_wait 200
;    set_counter ai_reinforcements 2
;    log always ------------------------ai reinforcement arrive go-------------------------------------
;
;end_monitor

monitor_event BattleReinforcementsArrive ArmyIsLocal

    log always -------------------------- player reinforcements arrive--------------------------
    battle_wait 7
    if I_BattlePlayerArmyNumberOfAttribute oathbreakers_unit > 0
        inc_counter oathbreaker_timer 1
    end_if

end_monitor

monitor_event BattleWallsCaptured TrueCondition
and I_BattleIsSiegeBattle

    if I_BattlePlayerArmyIsAttacker
        set_counter player_breached 1
        log always ------------------------ ai set - player breached-------------------------------------
    end_if

    if not I_BattlePlayerArmyIsAttacker
        set_counter ai_breached 1
        log always ------------------------ ai set - ai breached-------------------------------------
    end_if
    
end_monitor

monitor_event BattleBattleGatesDestroyedByEngine TrueCondition
and I_BattleIsSiegeBattle

    if not I_BattlePlayerArmyIsAttacker
        set_counter ai_breached 1
        log always ------------------------ ai set - ai breached-------------------------------------
    end_if
    
    if I_BattlePlayerArmyIsAttacker
        set_counter gates_destroyed 1
        log always ------------------------ ai set - gates destroyed------------------------------------
    end_if
    
end_monitor


monitor_event BattlePlayerUnitAttacksEnemyUnit TrueCondition
and I_BattleIsSiegeBattle
and I_BattlePlayerArmyIsAttacker

    set_counter player_breached 1
    log always ------------------------ ai set - player breached-------------------------------------

end_monitor

monitor_conditions I_CompareCounter battle_looper = 40
and I_BattleStarted
and I_BattlePlayerArmyIsAttacker

    battle_wait 20

    log always -------------------------ai defending---------------

    set_counter ob_engaged 0
    set_counter ob_under_fire 0
	if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter ob_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u1 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u2 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u3 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u4 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u5 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u6 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u7 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u8 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u9 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u10 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u11 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u12 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u13 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u14 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u15 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u16 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u17 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u18 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u19 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u20 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
	if I_CompareCounter open_battle > 0
        if I_CompareCounter engage_enemy = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 DEFEND_LINE 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (wait for reinforcements)-------------------------------------
			ai_gta_plan_set 1 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE (wait for reinforcements)-------------------------------------
            ai_active_set on
			battle_wait 10
        end_if
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_under_fire < 0
        and I_CompareCounter engage_enemy = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 DEFEND_LINE 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (firing at enemy)-------------------------------------
            ai_gta_plan_set 1 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE (firing at enemy)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_engaged > 3
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_UnitEnemyUnitInRadius a2u1 50
        and I_CompareCounter ai_reinforcements = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (enemy close to general)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_PercentageUnitKilled a2u1 > 10
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 10% general killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_PercentageOfArmyKilled 1 0 > 7
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 7% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_UnitEnemyUnitInRadius a2u1 220
		and I_BattleEnemyArmyNumberOfUnitClass missile = 0
		and I_BattlePlayerArmyNumberOfUnitClass missile > 0
        and I_CompareCounter ai_reinforcements = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many archers)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many archers)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
		and I_UnitEnemyUnitInRadius a2u1 350
        and I_CompareCounter ai_reinforcements = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many cav units)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many cavalry)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
	end_if
	if I_BattleIsSiegeBattle
	and I_BattleSettlementFortificationLevel = none
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_under_fire < 0
        and I_CompareCounter engage_enemy = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 DEFEND_LINE 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (firing at enemy)-------------------------------------
            ai_gta_plan_set 1 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE (firing at enemy)-------------------------------------
            ai_active_set on
			battle_wait 10
        end_if
		if I_CompareCounter ob_engaged > 1
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_UnitEnemyUnitInRadius a2u1 50
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (enemy close to general)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_PercentageUnitKilled a2u1 > 10
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (> 10% general killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_PercentageOfArmyKilled 1 0 > 7
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (> 7% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_UnitEnemyUnitInRadius a2u1 220
		and I_BattleEnemyArmyNumberOfUnitClass missile = 0
		and I_BattlePlayerArmyNumberOfUnitClass missile > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many archers)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (> enemy to many archers)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
		and I_UnitEnemyUnitInRadius a2u1 350
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many cav units)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (> enemy to many cavakry)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
	end_if
    if I_CompareCounter player_breached > 0
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_under_fire < 0
        and I_CompareCounter engage_enemy = 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 DEFEND_LINE 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (firing at enemy)-------------------------------------
            ai_gta_plan_set 1 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE (firing at enemy)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_engaged > 2
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_UnitEnemyUnitInRadius a2u1 50
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (enemy close to general)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_PercentageUnitKilled a2u1 > 10
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 10% general killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_PercentageOfArmyKilled 1 0 > 7
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 7% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_UnitEnemyUnitInRadius a2u1 220
		and I_BattleEnemyArmyNumberOfUnitClass missile = 0
		and I_BattlePlayerArmyNumberOfUnitClass missile > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many archers)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many archers)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
		and I_UnitEnemyUnitInRadius a2u1 350
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many cav units)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many cavakry)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
	end_if
    if I_CompareCounter gates_destroyed = 0
    and I_CompareCounter player_breached = 0
    and I_BattleIsSiegeBattle
    and not I_BattleSettlementFortificationLevel = none
		if I_PercentageOfArmyKilled 1 0 > 12
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (> 20% army killed)-------------------------------------
            ai_gta_plan_set 1 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE  (> 20% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
    end_if
    if I_CompareCounter gates_destroyed > 0
    and I_BattleIsSiegeBattle
    and not I_BattleSettlementFortificationLevel = none
		if I_PercentageOfArmyKilled 1 0 > 12
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 20% army killed)-------------------------------------
            ai_gta_plan_set 1 SALLY_OUT
            log always ------------------------ ai_gta_plan_set SALLY_OUT  (> 20% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
    end_if      
    if I_BattleIsSallyOutBattle
        battle_wait 50
        if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_engaged > 2
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_UnitEnemyUnitInRadius a2u1 50
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (enemy close to general)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_PercentageUnitKilled a2u1 > 10
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 10% general killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_PercentageOfArmyKilled 1 0 > 7
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 7% army killed)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_UnitEnemyUnitInRadius a2u1 220
		and I_BattleEnemyArmyNumberOfUnitClass missile = 0
		and I_BattlePlayerArmyNumberOfUnitClass missile > 0
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many archers)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many archers)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
		if I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
		and I_UnitEnemyUnitInRadius a2u1 350
            if I_CompareCounter obj_set1 = 1
                ai_gta_del_objective 1 0
            end_if
			ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set1 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> enemy to many cav units)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> enemy to many cavakry)-------------------------------------
            ai_active_set on
			battle_wait 10
            set_counter engage_enemy 1
		end_if
    end_if

end_monitor

    monitor_conditions I_BattleStarted
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleIsSallyOutBattle

        ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
        set_counter obj_set0 1
        log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (sally out!)-------------------------------------
        ai_active_set on
        battle_wait 10

    end_monitor


monitor_conditions I_CompareCounter battle_looper = 30
and I_BattleStarted
and not I_BattlePlayerArmyIsAttacker

    battle_wait 20

    log always -------------------------ai attacking---------------
    set_counter ob_engaged 0
    set_counter ob_under_fire 0
	if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a1u1
    inc_counter ob_under_fire 2
    end_if
    if I_UnitStatus a1u1 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u1 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u1 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u1 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u1 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a1u2
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u2 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u2 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u2 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u2 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u2 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a1u3
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u3 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u3 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u3 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u3 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u3 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a1u4
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u4 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u4 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u4 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u4 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u4 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a1u5
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u5 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u5 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u5 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u5 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u5 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a1u6
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u6 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u6 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u6 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u6 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u6 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a1u7
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u7 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u7 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u7 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u7 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u7 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a1u8
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u8 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u8 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u8 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u8 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u8 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a1u9
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u9 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u9 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u9 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u9 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u9 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a1u10
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u10 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u10 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u10 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u10 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u10 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a1u11
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u11 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u11 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u11 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u11 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u11 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a1u12
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u12 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u12 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u12 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u12 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u12 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a1u13
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u13 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u13 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u13 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u13 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u13 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a1u14
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u14 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u14 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u14 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u14 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u14 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a1u15
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u15 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u15 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u15 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u15 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u15 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a1u16
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u16 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u16 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u16 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u16 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u16 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a1u17
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u17 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u17 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u17 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u17 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u17 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a1u18
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u18 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u18 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u18 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u18 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u18 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a1u19
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u19 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u19 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u19 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u19 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u19 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a1u20
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a1u20 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u20 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u20 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a1u20 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a1u20 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    
    if I_CompareCounter open_battle > 0
        if I_CompareCounter engage_enemy = 0
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 DEFEND_LINE 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective DEFEND_LINE (firing at enemy)-------------------------------------
            ai_gta_plan_set 1 DEFEND_FEATURE
            ai_gta_plan_set 0 DEFEND_FEATURE
            log always ------------------------ ai_gta_plan_set DEFEND_FEATURE (wait for reinforcements)-------------------------------------
            ai_active_set on
            battle_wait 10
        end_if
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_engaged > 2
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
        if I_UnitEnemyUnitInRadius a1u1 50
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (enemy close to general)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
        if I_PercentageUnitKilled a1u1 > 10
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 10% general killed)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
        if I_PercentageOfArmyKilled 0 0 > 7
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 7% army killed)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
    end_if
    if I_BattleIsSiegeBattle
	and I_BattleSettlementFortificationLevel = none
		if I_CompareCounter ob_under_fire > 0
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (under fire!)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL (under fire!)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
		if I_CompareCounter ob_engaged > 2
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (army engaged)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (army engaged)-------------------------------------
            ai_active_set on
			battle_wait 10
		end_if
        if I_UnitEnemyUnitInRadius a1u1 50
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (enemy close to general)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (enemy close to general)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
        if I_PercentageUnitKilled a1u1 > 10
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 10% general killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 10% general killed)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
        if I_PercentageOfArmyKilled 0 0 > 7
            if I_CompareCounter obj_set0 = 1
                ai_gta_del_objective 0 0
            end_if
            ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
            set_counter obj_set0 1
            log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (> 7% army killed)-------------------------------------
            ai_gta_plan_set 1 ATTACK_ALL
            ai_gta_plan_set 0 ATTACK_ALL
            log always ------------------------ ai_gta_plan_set ATTACK_ALL  (> 7% army killed)-------------------------------------
            ai_active_set on
            set_counter engage_enemy 1
            battle_wait 10
        end_if
    end_if
    if I_CompareCounter ai_breached > 0
        if I_CompareCounter obj_set0 = 1
            ai_gta_del_objective 0 0
        end_if
        ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
        set_counter obj_set0 1
        log always ------------------------ ai_gta_add_objective ATTACK_ENEMY_BATTLEGROUP (AI breached) -------------------------------------
        ai_gta_plan_set 1 ATTACK_ALL
        log always ------------------------ ai_gta_plan_set ATTACK_ALL (AI breached)-------------------------------------
        ai_active_set on
        battle_wait 10
	end_if

end_monitor


monitor_event BattleDeploymentPhaseCommenced FactionIsLocal	;deploy stakes
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter labels_set = 1
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0

    log always ------------------------ DEPLOY STAKES-------------------------------------

    if I_CompareCounter enemy_unit_count > 0
    unit_deploy_stakes a2u1

        if I_CompareCounter enemy_unit_count > 1
            unit_deploy_stakes a2u2

            if I_CompareCounter enemy_unit_count > 2
                unit_deploy_stakes a2u3

                if I_CompareCounter enemy_unit_count > 3
                    unit_deploy_stakes a2u4

                    if I_CompareCounter enemy_unit_count > 4
                        unit_deploy_stakes a2u5

                        if I_CompareCounter enemy_unit_count > 5
                            unit_deploy_stakes a2u6

                            if I_CompareCounter enemy_unit_count > 6
                                unit_deploy_stakes a2u7

                                if I_CompareCounter enemy_unit_count > 7
                                    unit_deploy_stakes a2u8

                                    if I_CompareCounter enemy_unit_count > 8
                                        unit_deploy_stakes a2u9

                                        if I_CompareCounter enemy_unit_count > 9
                                            unit_deploy_stakes a2u10

                                            if I_CompareCounter enemy_unit_count > 10
                                                unit_deploy_stakes a2u11

                                                if I_CompareCounter enemy_unit_count > 11
                                                    unit_deploy_stakes a2u12

                                                    if I_CompareCounter enemy_unit_count > 12
                                                        unit_deploy_stakes a2u13

                                                        if I_CompareCounter enemy_unit_count > 13
                                                            unit_deploy_stakes a2u14

                                                            if I_CompareCounter enemy_unit_count > 14
                                                                unit_deploy_stakes a2u15

                                                                if I_CompareCounter enemy_unit_count > 15
                                                                    unit_deploy_stakes a2u16

                                                                    if I_CompareCounter enemy_unit_count > 16
                                                                        unit_deploy_stakes a2u17

                                                                        if I_CompareCounter enemy_unit_count > 17
                                                                            unit_deploy_stakes a2u18

                                                                            if I_CompareCounter enemy_unit_count > 18
                                                                                unit_deploy_stakes a2u19

                                                                                if I_CompareCounter enemy_unit_count = 20
                                                                                    unit_deploy_stakes a2u20
                                                                                end_if
                                                                            end_if
                                                                        end_if
                                                                    end_if
                                                                end_if
                                                            end_if
                                                        end_if
                                                    end_if
                                                end_if
                                            end_if
                                        end_if
                                    end_if
                                end_if
                            end_if
                        end_if
                    end_if
                end_if
            end_if
        end_if
    end_if

    battle_wait 0.5
    ai_active_set on

end_monitor

;;;;;;;;HA fix;;;;;;;;;;;;

monitor_conditions I_CompareCounter battle_looper = 30
	and I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_CompareCounter open_battle = 1
    and not I_BattlePlayerArmyIsAttacker
    and not I_BattleAiAttacking

    ai_gta_plan_set 1 ATTACK_ALL
    ai_gta_plan_set 0 ATTACK_ALL
    battle_wait 5
    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 0 0 a1u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 0 0 a1u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 0 0 a1u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 0 0 a1u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 0 0 a1u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 0 0 a1u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 0 0 a1u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 0 0 a1u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 0 0 a1u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 0 0 a1u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 0 0 a1u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 0 0 a1u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 0 0 a1u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 0 0 a1u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 0 0 a1u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 0 0 a1u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 0 0 a1u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 0 0 a1u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 0 0 a1u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    battle_wait 0.5
    ai_active_set on

    set_counter ha_fix 0
    log always ------------------------ ha fix??-------------------------------------

end_monitor

monitor_conditions I_CompareCounter battle_looper = 30
	and I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_BattleIsRiverBattle
    and not I_BattlePlayerArmyIsAttacker
    and not I_BattleAiAssaultingCrossing

    ai_gta_add_objective 0 ASSAULT_CROSSING 999

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 0 0 a1u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 0 0 a1u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 0 0 a1u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 0 0 a1u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 0 0 a1u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 0 0 a1u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 0 0 a1u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 0 0 a1u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 0 0 a1u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 0 0 a1u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 0 0 a1u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 0 0 a1u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 0 0 a1u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 0 0 a1u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 0 0 a1u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 0 0 a1u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 0 0 a1u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 0 0 a1u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 0 0 a1u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    battle_wait 0.5
    ai_active_set on

    set_counter ha_fix 0
    log always ------------------------ ha fix crossing??-------------------------------------
end_monitor

;;;;;;;;Elephant;;;;;;;;;;;;

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and not I_BattleIsFortBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    log always ------------------------ elephant fix castle-------------------------------------
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and not I_UnitStatus a1u1 running_amok
    and not I_UnitDestroyed a1u1
    and not I_UnitStatus a1u1 left_battle
    and not I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and not I_UnitStatus a1u2 running_amok
    and not I_UnitDestroyed a1u2
    and not I_UnitStatus a1u2 left_battle
    and not I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and not I_UnitStatus a1u3 running_amok
    and not I_UnitDestroyed a1u3
    and not I_UnitStatus a1u3 left_battle
    and not I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and not I_UnitStatus a1u4 running_amok
    and not I_UnitDestroyed a1u4
    and not I_UnitStatus a1u4 left_battle
    and not I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and not I_UnitStatus a1u5 running_amok
    and not I_UnitDestroyed a1u5
    and not I_UnitStatus a1u5 left_battle
    and not I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and not I_UnitStatus a1u6 running_amok
    and not I_UnitDestroyed a1u6
    and not I_UnitStatus a1u6 left_battle
    and not I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and not I_UnitStatus a1u7 running_amok
    and not I_UnitDestroyed a1u7
    and not I_UnitStatus a1u7 left_battle
    and not I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and not I_UnitStatus a1u8 running_amok
    and not I_UnitDestroyed a1u8
    and not I_UnitStatus a1u8 left_battle
    and not I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and not I_UnitStatus a1u9 running_amok
    and not I_UnitDestroyed a1u9
    and not I_UnitStatus a1u9 left_battle
    and not I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and not I_UnitStatus a1u10 running_amok
    and not I_UnitDestroyed a1u10
    and not I_UnitStatus a1u10 left_battle
    and not I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and not I_UnitStatus a1u11 running_amok
    and not I_UnitDestroyed a1u11
    and not I_UnitStatus a1u11 left_battle
    and not I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and not I_UnitStatus a1u12 running_amok
    and not I_UnitDestroyed a1u12
    and not I_UnitStatus a1u12 left_battle
    and not I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and not I_UnitStatus a1u13 running_amok
    and not I_UnitDestroyed a1u13
    and not I_UnitStatus a1u13 left_battle
    and not I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and not I_UnitStatus a1u14 running_amok
    and not I_UnitDestroyed a1u14
    and not I_UnitStatus a1u14 left_battle
    and not I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and not I_UnitStatus a1u15 running_amok
    and not I_UnitDestroyed a1u15
    and not I_UnitStatus a1u15 left_battle
    and not I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and not I_UnitStatus a1u16 running_amok
    and not I_UnitDestroyed a1u16
    and not I_UnitStatus a1u16 left_battle
    and not I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and not I_UnitStatus a1u17 running_amok
    and not I_UnitDestroyed a1u17
    and not I_UnitStatus a1u17 left_battle
    and not I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and not I_UnitStatus a1u18 running_amok
    and not I_UnitDestroyed a1u18
    and not I_UnitStatus a1u18 left_battle
    and not I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and not I_UnitStatus a1u19 running_amok
    and not I_UnitDestroyed a1u19
    and not I_UnitStatus a1u19 left_battle
    and not I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and not I_UnitStatus a1u20 running_amok
    and not I_UnitDestroyed a1u20
    and not I_UnitStatus a1u20 left_battle
    and not I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and not I_BattleIsFortBattle
    and not I_BattlePlayerArmyIsAttacker
    and not I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    log always ------------------------ elephant fix city-------------------------------------
;    ai_active_set off
    unit_group_order_halt army1

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and not I_UnitStatus a1u1 running_amok
    and not I_UnitDestroyed a1u1
    and not I_UnitStatus a1u1 left_battle
    and not I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and not I_UnitStatus a1u2 running_amok
    and not I_UnitDestroyed a1u2
    and not I_UnitStatus a1u2 left_battle
    and not I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and not I_UnitStatus a1u3 running_amok
    and not I_UnitDestroyed a1u3
    and not I_UnitStatus a1u3 left_battle
    and not I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and not I_UnitStatus a1u4 running_amok
    and not I_UnitDestroyed a1u4
    and not I_UnitStatus a1u4 left_battle
    and not I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and not I_UnitStatus a1u5 running_amok
    and not I_UnitDestroyed a1u5
    and not I_UnitStatus a1u5 left_battle
    and not I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and not I_UnitStatus a1u6 running_amok
    and not I_UnitDestroyed a1u6
    and not I_UnitStatus a1u6 left_battle
    and not I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and not I_UnitStatus a1u7 running_amok
    and not I_UnitDestroyed a1u7
    and not I_UnitStatus a1u7 left_battle
    and not I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and not I_UnitStatus a1u8 running_amok
    and not I_UnitDestroyed a1u8
    and not I_UnitStatus a1u8 left_battle
    and not I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and not I_UnitStatus a1u9 running_amok
    and not I_UnitDestroyed a1u9
    and not I_UnitStatus a1u9 left_battle
    and not I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and not I_UnitStatus a1u10 running_amok
    and not I_UnitDestroyed a1u10
    and not I_UnitStatus a1u10 left_battle
    and not I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and not I_UnitStatus a1u11 running_amok
    and not I_UnitDestroyed a1u11
    and not I_UnitStatus a1u11 left_battle
    and not I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and not I_UnitStatus a1u12 running_amok
    and not I_UnitDestroyed a1u12
    and not I_UnitStatus a1u12 left_battle
    and not I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and not I_UnitStatus a1u13 running_amok
    and not I_UnitDestroyed a1u13
    and not I_UnitStatus a1u13 left_battle
    and not I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and not I_UnitStatus a1u14 running_amok
    and not I_UnitDestroyed a1u14
    and not I_UnitStatus a1u14 left_battle
    and not I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and not I_UnitStatus a1u15 running_amok
    and not I_UnitDestroyed a1u15
    and not I_UnitStatus a1u15 left_battle
    and not I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and not I_UnitStatus a1u16 running_amok
    and not I_UnitDestroyed a1u16
    and not I_UnitStatus a1u16 left_battle
    and not I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and not I_UnitStatus a1u17 running_amok
    and not I_UnitDestroyed a1u17
    and not I_UnitStatus a1u17 left_battle
    and not I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and not I_UnitStatus a1u18 running_amok
    and not I_UnitDestroyed a1u18
    and not I_UnitStatus a1u18 left_battle
    and not I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and not I_UnitStatus a1u19 running_amok
    and not I_UnitDestroyed a1u19
    and not I_UnitStatus a1u19 left_battle
    and not I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and not I_UnitStatus a1u20 running_amok
    and not I_UnitDestroyed a1u20
    and not I_UnitStatus a1u20 left_battle
    and not I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    unit_group_order_halt army1
    battle_wait 0.5
    unit_group_order_change_group_formation army1 ai_wall_assault
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and I_BattleIsFortBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    log always ------------------------ elephant fix fort-------------------------------------
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and not I_UnitStatus a1u1 running_amok
    and not I_UnitDestroyed a1u1
    and not I_UnitStatus a1u1 left_battle
    and not I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and not I_UnitStatus a1u2 running_amok
    and not I_UnitDestroyed a1u2
    and not I_UnitStatus a1u2 left_battle
    and not I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and not I_UnitStatus a1u3 running_amok
    and not I_UnitDestroyed a1u3
    and not I_UnitStatus a1u3 left_battle
    and not I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and not I_UnitStatus a1u4 running_amok
    and not I_UnitDestroyed a1u4
    and not I_UnitStatus a1u4 left_battle
    and not I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and not I_UnitStatus a1u5 running_amok
    and not I_UnitDestroyed a1u5
    and not I_UnitStatus a1u5 left_battle
    and not I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and not I_UnitStatus a1u6 running_amok
    and not I_UnitDestroyed a1u6
    and not I_UnitStatus a1u6 left_battle
    and not I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and not I_UnitStatus a1u7 running_amok
    and not I_UnitDestroyed a1u7
    and not I_UnitStatus a1u7 left_battle
    and not I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and not I_UnitStatus a1u8 running_amok
    and not I_UnitDestroyed a1u8
    and not I_UnitStatus a1u8 left_battle
    and not I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and not I_UnitStatus a1u9 running_amok
    and not I_UnitDestroyed a1u9
    and not I_UnitStatus a1u9 left_battle
    and not I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and not I_UnitStatus a1u10 running_amok
    and not I_UnitDestroyed a1u10
    and not I_UnitStatus a1u10 left_battle
    and not I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and not I_UnitStatus a1u11 running_amok
    and not I_UnitDestroyed a1u11
    and not I_UnitStatus a1u11 left_battle
    and not I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and not I_UnitStatus a1u12 running_amok
    and not I_UnitDestroyed a1u12
    and not I_UnitStatus a1u12 left_battle
    and not I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and not I_UnitStatus a1u13 running_amok
    and not I_UnitDestroyed a1u13
    and not I_UnitStatus a1u13 left_battle
    and not I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and not I_UnitStatus a1u14 running_amok
    and not I_UnitDestroyed a1u14
    and not I_UnitStatus a1u14 left_battle
    and not I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and not I_UnitStatus a1u15 running_amok
    and not I_UnitDestroyed a1u15
    and not I_UnitStatus a1u15 left_battle
    and not I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and not I_UnitStatus a1u16 running_amok
    and not I_UnitDestroyed a1u16
    and not I_UnitStatus a1u16 left_battle
    and not I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and not I_UnitStatus a1u17 running_amok
    and not I_UnitDestroyed a1u17
    and not I_UnitStatus a1u17 left_battle
    and not I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and not I_UnitStatus a1u18 running_amok
    and not I_UnitDestroyed a1u18
    and not I_UnitStatus a1u18 left_battle
    and not I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and not I_UnitStatus a1u19 running_amok
    and not I_UnitDestroyed a1u19
    and not I_UnitStatus a1u19 left_battle
    and not I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and not I_UnitStatus a1u20 running_amok
    and not I_UnitDestroyed a1u20
    and not I_UnitStatus a1u20 left_battle
    and not I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter rally_walls = 1
    and BattleIsMeleeAttack
    and not BattlePlayerUnitOnWalls
    and not BattleEnemyUnitOnWalls
    log always ------------------------ elephant gates stuff-------------------------------------

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter rally_walls = 1
    and not BattlePlayerUnitOnWalls
    and not BattleEnemyUnitOnWalls
    log always ------------------------ elephant rally walls?-------------------------------------

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter del_objective = 1
    and I_BattleIsSiegeBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    set_counter del_objective 2
    battle_wait 15
    if I_CompareCounter del_objective = 2
    ai_gta_del_objective 0 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter del_objective 0
    end_if
    log always ------------------------ elephant del objective?-------------------------------------
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier2 = 1
    and not I_BattleIsFortBattle
    and I_BattleIsSiegeBattle
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    log always ------------------------ elephant t2?-------------------------------------

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and not I_UnitStatus a1u1 running_amok
    and not I_UnitDestroyed a1u1
    and not I_UnitStatus a1u1 left_battle
    and not I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and not I_UnitStatus a1u2 running_amok
    and not I_UnitDestroyed a1u2
    and not I_UnitStatus a1u2 left_battle
    and not I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and not I_UnitStatus a1u3 running_amok
    and not I_UnitDestroyed a1u3
    and not I_UnitStatus a1u3 left_battle
    and not I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and not I_UnitStatus a1u4 running_amok
    and not I_UnitDestroyed a1u4
    and not I_UnitStatus a1u4 left_battle
    and not I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and not I_UnitStatus a1u5 running_amok
    and not I_UnitDestroyed a1u5
    and not I_UnitStatus a1u5 left_battle
    and not I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and not I_UnitStatus a1u6 running_amok
    and not I_UnitDestroyed a1u6
    and not I_UnitStatus a1u6 left_battle
    and not I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and not I_UnitStatus a1u7 running_amok
    and not I_UnitDestroyed a1u7
    and not I_UnitStatus a1u7 left_battle
    and not I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and not I_UnitStatus a1u8 running_amok
    and not I_UnitDestroyed a1u8
    and not I_UnitStatus a1u8 left_battle
    and not I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and not I_UnitStatus a1u9 running_amok
    and not I_UnitDestroyed a1u9
    and not I_UnitStatus a1u9 left_battle
    and not I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and not I_UnitStatus a1u10 running_amok
    and not I_UnitDestroyed a1u10
    and not I_UnitStatus a1u10 left_battle
    and not I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and not I_UnitStatus a1u11 running_amok
    and not I_UnitDestroyed a1u11
    and not I_UnitStatus a1u11 left_battle
    and not I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and not I_UnitStatus a1u12 running_amok
    and not I_UnitDestroyed a1u12
    and not I_UnitStatus a1u12 left_battle
    and not I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and not I_UnitStatus a1u13 running_amok
    and not I_UnitDestroyed a1u13
    and not I_UnitStatus a1u13 left_battle
    and not I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and not I_UnitStatus a1u14 running_amok
    and not I_UnitDestroyed a1u14
    and not I_UnitStatus a1u14 left_battle
    and not I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and not I_UnitStatus a1u15 running_amok
    and not I_UnitDestroyed a1u15
    and not I_UnitStatus a1u15 left_battle
    and not I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and not I_UnitStatus a1u16 running_amok
    and not I_UnitDestroyed a1u16
    and not I_UnitStatus a1u16 left_battle
    and not I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and not I_UnitStatus a1u17 running_amok
    and not I_UnitDestroyed a1u17
    and not I_UnitStatus a1u17 left_battle
    and not I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and not I_UnitStatus a1u18 running_amok
    and not I_UnitDestroyed a1u18
    and not I_UnitStatus a1u18 left_battle
    and not I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and not I_UnitStatus a1u19 running_amok
    and not I_UnitDestroyed a1u19
    and not I_UnitStatus a1u19 left_battle
    and not I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and not I_UnitStatus a1u20 running_amok
    and not I_UnitDestroyed a1u20
    and not I_UnitStatus a1u20 left_battle
    and not I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 1
    set_counter elephant_gate_tier2 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter rally_walls = 2
    and BattleIsMeleeAttack
    and not BattlePlayerUnitOnWalls
    and not BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter rally_walls = 2
    and not BattlePlayerUnitOnWalls
    and not BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier3 = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and not I_UnitStatus a1u1 running_amok
    and not I_UnitDestroyed a1u1
    and not I_UnitStatus a1u1 left_battle
    and not I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and not I_UnitStatus a1u2 running_amok
    and not I_UnitDestroyed a1u2
    and not I_UnitStatus a1u2 left_battle
    and not I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and not I_UnitStatus a1u3 running_amok
    and not I_UnitDestroyed a1u3
    and not I_UnitStatus a1u3 left_battle
    and not I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and not I_UnitStatus a1u4 running_amok
    and not I_UnitDestroyed a1u4
    and not I_UnitStatus a1u4 left_battle
    and not I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and not I_UnitStatus a1u5 running_amok
    and not I_UnitDestroyed a1u5
    and not I_UnitStatus a1u5 left_battle
    and not I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and not I_UnitStatus a1u6 running_amok
    and not I_UnitDestroyed a1u6
    and not I_UnitStatus a1u6 left_battle
    and not I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and not I_UnitStatus a1u7 running_amok
    and not I_UnitDestroyed a1u7
    and not I_UnitStatus a1u7 left_battle
    and not I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and not I_UnitStatus a1u8 running_amok
    and not I_UnitDestroyed a1u8
    and not I_UnitStatus a1u8 left_battle
    and not I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and not I_UnitStatus a1u9 running_amok
    and not I_UnitDestroyed a1u9
    and not I_UnitStatus a1u9 left_battle
    and not I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and not I_UnitStatus a1u10 running_amok
    and not I_UnitDestroyed a1u10
    and not I_UnitStatus a1u10 left_battle
    and not I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and not I_UnitStatus a1u11 running_amok
    and not I_UnitDestroyed a1u11
    and not I_UnitStatus a1u11 left_battle
    and not I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and not I_UnitStatus a1u12 running_amok
    and not I_UnitDestroyed a1u12
    and not I_UnitStatus a1u12 left_battle
    and not I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and not I_UnitStatus a1u13 running_amok
    and not I_UnitDestroyed a1u13
    and not I_UnitStatus a1u13 left_battle
    and not I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and not I_UnitStatus a1u14 running_amok
    and not I_UnitDestroyed a1u14
    and not I_UnitStatus a1u14 left_battle
    and not I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and not I_UnitStatus a1u15 running_amok
    and not I_UnitDestroyed a1u15
    and not I_UnitStatus a1u15 left_battle
    and not I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and not I_UnitStatus a1u16 running_amok
    and not I_UnitDestroyed a1u16
    and not I_UnitStatus a1u16 left_battle
    and not I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and not I_UnitStatus a1u17 running_amok
    and not I_UnitDestroyed a1u17
    and not I_UnitStatus a1u17 left_battle
    and not I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and not I_UnitStatus a1u18 running_amok
    and not I_UnitDestroyed a1u18
    and not I_UnitStatus a1u18 left_battle
    and not I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and not I_UnitStatus a1u19 running_amok
    and not I_UnitDestroyed a1u19
    and not I_UnitStatus a1u19 left_battle
    and not I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and not I_UnitStatus a1u20 running_amok
    and not I_UnitDestroyed a1u20
    and not I_UnitStatus a1u20 left_battle
    and not I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter third_ring 1
    set_counter elephant_gate_tier3 0
end_monitor

;;;;;;;Elephants Gate and Walls
monitor_event BattleBattleGatesDestroyedByEngine TrueCondition ;wtf

if I_BattleIsSiegeBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
end_monitor

monitor_event BattleWallsCaptured TrueCondition

if I_BattleIsSiegeBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
end_monitor

monitor_event BattleWallsBreachedByEngine TrueCondition

if I_BattleIsSiegeBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    ai_gta_del_objective 1 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 2
    set_counter rally_walls 0
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 2
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
end_monitor

monitor_conditions I_BattleStarted ;dont suicide general
and I_BattleIsSiegeBattle
and not I_BattlePlayerArmyIsAttacker
and I_IsUnitMoveFastSet a1u1
and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0
    log always ------------------------ dont suicide general?-------------------------------------

    battle_wait 0.5
    unit_order_halt a1u1
    if I_CompareCounter enemy_unit_count < 7
        set_counter general_wait 2
        battle_wait 20
        if I_BattleIsSiegeBattle
        and I_CompareCounter general_wait = 2
            set_counter general_wait 3
            battle_wait 20
        end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
        set_counter general_wait 2
        battle_wait 25
        if I_BattleIsSiegeBattle
        and I_CompareCounter general_wait = 2
            set_counter general_wait 3
            battle_wait 25
        end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
        set_counter general_wait 2
        battle_wait 30
        if I_BattleIsSiegeBattle
        and I_CompareCounter general_wait = 2
            set_counter general_wait 3
            battle_wait 30
        end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
        set_counter general_wait 2
        battle_wait 35
        if I_BattleIsSiegeBattle
        and I_CompareCounter general_wait = 2
            set_counter general_wait 3
            battle_wait 35
        end_if
    end_if
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 3
        release_unit a1u1
        set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
	and not I_BattlePlayerArmyIsAttacker
    and I_IsUnitMoveFastSet a1u1
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0

    battle_wait 0.5
    unit_order_halt a2u1

    if I_CompareCounter enemy_unit_count < 7
		set_counter general_wait 2
		battle_wait 20
		if I_BattleIsSallyOutBattle
		and I_CompareCounter general_wait = 2
			set_counter general_wait 3
			battle_wait 20
		end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
		set_counter general_wait 2
		battle_wait 25
		if I_BattleIsSallyOutBattle
		and I_CompareCounter general_wait = 2
			set_counter general_wait 3
			battle_wait 25
		end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
		set_counter general_wait 2
		battle_wait 30
		if I_BattleIsSallyOutBattle
		and I_CompareCounter general_wait = 2
			set_counter general_wait 3
			battle_wait 30
		end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
		set_counter general_wait 2
		battle_wait 35
		if I_BattleIsSallyOutBattle
		and I_CompareCounter general_wait = 2
			set_counter general_wait 3
			battle_wait 35
		end_if
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 3
		release_unit a2u1
		set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSiegeBattle
    and not I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a1u1 60

    if I_CompareCounter general_wait > 0
        set_counter general_wait 0
        release_unit a1u1
    end_if

end_monitor


;################## Germanicu5 Special Ability script ###########################

monitor_event BattleEnemyUnitAttacksPlayerUnit BattleIsMeleeAttack

    set_counter g5_special 3
    set_counter g5_special_2 3
    set_counter g5_special_3 3

end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack

    set_counter g5_special 3
    set_counter g5_special_2 3
    set_counter g5_special_3 3

end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g5_special > 2
    log always ------------------------ special ability-------------------------------------

    if not I_BattlePlayerArmyIsAttacker
    and I_IsUnitEngaged a1u1

        inc_counter g5_special 1
        if I_CompareCounter g5_special = 6
            unit_use_special_ability a1u1
            log always ------------------------ use special ability-------------------------------------
            set_counter g5_special 0
        end_if
    end_if

    if I_BattlePlayerArmyIsAttacker
    and I_IsUnitEngaged a2u1

        inc_counter g5_special 1
        if I_CompareCounter g5_special = 6
            unit_use_special_ability a2u1
            log always ------------------------ use special ability-------------------------------------
            set_counter g5_special 0
        end_if
    end_if

    battle_wait 1

    if I_CompareCounter enemy_unit_count > 1
        if not I_BattlePlayerArmyIsAttacker
        and I_IsUnitEngaged a1u2

            inc_counter g5_special_2 1
            if I_CompareCounter g5_special_2 = 6
                unit_use_special_ability a1u2
                log always ------------------------ use special ability-------------------------------------
                set_counter g5_special_2 0
            end_if
        end_if

        if I_BattlePlayerArmyIsAttacker
        and I_IsUnitEngaged a2u2

            inc_counter g5_special_2 1
            if I_CompareCounter g5_special_2 = 6
                unit_use_special_ability a2u2
                log always ------------------------ use special ability-------------------------------------
                set_counter g5_special_2 0
            end_if
        end_if
        if I_CompareCounter enemy_unit_count > 2
            if not I_BattlePlayerArmyIsAttacker
            and I_IsUnitEngaged a1u3

                inc_counter g5_special_3 1
                if I_CompareCounter g5_special_3 = 6
                    unit_use_special_ability a1u3
                log always ------------------------ use special ability-------------------------------------
                    set_counter g5_special_3 0
                end_if
            end_if

            if I_BattlePlayerArmyIsAttacker
            and I_IsUnitEngaged a2u3

                inc_counter g5_special_3 1
                if I_CompareCounter g5_special_3 = 6
                    unit_use_special_ability a2u2
                    log always ------------------------ use special ability-------------------------------------
                    set_counter g5_special_3 0
                end_if
            end_if
        end_if
    end_if
    battle_wait 10
end_monitor

;;;;;;;Anti-CTD
monitor_event BattleDeploymentPhaseCommenced FactionIsLocal
    wait 0.5
    simulate_mouse_click lclick_down
    simulate_mouse_click lclick_up
end_monitor

monitor_event ScrollOpened ScrollOpened confirm_quit_scroll
and I_CompareCounter control_union = 1
and I_CompareCounter battle_start = 1

    historic_event crash_game

end_monitor

monitor_event ScrollOpened ScrollOpened post_battle_scroll

    ;;;;;;;
    set_counter labels_set 0
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter engage_enemy 0
    set_counter ai_reinforcements 0
    set_counter player_breached 0
    set_counter ai_breached 0
    set_counter gates_destroyed 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    set_counter script_delay 0
    set_counter control_union 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    ;;;;;;;Protect General
    set_counter general_wait 0
    ;;;;;;;Open Battles
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    set_counter ob_engaged 0
    ;;;;;;;Special Ability
    set_counter g5_special 0
    set_counter g5_special_2 0
    set_counter g5_special_3 0
    set_counter battle_start 0
    set_counter obj_set0 0
    set_counter obj_set1 0
	set_counter battle_looper 0
end_monitor


	set_event_counter campaign_wait_lua 0
	monitor_event EventCounter EventCounterType campaign_wait_lua
	and I_EventCounter campaign_wait_lua > 0

		campaign_wait 4
		set_event_counter campaign_wait_lua 0

	end_monitor


;;;;;;;;;;;;;;;;;;;;;;;;;; LUA_OUTPUT_DONT_DELETE_THIS_LINE ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


    set_event_counter nazgul_setoff_carndum 0
    monitor_event EventCounter EventCounterType nazgul_setoff_carndum
    and I_EventCounter nazgul_setoff_carndum > 0

        campaign_wait 0.5
        historic_event nazgul_setoff_carndum
        set_event_counter nazgul_setoff_carndum 1
        terminate_monitor

    end_monitor

    set_event_counter nazgul_returned_mordor 0
    monitor_event EventCounter EventCounterType nazgul_returned_mordor
    and I_EventCounter nazgul_returned_mordor > 0

        campaign_wait 0.5
        historic_event nazgul_returned_mordor
        set_event_counter nazgul_returned_mordor 1

    end_monitor

    set_event_counter nazgul_returned_dolguldur 0
    monitor_event EventCounter EventCounterType nazgul_returned_dolguldur
    and I_EventCounter nazgul_returned_dolguldur > 0

        campaign_wait 0.5
        historic_event nazgul_returned_dolguldur
        set_event_counter nazgul_returned_dolguldur 1

    end_monitor

    set_event_counter nazgul_returned_isengard 0
    monitor_event EventCounter EventCounterType nazgul_returned_isengard
    and I_EventCounter nazgul_returned_isengard > 0

        campaign_wait 0.5
        historic_event nazgul_returned_isengard
        set_event_counter nazgul_returned_isengard 1

    end_monitor

    set_event_counter nazgul_returned_carndum 0
    monitor_event EventCounter EventCounterType nazgul_returned_carndum
    and I_EventCounter nazgul_returned_carndum > 0

        campaign_wait 0.5
        historic_event nazgul_returned_carndum
        set_event_counter nazgul_returned_carndum 1

    end_monitor

    set_event_counter ring_destroyed_failed_evil 0
    monitor_event EventCounter EventCounterType ring_destroyed_failed_evil
    and I_EventCounter ring_destroyed_failed_evil > 0

        campaign_wait 0.5
        historic_event ring_destroyed_failed_evil factions { poland, england, france, aztecs, teutonic_order, venice, spain, khand, portugal, hre, }
        set_event_counter ring_destroyed_failed_evil 1

    end_monitor

    set_event_counter ring_destroyed_failed 0
    monitor_event EventCounter EventCounterType ring_destroyed_failed
    and I_EventCounter ring_destroyed_failed > 0

        campaign_wait 0.5
        historic_event ring_destroyed_failed factions { turks, saxons, mongols, ireland, }
        set_event_counter ring_destroyed_failed 1

    end_monitor

    set_event_counter ring_destroyed 0
    monitor_event EventCounter EventCounterType ring_destroyed
    and I_EventCounter ring_destroyed > 0

        campaign_wait 0.5
        historic_event ring_destroyed
        set_event_counter ring_destroyed 1
        terminate_monitor

    end_monitor

    set_event_counter ring_found_russia 0
    monitor_event EventCounter EventCounterType ring_found_russia
    and I_EventCounter ring_found_russia > 0

        campaign_wait 0.5
        historic_event ring_found_russia
        set_event_counter ring_found_russia 1

    end_monitor

    set_event_counter ring_found_turks 0
    monitor_event EventCounter EventCounterType ring_found_turks
    and I_EventCounter ring_found_turks > 0

        campaign_wait 0.5
        historic_event ring_found_turks
        set_event_counter ring_found_turks 1

    end_monitor

    set_event_counter ring_found_khand 0
    monitor_event EventCounter EventCounterType ring_found_khand
    and I_EventCounter ring_found_khand > 0

        campaign_wait 0.5
        historic_event ring_found_khand
        set_event_counter ring_found_khand 1

    end_monitor

    set_event_counter ring_found_spain 0
    monitor_event EventCounter EventCounterType ring_found_spain
    and I_EventCounter ring_found_spain > 0

        campaign_wait 0.5
        historic_event ring_found_spain
        set_event_counter ring_found_spain 1

    end_monitor

    set_event_counter ring_found_gundabad 0
    monitor_event EventCounter EventCounterType ring_found_gundabad
    and I_EventCounter ring_found_gundabad > 0

        campaign_wait 0.5
        historic_event ring_found_gundabad
        set_event_counter ring_found_gundabad 1

    end_monitor

    set_event_counter ring_found_venice 0
    monitor_event EventCounter EventCounterType ring_found_venice
    and I_EventCounter ring_found_venice > 0

        campaign_wait 0.5
        historic_event ring_found_venice
        set_event_counter ring_found_venice 1

    end_monitor

    set_event_counter ring_found_portugal 0
    monitor_event EventCounter EventCounterType ring_found_portugal
    and I_EventCounter ring_found_portugal > 0

        campaign_wait 0.5
        historic_event ring_found_portugal
        set_event_counter ring_found_portugal 1

    end_monitor

    set_event_counter ring_found_poland 0
    monitor_event EventCounter EventCounterType ring_found_poland
    and I_EventCounter ring_found_poland > 0

        campaign_wait 0.5
        historic_event ring_found_poland
        set_event_counter ring_found_poland 1

    end_monitor

    set_event_counter ring_found_england 0
    monitor_event EventCounter EventCounterType ring_found_england
    and I_EventCounter ring_found_england > 0

        campaign_wait 0.5
        historic_event ring_found_england
        set_event_counter ring_found_england 1

    end_monitor

    set_event_counter ring_found_aztecs 0
    monitor_event EventCounter EventCounterType ring_found_aztecs
    and I_EventCounter ring_found_aztecs > 0

        campaign_wait 0.5
        historic_event ring_found_aztecs
        set_event_counter ring_found_aztecs 1

    end_monitor

    set_event_counter ring_found_teutonic_order 0
    monitor_event EventCounter EventCounterType ring_found_teutonic_order
    and I_EventCounter ring_found_teutonic_order > 0

        campaign_wait 0.5
        historic_event ring_found_teutonic_order
        set_event_counter ring_found_teutonic_order 1

    end_monitor

    set_event_counter ring_found_mongols 0
    monitor_event EventCounter EventCounterType ring_found_mongols
    and I_EventCounter ring_found_mongols > 0

        campaign_wait 0.5
        historic_event ring_found_mongols
        set_event_counter ring_found_mongols 1

    end_monitor

    set_event_counter ring_found_ireland 0
    monitor_event EventCounter EventCounterType ring_found_ireland
    and I_EventCounter ring_found_ireland > 0

        campaign_wait 0.5
        historic_event ring_found_ireland
        set_event_counter ring_found_ireland 1

    end_monitor

    set_event_counter ring_found_saxons 0
    monitor_event EventCounter EventCounterType ring_found_saxons
    and I_EventCounter ring_found_saxons > 0

        campaign_wait 0.5
        historic_event ring_found_saxons
        set_event_counter ring_found_saxons 1

    end_monitor

    set_event_counter ring_found_norway 0
    monitor_event EventCounter EventCounterType ring_found_norway
    and I_EventCounter ring_found_norway > 0

        campaign_wait 0.5
        historic_event ring_found_norway
        set_event_counter ring_found_norway 1

    end_monitor

    set_event_counter ring_found_hungary 0
    monitor_event EventCounter EventCounterType ring_found_hungary
    and I_EventCounter ring_found_hungary > 0

        campaign_wait 0.5
        historic_event ring_found_hungary
        set_event_counter ring_found_hungary 1

    end_monitor

    set_event_counter ring_found_moors 0
    monitor_event EventCounter EventCounterType ring_found_moors
    and I_EventCounter ring_found_moors > 0

        campaign_wait 0.5
        historic_event ring_found_moors
        set_event_counter ring_found_moors 1

    end_monitor

    set_event_counter ring_found_byzantium 0
    monitor_event EventCounter EventCounterType ring_found_byzantium
    and I_EventCounter ring_found_byzantium > 0

        campaign_wait 0.5
        historic_event ring_found_byzantium
        set_event_counter ring_found_byzantium 1

    end_monitor

    set_event_counter ring_found_timurids 0
    monitor_event EventCounter EventCounterType ring_found_timurids
    and I_EventCounter ring_found_timurids > 0

        campaign_wait 0.5
        historic_event ring_found_timurids
        set_event_counter ring_found_timurids 1

    end_monitor

    set_event_counter ring_found_scotland 0
    monitor_event EventCounter EventCounterType ring_found_scotland
    and I_EventCounter ring_found_scotland > 0

        campaign_wait 0.5
        historic_event ring_found_scotland
        set_event_counter ring_found_scotland 1

    end_monitor

    set_event_counter ring_found_normans 0
    monitor_event EventCounter EventCounterType ring_found_normans
    and I_EventCounter ring_found_normans > 0

        campaign_wait 0.5
        historic_event ring_found_normans
        set_event_counter ring_found_normans 1

    end_monitor

    set_event_counter ring_found_milan 0
    monitor_event EventCounter EventCounterType ring_found_milan
    and I_EventCounter ring_found_milan > 0

        campaign_wait 0.5
        historic_event ring_found_milan
        set_event_counter ring_found_milan 1

    end_monitor

    set_event_counter ring_found_denmark 0
    monitor_event EventCounter EventCounterType ring_found_denmark
    and I_EventCounter ring_found_denmark > 0

        campaign_wait 0.5
        historic_event ring_found_denmark
        set_event_counter ring_found_denmark 1

    end_monitor

    set_event_counter ring_found_sicily 0
    monitor_event EventCounter EventCounterType ring_found_sicily
    and I_EventCounter ring_found_sicily > 0

        campaign_wait 0.5
        historic_event ring_found_sicily
        set_event_counter ring_found_sicily 1

    end_monitor

    set_event_counter ring_found_hre 0
    monitor_event EventCounter EventCounterType ring_found_hre
    and I_EventCounter ring_found_hre > 0

        campaign_wait 0.5
        historic_event ring_found_hre
        set_event_counter ring_found_hre 1

    end_monitor

    set_event_counter ring_found_france 0
    monitor_event EventCounter EventCounterType ring_found_france
    and I_EventCounter ring_found_france > 0

        campaign_wait 0.5
        historic_event ring_found_france
        set_event_counter ring_found_france 1

    end_monitor

    set_event_counter saruman_ring_ai 0
    monitor_event EventCounter EventCounterType saruman_ring_ai
    and I_EventCounter saruman_ring_ai > 0

        campaign_wait 0.5
        historic_event saruman_ring_ai
        set_event_counter saruman_ring_ai 1

    end_monitor

    set_event_counter mordor_ring_ai 0
    monitor_event EventCounter EventCounterType mordor_ring_ai
    and I_EventCounter mordor_ring_ai > 0

        campaign_wait 0.5
        historic_event mordor_ring_ai
        set_event_counter mordor_ring_ai 1

    end_monitor

    set_event_counter destroy_ring_ai 0
    monitor_event EventCounter EventCounterType destroy_ring_ai
    and I_EventCounter destroy_ring_ai > 0

        campaign_wait 0.5
        historic_event destroy_ring_ai factions { turks, saxons, ireland, mongols, }
        set_event_counter destroy_ring_ai 1

    end_monitor

    set_event_counter one_ring_acquired_mordor 0
    monitor_event EventCounter EventCounterType one_ring_acquired_mordor
    and I_EventCounter one_ring_acquired_mordor > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_mordor factions { england, }
        set_event_counter one_ring_acquired_mordor 1

    end_monitor

    set_event_counter one_ring_acquired_evil 0
    monitor_event EventCounter EventCounterType one_ring_acquired_evil
    and I_EventCounter one_ring_acquired_evil > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_evil
        set_event_counter one_ring_acquired_evil 1

    end_monitor

    set_event_counter one_ring_acquired_good 0
    monitor_event EventCounter EventCounterType one_ring_acquired_good
    and I_EventCounter one_ring_acquired_good > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_good
        set_event_counter one_ring_acquired_good 1

    end_monitor

    set_event_counter one_ring_acquired_saruman 0
    monitor_event EventCounter EventCounterType one_ring_acquired_saruman
    and I_EventCounter one_ring_acquired_saruman > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_saruman factions { france, }
        set_event_counter one_ring_acquired_saruman 1

    end_monitor

    set_event_counter one_ring_acquired_isengard 0
    monitor_event EventCounter EventCounterType one_ring_acquired_isengard
    and I_EventCounter one_ring_acquired_isengard > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_isengard
        set_event_counter one_ring_acquired_isengard 1

    end_monitor

    set_event_counter one_ring_acquired_evil_keeper 0
    monitor_event EventCounter EventCounterType one_ring_acquired_evil_keeper
    and I_EventCounter one_ring_acquired_evil_keeper > 0

        campaign_wait 0.5
        historic_event one_ring_acquired_evil_keeper
        set_event_counter one_ring_acquired_evil_keeper 1

    end_monitor

    set_event_counter ring_deliver_good 0
    monitor_event EventCounter EventCounterType ring_deliver_good
    and I_EventCounter ring_deliver_good > 0

        campaign_wait 0.5
        historic_event ring_deliver_good
        set_event_counter ring_deliver_good 1

    end_monitor

    set_event_counter deliver_ring_mordor 0
    monitor_event EventCounter EventCounterType deliver_ring_mordor
    and I_EventCounter deliver_ring_mordor > 0

        campaign_wait 0.5
        historic_event deliver_ring_mordor
        set_event_counter deliver_ring_mordor 1

    end_monitor

    set_event_counter deliver_evil_player 0
    monitor_event EventCounter EventCounterType deliver_evil_player
    and I_EventCounter deliver_evil_player > 0

        campaign_wait 0.5
        historic_event deliver_evil_player
        set_event_counter deliver_evil_player 1

    end_monitor

    set_event_counter ring_deliver_isengard 0
    monitor_event EventCounter EventCounterType ring_deliver_isengard
    and I_EventCounter ring_deliver_isengard > 0

        campaign_wait 0.5
        historic_event ring_deliver_isengard
        set_event_counter ring_deliver_isengard 1

    end_monitor

    set_event_counter ring_deliver_saruman 0
    monitor_event EventCounter EventCounterType ring_deliver_saruman
    and I_EventCounter ring_deliver_saruman > 0

        campaign_wait 0.5
        historic_event ring_deliver_saruman
        set_event_counter ring_deliver_saruman 1

    end_monitor

    set_event_counter saruman_ring_event 0
    monitor_event EventCounter EventCounterType saruman_ring_event
    and I_EventCounter saruman_ring_event > 0

        campaign_wait 0.5
        historic_event saruman_ring_event
        set_event_counter saruman_ring_event 1
        terminate_monitor

    end_monitor

    set_event_counter nazgul_leave_sauron 0
    monitor_event EventCounter EventCounterType nazgul_leave_sauron
    and I_EventCounter nazgul_leave_sauron > 0

        campaign_wait 0.5
        historic_event nazgul_leave_sauron
        set_event_counter nazgul_leave_sauron 1
        terminate_monitor

    end_monitor

    set_event_counter player_keeps_ring_evil 0
    monitor_event EventCounter EventCounterType player_keeps_ring_evil
    and I_EventCounter player_keeps_ring_evil > 0

        campaign_wait 0.5
        historic_event player_keeps_ring_evil
        set_event_counter player_keeps_ring_evil 1

    end_monitor

    set_event_counter player_keeps_ring_good 0
    monitor_event EventCounter EventCounterType player_keeps_ring_good
    and I_EventCounter player_keeps_ring_good > 0

        campaign_wait 0.5
        historic_event player_keeps_ring_good
        set_event_counter player_keeps_ring_good 1

    end_monitor

    set_event_counter player_keeps_ring_isengard 0
    monitor_event EventCounter EventCounterType player_keeps_ring_isengard
    and I_EventCounter player_keeps_ring_isengard > 0

        campaign_wait 0.5
        historic_event player_keeps_ring_isengard
        set_event_counter player_keeps_ring_isengard 1

    end_monitor

    set_event_counter reset_display 0
    monitor_event EventCounter EventCounterType reset_display
    and I_EventCounter reset_display > 0

        campaign_wait 0.5
        historic_event reset_display true
        set_event_counter reset_display 1

    end_monitor

    wait_monitors
end_script